var Fo=Object.defineProperty;var us=e=>{throw TypeError(e)};var Bo=(e,t,n)=>t in e?Fo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var je=(e,t,n)=>Bo(e,typeof t!="symbol"?t+"":t,n),Xn=(e,t,n)=>t.has(e)||us("Cannot "+n);var w=(e,t,n)=>(Xn(e,t,"read from private field"),n?n.call(e):t.get(e)),F=(e,t,n)=>t.has(e)?us("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),L=(e,t,n,r)=>(Xn(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),X=(e,t,n)=>(Xn(e,t,"access private method"),n);var on=(e,t,n,r)=>({set _(s){L(e,t,s,n)},get _(){return w(e,t,r)}});import{r as T,a as Ko,g as Ho,R as Ei,b as Go,c as Zn,N as hs,u as $o,H as Vo}from"./vendor-B0Cn478z.js";import{s as ln,d as Yo}from"./charts-CeMqgyHT.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var wi={exports:{}},Hn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qo=T,zo=Symbol.for("react.element"),Wo=Symbol.for("react.fragment"),Jo=Object.prototype.hasOwnProperty,Qo=qo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xo={key:!0,ref:!0,__self:!0,__source:!0};function Ni(e,t,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Jo.call(t,r)&&!Xo.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:zo,type:e,key:a,ref:o,props:s,_owner:Qo.current}}Hn.Fragment=Wo;Hn.jsx=Ni;Hn.jsxs=Ni;wi.exports=Hn;var i=wi.exports,dr={},fs=Ko;dr.createRoot=fs.createRoot,dr.hydrateRoot=fs.hydrateRoot;var Gn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Zo={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Me,Yr,fi,el=(fi=class{constructor(){F(this,Me,Zo);F(this,Yr,!1)}setTimeoutProvider(e){L(this,Me,e)}setTimeout(e,t){return w(this,Me).setTimeout(e,t)}clearTimeout(e){w(this,Me).clearTimeout(e)}setInterval(e,t){return w(this,Me).setInterval(e,t)}clearInterval(e){w(this,Me).clearInterval(e)}},Me=new WeakMap,Yr=new WeakMap,fi),ur=new el;function tl(e){setTimeout(e,0)}var $n=typeof window>"u"||"Deno"in globalThis;function he(){}function nl(e,t){return typeof e=="function"?e(t):e}function rl(e){return typeof e=="number"&&e>=0&&e!==1/0}function sl(e,t){return Math.max(e+(t||0)-Date.now(),0)}function hr(e,t){return typeof e=="function"?e(t):e}function al(e,t){return typeof e=="function"?e(t):e}function ms(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==qr(o,t.options))return!1}else if(!Vt(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function ps(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if($t(t.options.mutationKey)!==$t(a))return!1}else if(!Vt(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function qr(e,t){return((t==null?void 0:t.queryKeyHashFn)||$t)(e)}function $t(e){return JSON.stringify(e,(t,n)=>fr(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Vt(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Vt(e[n],t[n])):!1}var il=Object.prototype.hasOwnProperty;function ki(e,t){if(e===t)return e;const n=gs(e)&&gs(t);if(!n&&!(fr(e)&&fr(t)))return t;const s=(n?e:Object.keys(e)).length,a=n?t:Object.keys(t),o=a.length,l=n?new Array(o):{};let c=0;for(let d=0;d<o;d++){const u=n?d:a[d],f=e[u],h=t[u];if(f===h){l[u]=f,(n?d<s:il.call(e,u))&&c++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){l[u]=h;continue}const m=ki(f,h);l[u]=m,m===f&&c++}return s===o&&c===s?e:l}function gs(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function fr(e){if(!bs(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!bs(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function bs(e){return Object.prototype.toString.call(e)==="[object Object]"}function ol(e){return new Promise(t=>{ur.setTimeout(t,e)})}function ll(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?ki(e,t):t}function cl(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function dl(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var zr=Symbol();function Ii(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===zr?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function ul(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var We,Le,xt,mi,hl=(mi=class extends Gn{constructor(){super();F(this,We);F(this,Le);F(this,xt);L(this,xt,t=>{if(!$n&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){w(this,Le)||this.setEventListener(w(this,xt))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Le))==null||t.call(this),L(this,Le,void 0))}setEventListener(t){var n;L(this,xt,t),(n=w(this,Le))==null||n.call(this),L(this,Le,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){w(this,We)!==t&&(L(this,We,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof w(this,We)=="boolean"?w(this,We):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},We=new WeakMap,Le=new WeakMap,xt=new WeakMap,mi),Si=new hl;function fl(){let e,t;const n=new Promise((s,a)=>{e=s,t=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var ml=tl;function pl(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=ml;const a=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var re=pl(),yt,Ue,vt,pi,gl=(pi=class extends Gn{constructor(){super();F(this,yt,!0);F(this,Ue);F(this,vt);L(this,vt,t=>{if(!$n&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){w(this,Ue)||this.setEventListener(w(this,vt))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Ue))==null||t.call(this),L(this,Ue,void 0))}setEventListener(t){var n;L(this,vt,t),(n=w(this,Ue))==null||n.call(this),L(this,Ue,t(this.setOnline.bind(this)))}setOnline(t){w(this,yt)!==t&&(L(this,yt,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return w(this,yt)}},yt=new WeakMap,Ue=new WeakMap,vt=new WeakMap,pi),An=new gl;function bl(e){return Math.min(1e3*2**e,3e4)}function Ti(e){return(e??"online")==="online"?An.isOnline():!0}var mr=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Ai(e){let t=!1,n=0,r;const s=fl(),a=()=>s.status!=="pending",o=g=>{var b;if(!a()){const p=new mr(g);h(p),(b=e.onCancel)==null||b.call(e,p)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>Si.isFocused()&&(e.networkMode==="always"||An.isOnline())&&e.canRun(),u=()=>Ti(e.networkMode)&&e.canRun(),f=g=>{a()||(r==null||r(),s.resolve(g))},h=g=>{a()||(r==null||r(),s.reject(g))},m=()=>new Promise(g=>{var b;r=p=>{(a()||d())&&g(p)},(b=e.onPause)==null||b.call(e)}).then(()=>{var g;r=void 0,a()||(g=e.onContinue)==null||g.call(e)}),y=()=>{if(a())return;let g;const b=n===0?e.initialPromise:void 0;try{g=b??e.fn()}catch(p){g=Promise.reject(p)}Promise.resolve(g).then(f).catch(p=>{var I;if(a())return;const x=e.retry??($n?0:3),v=e.retryDelay??bl,_=typeof v=="function"?v(n,p):v,k=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,p);if(t||!k){h(p);return}n++,(I=e.onFail)==null||I.call(e,n,p),ol(_).then(()=>d()?void 0:m()).then(()=>{t?h(p):y()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?y():m().then(y),s)}}var Je,gi,ji=(gi=class{constructor(){F(this,Je)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),rl(this.gcTime)&&L(this,Je,ur.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($n?1/0:5*60*1e3))}clearGcTimeout(){w(this,Je)&&(ur.clearTimeout(w(this,Je)),L(this,Je,void 0))}},Je=new WeakMap,gi),Qe,_t,de,Xe,J,en,Ze,fe,Ee,bi,xl=(bi=class extends ji{constructor(t){super();F(this,fe);F(this,Qe);F(this,_t);F(this,de);F(this,Xe);F(this,J);F(this,en);F(this,Ze);L(this,Ze,!1),L(this,en,t.defaultOptions),this.setOptions(t.options),this.observers=[],L(this,Xe,t.client),L(this,de,w(this,Xe).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,L(this,Qe,ys(this.options)),this.state=t.state??w(this,Qe),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=w(this,J))==null?void 0:t.promise}setOptions(t){if(this.options={...w(this,en),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=ys(this.options);n.data!==void 0&&(this.setState(xs(n.data,n.dataUpdatedAt)),L(this,Qe,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&w(this,de).remove(this)}setData(t,n){const r=ll(this.state.data,t,this.options);return X(this,fe,Ee).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){X(this,fe,Ee).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=w(this,J))==null?void 0:r.promise;return(s=w(this,J))==null||s.cancel(t),n?n.then(he).catch(he):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(w(this,Qe))}isActive(){return this.observers.some(t=>al(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===zr||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>hr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!sl(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,J))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,J))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),w(this,de).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(w(this,J)&&(w(this,Ze)?w(this,J).cancel({revert:!0}):w(this,J).cancelRetry()),this.scheduleGc()),w(this,de).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||X(this,fe,Ee).call(this,{type:"invalidate"})}async fetch(t,n){var c,d,u,f,h,m,y,g,b,p,x,v;if(this.state.fetchStatus!=="idle"&&((c=w(this,J))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(w(this,J))return w(this,J).continueRetry(),w(this,J).promise}if(t&&this.setOptions(t),!this.options.queryFn){const _=this.observers.find(k=>k.options.queryFn);_&&this.setOptions(_.options)}const r=new AbortController,s=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(L(this,Ze,!0),r.signal)})},a=()=>{const _=Ii(this.options,n),I=(()=>{const N={client:w(this,Xe),queryKey:this.queryKey,meta:this.meta};return s(N),N})();return L(this,Ze,!1),this.options.persister?this.options.persister(_,I,this):_(I)},l=(()=>{const _={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:w(this,Xe),state:this.state,fetchFn:a};return s(_),_})();(d=this.options.behavior)==null||d.onFetch(l,this),L(this,_t,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&X(this,fe,Ee).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),L(this,J,Ai({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:_=>{_ instanceof mr&&_.revert&&this.setState({...w(this,_t),fetchStatus:"idle"}),r.abort()},onFail:(_,k)=>{X(this,fe,Ee).call(this,{type:"failed",failureCount:_,error:k})},onPause:()=>{X(this,fe,Ee).call(this,{type:"pause"})},onContinue:()=>{X(this,fe,Ee).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const _=await w(this,J).start();if(_===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(_),(m=(h=w(this,de).config).onSuccess)==null||m.call(h,_,this),(g=(y=w(this,de).config).onSettled)==null||g.call(y,_,this.state.error,this),_}catch(_){if(_ instanceof mr){if(_.silent)return w(this,J).promise;if(_.revert){if(this.state.data===void 0)throw _;return this.state.data}}throw X(this,fe,Ee).call(this,{type:"error",error:_}),(p=(b=w(this,de).config).onError)==null||p.call(b,_,this),(v=(x=w(this,de).config).onSettled)==null||v.call(x,this.state.data,_,this),_}finally{this.scheduleGc()}}},Qe=new WeakMap,_t=new WeakMap,de=new WeakMap,Xe=new WeakMap,J=new WeakMap,en=new WeakMap,Ze=new WeakMap,fe=new WeakSet,Ee=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...yl(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...xs(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return L(this,_t,t.manual?s:void 0),s;case"error":const a=t.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),re.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),w(this,de).notify({query:this,type:"updated",action:t})})},bi);function yl(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ti(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function xs(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ys(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function vs(e){return{onFetch:(t,n)=>{var u,f,h,m,y;const r=t.options,s=(h=(f=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const b=v=>{ul(v,()=>t.signal,()=>g=!0)},p=Ii(t.options,t.fetchOptions),x=async(v,_,k)=>{if(g)return Promise.reject();if(_==null&&v.pages.length)return Promise.resolve(v);const N=(()=>{const R={client:t.client,queryKey:t.queryKey,pageParam:_,direction:k?"backward":"forward",meta:t.options.meta};return b(R),R})(),C=await p(N),{maxPages:S}=t.options,M=k?dl:cl;return{pages:M(v.pages,C,S),pageParams:M(v.pageParams,_,S)}};if(s&&a.length){const v=s==="backward",_=v?vl:_s,k={pages:a,pageParams:o},I=_(r,k);l=await x(k,I,v)}else{const v=e??a.length;do{const _=c===0?o[0]??r.initialPageParam:_s(r,l);if(c>0&&_==null)break;l=await x(l,_),c++}while(c<v)}return l};t.options.persister?t.fetchFn=()=>{var g,b;return(b=(g=t.options).persister)==null?void 0:b.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function _s(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function vl(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var tn,be,te,et,xe,Oe,xi,_l=(xi=class extends ji{constructor(t){super();F(this,xe);F(this,tn);F(this,be);F(this,te);F(this,et);L(this,tn,t.client),this.mutationId=t.mutationId,L(this,te,t.mutationCache),L(this,be,[]),this.state=t.state||El(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){w(this,be).includes(t)||(w(this,be).push(t),this.clearGcTimeout(),w(this,te).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){L(this,be,w(this,be).filter(n=>n!==t)),this.scheduleGc(),w(this,te).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){w(this,be).length||(this.state.status==="pending"?this.scheduleGc():w(this,te).remove(this))}continue(){var t;return((t=w(this,et))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,u,f,h,m,y,g,b,p,x,v,_,k,I,N,C,S;const n=()=>{X(this,xe,Oe).call(this,{type:"continue"})},r={client:w(this,tn),meta:this.options.meta,mutationKey:this.options.mutationKey};L(this,et,Ai({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(M,R)=>{X(this,xe,Oe).call(this,{type:"failed",failureCount:M,error:R})},onPause:()=>{X(this,xe,Oe).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>w(this,te).canRun(this)}));const s=this.state.status==="pending",a=!w(this,et).canStart();try{if(s)n();else{X(this,xe,Oe).call(this,{type:"pending",variables:t,isPaused:a}),await((l=(o=w(this,te).config).onMutate)==null?void 0:l.call(o,t,this,r));const R=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,r));R!==this.state.context&&X(this,xe,Oe).call(this,{type:"pending",context:R,variables:t,isPaused:a})}const M=await w(this,et).start();return await((f=(u=w(this,te).config).onSuccess)==null?void 0:f.call(u,M,t,this.state.context,this,r)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,M,t,this.state.context,r)),await((g=(y=w(this,te).config).onSettled)==null?void 0:g.call(y,M,null,this.state.variables,this.state.context,this,r)),await((p=(b=this.options).onSettled)==null?void 0:p.call(b,M,null,t,this.state.context,r)),X(this,xe,Oe).call(this,{type:"success",data:M}),M}catch(M){try{await((v=(x=w(this,te).config).onError)==null?void 0:v.call(x,M,t,this.state.context,this,r))}catch(R){Promise.reject(R)}try{await((k=(_=this.options).onError)==null?void 0:k.call(_,M,t,this.state.context,r))}catch(R){Promise.reject(R)}try{await((N=(I=w(this,te).config).onSettled)==null?void 0:N.call(I,void 0,M,this.state.variables,this.state.context,this,r))}catch(R){Promise.reject(R)}try{await((S=(C=this.options).onSettled)==null?void 0:S.call(C,void 0,M,t,this.state.context,r))}catch(R){Promise.reject(R)}throw X(this,xe,Oe).call(this,{type:"error",error:M}),M}finally{w(this,te).runNext(this)}}},tn=new WeakMap,be=new WeakMap,te=new WeakMap,et=new WeakMap,xe=new WeakSet,Oe=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),re.batch(()=>{w(this,be).forEach(r=>{r.onMutationUpdate(t)}),w(this,te).notify({mutation:this,type:"updated",action:t})})},xi);function El(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ne,me,nn,yi,wl=(yi=class extends Gn{constructor(t={}){super();F(this,Ne);F(this,me);F(this,nn);this.config=t,L(this,Ne,new Set),L(this,me,new Map),L(this,nn,0)}build(t,n,r){const s=new _l({client:t,mutationCache:this,mutationId:++on(this,nn)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){w(this,Ne).add(t);const n=cn(t);if(typeof n=="string"){const r=w(this,me).get(n);r?r.push(t):w(this,me).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(w(this,Ne).delete(t)){const n=cn(t);if(typeof n=="string"){const r=w(this,me).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&w(this,me).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=cn(t);if(typeof n=="string"){const r=w(this,me).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=cn(t);if(typeof n=="string"){const s=(r=w(this,me).get(n))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){re.batch(()=>{w(this,Ne).forEach(t=>{this.notify({type:"removed",mutation:t})}),w(this,Ne).clear(),w(this,me).clear()})}getAll(){return Array.from(w(this,Ne))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>ps(n,r))}findAll(t={}){return this.getAll().filter(n=>ps(t,n))}notify(t){re.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return re.batch(()=>Promise.all(t.map(n=>n.continue().catch(he))))}},Ne=new WeakMap,me=new WeakMap,nn=new WeakMap,yi);function cn(e){var t;return(t=e.options.scope)==null?void 0:t.id}var ye,vi,Nl=(vi=class extends Gn{constructor(t={}){super();F(this,ye);this.config=t,L(this,ye,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??qr(s,n);let o=this.get(a);return o||(o=new xl({client:t,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){w(this,ye).has(t.queryHash)||(w(this,ye).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=w(this,ye).get(t.queryHash);n&&(t.destroy(),n===t&&w(this,ye).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){re.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return w(this,ye).get(t)}getAll(){return[...w(this,ye).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>ms(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>ms(t,r)):n}notify(t){re.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){re.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){re.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ye=new WeakMap,vi),V,Fe,Be,Et,wt,Ke,Nt,kt,_i,kl=(_i=class{constructor(e={}){F(this,V);F(this,Fe);F(this,Be);F(this,Et);F(this,wt);F(this,Ke);F(this,Nt);F(this,kt);L(this,V,e.queryCache||new Nl),L(this,Fe,e.mutationCache||new wl),L(this,Be,e.defaultOptions||{}),L(this,Et,new Map),L(this,wt,new Map),L(this,Ke,0)}mount(){on(this,Ke)._++,w(this,Ke)===1&&(L(this,Nt,Si.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,V).onFocus())})),L(this,kt,An.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,V).onOnline())})))}unmount(){var e,t;on(this,Ke)._--,w(this,Ke)===0&&((e=w(this,Nt))==null||e.call(this),L(this,Nt,void 0),(t=w(this,kt))==null||t.call(this),L(this,kt,void 0))}isFetching(e){return w(this,V).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return w(this,Fe).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,V).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=w(this,V).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(hr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return w(this,V).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=w(this,V).get(r.queryHash),a=s==null?void 0:s.state.data,o=nl(t,a);if(o!==void 0)return w(this,V).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return re.batch(()=>w(this,V).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,V).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=w(this,V);re.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=w(this,V);return re.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=re.batch(()=>w(this,V).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(he).catch(he)}invalidateQueries(e,t={}){return re.batch(()=>(w(this,V).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=re.batch(()=>w(this,V).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(he)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(he)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=w(this,V).build(this,t);return n.isStaleByTime(hr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(he).catch(he)}fetchInfiniteQuery(e){return e.behavior=vs(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(he).catch(he)}ensureInfiniteQueryData(e){return e.behavior=vs(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return An.isOnline()?w(this,Fe).resumePausedMutations():Promise.resolve()}getQueryCache(){return w(this,V)}getMutationCache(){return w(this,Fe)}getDefaultOptions(){return w(this,Be)}setDefaultOptions(e){L(this,Be,e)}setQueryDefaults(e,t){w(this,Et).set($t(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...w(this,Et).values()],n={};return t.forEach(r=>{Vt(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){w(this,wt).set($t(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...w(this,wt).values()],n={};return t.forEach(r=>{Vt(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...w(this,Be).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=qr(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===zr&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...w(this,Be).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){w(this,V).clear(),w(this,Fe).clear()}},V=new WeakMap,Fe=new WeakMap,Be=new WeakMap,Et=new WeakMap,wt=new WeakMap,Ke=new WeakMap,Nt=new WeakMap,kt=new WeakMap,_i),Il=T.createContext(void 0),Sl=({client:e,children:t})=>(T.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(Il.Provider,{value:e,children:t}));console.warn("Supabase credentials not found. Running in offline/demo mode. Set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in .env.local to enable cloud features.");const Tl=()=>!1,Oi=T.createContext(void 0);function Al({children:e}){const[t,n]=T.useState({user:null,session:null,isLoading:!0,isConfigured:Tl()});T.useEffect(()=>{{n(u=>({...u,isLoading:!1}));return}},[]);const r=T.useCallback(async(u,f)=>({error:{message:"Supabase not configured"}}),[]),s=T.useCallback(async(u,f,h)=>({error:{message:"Supabase not configured"}}),[]),a=T.useCallback(async()=>({error:{message:"Supabase not configured"}}),[]),o=T.useCallback(async()=>({error:{message:"Supabase not configured"}}),[]),l=T.useCallback(async()=>{},[]),c=T.useCallback(async u=>({error:{message:"Supabase not configured"}}),[]),d={...t,signInWithEmail:r,signUpWithEmail:s,signInWithGoogle:a,signInWithMicrosoft:o,signOut:l,resetPassword:c};return i.jsx(Oi.Provider,{value:d,children:e})}function Wr(){const e=T.useContext(Oi);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ol=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Es=e=>{const t=Ol(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ci=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Cl=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dl={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},c)=>T.createElement("svg",{ref:c,...Dl,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Ci("lucide",s),...!a&&!Cl(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>T.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=(e,t)=>{const n=T.forwardRef(({className:r,...s},a)=>T.createElement(Rl,{ref:a,iconNode:t,className:Ci(`lucide-${jl(Es(e))}`,`lucide-${e}`,r),...s}));return n.displayName=Es(e),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],pr=U("arrow-right",Pl);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ws=U("book-open",Ml);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Ns=U("bot",Ll);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Fl=U("calendar",Ul);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Kl=U("check",Bl);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Gl=U("chevron-down",Hl);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Vl=U("chevron-right",$l);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ql=U("circle-check",Yl);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],ks=U("clipboard-check",zl);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jl=U("clock",Wl);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Xl=U("cloud-upload",Ql);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ec=U("download",Zl);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],nc=U("folder-open",tc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],Is=U("gamepad-2",rc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Ss=U("graduation-cap",sc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ic=U("layers",ac);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ts=U("layout-dashboard",oc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],cc=U("list",lc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],jn=U("loader-circle",dc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],hc=U("lock",uc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],As=U("log-out",fc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],pc=U("mail",mc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],bc=U("menu",gc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],yc=U("mic",xc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=[["path",{d:"M5 12h14",key:"1ays0h"}]],js=U("minus",vc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Os=U("moon",_c);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],wc=U("panels-top-left",Ec);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],kc=U("pen",Nc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Lt=U("plus",Ic);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Tc=U("rotate-ccw",Sc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jc=U("save",Ac);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Cc=U("send",Oc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Cs=U("settings",Dc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ds=U("sparkles",Rc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Rs=U("square-check-big",Pc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Lc=U("square-pen",Mc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ps=U("sun",Uc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],It=U("trash-2",Fc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Kc=U("trophy",Bc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Gc=U("undo",Hc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Vc=U("user-plus",$c);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Di=U("user",Yc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zc=U("users",qc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ri=U("x",Wc),Jc={},Ms=e=>{let t;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(y=>y(t,m))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>d,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Jc?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,s,c);return c},Qc=e=>e?Ms(e):Ms;var Pi={exports:{}},Mi={},Li={exports:{}},Ui={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var St=T;function Xc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zc=typeof Object.is=="function"?Object.is:Xc,ed=St.useState,td=St.useEffect,nd=St.useLayoutEffect,rd=St.useDebugValue;function sd(e,t){var n=t(),r=ed({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return nd(function(){s.value=n,s.getSnapshot=t,er(s)&&a({inst:s})},[e,n,t]),td(function(){return er(s)&&a({inst:s}),e(function(){er(s)&&a({inst:s})})},[e]),rd(n),n}function er(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zc(e,n)}catch{return!0}}function ad(e,t){return t()}var id=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ad:sd;Ui.useSyncExternalStore=St.useSyncExternalStore!==void 0?St.useSyncExternalStore:id;Li.exports=Ui;var od=Li.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vn=T,ld=od;function cd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dd=typeof Object.is=="function"?Object.is:cd,ud=ld.useSyncExternalStore,hd=Vn.useRef,fd=Vn.useEffect,md=Vn.useMemo,pd=Vn.useDebugValue;Mi.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var a=hd(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=md(function(){function c(m){if(!d){if(d=!0,u=m,m=r(m),s!==void 0&&o.hasValue){var y=o.value;if(s(y,m))return f=y}return f=m}if(y=f,dd(u,m))return y;var g=r(m);return s!==void 0&&s(y,g)?(u=m,y):(u=m,f=g)}var d=!1,u,f,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,r,s]);var l=ud(e,a[0],a[1]);return fd(function(){o.hasValue=!0,o.value=l},[l]),pd(l),l};Pi.exports=Mi;var gd=Pi.exports;const bd=Ho(gd),Fi={},{useDebugValue:xd}=Ei,{useSyncExternalStoreWithSelector:yd}=bd;let Ls=!1;const vd=e=>e;function _d(e,t=vd,n){(Fi?"production":void 0)!=="production"&&n&&!Ls&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ls=!0);const r=yd(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return xd(r),r}const Ed=e=>{(Fi?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Qc(e):e,n=(r,s)=>_d(t,r,s);return Object.assign(n,t),n},wd=e=>Ed,Nd={};function kd(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var a;const o=c=>c===null?null:JSON.parse(c,void 0),l=(a=n.getItem(s))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,a)=>n.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>n.removeItem(s)}}const Yt=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Yt(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Yt(r)(n)}}}},Id=(e,t)=>(n,r,s)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,p)=>({...p,...b}),...t},o=!1;const l=new Set,c=new Set;let d;try{d=a.getStorage()}catch{}if(!d)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...b)},r,s);const u=Yt(a.serialize),f=()=>{const b=a.partialize({...r()});let p;const x=u({state:b,version:a.version}).then(v=>d.setItem(a.name,v)).catch(v=>{p=v});if(p)throw p;return x},h=s.setState;s.setState=(b,p)=>{h(b,p),f()};const m=e((...b)=>{n(...b),f()},r,s);let y;const g=()=>{var b;if(!d)return;o=!1,l.forEach(x=>x(r()));const p=((b=a.onRehydrateStorage)==null?void 0:b.call(a,r()))||void 0;return Yt(d.getItem.bind(d))(a.name).then(x=>{if(x)return a.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return a.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var v;return y=a.merge(x,(v=r())!=null?v:m),n(y,!0),f()}).then(()=>{p==null||p(y,void 0),o=!0,c.forEach(x=>x(y))}).catch(x=>{p==null||p(void 0,x)})};return s.persist={setOptions:b=>{a={...a,...b},b.getStorage&&(d=b.getStorage())},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},g(),y||m},Sd=(e,t)=>(n,r,s)=>{let a={storage:kd(()=>localStorage),partialize:g=>g,version:0,merge:(g,b)=>({...b,...g}),...t},o=!1;const l=new Set,c=new Set;let d=a.storage;if(!d)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=a.partialize({...r()});return d.setItem(a.name,{state:g,version:a.version})},f=s.setState;s.setState=(g,b)=>{f(g,b),u()};const h=e((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let m;const y=()=>{var g,b;if(!d)return;o=!1,l.forEach(x=>{var v;return x((v=r())!=null?v:h)});const p=((b=a.onRehydrateStorage)==null?void 0:b.call(a,(g=r())!=null?g:h))||void 0;return Yt(d.getItem.bind(d))(a.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return[!0,a.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var v;const[_,k]=x;if(m=a.merge(k,(v=r())!=null?v:h),n(m,!0),_)return u()}).then(()=>{p==null||p(m,void 0),m=r(),o=!0,c.forEach(x=>x(m))}).catch(x=>{p==null||p(void 0,x)})};return s.persist={setOptions:g=>{a={...a,...g},g.storage&&(d=g.storage)},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:g=>(l.add(g),()=>{l.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},a.skipHydration||y(),m||h},Td=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Nd?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Id(e,t)):Sd(e,t),Ad=Td,H=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,q=Object.keys,ee=Array.isArray;function ae(e,t){return typeof t!="object"||q(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||H.Promise||(H.Promise=Promise);const qt=Object.getPrototypeOf,jd={}.hasOwnProperty;function ce(e,t){return jd.call(e,t)}function Tt(e,t){typeof t=="function"&&(t=t(qt(e))),(typeof Reflect>"u"?q:Reflect.ownKeys)(t).forEach(n=>{Se(e,n,t[n])})}const Bi=Object.defineProperty;function Se(e,t,n,r){Bi(e,t,ae(n&&ce(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function mt(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Se(e.prototype,"constructor",e),{extend:Tt.bind(null,e.prototype)}}}}const Od=Object.getOwnPropertyDescriptor;function Jr(e,t){let n;return Od(e,t)||(n=qt(e))&&Jr(n,t)}const Cd=[].slice;function On(e,t,n){return Cd.call(e,t,n)}function Ki(e,t){return t(e)}function Rt(e){if(!e)throw new Error("Assertion Failed")}function Hi(e){H.setImmediate?setImmediate(e):setTimeout(e,0)}function Gi(e,t){return e.reduce((n,r,s)=>{var a=t(r,s);return a&&(n[a[0]]=a[1]),n},{})}function Te(e,t){if(typeof t=="string"&&ce(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,s=t.length;r<s;++r){var a=Te(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(o!==-1){var l=e[t.substr(0,o)];return l==null?void 0:Te(l,t.substr(o+1))}}function pe(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Rt(typeof n!="string"&&"length"in n);for(var r=0,s=t.length;r<s;++r)pe(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var o=t.substr(0,a),l=t.substr(a+1);if(l==="")n===void 0?ee(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var c=e[o];c&&ce(e,o)||(c=e[o]={}),pe(c,l,n)}}else n===void 0?ee(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function $i(e){var t={};for(var n in e)ce(e,n)&&(t[n]=e[n]);return t}const Dd=[].concat;function Vi(e){return Dd.apply([],e)}const Yi="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Vi([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>H[e]),Rd=Yi.map(e=>H[e]);Gi(Yi,e=>[e,!0]);let Re=null;function rn(e){Re=typeof WeakMap<"u"&&new WeakMap;const t=gr(e);return Re=null,t}function gr(e){if(!e||typeof e!="object")return e;let t=Re&&Re.get(e);if(t)return t;if(ee(e)){t=[],Re&&Re.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(gr(e[n]))}else if(Rd.indexOf(e.constructor)>=0)t=e;else{const a=qt(e);for(var s in t=a===Object.prototype?{}:Object.create(a),Re&&Re.set(e,t),e)ce(e,s)&&(t[s]=gr(e[s]))}return t}const{toString:Pd}={};function br(e){return Pd.call(e).slice(8,-1)}const xr=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Md=typeof xr=="symbol"?function(e){var t;return e!=null&&(t=e[xr])&&t.apply(e)}:function(){return null},dt={};function ke(e){var t,n,r,s;if(arguments.length===1){if(ee(e))return e.slice();if(this===dt&&typeof e=="string")return[e];if(s=Md(e)){for(n=[];!(r=s.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const Qr=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var ve=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function qi(e,t){ve=e,zi=t}var zi=()=>!0;const Ld=!new Error("").stack;function it(){if(Ld)try{throw it.arguments,new Error}catch(e){return e}return new Error}function yr(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(zi).map(r=>`
`+r).join("")):""}var Wi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Wi),Ud={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function pt(e,t){this._e=it(),this.name=e,this.message=t}function Ji(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,s)=>s.indexOf(n)===r).join(`
`)}function Cn(e,t,n,r){this._e=it(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Ji(e,t)}function Ut(e,t){this._e=it(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=Ji(e,t)}mt(pt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+yr(this._e,2))}},toString:function(){return this.name+": "+this.message}}),mt(Cn).from(pt),mt(Ut).from(pt);var Zr=Xr.reduce((e,t)=>(e[t]=t+"Error",e),{});const Fd=pt;var P=Xr.reduce((e,t)=>{var n=t+"Error";function r(s,a){this._e=it(),this.name=n,s?typeof s=="string"?(this.message=`${s}${a?`
 `+a:""}`,this.inner=a||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=Ud[t]||n,this.inner=null)}return mt(r).from(Fd),e[t]=r,e},{});P.Syntax=SyntaxError,P.Type=TypeError,P.Range=RangeError;var Us=Wi.reduce((e,t)=>(e[t+"Error"]=P[t],e),{}),En=Xr.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=P[t]),e),{});function K(){}function zt(e){return e}function Bd(e,t){return e==null||e===zt?t:function(n){return t(e(n))}}function st(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Kd(e,t){return e===K?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?st(r,this.onsuccess):r),s&&(this.onerror=this.onerror?st(s,this.onerror):s),a!==void 0?a:n}}function Hd(e,t){return e===K?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?st(n,this.onsuccess):n),r&&(this.onerror=this.onerror?st(r,this.onerror):r)}}function Gd(e,t){return e===K?t:function(n){var r=e.apply(this,arguments);ae(n,r);var s=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?st(s,this.onsuccess):s),a&&(this.onerror=this.onerror?st(a,this.onerror):a),r===void 0?o===void 0?void 0:o:ae(r,o)}}function $d(e,t){return e===K?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function es(e,t){return e===K?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,s=arguments.length,a=new Array(s);s--;)a[s]=arguments[s];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}En.ModifyError=Cn,En.DexieError=pt,En.BulkError=Ut;var Wt={};const Qi=100,[vr,Dn,_r]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,qt(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,qt(t),e]})(),Xi=Dn&&Dn.then,wn=vr&&vr.constructor,ts=!!_r;var Er=!1,Vd=_r?()=>{_r.then(dn)}:H.setImmediate?setImmediate.bind(null,dn):H.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{dn(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(dn,0)},Ft=function(e,t){Pt.push([e,t]),Rn&&(Vd(),Rn=!1)},wr=!0,Rn=!0,tt=[],Nn=[],Nr=null,kr=zt,gt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ks,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Ks(e[0],e[1])}catch{}})}},D=gt,Pt=[],nt=0,kn=[];function A(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=K,this._lib=!1;var t=this._PSD=D;if(ve&&(this._stackHolder=it(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Wt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Sr(this,this._value))}this._state=null,this._value=null,++t.ref,eo(this,e)}const Ir={get:function(){var e=D,t=Pn;function n(r,s){var a=!e.global&&(e!==D||t!==Pn);const o=a&&!Ae();var l=new A((c,d)=>{ns(this,new Zi(Mn(r,e,a,o),Mn(s,e,a,o),c,d,e))});return ve&&ro(l,this),l}return n.prototype=Wt,n},set:function(e){Se(this,"then",e&&e.prototype===Wt?Ir:{get:function(){return e},set:Ir.set})}};function Zi(e,t,n,r,s){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=s}function eo(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&sn();n&&typeof n.then=="function"?eo(e,(s,a)=>{n instanceof A?n._then(s,a):n.then(s,a)}):(e._state=!0,e._value=n,to(e)),r&&an()}},Sr.bind(null,e))}catch(n){Sr(e,n)}}function Sr(e,t){if(Nn.push(t),e._state===null){var n=e._lib&&sn();t=kr(t),e._state=!1,e._value=t,ve&&t!==null&&typeof t=="object"&&!t._promise&&function(r,s,a){try{r.apply(null,a)}catch{}}(()=>{var r=Jr(t,"stack");t._promise=e,Se(t,"stack",{get:()=>Er?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){tt.some(s=>s._value===r._value)||tt.push(r)}(e),to(e),n&&an()}}function to(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)ns(e,t[n]);var s=e._PSD;--s.ref||s.finalize(),nt===0&&(++nt,Ft(()=>{--nt==0&&rs()},[]))}function ns(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++nt,Ft(Yd,[n,e,t])}else e._listeners.push(t)}function Yd(e,t,n){try{Nr=t;var r,s=t._value;t._state?r=e(s):(Nn.length&&(Nn=[]),r=e(s),Nn.indexOf(s)===-1&&function(a){for(var o=tt.length;o;)if(tt[--o]._value===a._value)return void tt.splice(o,1)}(t)),n.resolve(r)}catch(a){n.reject(a)}finally{Nr=null,--nt==0&&rs(),--n.psd.ref||n.psd.finalize()}}function no(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var s,a,o=e._value;o!=null?(s=o.name||"Error",a=o.message||o,r=yr(o,0)):(s=o,a=""),t.push(s+(a?": "+a:"")+r)}return ve&&((r=yr(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&no(e._prev,t,n)),t}function ro(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function dn(){sn()&&an()}function sn(){var e=wr;return wr=!1,Rn=!1,e}function an(){var e,t,n;do for(;Pt.length>0;)for(e=Pt,Pt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Pt.length>0);wr=!0,Rn=!0}function rs(){var e=tt;tt=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=kn.slice(0),n=t.length;n;)t[--n]()}function un(e){return new A(Wt,!1,e)}function G(e,t){var n=D;return function(){var r=sn(),s=D;try{return Ge(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{Ge(s,!1),r&&an()}}}Tt(A.prototype,{then:Ir,_then:function(e,t){ns(this,new Zi(null,null,e,t,D))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):un(r)):this.then(null,r=>r&&r.name===t?n(r):un(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),un(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Er=!0;var e=no(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Er=!1}}},timeout:function(e,t){return e<1/0?new A((n,r)=>{var s=setTimeout(()=>r(new P.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Se(A.prototype,Symbol.toStringTag,"Dexie.Promise"),gt.env=so(),Tt(A,{all:function(){var e=ke.apply(null,arguments).map(hn);return new A(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((s,a)=>A.resolve(s).then(o=>{e[a]=o,--r||t(e)},n))})},resolve:e=>{if(e instanceof A)return e;if(e&&typeof e.then=="function")return new A((n,r)=>{e.then(n,r)});var t=new A(Wt,!0,e);return ro(t,Nr),t},reject:un,race:function(){var e=ke.apply(null,arguments).map(hn);return new A((t,n)=>{e.map(r=>A.resolve(r).then(t,n))})},PSD:{get:()=>D,set:e=>D=e},totalEchoes:{get:()=>Pn},newPSD:He,usePSD:jt,scheduler:{get:()=>Ft,set:e=>{Ft=e}},rejectionMapper:{get:()=>kr,set:e=>{kr=e}},follow:(e,t)=>new A((n,r)=>He((s,a)=>{var o=D;o.unhandleds=[],o.onunhandled=a,o.finalize=st(function(){(function(l){function c(){l(),kn.splice(kn.indexOf(c),1)}kn.push(c),++nt,Ft(()=>{--nt==0&&rs()},[])})(()=>{this.unhandleds.length===0?s():a(this.unhandleds[0])})},o.finalize),e()},t,n,r))}),wn&&(wn.allSettled&&Se(A,"allSettled",function(){const e=ke.apply(null,arguments).map(hn);return new A(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((s,a)=>A.resolve(s).then(o=>r[a]={status:"fulfilled",value:o},o=>r[a]={status:"rejected",reason:o}).then(()=>--n||t(r)))})}),wn.any&&typeof AggregateError<"u"&&Se(A,"any",function(){const e=ke.apply(null,arguments).map(hn);return new A((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const s=new Array(r);e.forEach((a,o)=>A.resolve(a).then(l=>t(l),l=>{s[o]=l,--r||n(new AggregateError(s))}))})}));const Z={awaits:0,echoes:0,id:0};var qd=0,In=[],tr=0,Pn=0,zd=0;function He(e,t,n,r){var s=D,a=Object.create(s);a.parent=s,a.ref=0,a.global=!1,a.id=++zd;var o=gt.env;a.env=ts?{Promise:A,PromiseProp:{value:A,configurable:!0,writable:!0},all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject,nthen:Fs(o.nthen,a),gthen:Fs(o.gthen,a)}:{},t&&ae(a,t),++s.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=jt(a,e,n,r);return a.ref===0&&a.finalize(),l}function At(){return Z.id||(Z.id=++qd),++Z.awaits,Z.echoes+=Qi,Z.id}function Ae(){return!!Z.awaits&&(--Z.awaits==0&&(Z.id=0),Z.echoes=Z.awaits*Qi,!0)}function hn(e){return Z.echoes&&e&&e.constructor===wn?(At(),e.then(t=>(Ae(),t),t=>(Ae(),W(t)))):e}function Wd(e){++Pn,Z.echoes&&--Z.echoes!=0||(Z.echoes=Z.id=0),In.push(D),Ge(e,!0)}function Jd(){var e=In[In.length-1];In.pop(),Ge(e,!1)}function Ge(e,t){var n=D;if((t?!Z.echoes||tr++&&e===D:!tr||--tr&&e===D)||ao(t?Wd.bind(null,e):Jd),e!==D&&(D=e,n===gt&&(gt.env=so()),ts)){var r=gt.env.Promise,s=e.env;Dn.then=s.nthen,r.prototype.then=s.gthen,(n.global||e.global)&&(Object.defineProperty(H,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function so(){var e=H.Promise;return ts?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(H,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Dn.then,gthen:e.prototype.then}:{}}function jt(e,t,n,r,s){var a=D;try{return Ge(e,!0),t(n,r,s)}finally{Ge(a,!1)}}function ao(e){Xi.call(vr,e)}function Mn(e,t,n,r){return typeof e!="function"?e:function(){var s=D;n&&At(),Ge(t,!0);try{return e.apply(this,arguments)}finally{Ge(s,!1),r&&ao(Ae)}}}function Fs(e,t){return function(n,r){return e.call(this,Mn(n,t),Mn(r,t))}}(""+Xi).indexOf("[native code]")===-1&&(At=Ae=K);const Bs="unhandledrejection";function Ks(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,s={promise:t,reason:e};if(H.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Bs,!0,!0),ae(r,s)):H.CustomEvent&&ae(r=new CustomEvent(Bs,{detail:s}),s),r&&H.dispatchEvent&&(dispatchEvent(r),!H.PromiseRejectionEvent&&H.onunhandledrejection))try{H.onunhandledrejection(r)}catch{}ve&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var W=A.reject;function Tr(e,t,n,r){if(e.idbdb&&(e._state.openComplete||D.letThrough||e._vip)){var s=e._createTransaction(t,n,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===Zr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Tr(e,t,n,r))):W(a)}return s._promise(t,(a,o)=>He(()=>(D.trans=s,r(a,o,s)))).then(a=>s._completion.then(()=>a))}if(e._state.openComplete)return W(new P.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return W(new P.DatabaseClosed);e.open().catch(K)}return e._state.dbReadyPromise.then(()=>Tr(e,t,n,r))}const Hs="3.2.7",ze="",Ar=-1/0,_e="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",io="String expected.",Bt=[],Yn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Qd=Yn,Xd=Yn,oo=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),qn="__dbnames",nr="readonly",rr="readwrite";function at(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const lo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function fn(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=rn(t))[e],t)}class Zd{_trans(t,n,r){const s=this._tx||D.trans,a=this.name;function o(c,d,u){if(!u.schema[a])throw new P.NotFound("Table "+a+" not part of transaction");return n(u.idbtrans,u)}const l=sn();try{return s&&s.db===this.db?s===D.trans?s._promise(t,o,r):He(()=>s._promise(t,o,r),{trans:s,transless:D.transless||D}):Tr(this.db,t,[this.name],o)}finally{l&&an()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(s=>this.hook.reading.fire(s))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(ee(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=q(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(d=>{if(d.compound&&n.every(u=>d.keyPath.indexOf(u)>=0)){for(let u=0;u<n.length;++u)if(n.indexOf(d.keyPath[u])===-1)return!1;return!0}return!1}).sort((d,u)=>d.keyPath.length-u.keyPath.length)[0];if(r&&this.db._maxKey!==ze){const d=r.keyPath.slice(0,n.length);return this.where(d).equals(d.map(u=>t[u]))}!r&&ve&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,a=this.db._deps.indexedDB;function o(d,u){try{return a.cmp(d,u)===0}catch{return!1}}const[l,c]=n.reduce(([d,u],f)=>{const h=s[f],m=t[f];return[d||h,d||!h?at(u,h&&h.multi?y=>{const g=Te(y,f);return ee(g)&&g.some(b=>o(m,b))}:y=>o(m,Te(y,f))):u]},[null,null]);return l?this.where(l.name).equals(t[l.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,ee(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const s=Object.create(t.prototype);for(var a in r)if(ce(r,a))try{s[a]=r[a]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){ae(this,t)})}add(t,n){const{auto:r,keyPath:s}=this.schema.primKey;let a=t;return s&&r&&(a=fn(s)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[a]})).then(o=>o.numFailures?A.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{pe(t,s,o)}catch{}return o})}update(t,n){if(typeof t!="object"||ee(t))return this.where(":id").equals(t).modify(n);{const r=Te(t,this.schema.primKey.keyPath);if(r===void 0)return W(new P.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?q(n).forEach(s=>{pe(t,s,n[s])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:s}=this.schema.primKey;let a=t;return s&&r&&(a=fn(s)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[a],keys:n!=null?[n]:null})).then(o=>o.numFailures?A.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{pe(t,s,o)}catch{}return o})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?A.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:lo})).then(t=>t.numFailures?A.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(s=>this.hook.reading.fire(s))))}bulkAdd(t,n,r){const s=Array.isArray(n)?n:void 0,a=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:c}=this.schema.primKey;if(c&&s)throw new P.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new P.InvalidArgument("Arguments objects and keys must have the same length");const d=t.length;let u=c&&l?t.map(fn(c)):t;return this.core.mutate({trans:o,type:"add",keys:s,values:u,wantResults:a}).then(({numFailures:f,results:h,lastResult:m,failures:y})=>{if(f===0)return a?h:m;throw new Ut(`${this.name}.bulkAdd(): ${f} of ${d} operations failed`,y)})})}bulkPut(t,n,r){const s=Array.isArray(n)?n:void 0,a=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:c}=this.schema.primKey;if(c&&s)throw new P.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new P.InvalidArgument("Arguments objects and keys must have the same length");const d=t.length;let u=c&&l?t.map(fn(c)):t;return this.core.mutate({trans:o,type:"put",keys:s,values:u,wantResults:a}).then(({numFailures:f,results:h,lastResult:m,failures:y})=>{if(f===0)return a?h:m;throw new Ut(`${this.name}.bulkPut(): ${f} of ${d} operations failed`,y)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:s,failures:a})=>{if(r===0)return s;throw new Ut(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,a)})}}function Kt(e){var t={},n=function(o,l){if(l){for(var c=arguments.length,d=new Array(c-1);--c;)d[c-1]=arguments[c];return t[o].subscribe.apply(null,d),e}if(typeof o=="string")return t[o]};n.addEventType=a;for(var r=1,s=arguments.length;r<s;++r)a(arguments[r]);return n;function a(o,l,c){if(typeof o!="object"){var d;l||(l=$d),c||(c=K);var u={subscribers:[],fire:c,subscribe:function(f){u.subscribers.indexOf(f)===-1&&(u.subscribers.push(f),u.fire=l(u.fire,f))},unsubscribe:function(f){u.subscribers=u.subscribers.filter(function(h){return h!==f}),u.fire=u.subscribers.reduce(l,c)}};return t[o]=n[o]=u,u}q(d=o).forEach(function(f){var h=d[f];if(ee(h))a(f,d[f][0],d[f][1]);else{if(h!=="asap")throw new P.InvalidArgument("Invalid event config");var m=a(f,zt,function(){for(var y=arguments.length,g=new Array(y);y--;)g[y]=arguments[y];m.subscribers.forEach(function(b){Hi(function(){b.apply(null,g)})})})}})}}function Ot(e,t){return mt(t).from({prototype:e}),t}function ot(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function sr(e,t){e.filter=at(e.filter,t)}function ar(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>at(r(),t()):t,e.justLimit=n&&!r}function Sn(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new P.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Gs(e,t,n){const r=Sn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function mn(e,t,n,r){const s=e.replayFilter?at(e.filter,e.replayFilter()):e.filter;if(e.or){const a={},o=(l,c,d)=>{if(!s||s(c,d,h=>c.stop(h),h=>c.fail(h))){var u=c.primaryKey,f=""+u;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(u)),ce(a,f)||(a[f]=!0,t(l,c,d))}};return Promise.all([e.or._iterate(o,n),$s(Gs(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return $s(Gs(e,r,n),at(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function $s(e,t,n,r){var s=G(r?(a,o,l)=>n(r(a),o,l):n);return e.then(a=>{if(a)return a.start(()=>{var o=()=>a.continue();t&&!t(a,l=>o=l,l=>{a.stop(l),o=K},l=>{a.fail(l),o=K})||s(a.value,a,l=>o=l),o()})})}function se(e,t){try{const n=Vs(e),r=Vs(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(s,a){const o=s.length,l=a.length,c=o<l?o:l;for(let d=0;d<c;++d)if(s[d]!==a[d])return s[d]<a[d]?-1:1;return o===l?0:o<l?-1:1}(Ys(e),Ys(t));case"Array":return function(s,a){const o=s.length,l=a.length,c=o<l?o:l;for(let d=0;d<c;++d){const u=se(s[d],a[d]);if(u!==0)return u}return o===l?0:o<l?-1:1}(e,t)}}catch{}return NaN}function Vs(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=br(e);return n==="ArrayBuffer"?"binary":n}function Ys(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class eu{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,W.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,W.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=at(n.algorithm,t)}_iterate(t,n){return mn(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&ae(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>mn(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,s=r.table.core;if(ot(r,!0))return s.count({trans:n,query:{index:Sn(r,s.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var a=0;return mn(r,()=>(++a,!1),n,s).then(()=>a)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),s=r[0],a=r.length-1;function o(d,u){return u?o(d[r[u]],u-1):d[s]}var l=this._ctx.dir==="next"?1:-1;function c(d,u){var f=o(d,a),h=o(u,a);return f<h?-l:f>h?l:0}return this.toArray(function(d){return d.sort(c)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&ot(r,!0)&&r.limit>0){const{valueMapper:s}=r,a=Sn(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(({result:o})=>s?o.map(s):o)}{const s=[];return mn(r,a=>s.push(a),n,r.table.core).then(()=>s)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,ot(n)?ar(n,()=>{var r=t;return(s,a)=>r===0||(r===1?(--r,!1):(a(()=>{s.advance(r),r=0}),!1))}):ar(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),ar(this._ctx,()=>{var n=t;return function(r,s,a){return--n<=0&&s(a),n>=0}},!0),this}until(t,n){return sr(this._ctx,function(r,s,a){return!t(r.value)||(s(a),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return sr(this._ctx,function(s){return t(s.value)}),n=this._ctx,r=t,n.isMatch=at(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){t(s.key,s)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){t(s.primaryKey,s)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,a){r.push(a.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&ot(n,!0)&&n.limit>0)return this._read(s=>{var a=Sn(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(({result:s})=>s).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return sr(this._ctx,function(s){var a=s.primaryKey.toString(),o=ce(r,a);return r[a]=!0,!o}),this}modify(t){var n=this._ctx;return this._write(r=>{var s;if(typeof t=="function")s=t;else{var a=q(t),o=a.length;s=function(g){for(var b=!1,p=0;p<o;++p){var x=a[p],v=t[x];Te(g,x)!==v&&(pe(g,x,v),b=!0)}return b}}const l=n.table.core,{outbound:c,extractKey:d}=l.schema.primaryKey,u=this.db._options.modifyChunkSize||200,f=[];let h=0;const m=[],y=(g,b)=>{const{failures:p,numFailures:x}=b;h+=g-x;for(let v of q(p))f.push(p[v])};return this.clone().primaryKeys().then(g=>{const b=p=>{const x=Math.min(u,g.length-p);return l.getMany({trans:r,keys:g.slice(p,p+x),cache:"immutable"}).then(v=>{const _=[],k=[],I=c?[]:null,N=[];for(let S=0;S<x;++S){const M=v[S],R={value:rn(M),primKey:g[p+S]};s.call(R,R.value,R)!==!1&&(R.value==null?N.push(g[p+S]):c||se(d(M),d(R.value))===0?(k.push(R.value),c&&I.push(g[p+S])):(N.push(g[p+S]),_.push(R.value)))}const C=ot(n)&&n.limit===1/0&&(typeof t!="function"||t===ir)&&{index:n.index,range:n.range};return Promise.resolve(_.length>0&&l.mutate({trans:r,type:"add",values:_}).then(S=>{for(let M in S.failures)N.splice(parseInt(M),1);y(_.length,S)})).then(()=>(k.length>0||C&&typeof t=="object")&&l.mutate({trans:r,type:"put",keys:I,values:k,criteria:C,changeSpec:typeof t!="function"&&t}).then(S=>y(k.length,S))).then(()=>(N.length>0||C&&t===ir)&&l.mutate({trans:r,type:"delete",keys:N,criteria:C}).then(S=>y(N.length,S))).then(()=>g.length>p+x&&b(p+u))})};return b(0).then(()=>{if(f.length>0)throw new Cn("Error modifying one or more objects",f,h,m);return g.length})})})}delete(){var t=this._ctx,n=t.range;return ot(t)&&(t.isPrimKey&&!Xd||n.type===3)?this._write(r=>{const{primaryKey:s}=t.table.core.schema,a=n;return t.table.core.count({trans:r,query:{index:s,range:a}}).then(o=>t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(({failures:l,lastResult:c,results:d,numFailures:u})=>{if(u)throw new Cn("Could not delete some values",Object.keys(l).map(f=>l[f]),o-u);return o-u}))}):this.modify(ir)}}const ir=(e,t)=>t.value=null;function tu(e,t){return e<t?-1:e===t?0:1}function nu(e,t){return e>t?-1:e===t?0:1}function le(e,t,n){var r=e instanceof uo?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function lt(e){return new e.Collection(e,()=>co("")).limit(0)}function ru(e,t,n,r,s,a){for(var o=Math.min(e.length,r.length),l=-1,c=0;c<o;++c){var d=t[c];if(d!==r[c])return s(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):s(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):l>=0?e.substr(0,l)+t[l]+n.substr(l+1):null;s(e[c],d)<0&&(l=c)}return o<r.length&&a==="next"?e+n.substr(e.length):o<e.length&&a==="prev"?e.substr(0,n.length):l<0?null:e.substr(0,l)+r[l]+n.substr(l+1)}function pn(e,t,n,r){var s,a,o,l,c,d,u,f=n.length;if(!n.every(g=>typeof g=="string"))return le(e,io);function h(g){s=function(p){return p==="next"?x=>x.toUpperCase():x=>x.toLowerCase()}(g),a=function(p){return p==="next"?x=>x.toLowerCase():x=>x.toUpperCase()}(g),o=g==="next"?tu:nu;var b=n.map(function(p){return{lower:a(p),upper:s(p)}}).sort(function(p,x){return o(p.lower,x.lower)});l=b.map(function(p){return p.upper}),c=b.map(function(p){return p.lower}),d=g,u=g==="next"?"":r}h("next");var m=new e.Collection(e,()=>Ce(l[0],c[f-1]+r));m._ondirectionchange=function(g){h(g)};var y=0;return m._addAlgorithm(function(g,b,p){var x=g.key;if(typeof x!="string")return!1;var v=a(x);if(t(v,c,y))return!0;for(var _=null,k=y;k<f;++k){var I=ru(x,v,l[k],c[k],o,d);I===null&&_===null?y=k+1:(_===null||o(_,I)>0)&&(_=I)}return b(_!==null?function(){g.continue(_+u)}:p),!1}),m}function Ce(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function co(e){return{type:1,lower:e,upper:e}}class uo{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,s){r=r!==!1,s=s===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||s)&&(!r||!s)?lt(this):new this.Collection(this,()=>Ce(t,n,!r,!s))}catch{return le(this,_e)}}equals(t){return t==null?le(this,_e):new this.Collection(this,()=>co(t))}above(t){return t==null?le(this,_e):new this.Collection(this,()=>Ce(t,void 0,!0))}aboveOrEqual(t){return t==null?le(this,_e):new this.Collection(this,()=>Ce(t,void 0,!1))}below(t){return t==null?le(this,_e):new this.Collection(this,()=>Ce(void 0,t,!1,!0))}belowOrEqual(t){return t==null?le(this,_e):new this.Collection(this,()=>Ce(void 0,t))}startsWith(t){return typeof t!="string"?le(this,io):this.between(t,t+ze,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):pn(this,(n,r)=>n.indexOf(r[0])===0,[t],ze)}equalsIgnoreCase(t){return pn(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=ke.apply(dt,arguments);return t.length===0?lt(this):pn(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=ke.apply(dt,arguments);return t.length===0?lt(this):pn(this,(n,r)=>r.some(s=>n.indexOf(s)===0),t,ze)}anyOf(){const t=ke.apply(dt,arguments);let n=this._cmp;try{t.sort(n)}catch{return le(this,_e)}if(t.length===0)return lt(this);const r=new this.Collection(this,()=>Ce(t[0],t[t.length-1]));r._ondirectionchange=a=>{n=a==="next"?this._ascending:this._descending,t.sort(n)};let s=0;return r._addAlgorithm((a,o,l)=>{const c=a.key;for(;n(c,t[s])>0;)if(++s,s===t.length)return o(l),!1;return n(c,t[s])===0||(o(()=>{a.continue(t[s])}),!1)}),r}notEqual(t){return this.inAnyRange([[Ar,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=ke.apply(dt,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return le(this,_e)}const n=t.reduce((r,s)=>r?r.concat([[r[r.length-1][1],s]]):[[Ar,s]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,s=this._ascending,a=this._descending,o=this._min,l=this._max;if(t.length===0)return lt(this);if(!t.every(x=>x[0]!==void 0&&x[1]!==void 0&&s(x[0],x[1])<=0))return le(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",P.InvalidArgument);const c=!n||n.includeLowers!==!1,d=n&&n.includeUppers===!0;let u,f=s;function h(x,v){return f(x[0],v[0])}try{u=t.reduce(function(x,v){let _=0,k=x.length;for(;_<k;++_){const I=x[_];if(r(v[0],I[1])<0&&r(v[1],I[0])>0){I[0]=o(I[0],v[0]),I[1]=l(I[1],v[1]);break}}return _===k&&x.push(v),x},[]),u.sort(h)}catch{return le(this,_e)}let m=0;const y=d?x=>s(x,u[m][1])>0:x=>s(x,u[m][1])>=0,g=c?x=>a(x,u[m][0])>0:x=>a(x,u[m][0])>=0;let b=y;const p=new this.Collection(this,()=>Ce(u[0][0],u[u.length-1][1],!c,!d));return p._ondirectionchange=x=>{x==="next"?(b=y,f=s):(b=g,f=a),u.sort(h)},p._addAlgorithm((x,v,_)=>{for(var k=x.key;b(k);)if(++m,m===u.length)return v(_),!1;return!!function(I){return!y(I)&&!g(I)}(k)||(this._cmp(k,u[m][1])===0||this._cmp(k,u[m][0])===0||v(()=>{f===s?x.continue(u[m][0]):x.continue(u[m][1])}),!1)}),p}startsWithAnyOf(){const t=ke.apply(dt,arguments);return t.every(n=>typeof n=="string")?t.length===0?lt(this):this.inAnyRange(t.map(n=>[n,n+ze])):le(this,"startsWithAnyOf() only works with strings")}}function ge(e){return G(function(t){return Jt(t),e(t.target.error),!1})}function Jt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Qt="storagemutated",Pe="x-storagemutated-1",$e=Kt(null,Qt);class su{_lock(){return Rt(!D.global),++this._reculock,this._reculock!==1||D.global||(D.lockOwnerFor=this),this}_unlock(){if(Rt(!D.global),--this._reculock==0)for(D.global||(D.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{jt(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&D.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Rt(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new P.DatabaseClosed(r);case"MissingAPIError":throw new P.MissingAPI(r.message,r);default:throw new P.OpenFailed(r)}if(!this.active)throw new P.TransactionInactive;return Rt(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=G(s=>{Jt(s),this._reject(t.error)}),t.onabort=G(s=>{Jt(s),this.active&&this._reject(new P.Abort(t.error)),this.active=!1,this.on("abort").fire(s)}),t.oncomplete=G(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&$e.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return W(new P.ReadOnly("Transaction is readonly"));if(!this.active)return W(new P.TransactionInactive);if(this._locked())return new A((a,o)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(a,o)},D])});if(r)return He(()=>{var a=new A((o,l)=>{this._lock();const c=n(o,l,this);c&&c.then&&c.then(o,l)});return a.finally(()=>this._unlock()),a._lib=!0,a});var s=new A((a,o)=>{var l=n(a,o,this);l&&l.then&&l.then(a,o)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=A.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=o)})()}var a=n._waitingFor;return new A((o,l)=>{r.then(c=>n._waitingQueue.push(G(o.bind(null,c))),c=>n._waitingQueue.push(G(l.bind(null,c)))).finally(()=>{n._waitingFor===a&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new P.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(ce(n,t))return n[t];const r=this.schema[t];if(!r)throw new P.NotFound("Table "+t+" not part of transaction");const s=new this.db.Table(t,r,this);return s.core=this.db.core.table(t),n[t]=s,s}}function jr(e,t,n,r,s,a,o){return{name:e,keyPath:t,unique:n,multi:r,auto:s,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(s?"++":"")+ho(t)}}function ho(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function fo(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Gi(n,r=>[r.name,r])}}let Xt=e=>{try{return e.only([[]]),Xt=()=>[[]],[[]]}catch{return Xt=()=>ze,ze}};function Or(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?r=>r[t]:r=>Te(r,t)}(e):t=>Te(t,e)}function qs(e){return[].slice.call(e)}let au=0;function Ht(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function iu(e,t,n){function r(c){if(c.type===3)return null;if(c.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:d,upper:u,lowerOpen:f,upperOpen:h}=c;return d===void 0?u===void 0?null:t.upperBound(u,!!h):u===void 0?t.lowerBound(d,!!f):t.bound(d,u,!!f,!!h)}const{schema:s,hasGetAll:a}=function(c,d){const u=qs(c.objectStoreNames);return{schema:{name:c.name,tables:u.map(f=>d.objectStore(f)).map(f=>{const{keyPath:h,autoIncrement:m}=f,y=ee(h),g=h==null,b={},p={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g,compound:y,keyPath:h,autoIncrement:m,unique:!0,extractKey:Or(h)},indexes:qs(f.indexNames).map(x=>f.index(x)).map(x=>{const{name:v,unique:_,multiEntry:k,keyPath:I}=x,N={name:v,compound:ee(I),keyPath:I,unique:_,multiEntry:k,extractKey:Or(I)};return b[Ht(I)]=N,N}),getIndexByKeyPath:x=>b[Ht(x)]};return b[":id"]=p.primaryKey,h!=null&&(b[Ht(h)]=p.primaryKey),p})},hasGetAll:u.length>0&&"getAll"in d.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=s.tables.map(c=>function(d){const u=d.name;return{name:u,schema:d,mutate:function({trans:f,type:h,keys:m,values:y,range:g}){return new Promise((b,p)=>{b=G(b);const x=f.objectStore(u),v=x.keyPath==null,_=h==="put"||h==="add";if(!_&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:k}=m||y||{length:1};if(m&&y&&m.length!==y.length)throw new Error("Given keys array must have same length as given values array.");if(k===0)return b({numFailures:0,failures:{},results:[],lastResult:void 0});let I;const N=[],C=[];let S=0;const M=z=>{++S,Jt(z)};if(h==="deleteRange"){if(g.type===4)return b({numFailures:S,failures:C,results:[],lastResult:void 0});g.type===3?N.push(I=x.clear()):N.push(I=x.delete(r(g)))}else{const[z,Y]=_?v?[y,m]:[y,null]:[m,null];if(_)for(let B=0;B<k;++B)N.push(I=Y&&Y[B]!==void 0?x[h](z[B],Y[B]):x[h](z[B])),I.onerror=M;else for(let B=0;B<k;++B)N.push(I=x[h](z[B])),I.onerror=M}const R=z=>{const Y=z.target.result;N.forEach((B,E)=>B.error!=null&&(C[E]=B.error)),b({numFailures:S,failures:C,results:h==="delete"?m:N.map(B=>B.result),lastResult:Y})};I.onerror=z=>{M(z),R(z)},I.onsuccess=R})},getMany:({trans:f,keys:h})=>new Promise((m,y)=>{m=G(m);const g=f.objectStore(u),b=h.length,p=new Array(b);let x,v=0,_=0;const k=N=>{const C=N.target;p[C._pos]=C.result,++_===v&&m(p)},I=ge(y);for(let N=0;N<b;++N)h[N]!=null&&(x=g.get(h[N]),x._pos=N,x.onsuccess=k,x.onerror=I,++v);v===0&&m(p)}),get:({trans:f,key:h})=>new Promise((m,y)=>{m=G(m);const g=f.objectStore(u).get(h);g.onsuccess=b=>m(b.target.result),g.onerror=ge(y)}),query:function(f){return h=>new Promise((m,y)=>{m=G(m);const{trans:g,values:b,limit:p,query:x}=h,v=p===1/0?void 0:p,{index:_,range:k}=x,I=g.objectStore(u),N=_.isPrimaryKey?I:I.index(_.name),C=r(k);if(p===0)return m({result:[]});if(f){const S=b?N.getAll(C,v):N.getAllKeys(C,v);S.onsuccess=M=>m({result:M.target.result}),S.onerror=ge(y)}else{let S=0;const M=b||!("openKeyCursor"in N)?N.openCursor(C):N.openKeyCursor(C),R=[];M.onsuccess=z=>{const Y=M.result;return Y?(R.push(b?Y.value:Y.primaryKey),++S===p?m({result:R}):void Y.continue()):m({result:R})},M.onerror=ge(y)}})}(a),openCursor:function({trans:f,values:h,query:m,reverse:y,unique:g}){return new Promise((b,p)=>{b=G(b);const{index:x,range:v}=m,_=f.objectStore(u),k=x.isPrimaryKey?_:_.index(x.name),I=y?g?"prevunique":"prev":g?"nextunique":"next",N=h||!("openKeyCursor"in k)?k.openCursor(r(v),I):k.openKeyCursor(r(v),I);N.onerror=ge(p),N.onsuccess=G(C=>{const S=N.result;if(!S)return void b(null);S.___id=++au,S.done=!1;const M=S.continue.bind(S);let R=S.continuePrimaryKey;R&&(R=R.bind(S));const z=S.advance.bind(S),Y=()=>{throw new Error("Cursor not stopped")};S.trans=f,S.stop=S.continue=S.continuePrimaryKey=S.advance=()=>{throw new Error("Cursor not started")},S.fail=G(p),S.next=function(){let B=1;return this.start(()=>B--?this.continue():this.stop()).then(()=>this)},S.start=B=>{const E=new Promise((O,oe)=>{O=G(O),N.onerror=ge(oe),S.fail=oe,S.stop=Ve=>{S.stop=S.continue=S.continuePrimaryKey=S.advance=Y,O(Ve)}}),j=()=>{if(N.result)try{B()}catch(O){S.fail(O)}else S.done=!0,S.start=()=>{throw new Error("Cursor behind last entry")},S.stop()};return N.onsuccess=G(O=>{N.onsuccess=j,j()}),S.continue=M,S.continuePrimaryKey=R,S.advance=z,j(),E},b(S)},p)})},count({query:f,trans:h}){const{index:m,range:y}=f;return new Promise((g,b)=>{const p=h.objectStore(u),x=m.isPrimaryKey?p:p.index(m.name),v=r(y),_=v?x.count(v):x.count();_.onsuccess=G(k=>g(k.target.result)),_.onerror=ge(b)})}}}(c)),l={};return o.forEach(c=>l[c.name]=c),{stack:"dbcore",transaction:e.transaction.bind(e),table(c){if(!l[c])throw new Error(`Table '${c}' not found`);return l[c]},MIN_KEY:-1/0,MAX_KEY:Xt(t),schema:s}}function Cr({_novip:e},t){const n=t.db,r=function(s,a,{IDBKeyRange:o,indexedDB:l},c){return{dbcore:function(u,f){return f.reduce((h,{create:m})=>({...h,...m(h)}),u)}(iu(a,o,c),s.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(s=>{const a=s.name;e.core.schema.tables.some(o=>o.name===a)&&(s.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=s.core))})}function Ln({_novip:e},t,n,r){n.forEach(s=>{const a=r[s];t.forEach(o=>{const l=Jr(o,s);(!l||"value"in l&&l.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?Se(o,s,{get(){return this.table(s)},set(c){Bi(this,s,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):o[s]=new e.Table(s,a))})})}function Dr({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function ou(e,t){return e._cfg.version-t._cfg.version}function lu(e,t,n,r){const s=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,s);a.create(n),a._completion.catch(r);const o=a._reject.bind(a),l=D.transless||D;He(()=>{D.trans=a,D.transless=l,t===0?(q(s).forEach(c=>{or(n,c,s[c].primKey,s[c].indexes)}),Cr(e,n),A.follow(()=>e.on.populate.fire(a)).catch(o)):function({_novip:c},d,u,f){const h=[],m=c._versions;let y=c._dbSchema=Pr(c,c.idbdb,f),g=!1;const b=m.filter(x=>x._cfg.version>=d);function p(){return h.length?A.resolve(h.shift()(u.idbtrans)).then(p):A.resolve()}return b.forEach(x=>{h.push(()=>{const v=y,_=x._cfg.dbschema;Mr(c,v,f),Mr(c,_,f),y=c._dbSchema=_;const k=mo(v,_);k.add.forEach(N=>{or(f,N[0],N[1].primKey,N[1].indexes)}),k.change.forEach(N=>{if(N.recreate)throw new P.Upgrade("Not yet support for changing primary key");{const C=f.objectStore(N.name);N.add.forEach(S=>Rr(C,S)),N.change.forEach(S=>{C.deleteIndex(S.name),Rr(C,S)}),N.del.forEach(S=>C.deleteIndex(S))}});const I=x._cfg.contentUpgrade;if(I&&x._cfg.version>d){Cr(c,f),u._memoizedTables={},g=!0;let N=$i(_);k.del.forEach(R=>{N[R]=v[R]}),Dr(c,[c.Transaction.prototype]),Ln(c,[c.Transaction.prototype],q(N),N),u.schema=N;const C=Qr(I);let S;C&&At();const M=A.follow(()=>{if(S=I(u),S&&C){var R=Ae.bind(null,null);S.then(R,R)}});return S&&typeof S.then=="function"?A.resolve(S):M.then(()=>S)}}),h.push(v=>{(!g||!Qd)&&function(_,k){[].slice.call(k.db.objectStoreNames).forEach(I=>_[I]==null&&k.db.deleteObjectStore(I))}(x._cfg.dbschema,v),Dr(c,[c.Transaction.prototype]),Ln(c,[c.Transaction.prototype],c._storeNames,c._dbSchema),u.schema=c._dbSchema})}),p().then(()=>{var x,v;v=f,q(x=y).forEach(_=>{v.db.objectStoreNames.contains(_)||or(v,_,x[_].primKey,x[_].indexes)})})}(e,t,a,n).catch(o)})}function mo(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const s=e[r],a=t[r];if(s){const o={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||s.primKey.auto!==a.primKey.auto&&!Yn)o.recreate=!0,n.change.push(o);else{const l=s.idxByName,c=a.idxByName;let d;for(d in l)c[d]||o.del.push(d);for(d in c){const u=l[d],f=c[d];u?u.src!==f.src&&o.change.push(f):o.add.push(f)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,a])}return n}function or(e,t,n,r){const s=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(a=>Rr(s,a)),s}function Rr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Pr(e,t,n){const r={};return On(t.objectStoreNames,0).forEach(s=>{const a=n.objectStore(s);let o=a.keyPath;const l=jr(ho(o),o||"",!1,!1,!!a.autoIncrement,o&&typeof o!="string",!0),c=[];for(let u=0;u<a.indexNames.length;++u){const f=a.index(a.indexNames[u]);o=f.keyPath;var d=jr(f.name,o,!!f.unique,!!f.multiEntry,!1,o&&typeof o!="string",!1);c.push(d)}r[s]=fo(s,l,c)}),r}function Mr({_novip:e},t,n){const r=n.db.objectStoreNames;for(let s=0;s<r.length;++s){const a=r[s],o=n.objectStore(a);e._hasGetAll="getAll"in o;for(let l=0;l<o.indexNames.length;++l){const c=o.indexNames[l],d=o.index(c).keyPath,u=typeof d=="string"?d:"["+On(d).join("+")+"]";if(t[a]){const f=t[a].idxByName[u];f&&(f.name=c,delete t[a].idxByName[u],t[a].idxByName[c]=f)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&H.WorkerGlobalScope&&H instanceof H.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class cu{_parseStoresSpec(t,n){q(t).forEach(r=>{if(t[r]!==null){var s=t[r].split(",").map((o,l)=>{const c=(o=o.trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return jr(c,d||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),ee(d),l===0)}),a=s.shift();if(a.multi)throw new P.Schema("Primary key cannot be multi-valued");s.forEach(o=>{if(o.auto)throw new P.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new P.Schema("Index must have a name and cannot be an empty string")}),n[r]=fo(r,a,s)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?ae(this._cfg.storesSource,t):t;const r=n._versions,s={};let a={};return r.forEach(o=>{ae(s,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(s,a)}),n._dbSchema=a,Dr(n,[n._allTables,n,n.Transaction.prototype]),Ln(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],q(a),a),n._storeNames=q(a),this}upgrade(t){return this._cfg.contentUpgrade=es(this._cfg.contentUpgrade||K,t),this}}function ss(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new rt(qn,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function as(e){return e&&typeof e.databases=="function"}function Lr(e){return He(function(){return D.letThrough=!0,e()})}function du(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function uu(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?W(t.dbOpenError):e);ve&&(t.openCanceller._stackHolder=it()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function s(){if(t.openCanceller!==r)throw new P.DatabaseClosed("db.open() was cancelled")}let a=t.dbReadyResolve,o=null,l=!1;const c=()=>new A((d,u)=>{if(s(),!n)throw new P.MissingAPI;const f=e.name,h=t.autoSchema?n.open(f):n.open(f,Math.round(10*e.verno));if(!h)throw new P.MissingAPI;h.onerror=ge(u),h.onblocked=G(e._fireOnBlocked),h.onupgradeneeded=G(m=>{if(o=h.transaction,t.autoSchema&&!e._options.allowEmptyDB){h.onerror=Jt,o.abort(),h.result.close();const g=n.deleteDatabase(f);g.onsuccess=g.onerror=G(()=>{u(new P.NoSuchDatabase(`Database ${f} doesnt exist`))})}else{o.onerror=ge(u);var y=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;l=y<1,e._novip.idbdb=h.result,lu(e,y/10,o,u)}},u),h.onsuccess=G(()=>{o=null;const m=e._novip.idbdb=h.result,y=On(m.objectStoreNames);if(y.length>0)try{const b=m.transaction((g=y).length===1?g[0]:g,"readonly");t.autoSchema?function({_novip:p},x,v){p.verno=x.version/10;const _=p._dbSchema=Pr(0,x,v);p._storeNames=On(x.objectStoreNames,0),Ln(p,[p._allTables],q(_),_)}(e,m,b):(Mr(e,e._dbSchema,b),function(p,x){const v=mo(Pr(0,p.idbdb,x),p._dbSchema);return!(v.add.length||v.change.some(_=>_.add.length||_.change.length))}(e,b)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Cr(e,b)}catch{}var g;Bt.push(e),m.onversionchange=G(b=>{t.vcFired=!0,e.on("versionchange").fire(b)}),m.onclose=G(b=>{e.on("close").fire(b)}),l&&function({indexedDB:b,IDBKeyRange:p},x){!as(b)&&x!==qn&&ss(b,p).put({name:x}).catch(K)}(e._deps,f),d()},u)}).catch(d=>d&&d.name==="UnknownError"&&t.PR1398_maxLoop>0?(t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),c()):A.reject(d));return A.race([r,(typeof navigator>"u"?A.resolve():du()).then(c)]).then(()=>(s(),t.onReadyBeingFired=[],A.resolve(Lr(()=>e.on.ready.fire(e.vip))).then(function d(){if(t.onReadyBeingFired.length>0){let u=t.onReadyBeingFired.reduce(es,K);return t.onReadyBeingFired=[],A.resolve(Lr(()=>u(e.vip))).then(d)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(d=>{t.dbOpenError=d;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),W(d)}).finally(()=>{t.openComplete=!0,a()})}function Ur(e){var t=a=>e.next(a),n=s(t),r=s(a=>e.throw(a));function s(a){return o=>{var l=a(o),c=l.value;return l.done?c:c&&typeof c.then=="function"?c.then(n,r):ee(c)?Promise.all(c).then(n,r):n(c)}}return s(t)()}function hu(e,t,n){var r=arguments.length;if(r<2)throw new P.InvalidArgument("Too few arguments");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];return n=s.pop(),[e,Vi(s),n]}function po(e,t,n,r,s){return A.resolve().then(()=>{const a=D.transless||D,o=e._createTransaction(t,n,e._dbSchema,r),l={trans:o,transless:a};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===Zr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>po(e,t,n,null,s))):W(f)}const c=Qr(s);let d;c&&At();const u=A.follow(()=>{if(d=s.call(o,o),d)if(c){var f=Ae.bind(null,null);d.then(f,f)}else typeof d.next=="function"&&typeof d.throw=="function"&&(d=Ur(d))},l);return(d&&typeof d.then=="function"?A.resolve(d).then(f=>o.active?f:W(new P.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>d)).then(f=>(r&&o._resolve(),o._completion.then(()=>f))).catch(f=>(o._reject(f),W(f)))})}function gn(e,t,n){const r=ee(e)?e.slice():[e];for(let s=0;s<n;++s)r.push(t);return r}const fu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,s={},a=[];function o(u,f,h){const m=Ht(u),y=s[m]=s[m]||[],g=u==null?0:typeof u=="string"?1:u.length,b=f>0,p={...h,isVirtual:b,keyTail:f,keyLength:g,extractKey:Or(u),unique:!b&&h.unique};return y.push(p),p.isPrimaryKey||a.push(p),g>1&&o(g===2?u[0]:u.slice(0,g-1),f+1,h),y.sort((x,v)=>x.keyTail-v.keyTail),p}const l=o(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[l];for(const u of r.indexes)o(u.keyPath,0,u);function c(u){const f=u.query.index;return f.isVirtual?{...u,query:{index:f,range:(h=u.query.range,m=f.keyTail,{type:h.type===1?2:h.type,lower:gn(h.lower,h.lowerOpen?e.MAX_KEY:e.MIN_KEY,m),lowerOpen:!0,upper:gn(h.upper,h.upperOpen?e.MIN_KEY:e.MAX_KEY,m),upperOpen:!0})}}:u;var h,m}return{...n,schema:{...r,primaryKey:l,indexes:a,getIndexByKeyPath:function(u){const f=s[Ht(u)];return f&&f[0]}},count:u=>n.count(c(u)),query:u=>n.query(c(u)),openCursor(u){const{keyTail:f,isVirtual:h,keyLength:m}=u.query.index;return h?n.openCursor(c(u)).then(y=>y&&function(g){return Object.create(g,{continue:{value:function(p){p!=null?g.continue(gn(p,u.reverse?e.MAX_KEY:e.MIN_KEY,f)):u.unique?g.continue(g.key.slice(0,m).concat(u.reverse?e.MIN_KEY:e.MAX_KEY,f)):g.continue()}},continuePrimaryKey:{value(p,x){g.continuePrimaryKey(gn(p,e.MAX_KEY,f),x)}},primaryKey:{get:()=>g.primaryKey},key:{get(){const p=g.key;return m===1?p[0]:p.slice(0,m)}},value:{get:()=>g.value}})}(y)):n.openCursor(u)}}}}}};function is(e,t,n,r){return n=n||{},r=r||"",q(e).forEach(s=>{if(ce(t,s)){var a=e[s],o=t[s];if(typeof a=="object"&&typeof o=="object"&&a&&o){const l=br(a);l!==br(o)?n[r+s]=t[s]:l==="Object"?is(a,o,n,r+s+"."):a!==o&&(n[r+s]=t[s])}else a!==o&&(n[r+s]=t[s])}else n[r+s]=void 0}),q(t).forEach(s=>{ce(e,s)||(n[r+s]=t[s])}),n}const mu={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(a){const o=D.trans,{deleting:l,creating:c,updating:d}=o.table(t).hook;switch(a.type){case"add":if(c.fire===K)break;return o._promise("readwrite",()=>u(a),!0);case"put":if(c.fire===K&&d.fire===K)break;return o._promise("readwrite",()=>u(a),!0);case"delete":if(l.fire===K)break;return o._promise("readwrite",()=>u(a),!0);case"deleteRange":if(l.fire===K)break;return o._promise("readwrite",()=>function(h){return f(h.trans,h.range,1e4)}(a),!0)}return n.mutate(a);function u(h){const m=D.trans,y=h.keys||function(g,b){return b.type==="delete"?b.keys:b.keys||b.values.map(g.extractKey)}(r,h);if(!y)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:y}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(g,b,p){return b.type==="add"?Promise.resolve([]):g.getMany({trans:b.trans,keys:p,cache:"immutable"})}(n,h,y).then(g=>{const b=y.map((p,x)=>{const v=g[x],_={onerror:null,onsuccess:null};if(h.type==="delete")l.fire.call(_,p,v,m);else if(h.type==="add"||v===void 0){const k=c.fire.call(_,p,h.values[x],m);p==null&&k!=null&&(p=k,h.keys[x]=p,r.outbound||pe(h.values[x],r.keyPath,p))}else{const k=is(v,h.values[x]),I=d.fire.call(_,k,p,v,m);if(I){const N=h.values[x];Object.keys(I).forEach(C=>{ce(N,C)?N[C]=I[C]:pe(N,C,I[C])})}}return _});return n.mutate(h).then(({failures:p,results:x,numFailures:v,lastResult:_})=>{for(let k=0;k<y.length;++k){const I=x?x[k]:y[k],N=b[k];I==null?N.onerror&&N.onerror(p[k]):N.onsuccess&&N.onsuccess(h.type==="put"&&g[k]?h.values[k]:I)}return{failures:p,results:x,numFailures:v,lastResult:_}}).catch(p=>(b.forEach(x=>x.onerror&&x.onerror(p)),Promise.reject(p)))})}function f(h,m,y){return n.query({trans:h,values:!1,query:{index:r,range:m},limit:y}).then(({result:g})=>u({type:"delete",keys:g,trans:h}).then(b=>b.numFailures>0?Promise.reject(b.failures[0]):g.length<y?{failures:[],numFailures:0,lastResult:void 0}:f(h,{...m,lower:g[g.length-1],lowerOpen:!0},y)))}}}}})};function go(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let s=0,a=0;s<t.keys.length&&a<e.length;++s)se(t.keys[s],e[a])===0&&(r.push(n?rn(t.values[s]):t.values[s]),++a);return r.length===e.length?r:null}catch{return null}}const pu={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const s=go(r.keys,r.trans._cache,r.cache==="clone");return s?A.resolve(s):n.getMany(r).then(a=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?rn(a):a},a))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function os(e){return!("from"in e)}const we=function(e,t){if(!this){const n=new we;return e&&"d"in e&&ae(n,e),n}ae(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Zt(e,t,n){const r=se(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(os(e))return ae(e,{from:t,to:n,d:1});const s=e.l,a=e.r;if(se(n,e.from)<0)return s?Zt(s,t,n):e.l={from:t,to:n,d:1,l:null,r:null},zs(e);if(se(t,e.to)>0)return a?Zt(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},zs(e);se(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),se(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;s&&!e.l&&Un(e,s),a&&o&&Un(e,a)}function Un(e,t){os(t)||function n(r,{from:s,to:a,l:o,r:l}){Zt(r,s,a),o&&n(r,o),l&&n(r,l)}(e,t)}function gu(e,t){const n=Fr(t);let r=n.next();if(r.done)return!1;let s=r.value;const a=Fr(e);let o=a.next(s.from),l=o.value;for(;!r.done&&!o.done;){if(se(l.from,s.to)<=0&&se(l.to,s.from)>=0)return!0;se(s.from,l.from)<0?s=(r=n.next(l.from)).value:l=(o=a.next(s.from)).value}return!1}function Fr(e){let t=os(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&se(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||se(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function zs(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),s=r>1?"r":r<-1?"l":"";if(s){const a=s==="r"?"l":"r",o={...e},l=e[s];e.from=l.from,e.to=l.to,e[s]=l[s],o[s]=l[a],e[a]=o,o.d=Ws(o)}e.d=Ws(e)}function Ws({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}Tt(we.prototype,{add(e){return Un(this,e),this},addKey(e){return Zt(this,e,e),this},addKeys(e){return e.forEach(t=>Zt(this,t,t)),this},[xr](){return Fr(this)}});const bu={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new we(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const s=e.table(r),{schema:a}=s,{primaryKey:o}=a,{extractKey:l,outbound:c}=o,d={...s,mutate:h=>{const m=h.trans,y=m.mutatedParts||(m.mutatedParts={}),g=I=>{const N=`idb://${t}/${r}/${I}`;return y[N]||(y[N]=new we)},b=g(""),p=g(":dels"),{type:x}=h;let[v,_]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const k=h.trans._cache;return s.mutate(h).then(I=>{if(ee(v)){x!=="delete"&&(v=I.results),b.addKeys(v);const N=go(v,k);N||x==="add"||p.addKeys(v),(N||_)&&function(C,S,M,R){function z(Y){const B=C(Y.name||"");function E(O){return O!=null?Y.extractKey(O):null}const j=O=>Y.multiEntry&&ee(O)?O.forEach(oe=>B.addKey(oe)):B.addKey(O);(M||R).forEach((O,oe)=>{const Ve=M&&E(M[oe]),Qn=R&&E(R[oe]);se(Ve,Qn)!==0&&(Ve!=null&&j(Ve),Qn!=null&&j(Qn))})}S.indexes.forEach(z)}(g,a,N,_)}else if(v){const N={from:v.lower,to:v.upper};p.add(N),b.add(N)}else b.add(n),p.add(n),a.indexes.forEach(N=>g(N.name).add(n));return I})}},u=({query:{index:h,range:m}})=>{var y,g;return[h,new we((y=m.lower)!==null&&y!==void 0?y:e.MIN_KEY,(g=m.upper)!==null&&g!==void 0?g:e.MAX_KEY)]},f={get:h=>[o,new we(h.key)],getMany:h=>[o,new we().addKeys(h.keys)],count:u,query:u,openCursor:u};return q(f).forEach(h=>{d[h]=function(m){const{subscr:y}=D;if(y){const g=_=>{const k=`idb://${t}/${r}/${_}`;return y[k]||(y[k]=new we)},b=g(""),p=g(":dels"),[x,v]=f[h](m);if(g(x.name||"").add(v),!x.isPrimaryKey){if(h!=="count"){const _=h==="query"&&c&&m.values&&s.query({...m,values:!1});return s[h].apply(this,arguments).then(k=>{if(h==="query"){if(c&&m.values)return _.then(({result:N})=>(b.addKeys(N),k));const I=m.values?k.result.map(l):k.result;m.values?b.addKeys(I):p.addKeys(I)}else if(h==="openCursor"){const I=k,N=m.values;return I&&Object.create(I,{key:{get:()=>(p.addKey(I.primaryKey),I.key)},primaryKey:{get(){const C=I.primaryKey;return p.addKey(C),C}},value:{get:()=>(N&&b.addKey(I.primaryKey),I.value)}})}return k})}p.add(n)}}return s[h].apply(this,arguments)}}),d}}}};class rt{constructor(t,n){this._middlewares={},this.verno=0;const r=rt.dependencies;this._options=n={addons:rt.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:K,dbReadyPromise:null,cancelOpen:K,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;a.dbReadyPromise=new A(l=>{a.dbReadyResolve=l}),a.openCanceller=new A((l,c)=>{a.cancelOpen=c}),this._state=a,this.name=t,this.on=Kt(this,"populate","blocked","versionchange","close",{ready:[es,K]}),this.on.ready.subscribe=Ki(this.on.ready.subscribe,l=>(c,d)=>{rt.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||A.resolve().then(c),d&&l(c);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(c),d&&l(c);else{l(c);const f=this;d||l(function h(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(h)})}})}),this.Collection=(o=this,Ot(eu.prototype,function(l,c){this.db=o;let d=lo,u=null;if(c)try{d=c()}catch(y){u=y}const f=l._ctx,h=f.table,m=h.hook.reading.fire;this._ctx={table:h,index:f.index,isPrimKey:!f.index||h.schema.primKey.keyPath&&f.index===h.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:f.or,valueMapper:m!==zt?m:null}})),this.Table=function(l){return Ot(Zd.prototype,function(c,d,u){this.db=l,this._tx=u,this.name=c,this.schema=d,this.hook=l._allTables[c]?l._allTables[c].hook:Kt(null,{creating:[Kd,K],reading:[Bd,zt],updating:[Gd,K],deleting:[Hd,K]})})}(this),this.Transaction=function(l){return Ot(su.prototype,function(c,d,u,f,h){this.db=l,this.mode=c,this.storeNames=d,this.schema=u,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=Kt(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new A((m,y)=>{this._resolve=m,this._reject=y}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},m=>{var y=this.active;return this.active=!1,this.on.error.fire(m),this.parent?this.parent._reject(m):y&&this.idbtrans&&this.idbtrans.abort(),W(m)})})}(this),this.Version=function(l){return Ot(cu.prototype,function(c){this.db=l,this._cfg={version:c,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return Ot(uo.prototype,function(c,d,u){this.db=l,this._ctx={table:c,index:d===":id"?null:d,or:u};const f=l._deps.indexedDB;if(!f)throw new P.MissingAPI;this._cmp=this._ascending=f.cmp.bind(f),this._descending=(h,m)=>f.cmp(m,h),this._max=(h,m)=>f.cmp(h,m)>0?h:m,this._min=(h,m)=>f.cmp(h,m)<0?h:m,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=Xt(n.IDBKeyRange),this._createTransaction=(l,c,d,u)=>new this.Transaction(l,c,d,this._options.chromeTransactionDurability,u),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Bt.filter(c=>c.name===this.name&&c!==this&&!c._state.vcFired).map(c=>c.on("versionchange").fire(l))},this.use(fu),this.use(mu),this.use(bu),this.use(pu),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(l=>l(this))}version(t){if(isNaN(t)||t<.1)throw new P.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new P.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(s=>s._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(ou),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||D.letThrough||this._vip)?t():new A((n,r)=>{if(this._state.openComplete)return r(new P.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new P.DatabaseClosed);this.open().catch(K)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:s}){s&&this.unuse({stack:t,name:s});const a=this._middlewares[t]||(this._middlewares[t]=[]);return a.push({stack:t,create:n,level:r??10,name:s}),a.sort((o,l)=>o.level-l.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(s=>r?s.create!==r:!!n&&s.name!==n)),this}open(){return uu(this)}_close(){const t=this._state,n=Bt.indexOf(this);if(n>=0&&Bt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new A(r=>{t.dbReadyResolve=r}),t.openCanceller=new A((r,s)=>{t.cancelOpen=s})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new P.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new A((r,s)=>{const a=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=G(()=>{(function({indexedDB:l,IDBKeyRange:c},d){!as(l)&&d!==qn&&ss(l,c).delete(d).catch(K)})(this._deps,this.name),r()}),o.onerror=ge(s),o.onblocked=this._fireOnBlocked};if(t)throw new P.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(a):a()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return q(this._allTables).map(t=>this._allTables[t])}transaction(){const t=hu.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let s=D.trans;s&&s.db===this&&t.indexOf("!")===-1||(s=null);const a=t.indexOf("?")!==-1;let o,l;t=t.replace("!","").replace("?","");try{if(l=n.map(d=>{var u=d instanceof this.Table?d.name:d;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),t=="r"||t===nr)o=nr;else{if(t!="rw"&&t!=rr)throw new P.InvalidArgument("Invalid transaction mode: "+t);o=rr}if(s){if(s.mode===nr&&o===rr){if(!a)throw new P.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&l.forEach(d=>{if(s&&s.storeNames.indexOf(d)===-1){if(!a)throw new P.SubTransaction("Table "+d+" not included in parent transaction.");s=null}}),a&&s&&!s.active&&(s=null)}}catch(d){return s?s._promise(null,(u,f)=>{f(d)}):W(d)}const c=po.bind(null,this,o,l,s,r);return s?s._promise(o,c,"lock"):D.trans?jt(D.transless,()=>this._whenReady(c)):this._whenReady(c)}table(t){if(!ce(this._allTables,t))throw new P.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const xu=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class yu{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[xu](){return this}}function bo(e,t){return q(t).forEach(n=>{Un(e[n]||(e[n]=new we),t[n])}),e}function vu(e){let t,n=!1;const r=new yu(s=>{const a=Qr(e);let o=!1,l={},c={};const d={get closed(){return o},unsubscribe:()=>{o=!0,$e.storagemutated.unsubscribe(m)}};s.start&&s.start(d);let u=!1,f=!1;function h(){return q(c).some(g=>l[g]&&gu(l[g],c[g]))}const m=g=>{bo(l,g),h()&&y()},y=()=>{if(u||o)return;l={};const g={},b=function(p){a&&At();const x=()=>He(e,{subscr:p,trans:null}),v=D.trans?jt(D.transless,x):x();return a&&v.then(Ae,Ae),v}(g);f||($e(Qt,m),f=!0),u=!0,Promise.resolve(b).then(p=>{n=!0,t=p,u=!1,o||(h()?y():(l={},c=g,s.next&&s.next(p)))},p=>{u=!1,n=!1,s.error&&s.error(p),d.unsubscribe()})};return y(),d});return r.hasValue=()=>n,r.getValue=()=>t,r}let Br;try{Br={indexedDB:H.indexedDB||H.mozIndexedDB||H.webkitIndexedDB||H.msIndexedDB,IDBKeyRange:H.IDBKeyRange||H.webkitIDBKeyRange}}catch{Br={indexedDB:null,IDBKeyRange:null}}const Ye=rt;function Tn(e){let t=Ie;try{Ie=!0,$e.storagemutated.fire(e)}finally{Ie=t}}Tt(Ye,{...En,delete:e=>new Ye(e,{addons:[]}).delete(),exists:e=>new Ye(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return as(t)?Promise.resolve(t.databases()).then(r=>r.map(s=>s.name).filter(s=>s!==qn)):ss(t,n).toCollection().primaryKeys()}(Ye.dependencies).then(e)}catch{return W(new P.MissingAPI)}},defineClass:()=>function(e){ae(this,e)},ignoreTransaction:e=>D.trans?jt(D.transless,e):e(),vip:Lr,async:function(e){return function(){try{var t=Ur(e.apply(this,arguments));return t&&typeof t.then=="function"?t:A.resolve(t)}catch(n){return W(n)}}},spawn:function(e,t,n){try{var r=Ur(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:A.resolve(r)}catch(s){return W(s)}},currentTransaction:{get:()=>D.trans||null},waitFor:function(e,t){const n=A.resolve(typeof e=="function"?Ye.ignoreTransaction(e):e).timeout(t||6e4);return D.trans?D.trans.waitFor(n):n},Promise:A,debug:{get:()=>ve,set:e=>{qi(e,e==="dexie"?()=>!0:oo)}},derive:mt,extend:ae,props:Tt,override:Ki,Events:Kt,on:$e,liveQuery:vu,extendObservabilitySet:bo,getByKeyPath:Te,setByKeyPath:pe,delByKeyPath:function(e,t){typeof t=="string"?pe(e,t,void 0):"length"in t&&[].map.call(t,function(n){pe(e,n,void 0)})},shallowClone:$i,deepClone:rn,getObjectDiff:is,cmp:se,asap:Hi,minKey:Ar,addons:[],connections:Bt,errnames:Zr,dependencies:Br,semVer:Hs,version:Hs.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),Ye.maxKey=Xt(Ye.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&($e(Qt,e=>{if(!Ie){let t;Yn?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Pe,!0,!0,e)):t=new CustomEvent(Pe,{detail:e}),Ie=!0,dispatchEvent(t),Ie=!1}}),addEventListener(Pe,({detail:e})=>{Ie||Tn(e)}));let Ie=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(Pe);typeof e.unref=="function"&&e.unref(),$e(Qt,t=>{Ie||e.postMessage(t)}),e.onmessage=t=>{t.data&&Tn(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){$e(Qt,t=>{try{Ie||(typeof localStorage<"u"&&localStorage.setItem(Pe,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Pe,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===Pe){const n=JSON.parse(t.newValue);n&&Tn(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type===Pe&&Tn(t.changedParts)})}A.rejectionMapper=function(e,t){if(!e||e instanceof pt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Us[e.name])return e;var n=new Us[e.name](t||e.message,e);return"stack"in e&&Se(n,"stack",{get:function(){return this.inner.stack}}),n},qi(ve,oo);class _u extends rt{constructor(){super("FTCManagerDB");je(this,"tasks");je(this,"checklists");je(this,"scoutingReports");je(this,"matchPlans");je(this,"syncQueue");je(this,"members");je(this,"teams");this.version(1).stores({tasks:"id, organizationId, teamId, status, syncStatus, updatedAt",checklists:"id, organizationId, syncStatus",scoutingReports:"id, organizationId, opponentTeamNumber, matchNumber, syncStatus",matchPlans:"id, organizationId, syncStatus",syncQueue:"id, tableName, timestamp, retryCount",members:"id, organizationId, syncStatus",teams:"id, organizationId, syncStatus"})}}const Fn=new _u;function De(){return crypto.randomUUID()}async function ct(e,t,n,r){await Fn.syncQueue.add({id:De(),tableName:e,recordId:t,operation:n,data:r,timestamp:Date.now(),retryCount:0})}async function Eu(){return await Fn.syncQueue.count()}const Js=[{id:"m1",firstName:"Abby",lastNameInitial:"B"},{id:"m2",firstName:"Ben",lastNameInitial:"C"},{id:"m3",firstName:"Charlie",lastNameInitial:"D"},{id:"m4",firstName:"Dana",lastNameInitial:"E"},{id:"m5",firstName:"Evan",lastNameInitial:"F"}],Qs=[{id:"t1",name:"Programming",memberIds:["m1"]},{id:"t2",name:"Build",memberIds:["m2"]},{id:"t3",name:"Drive",memberIds:["m3"]},{id:"t4",name:"Scouting",memberIds:["m5"]},{id:"t5",name:"Outreach",memberIds:["m4"]}],Xs=[{id:"1",text:"Turn off robot",checked:!1},{id:"2",text:"Swap main battery",checked:!1},{id:"3",text:"Charge old battery",checked:!1},{id:"4",text:"Charge Driver Hub",checked:!1},{id:"5",text:"Tighten chassis screws",checked:!1},{id:"6",text:"Check wiring connections",checked:!1},{id:"7",text:"Clean wheels",checked:!1},{id:"8",text:"Reset servo positions",checked:!1}],ls=wd()(Ad((e,t)=>({currentOrganizationId:null,isDemoMode:!0,tasks:[],members:Js,teams:Qs,scoutingReports:[],checklist:Xs,matchPlans:[],theme:"light",setTheme:n=>{e({theme:n}),n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},addTask:n=>{const r={...n,id:De(),createdAt:Date.now(),timeline:[{id:De(),type:"history",authorId:"System",content:"Task created",timestamp:Date.now()}]};e(s=>({tasks:[...s.tasks,r]})),t().isDemoMode||ct("tasks",r.id,"create",r)},updateTask:(n,r)=>{if(e(s=>({tasks:s.tasks.map(a=>a.id===n?{...a,...r}:a)})),!t().isDemoMode){const s=t().tasks.find(a=>a.id===n);s&&ct("tasks",n,"update",{...s,...r})}},deleteTask:n=>{e(r=>({tasks:r.tasks.filter(s=>s.id!==n)})),t().isDemoMode||ct("tasks",n,"delete",null)},addMember:(n,r)=>{const s={id:De(),firstName:n,lastNameInitial:r};e(a=>({members:[...a.members,s]}))},removeMember:n=>{e(r=>({members:r.members.filter(s=>s.id!==n),teams:r.teams.map(s=>({...s,memberIds:s.memberIds.filter(a=>a!==n)}))}))},setMembers:n=>e({members:n}),addTeam:n=>{const r={id:De(),name:n,memberIds:[]};e(s=>({teams:[...s.teams,r]}))},removeTeam:n=>{e(r=>({teams:r.teams.filter(s=>s.id!==n)}))},toggleMemberInTeam:(n,r)=>{e(s=>({teams:s.teams.map(a=>{if(a.id!==n)return a;const o=a.memberIds.includes(r)?a.memberIds.filter(l=>l!==r):[...a.memberIds,r];return{...a,memberIds:o}})}))},setTeams:n=>e({teams:n}),addScoutingReport:n=>{const r={...n,id:De()};e(s=>({scoutingReports:[...s.scoutingReports,r]}))},toggleChecklistItem:n=>{e(r=>({checklist:r.checklist.map(s=>s.id===n?{...s,checked:!s.checked}:s)}))},resetChecklist:()=>{e(n=>({checklist:n.checklist.map(r=>({...r,checked:!1}))}))},addChecklistItem:n=>{const r={id:De(),text:n,checked:!1};e(s=>({checklist:[...s.checklist,r]}))},deleteChecklistItem:n=>{e(r=>({checklist:r.checklist.filter(s=>s.id!==n)}))},updateChecklistAssignment:(n,r)=>{e(s=>({checklist:s.checklist.map(a=>a.id===n?{...a,assignedTo:r}:a)}))},addMatchPlan:n=>{const r={...n,id:De(),updatedAt:Date.now()};e(s=>({matchPlans:[...s.matchPlans,r]})),t().isDemoMode||ct("matchPlans",r.id,"create",r)},deleteMatchPlan:n=>{e(r=>({matchPlans:r.matchPlans.filter(s=>s.id!==n)})),t().isDemoMode||ct("matchPlans",n,"delete",null)},updateMatchPlan:(n,r)=>{if(e(s=>({matchPlans:s.matchPlans.map(a=>a.id===n?{...a,...r,updatedAt:Date.now()}:a)})),!t().isDemoMode){const s=t().matchPlans.find(a=>a.id===n);s&&ct("matchPlans",n,"update",{...s,...r})}},initializeStore:async()=>{try{const n=await Fn.tasks.toArray();n.length>0&&e({tasks:n.map(s=>({id:s.id,title:s.title,description:s.description||"",status:s.status,type:s.type,assignedTo:s.assignedTo||"",department:s.teamId||"",tags:s.tags,checklist:s.checklist,timeline:Array.isArray(s.timeline)?s.timeline.map(a=>({...a,type:a.type})):[],createdAt:s.createdAt,dueDate:s.dueDate}))});const r=await Fn.matchPlans.toArray();r.length>0&&e({matchPlans:r.map(s=>({id:s.id,title:s.title||`Match ${s.matchNumber||"?"}`,drawingData:s.drawingData,notes:s.notes||"",allianceTeam:s.allianceTeam||"",partnerAutonomous:s.partnerAutonomous||!1,partnerPark:s.partnerPark||!1,updatedAt:s.updatedAt}))})}catch(n){console.warn("Failed to load from IndexedDB:",n)}},resetToDefaults:()=>{e({tasks:[],members:Js,teams:Qs,scoutingReports:[],checklist:Xs,matchPlans:[]})}}),{name:"ftc-team-manager-storage",partialize:e=>({tasks:e.tasks,members:e.members,teams:e.teams,scoutingReports:e.scoutingReports,checklist:e.checklist,matchPlans:e.matchPlans,theme:e.theme})}));if(typeof window<"u"){const e=localStorage.getItem("ftc-team-manager-storage");if(e)try{const{state:t}=JSON.parse(e);(t==null?void 0:t.theme)==="dark"&&document.documentElement.classList.add("dark")}catch{}}function wu(){const{signInWithEmail:e,signUpWithEmail:t,signInWithGoogle:n,signInWithMicrosoft:r,resetPassword:s,isConfigured:a}=Wr(),[o,l]=T.useState("login"),[c,d]=T.useState(""),[u,f]=T.useState(""),[h,m]=T.useState(""),[y,g]=T.useState(!1),[b,p]=T.useState(null),[x,v]=T.useState(null),_=async N=>{N.preventDefault(),g(!0),p(null),v(null);try{if(o==="login"){const{error:C}=await e(c,u);C&&p(C.message)}else if(o==="signup"){const{error:C}=await t(c,u,h);C?p(C.message):v("Check your email for a confirmation link!")}else if(o==="forgot"){const{error:C}=await s(c);C?p(C.message):v("Password reset email sent!")}}catch{p("An unexpected error occurred")}finally{g(!1)}},k=async()=>{g(!0),p(null);const{error:N}=await n();N&&(p(N.message),g(!1))},I=async()=>{g(!0),p(null);const{error:N}=await r();N&&(p(N.message),g(!1))};return a?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl shadow-lg shadow-orange-500/25 mb-4",children:i.jsx(Ns,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"FTC Team Manager"}),i.jsxs("p",{className:"text-slate-400",children:[o==="login"&&"Sign in to your account",o==="signup"&&"Create your account",o==="forgot"&&"Reset your password"]})]}),i.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700 rounded-2xl p-6 shadow-xl",children:[b&&i.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 mb-4",children:i.jsx("p",{className:"text-red-400 text-sm",children:b})}),x&&i.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-3 mb-4",children:i.jsx("p",{className:"text-green-400 text-sm",children:x})}),o!=="forgot"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-3 mb-6",children:[i.jsxs("button",{onClick:k,disabled:y,className:"w-full flex items-center justify-center gap-3 bg-white text-slate-900 font-medium py-3 px-4 rounded-xl hover:bg-slate-100 transition-all disabled:opacity-50",children:[i.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),i.jsxs("button",{onClick:I,disabled:y,className:"w-full flex items-center justify-center gap-3 bg-slate-700 text-white font-medium py-3 px-4 rounded-xl hover:bg-slate-600 transition-all disabled:opacity-50",children:[i.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"#F25022",d:"M1 1h10v10H1z"}),i.jsx("path",{fill:"#00A4EF",d:"M1 13h10v10H1z"}),i.jsx("path",{fill:"#7FBA00",d:"M13 1h10v10H13z"}),i.jsx("path",{fill:"#FFB900",d:"M13 13h10v10H13z"})]}),"Continue with Microsoft"]})]}),i.jsxs("div",{className:"relative mb-6",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-slate-600"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-4 bg-slate-800/50 text-slate-400",children:"or continue with email"})})]})]}),i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[o==="signup"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Full Name"}),i.jsxs("div",{className:"relative",children:[i.jsx(Di,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"text",value:h,onChange:N=>m(N.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"John Smith",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(pc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"email",value:c,onChange:N=>d(N.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"you@team12345.org",required:!0})]})]}),o!=="forgot"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(hc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"password",value:u,onChange:N=>f(N.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"",required:!0,minLength:6})]})]}),i.jsx("button",{type:"submit",disabled:y,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold py-3 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg shadow-orange-500/25 disabled:opacity-50",children:y?i.jsx(jn,{className:"w-5 h-5 animate-spin"}):i.jsxs(i.Fragment,{children:[o==="login"&&"Sign In",o==="signup"&&"Create Account",o==="forgot"&&"Send Reset Link",i.jsx(pr,{className:"w-4 h-4"})]})})]}),i.jsxs("div",{className:"mt-6 text-center text-sm",children:[o==="login"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>l("forgot"),className:"text-slate-400 hover:text-orange-400 transition-colors",children:"Forgot password?"}),i.jsxs("p",{className:"mt-4 text-slate-400",children:["Don't have an account?"," ",i.jsx("button",{onClick:()=>l("signup"),className:"text-orange-400 hover:text-orange-300 font-medium",children:"Sign up"})]})]}),o==="signup"&&i.jsxs("p",{className:"text-slate-400",children:["Already have an account?"," ",i.jsx("button",{onClick:()=>l("login"),className:"text-orange-400 hover:text-orange-300 font-medium",children:"Sign in"})]}),o==="forgot"&&i.jsx("button",{onClick:()=>l("login"),className:"text-orange-400 hover:text-orange-300 font-medium",children:"Back to sign in"})]})]})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl shadow-lg shadow-orange-500/25 mb-4",children:i.jsx(Ns,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"FTC Team Manager"}),i.jsx("p",{className:"text-slate-400",children:"Running in Demo Mode"})]}),i.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700 rounded-2xl p-6 shadow-xl",children:[i.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 mb-6",children:i.jsxs("p",{className:"text-amber-200 text-sm",children:[i.jsx("strong",{children:"Demo Mode:"})," Cloud sync is disabled. Your data will be saved locally in this browser. To enable authentication and cloud sync, configure your Supabase credentials in ",i.jsx("code",{className:"bg-slate-700 px-1 rounded",children:".env.local"})]})}),i.jsxs("a",{href:"/",className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold py-3 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg shadow-orange-500/25",children:["Continue to App",i.jsx(pr,{className:"w-4 h-4"})]})]})]})})}function Nu(){const[e,t]=T.useState(navigator.onLine),[n,r]=T.useState("idle"),[s,a]=T.useState(0),[o,l]=T.useState(null),[c,d]=T.useState(null);T.useEffect(()=>{const f=()=>{t(!0),r("idle")},h=()=>{t(!1),r("offline")};return window.addEventListener("online",f),window.addEventListener("offline",h),()=>{window.removeEventListener("online",f),window.removeEventListener("offline",h)}},[]),T.useEffect(()=>{const f=async()=>{const m=await Eu();a(m)};f();const h=setInterval(f,5e3);return()=>clearInterval(h)},[]),T.useEffect(()=>{e&&s>0&&n==="idle"&&u()},[e,s]);const u=T.useCallback(async()=>{{r("offline");return}},[e]);return{isOnline:e,syncStatus:n,pendingChanges:s,lastSyncTime:o,sync:u,error:c}}function Zs(){return Nu(),i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:[i.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full"}),i.jsx("span",{className:"text-xs text-amber-300 font-medium",children:"Demo Mode"})]})}const ut={Backlog:"Backlog",ToDo:"To Do",InProgress:"In Progress",Validation:"Validation",Done:"Done"},Ct={Feature:"Feature",Bug:"Bug"},ea=[ut.Backlog,ut.ToDo,ut.InProgress,ut.Validation,ut.Done],ku=[{id:"m1",firstName:"Abby",lastNameInitial:"B"},{id:"m2",firstName:"Ben",lastNameInitial:"C"},{id:"m3",firstName:"Charlie",lastNameInitial:"D"},{id:"m4",firstName:"Dana",lastNameInitial:"E"},{id:"m5",firstName:"Evan",lastNameInitial:"F"}],Iu=[{id:"t1",name:"Programming",memberIds:["m1"]},{id:"t2",name:"Build",memberIds:["m2"]},{id:"t3",name:"Drive",memberIds:["m3"]},{id:"t4",name:"Scouting",memberIds:["m5"]},{id:"t5",name:"Outreach",memberIds:["m4"]}],Su=[{id:"1",text:"Turn off robot",checked:!1},{id:"2",text:"Swap main battery",checked:!1},{id:"3",text:"Charge old battery",checked:!1},{id:"4",text:"Charge Driver Hub",checked:!1},{id:"5",text:"Tighten chassis screws",checked:!1},{id:"6",text:"Check wiring connections",checked:!1},{id:"7",text:"Clean wheels",checked:!1},{id:"8",text:"Reset servo positions",checked:!1}],Tu="DecodeField.png";var Au={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ta;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ta||(ta={}));var na;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(na||(na={}));var ra;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(ra||(ra={}));var sa;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(sa||(sa={}));var aa;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(aa||(aa={}));var ia;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ia||(ia={}));var oa;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(oa||(oa={}));var la;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(la||(la={}));var ca;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ca||(ca={}));var da;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(da||(da={}));var ua;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ua||(ua={}));var ha;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(ha||(ha={}));var fa;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(fa||(fa={}));var ma;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(ma||(ma={}));var pa;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(pa||(pa={}));var ga;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ga||(ga={}));var ba;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ba||(ba={}));var xa;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(xa||(xa={}));var ya;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ya||(ya={}));var va;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(va||(va={}));var _a;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(_a||(_a={}));var Ea;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ea||(Ea={}));var wa;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(wa||(wa={}));var Na;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Na||(Na={}));var ka;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ka||(ka={}));var Ia;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Ia||(Ia={}));var Sa;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Sa||(Sa={}));var Ta;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Ta||(Ta={}));var Aa;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Aa||(Aa={}));var ja;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ja||(ja={}));var Oa;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Oa||(Oa={}));var Ca;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Ca||(Ca={}));var Da;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Da||(Da={}));var Ra;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Ra||(Ra={}));var Pa;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Pa||(Pa={}));var Ma;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ma||(Ma={}));var La;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(La||(La={}));var Ua;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Ua||(Ua={}));var Fa;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Fa||(Fa={}));var Ba;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Ba||(Ba={}));var Ka;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Ka||(Ka={}));var Ha;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Ha||(Ha={}));var Ga;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Ga||(Ga={}));var $a;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})($a||($a={}));var Va;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Va||(Va={}));var Ya;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(Ya||(Ya={}));var qa;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(qa||(qa={}));var za;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(za||(za={}));var Wa;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Wa||(Wa={}));var Ja;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ja||(Ja={}));var Qa;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Qa||(Qa={}));var Xa;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Xa||(Xa={}));var Za;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Za||(Za={}));var ei;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ei||(ei={}));var ti;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(ti||(ti={}));var ni;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(ni||(ni={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ri;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(ri||(ri={}));function Bn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function si(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $(e){return this instanceof $?(this.v=e,this):new $(e)}function Gt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(m){return function(y){return Promise.resolve(y).then(m,f)}}function l(m,y){r[m]&&(s[m]=function(g){return new Promise(function(b,p){a.push([m,g,b,p])>1||c(m,g)})},y&&(s[m]=y(s[m])))}function c(m,y){try{d(r[m](y))}catch(g){h(a[0][3],g)}}function d(m){m.value instanceof $?Promise.resolve(m.value.v).then(u,f):h(a[0][2],m)}function u(m){c("next",m)}function f(m){c("throw",m)}function h(m,y){m(y),a.shift(),a.length&&c(a[0][0],a[0][1])}}function bt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof si=="function"?si(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(l,c){o=e[a](o),s(l,c,o.done,o.value)})}}function s(a,o,l,c){Promise.resolve(c).then(function(d){a({value:d,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let xo=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return xo=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const ju=()=>xo();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kr(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Hr=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ue extends Error{}class ie extends ue{constructor(t,n,r,s){super(`${ie.makeMessage(t,n,r)}`),this.status=t,this.headers=s,this.error=n}static makeMessage(t,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,r,s){if(!t||!s)return new zn({message:r,cause:Hr(n)});const a=n;return t===400?new vo(t,a,r,s):t===401?new _o(t,a,r,s):t===403?new Eo(t,a,r,s):t===404?new wo(t,a,r,s):t===409?new No(t,a,r,s):t===422?new ko(t,a,r,s):t===429?new Io(t,a,r,s):t>=500?new So(t,a,r,s):new ie(t,a,r,s)}}class Gr extends ie{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class zn extends ie{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class yo extends zn{constructor({message:t}={}){super({message:t??"Request timed out."})}}class vo extends ie{}class _o extends ie{}class Eo extends ie{}class wo extends ie{}class No extends ie{}class ko extends ie{}class Io extends ie{}class So extends ie{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ou=/^[a-z][a-z0-9+.-]*:/i,Cu=e=>Ou.test(e);let $r=e=>($r=Array.isArray,$r(e));const Du=$r;let Ru=Du;const ai=Ru;function Pu(e){if(!e)return!0;for(const t in e)return!1;return!0}function Mu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const Lu=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new ue(`${e} must be an integer`);if(t<0)throw new ue(`${e} must be a positive integer`);return t},Uu=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fu=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ht="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bu(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Ku=()=>{var e,t,n,r,s;const a=Bu();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ht,"X-Stainless-OS":oi(Deno.build.os),"X-Stainless-Arch":ii(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ht,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ht,"X-Stainless-OS":oi((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":ii((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const o=Hu();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ht,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ht,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Hu(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,o=r[3]||0;return{browser:t,version:`${s}.${a}.${o}`}}}return null}const ii=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",oi=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let bn;const Gu=()=>bn??(bn=Ku());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $u(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function To(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function Vu(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return To({start(){},async pull(n){const{done:r,value:s}=await t.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function Ao(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Yu(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const r=e.getReader(),s=r.cancel();r.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qu=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jo=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function lr(e,t,n){return jo(),new File(e,t??"unknown_file",n)}function zu(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const Wu=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Oo=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",Ju=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Oo(e),Qu=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function Xu(e,t,n){if(jo(),e=await e,Ju(e))return e instanceof File?e:lr([await e.arrayBuffer()],e.name);if(Qu(e)){const s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),lr(await Vr(s),t,n)}const r=await Vr(e);if(t||(t=zu(e)),!(n!=null&&n.type)){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return lr(r,t,n)}async function Vr(e){var t,n,r,s,a;let o=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)o.push(e);else if(Oo(e))o.push(e instanceof Blob?e:await e.arrayBuffer());else if(Wu(e))try{for(var l=!0,c=bt(e),d;d=await c.next(),t=d.done,!t;l=!0){s=d.value,l=!1;const u=s;o.push(...await Vr(u))}}catch(u){n={error:u}}finally{try{!l&&!t&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}else{const u=(a=e==null?void 0:e.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof e}${u?`; constructor: ${u}`:""}${Zu(e)}`)}return o}function Zu(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Co{constructor(t){this._client=t}}Co._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Do(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const li=Object.freeze(Object.create(null)),eh=(e=Do)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],o=n.reduce((u,f,h)=>{var m,y,g;/[?#]/.test(f)&&(s=!0);const b=r[h];let p=(s?encodeURIComponent:e)(""+b);return h!==r.length&&(b==null||typeof b=="object"&&b.toString===((g=Object.getPrototypeOf((y=Object.getPrototypeOf((m=b.hasOwnProperty)!==null&&m!==void 0?m:li))!==null&&y!==void 0?y:li))===null||g===void 0?void 0:g.toString))&&(p=b+"",a.push({start:u.length+f.length,length:p.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),u+f+(h===r.length?"":p)},""),l=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(l))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((u,f)=>u.start-f.start),a.length>0){let u=0;const f=a.reduce((h,m)=>{const y=" ".repeat(m.start-u),g="^".repeat(m.length);return u=m.start+m.length,h+y+g},"");throw new ue(`Path parameters result in path with invalid segments:
${a.map(h=>h.error).join(`
`)}
${o}
${f}`)}return o},xn=eh(Do);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ro extends Co{create(t,n){var r;const{api_version:s=this._client.apiVersion}=t,a=Bn(t,["api_version"]);if("model"in a&&"agent_config"in a)throw new ue("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new ue("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(xn`/${s}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(r=t.stream)!==null&&r!==void 0?r:!1}))}delete(t,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(xn`/${s}/interactions/${t}`,r)}cancel(t,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(xn`/${s}/interactions/${t}/cancel`,r)}get(t,n={},r){var s;const a=n??{},{api_version:o=this._client.apiVersion}=a,l=Bn(a,["api_version"]);return this._client.get(xn`/${o}/interactions/${t}`,Object.assign(Object.assign({query:l},r),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}Ro._key=Object.freeze(["interactions"]);class Po extends Ro{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function th(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}let yn;function cs(e){let t;return(yn??(t=new globalThis.TextEncoder,yn=t.encode.bind(t)))(e)}let vn;function ci(e){let t;return(vn??(t=new globalThis.TextDecoder,vn=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wn{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?cs(t):t;this.buffer=th([this.buffer,n]);const r=[];let s;for(;(s=nh(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(ci(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,o=ci(this.buffer.subarray(0,a));r.push(o),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Wn.NEWLINE_CHARS=new Set([`
`,"\r"]);Wn.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function nh(e,t){for(let s=t??0;s<e.length;s++){if(e[s]===10)return{preceding:s,index:s+1,carriage:!1};if(e[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function rh(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kn={off:0,error:200,warn:300,info:400,debug:500},di=(e,t,n)=>{if(e){if(Mu(Kn,e))return e;ne(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Kn))}`)}};function Mt(){}function _n(e,t,n){return!t||Kn[e]>Kn[n]?Mt:t[e].bind(t)}const sh={error:Mt,warn:Mt,info:Mt,debug:Mt};let ui=new WeakMap;function ne(e){var t;const n=e.logger,r=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return sh;const s=ui.get(n);if(s&&s[0]===r)return s[1];const a={error:_n("error",n,r),warn:_n("warn",n,r),info:_n("info",n,r),debug:_n("debug",n,r)};return ui.set(n,[r,a]),a}const qe=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ft{constructor(t,n,r){this.iterator=t,this.controller=n,this.client=r}static fromSSEResponse(t,n,r){let s=!1;const a=r?ne(r):console;function o(){return Gt(this,arguments,function*(){var c,d,u,f;if(s)throw new ue("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let h=!1;try{try{for(var m=!0,y=bt(ah(t,n)),g;g=yield $(y.next()),c=g.done,!c;m=!0){f=g.value,m=!1;const b=f;if(!h)if(b.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield $(JSON.parse(b.data))}catch(p){throw a.error("Could not parse message into JSON:",b.data),a.error("From chunk:",b.raw),p}}}catch(b){d={error:b}}finally{try{!m&&!c&&(u=y.return)&&(yield $(u.call(y)))}finally{if(d)throw d.error}}h=!0}catch(b){if(Kr(b))return yield $(void 0);throw b}finally{h||n.abort()}})}return new ft(o,n,r)}static fromReadableStream(t,n,r){let s=!1;function a(){return Gt(this,arguments,function*(){var c,d,u,f;const h=new Wn,m=Ao(t);try{for(var y=!0,g=bt(m),b;b=yield $(g.next()),c=b.done,!c;y=!0){f=b.value,y=!1;const p=f;for(const x of h.decode(p))yield yield $(x)}}catch(p){d={error:p}}finally{try{!y&&!c&&(u=g.return)&&(yield $(u.call(g)))}finally{if(d)throw d.error}}for(const p of h.flush())yield yield $(p)})}function o(){return Gt(this,arguments,function*(){var c,d,u,f;if(s)throw new ue("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let h=!1;try{try{for(var m=!0,y=bt(a()),g;g=yield $(y.next()),c=g.done,!c;m=!0){f=g.value,m=!1;const b=f;h||b&&(yield yield $(JSON.parse(b)))}}catch(b){d={error:b}}finally{try{!m&&!c&&(u=y.return)&&(yield $(u.call(y)))}finally{if(d)throw d.error}}h=!0}catch(b){if(Kr(b))return yield $(void 0);throw b}finally{h||n.abort()}})}return new ft(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const o=r.next();t.push(o),n.push(o)}return a.shift()}});return[new ft(()=>s(t),this.controller,this.client),new ft(()=>s(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return To({async start(){n=t[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const o=cs(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function ah(e,t){return Gt(this,arguments,function*(){var r,s,a,o;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ue("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ue("Attempted to iterate over a response with no body");const l=new oh,c=new Wn,d=Ao(e.body);try{for(var u=!0,f=bt(ih(d)),h;h=yield $(f.next()),r=h.done,!r;u=!0){o=h.value,u=!1;const m=o;for(const y of c.decode(m)){const g=l.decode(y);g&&(yield yield $(g))}}}catch(m){s={error:m}}finally{try{!u&&!r&&(a=f.return)&&(yield $(a.call(f)))}finally{if(s)throw s.error}}for(const m of c.flush()){const y=l.decode(m);y&&(yield yield $(y))}})}function ih(e){return Gt(this,arguments,function*(){var n,r,s,a;let o=new Uint8Array;try{for(var l=!0,c=bt(e),d;d=yield $(c.next()),n=d.done,!n;l=!0){a=d.value,l=!1;const u=a;if(u==null)continue;const f=u instanceof ArrayBuffer?new Uint8Array(u):typeof u=="string"?cs(u):u;let h=new Uint8Array(o.length+f.length);h.set(o),h.set(f,o.length),o=h;let m;for(;(m=rh(o))!==-1;)yield yield $(o.slice(0,m)),o=o.slice(m)}}catch(u){r={error:u}}finally{try{!l&&!n&&(s=c.return)&&(yield $(s.call(c)))}finally{if(r)throw r.error}}o.length>0&&(yield yield $(o))})}class oh{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=lh(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function lh(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ch(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=t,o=await(async()=>{var l;if(t.options.stream)return ne(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):ft.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(l=c==null?void 0:c.split(";")[0])===null||l===void 0?void 0:l.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return ne(e).debug(`[${r}] response parsed`,qe({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-a})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ds extends Promise{constructor(t,n,r=ch){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,this.client=t}_thenUnwrap(t){return new ds(this.client,this.responsePromise,async(n,r)=>t(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mo=Symbol("brand.privateNullableHeaders");function*dh(e){if(!e)return;if(Mo in e){const{values:r,nulls:s}=e;yield*r.entries();for(const a of s)yield[a,null];return}let t=!1,n;e instanceof Headers?n=e.entries():ai(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=ai(r[1])?r[1]:[r[1]];let o=!1;for(const l of a)l!==void 0&&(t&&!o&&(o=!0,yield[s,null]),yield[s,l])}}const Dt=e=>{const t=new Headers,n=new Set;for(const r of e){const s=new Set;for(const[a,o]of dh(r)){const l=a.toLowerCase();s.has(l)||(t.delete(a),s.add(l)),o===null?(t.delete(a),n.add(l)):(t.append(a,o),n.delete(l))}}return{[Mo]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cr=e=>{var t,n,r,s,a,o;if(typeof globalThis.process<"u")return(r=(n=(t=Au)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(a=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||a===void 0?void 0:a.call(s,e))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Lo;class Jn{constructor(t){var n,r,s,a,o,l,c,{baseURL:d=cr("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:u=(n=cr("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:f="v1beta"}=t,h=Bn(t,["baseURL","apiKey","apiVersion"]);const m=Object.assign(Object.assign({apiKey:u,apiVersion:f},h),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=(r=m.timeout)!==null&&r!==void 0?r:Jn.DEFAULT_TIMEOUT,this.logger=(s=m.logger)!==null&&s!==void 0?s:console;const y="warn";this.logLevel=y,this.logLevel=(o=(a=di(m.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:di(cr("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:y,this.fetchOptions=m.fetchOptions,this.maxRetries=(l=m.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(c=m.fetch)!==null&&c!==void 0?c:$u(),this.encoder=qu,this._options=m,this.apiKey=u,this.apiVersion=f,this.clientAdapter=m.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=Dt([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Dt([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Dt([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new ue(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ht}`}defaultIdempotencyKey(){return`stainless-node-retry-${ju()}`}makeStatusError(t,n,r,s){return ie.generate(t,n,r,s)}buildURL(t,n,r){const s=!this.baseURLOverridden()&&r||this.baseURL,a=Cu(t)?new URL(t):new URL(s+(s.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),o=this.defaultQuery();return Pu(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:r}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:t,path:n},s)))}request(t,n=null){return new ds(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,r){var s,a,o;const l=await t,c=(s=l.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=c),await this.prepareOptions(l);const{req:d,url:u,timeout:f}=await this.buildRequest(l,{retryCount:c-n});await this.prepareRequest(d,{url:u,options:l});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,y=Date.now();if(ne(this).debug(`[${h}] sending request`,qe({retryOfRequestLogID:r,method:l.method,url:u,options:l,headers:d.headers})),!((a=l.signal)===null||a===void 0)&&a.aborted)throw new Gr;const g=new AbortController,b=await this.fetchWithTimeout(u,d,f,g).catch(Hr),p=Date.now();if(b instanceof globalThis.Error){const v=`retrying, ${n} attempts remaining`;if(!((o=l.signal)===null||o===void 0)&&o.aborted)throw new Gr;const _=Kr(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return ne(this).info(`[${h}] connection ${_?"timed out":"failed"} - ${v}`),ne(this).debug(`[${h}] connection ${_?"timed out":"failed"} (${v})`,qe({retryOfRequestLogID:r,url:u,durationMs:p-y,message:b.message})),this.retryRequest(l,n,r??h);throw ne(this).info(`[${h}] connection ${_?"timed out":"failed"} - error; no more retries left`),ne(this).debug(`[${h}] connection ${_?"timed out":"failed"} (error; no more retries left)`,qe({retryOfRequestLogID:r,url:u,durationMs:p-y,message:b.message})),_?new yo:new zn({cause:b})}const x=`[${h}${m}] ${d.method} ${u} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${p-y}ms`;if(!b.ok){const v=await this.shouldRetry(b);if(n&&v){const S=`retrying, ${n} attempts remaining`;return await Yu(b.body),ne(this).info(`${x} - ${S}`),ne(this).debug(`[${h}] response error (${S})`,qe({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:p-y})),this.retryRequest(l,n,r??h,b.headers)}const _=v?"error; no more retries left":"error; not retryable";ne(this).info(`${x} - ${_}`);const k=await b.text().catch(S=>Hr(S).message),I=Uu(k),N=I?void 0:k;throw ne(this).debug(`[${h}] response error (${_})`,qe({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,message:N,durationMs:Date.now()-y})),this.makeStatusError(b.status,I,N,b.headers)}return ne(this).info(x),ne(this).debug(`[${h}] response start`,qe({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:p-y})),{response:b,options:l,controller:g,requestLogID:h,retryOfRequestLogID:r,startTime:y}}async fetchWithTimeout(t,n,r,s){const a=n||{},{signal:o,method:l}=a,c=Bn(a,["signal","method"]);o&&o.addEventListener("abort",()=>s.abort());const d=setTimeout(()=>s.abort(),r),u=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,f=Object.assign(Object.assign(Object.assign({signal:s.signal},u?{duplex:"half"}:{}),{method:"GET"}),c);l&&(f.method=l.toUpperCase());try{return await this.fetch.call(void 0,t,f)}finally{clearTimeout(d)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r,s){var a;let o;const l=s==null?void 0:s.get("retry-after-ms");if(l){const d=parseFloat(l);Number.isNaN(d)||(o=d)}const c=s==null?void 0:s.get("retry-after");if(c&&!o){const d=parseFloat(c);Number.isNaN(d)?o=Date.parse(c)-Date.now():o=d*1e3}if(!(o&&0<=o&&o<60*1e3)){const d=(a=t.maxRetries)!==null&&a!==void 0?a:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,d)}return await Fu(o),this.makeRequest(t,n-1,r)}calculateDefaultRetryTimeoutMillis(t,n){const a=n-t,o=Math.min(.5*Math.pow(2,a),8),l=1-Math.random()*.25;return o*l*1e3}async buildRequest(t,{retryCount:n=0}={}){var r,s,a;const o=Object.assign({},t),{method:l,path:c,query:d,defaultBaseURL:u}=o,f=this.buildURL(c,d,u);"timeout"in o&&Lu("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:h,body:m}=this.buildBody({options:o}),y=await this.buildHeaders({options:t,method:l,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:y},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(a=o.fetchOptions)!==null&&a!==void 0?a:{}),url:f,timeout:o.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=t.idempotencyKey);const o=await this.authHeaders(t);let l=Dt([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),Gu()),this._options.defaultHeaders,r,t.headers,o]);return this.validateHeaders(l),l.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const r=Dt([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:Vu(t)}:this.encoder({body:t,headers:r})}}Jn.DEFAULT_TIMEOUT=6e4;class Q extends Jn{constructor(){super(...arguments),this.interactions=new Po(this)}}Lo=Q;Q.GeminiNextGenAPIClient=Lo;Q.GeminiNextGenAPIClientError=ue;Q.APIError=ie;Q.APIConnectionError=zn;Q.APIConnectionTimeoutError=yo;Q.APIUserAbortError=Gr;Q.NotFoundError=wo;Q.ConflictError=No;Q.RateLimitError=Io;Q.BadRequestError=vo;Q.AuthenticationError=_o;Q.InternalServerError=So;Q.PermissionDeniedError=Eo;Q.UnprocessableEntityError=ko;Q.toFile=Xu;Q.Interactions=Po;const uh=async e=>{throw new Error("API Key missing")},hh=async(e,t)=>{throw new Error("API Key missing")},fh=async e=>{throw new Error("API Key missing")},mh=({tasks:e,setTasks:t,members:n,teams:r})=>{const[s,a]=T.useState(null),[o,l]=T.useState(!1),[c,d]=T.useState(!1),[u,f]=T.useState("board"),[h,m]=T.useState(""),[y,g]=T.useState({}),[b,p]=T.useState(!1),x=E=>{const j=n.find(O=>O.id===E);return j?`${j.firstName} ${j.lastNameInitial}.`:"Unassigned"},v=E=>{const j=r.find(O=>O.id===E);return j?j.name:"General"},_=E=>{const j=n.find(O=>O.id===E);return j?`${j.firstName[0]}${j.lastNameInitial}`:"?"},k=E=>{a(E),d(!1),l(!0)},I=()=>{var j,O;const E={id:Date.now().toString(),title:"New Task",description:"",status:ut.Backlog,type:Ct.Feature,assignedTo:((j=n[0])==null?void 0:j.id)||"",department:((O=r[0])==null?void 0:O.id)||"",tags:[],checklist:[],timeline:[],createdAt:Date.now()};a(E),d(!0),l(!0)},N=()=>{if(!s)return;const E=e.find(O=>O.id===s.id);let j={...s};if(!c&&E&&E.status!==s.status){const O={id:Date.now().toString(),type:"history",authorId:"System",content:`moved to ${s.status}`,timestamp:Date.now()};j.timeline=[O,...j.timeline]}t(c?[...e,j]:e.map(O=>O.id===j.id?j:O)),l(!1)},C=()=>{var j;if(!h.trim()||!s)return;const E={id:Date.now().toString(),type:"comment",authorId:((j=n[0])==null?void 0:j.id)||"user",content:h,timestamp:Date.now()};a({...s,timeline:[E,...s.timeline]}),m("")},S=E=>{s&&a({...s,timeline:s.timeline.filter(j=>j.id!==E)})},M=async()=>{if(s!=null&&s.description){p(!0);try{const E=await fh(s.description);a({...s,description:s.description+`

**AI Summary:**
`+E})}catch{alert("AI Error. Check API Key.")}finally{p(!1)}}},R=E=>{g(j=>({...j,[E]:!j[E]}))},z=()=>i.jsx("div",{className:"flex flex-col md:flex-row gap-4 h-full md:pb-4 overflow-y-auto md:overflow-x-auto",children:ea.map(E=>{const j=y[E];return i.jsxs("div",{className:`bg-slate-100 dark:bg-slate-800 rounded-xl flex flex-col flex-shrink-0 transition-all ${j?"md:w-12 h-auto":"md:w-[280px] md:h-full"}`,children:[i.jsxs("div",{className:"p-3 font-semibold text-slate-600 dark:text-slate-300 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center cursor-pointer md:cursor-default",onClick:()=>{window.innerWidth<768&&R(E)},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"md:hidden",children:j?i.jsx(Vl,{size:16}):i.jsx(Gl,{size:16})}),i.jsx("span",{className:j?"md:hidden":"",children:E})]}),i.jsx("span",{className:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs px-2 py-1 rounded-full",children:e.filter(O=>O.status===E).length})]}),i.jsx("div",{className:`flex-1 overflow-y-auto p-2 space-y-2 transition-all ${j?"hidden":"block"} min-h-[50px] md:min-h-0`,children:e.filter(O=>O.status===E).map(O=>i.jsxs("div",{onClick:()=>k(O),className:"bg-white dark:bg-slate-700 p-3 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 cursor-pointer hover:shadow-md transition group relative",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded ${O.type===Ct.Bug?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:O.type}),i.jsx("div",{className:"text-xs text-slate-400 dark:text-slate-500",children:new Date(O.createdAt).toLocaleDateString()})]}),i.jsx("h4",{className:"font-medium text-slate-800 dark:text-slate-200 mb-1",children:O.title||"Untitled"}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:v(O.department)}),O.dueDate&&i.jsxs("span",{className:"flex items-center gap-1 text-orange-600 dark:text-orange-400",children:[i.jsx(Jl,{size:10}),new Date(O.dueDate).toLocaleDateString()]}),i.jsx("div",{className:"flex-1"}),O.assignedTo&&i.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-300 flex items-center justify-center font-bold text-[10px] border border-orange-200 dark:border-orange-800",children:_(O.assignedTo)})]})]},O.id))})]},E)})}),Y=()=>i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left text-sm text-slate-600 dark:text-slate-300 min-w-[600px]",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 text-xs uppercase font-bold text-slate-500 dark:text-slate-400",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4",children:"Title"}),i.jsx("th",{className:"p-4",children:"Type"}),i.jsx("th",{className:"p-4",children:"Status"}),i.jsx("th",{className:"p-4",children:"Assigned"}),i.jsx("th",{className:"p-4",children:"Due Date"}),i.jsx("th",{className:"p-4",children:"Created"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:e.map(E=>i.jsxs("tr",{onClick:()=>k(E),className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition",children:[i.jsx("td",{className:"p-4 font-medium text-slate-900 dark:text-white",children:E.title||"Untitled"}),i.jsx("td",{className:"p-4",children:i.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded ${E.type===Ct.Bug?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:E.type})}),i.jsx("td",{className:"p-4",children:E.status}),i.jsx("td",{className:"p-4",children:x(E.assignedTo)}),i.jsx("td",{className:"p-4",children:E.dueDate?new Date(E.dueDate).toLocaleDateString():"-"}),i.jsx("td",{className:"p-4 text-slate-400",children:new Date(E.createdAt).toLocaleDateString()})]},E.id))})]})}),B=()=>{const E=e.filter(j=>j.dueDate).sort((j,O)=>(j.dueDate||0)-(O.dueDate||0));return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 overflow-y-auto",children:[i.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"Upcoming Deadlines"}),E.length===0?i.jsx("div",{className:"text-center text-slate-400 py-10",children:"No tasks with due dates found."}):i.jsx("div",{className:"space-y-6",children:E.map(j=>i.jsxs("div",{onClick:()=>k(j),className:"flex items-center gap-4 p-4 border border-slate-100 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition",children:[i.jsxs("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg flex flex-col items-center min-w-[60px]",children:[i.jsx("span",{className:"text-xs uppercase font-bold",children:new Date(j.dueDate).toLocaleString("default",{month:"short"})}),i.jsx("span",{className:"text-xl font-bold",children:new Date(j.dueDate).getDate()})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:j.title}),i.jsxs("div",{className:"flex gap-2 text-xs text-slate-500 dark:text-slate-400 mt-1",children:[i.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:j.status}),i.jsx("span",{children:""}),i.jsx("span",{children:x(j.assignedTo)})]})]})]},j.id))})]})};return i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 px-4 gap-4",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white self-start md:self-auto",children:"Sprint Planning"}),i.jsxs("div",{className:"flex flex-row items-center gap-3 w-full md:w-auto",children:[i.jsxs("div",{className:"flex items-center gap-1 bg-slate-200 dark:bg-slate-700 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>f("board"),className:`p-2 rounded-md transition ${u==="board"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:i.jsx(wc,{size:18})}),i.jsx("button",{onClick:()=>f("list"),className:`p-2 rounded-md transition ${u==="list"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:i.jsx(cc,{size:18})}),i.jsx("button",{onClick:()=>f("calendar"),className:`p-2 rounded-md transition ${u==="calendar"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:i.jsx(Fl,{size:18})})]}),i.jsxs("button",{onClick:I,className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition",children:[i.jsx(Lt,{size:20})," New Item"]})]})]}),i.jsxs("div",{className:"flex-1 overflow-hidden px-4",children:[u==="board"&&i.jsx(z,{}),u==="list"&&i.jsx(Y,{}),u==="calendar"&&i.jsx(B,{})]}),o&&s&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[i.jsxs("div",{className:"flex-1 mr-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-1 block",children:"Task Title"}),i.jsx("input",{value:s.title,onChange:E=>a({...s,title:E.target.value}),placeholder:"Task Title",className:"text-xl font-bold bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-600 rounded-lg p-2 focus:ring-2 focus:ring-orange-500 w-full placeholder-slate-400 dark:placeholder-slate-500 text-slate-900 dark:text-white"})]}),i.jsxs("button",{onClick:()=>l(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 bg-slate-100 dark:bg-slate-700 p-2 rounded-full",children:[i.jsx("span",{className:"sr-only",children:"Close"}),""]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Status"}),i.jsx("select",{value:s.status,onChange:E=>a({...s,status:E.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:ea.map(E=>i.jsx("option",{value:E,children:E},E))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Assigned To"}),i.jsxs("select",{value:s.assignedTo,onChange:E=>a({...s,assignedTo:E.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:[i.jsx("option",{value:"",children:"Unassigned"}),n.map(E=>i.jsxs("option",{value:E.id,children:[E.firstName," ",E.lastNameInitial,"."]},E.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Type"}),i.jsxs("select",{value:s.type,onChange:E=>a({...s,type:E.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:[i.jsx("option",{value:Ct.Feature,children:"Feature"}),i.jsx("option",{value:Ct.Bug,children:"Bug"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Team"}),i.jsx("select",{value:s.department,onChange:E=>a({...s,department:E.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:r.map(E=>i.jsx("option",{value:E.id,children:E.name},E.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Due Date"}),i.jsx("input",{type:"date",value:s.dueDate?new Date(s.dueDate).toISOString().substr(0,10):"",onChange:E=>a({...s,dueDate:E.target.valueAsNumber}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Description / Notes"}),i.jsxs("button",{onClick:M,disabled:b,className:"text-xs flex items-center gap-1 text-orange-600 dark:text-orange-400 hover:text-orange-700 font-medium",children:[b?i.jsx(jn,{className:"animate-spin",size:14}):i.jsx(yc,{size:14}),"AI Summarize"]})]}),i.jsx("textarea",{value:s.description,onChange:E=>a({...s,description:E.target.value}),className:"w-full h-32 p-3 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Describe the task, paste meeting minutes, or log bug details..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Checklist"}),i.jsxs("div",{className:"space-y-2",children:[s.checklist.map((E,j)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:E.completed,onChange:O=>{const oe=[...s.checklist];oe[j].completed=O.target.checked,a({...s,checklist:oe})},className:"rounded text-orange-600 focus:ring-orange-500"}),i.jsx("input",{type:"text",value:E.text,onChange:O=>{const oe=[...s.checklist];oe[j].text=O.target.value,a({...s,checklist:oe})},className:"flex-1 text-sm border-none bg-transparent focus:ring-0 text-slate-900 dark:text-white"}),i.jsx("button",{onClick:()=>{const O=s.checklist.filter((oe,Ve)=>Ve!==j);a({...s,checklist:O})},className:"text-slate-400 hover:text-red-500",children:""})]},j)),i.jsx("button",{onClick:()=>a({...s,checklist:[...s.checklist,{id:Date.now().toString(),text:"New Item",completed:!1}]}),className:"text-sm text-blue-600 dark:text-blue-400 font-medium hover:underline",children:"+ Add Checklist Item"})]})]}),i.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-6",children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Activity & Comments"}),i.jsxs("div",{className:"flex gap-2 mb-6",children:[i.jsx("input",{type:"text",value:h,onChange:E=>m(E.target.value),placeholder:"Add a comment...",className:"flex-1 border rounded-lg px-3 py-2 text-sm bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white",onKeyDown:E=>E.key==="Enter"&&C()}),i.jsx("button",{onClick:C,className:"bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700",children:i.jsx(Cc,{size:18})})]}),i.jsx("div",{className:"space-y-4 max-h-48 overflow-y-auto",children:s.timeline.map(E=>i.jsxs("div",{className:"flex gap-3 text-sm",children:[i.jsx("div",{className:"mt-1 w-6 h-6 rounded-full bg-slate-200 dark:bg-slate-600 flex items-center justify-center text-xs font-bold text-slate-600 dark:text-slate-300 flex-shrink-0",children:E.authorId==="System"?"S":_(E.authorId)}),i.jsxs("div",{className:"flex-1 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-r-lg rounded-bl-lg",children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:E.authorId==="System"?"System":x(E.authorId)}),i.jsx("span",{className:"text-xs text-slate-400",children:new Date(E.timestamp).toLocaleDateString()})]}),i.jsx("div",{className:E.type==="history"?"italic text-slate-500":"text-slate-800 dark:text-slate-300",children:E.content}),E.type==="comment"&&i.jsx("div",{className:"flex justify-end mt-1",children:i.jsxs("button",{onClick:()=>S(E.id),className:"text-xs text-red-400 hover:text-red-600 flex items-center gap-1",children:[i.jsx(It,{size:10})," Delete"]})})]})]},E.id))})]})]}),i.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 flex justify-end gap-3 bg-slate-50 dark:bg-slate-900/50",children:[i.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 font-medium",children:"Cancel"}),i.jsx("button",{onClick:N,className:"px-6 py-2 rounded-lg bg-orange-600 text-white font-medium hover:bg-orange-700 shadow-sm",children:"Save Task"})]})]})})]})},ph=()=>{const[e,t]=T.useState([]),[n,r]=T.useState(!1),[s,a]=T.useState({hasAutonomous:!1,autoScore:0,intakeType:"No Intake",autoAim:!1,farShooting:!1,shotsTaken:0,shotsMissed:0,parking:"No Park",rating:3,endGameNotes:""}),o=()=>{if(!s.teamNumber)return;const d={id:Date.now().toString(),teamNumber:s.teamNumber||"",matchNumber:s.matchNumber||0,hasAutonomous:s.hasAutonomous||!1,autoScore:s.autoScore||0,intakeType:s.intakeType||"No Intake",autoAim:s.autoAim||!1,farShooting:s.farShooting||!1,shotsTaken:s.shotsTaken||0,shotsMissed:s.shotsMissed||0,parking:s.parking||"No Park",endGameNotes:s.endGameNotes||"",rating:s.rating||3};t([d,...e]),r(!1),l()},l=()=>{a({hasAutonomous:!1,autoScore:0,intakeType:"No Intake",autoAim:!1,farShooting:!1,shotsTaken:0,shotsMissed:0,parking:"No Park",rating:3,endGameNotes:""})},c=(d,u)=>{a(f=>({...f,[d]:Math.max(0,(f[d]||0)+u)}))};return i.jsxs("div",{className:"h-full flex flex-col max-w-5xl mx-auto w-full p-4 md:p-6",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Team Scouting Reports"}),i.jsxs("button",{onClick:()=>r(!0),className:"bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-orange-700 transition shadow-sm",children:[i.jsx(Lt,{size:20})," Scout Match"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.map(d=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("div",{children:i.jsxs("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:["#",d.teamNumber]})}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-bold text-slate-600 dark:text-slate-300",children:["Match ",d.matchNumber]})]}),i.jsxs("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-300 mb-4",children:[i.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[i.jsx("span",{children:"Autonomous"}),i.jsx("span",{className:d.hasAutonomous?"text-green-600 dark:text-green-400 font-bold":"text-slate-400",children:d.hasAutonomous?`${d.autoScore} pts`:"No"})]}),i.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[i.jsx("span",{children:"Intake"}),i.jsx("span",{className:"font-medium",children:d.intakeType})]}),i.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[i.jsx("span",{children:"Shooting"}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{children:[d.shotsTaken," / ",d.shotsTaken+d.shotsMissed," Hits"]}),i.jsxs("div",{className:"text-xs text-slate-400",children:[d.farShooting&&"Far ",d.autoAim&&"Auto-Aim"]})]})]}),i.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[i.jsx("span",{children:"Parking"}),i.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:d.parking})]})]}),i.jsx("div",{className:"flex items-center gap-1 text-yellow-500 mb-2",children:[...Array(5)].map((u,f)=>i.jsx(Kc,{size:14,fill:f<d.rating?"currentColor":"none",className:f<d.rating?"":"text-slate-300 dark:text-slate-600"},f))}),d.endGameNotes&&i.jsxs("p",{className:"text-xs bg-slate-50 dark:bg-slate-700 p-2 rounded text-slate-500 dark:text-slate-300 italic",children:['"',d.endGameNotes,'"']})]},d.id)),e.length===0&&i.jsx("div",{className:"col-span-full text-center py-12 text-slate-400 bg-slate-50 dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:'No scouting data yet. Click "Scout Match" to begin.'})]})]}),n&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh] shadow-2xl",children:[i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 font-bold text-lg text-slate-900 dark:text-white",children:"New Scouting Report"}),i.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Team #"}),i.jsx("input",{type:"text",className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.teamNumber||"",onChange:d=>a({...s,teamNumber:d.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Match #"}),i.jsx("input",{type:"number",className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.matchNumber||"",onChange:d=>a({...s,matchNumber:parseInt(d.target.value)})})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-3",children:[i.jsx("h4",{className:"font-bold text-slate-700 dark:text-white text-sm",children:"Autonomous"}),i.jsxs("label",{className:"flex items-center gap-3 text-slate-800 dark:text-white",children:[i.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded text-orange-600",checked:s.hasAutonomous,onChange:d=>a({...s,hasAutonomous:d.target.checked})}),i.jsx("span",{className:"font-medium",children:"Has Autonomous"})]}),s.hasAutonomous&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Auto Score"}),i.jsx("input",{type:"number",className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.autoScore,onChange:d=>a({...s,autoScore:parseInt(d.target.value)})})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-3",children:[i.jsx("h4",{className:"font-bold text-slate-700 dark:text-white text-sm",children:"TeleOp"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1 block",children:"Intake Type"}),i.jsxs("select",{className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.intakeType,onChange:d=>a({...s,intakeType:d.target.value}),children:[i.jsx("option",{children:"No Intake"}),i.jsx("option",{children:"Human Player"}),i.jsx("option",{children:"Automatic"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("label",{className:"flex items-center gap-2 text-slate-800 dark:text-white text-sm",children:[i.jsx("input",{type:"checkbox",checked:s.autoAim,onChange:d=>a({...s,autoAim:d.target.checked})}),"Auto Aim"]}),i.jsxs("label",{className:"flex items-center gap-2 text-slate-800 dark:text-white text-sm",children:[i.jsx("input",{type:"checkbox",checked:s.farShooting,onChange:d=>a({...s,farShooting:d.target.checked})}),"Far Shooting"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:"Shots Taken"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>c("shotsTaken",-1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:i.jsx(js,{size:14})}),i.jsx("span",{className:"flex-1 text-center font-mono font-bold text-lg dark:text-white",children:s.shotsTaken}),i.jsx("button",{onClick:()=>c("shotsTaken",1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:i.jsx(Lt,{size:14})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:"Shots Missed"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>c("shotsMissed",-1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:i.jsx(js,{size:14})}),i.jsx("span",{className:"flex-1 text-center font-mono font-bold text-lg dark:text-white",children:s.shotsMissed}),i.jsx("button",{onClick:()=>c("shotsMissed",1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:i.jsx(Lt,{size:14})})]})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-3",children:[i.jsx("h4",{className:"font-bold text-slate-700 dark:text-white text-sm",children:"End Game"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:"Parking"}),i.jsxs("select",{className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.parking,onChange:d=>a({...s,parking:d.target.value}),children:[i.jsx("option",{children:"No Park"}),i.jsx("option",{children:"Partial Park"}),i.jsx("option",{children:"Full Park"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Driver Rating (1-5)"}),i.jsx("input",{type:"range",min:"1",max:"5",className:"w-full accent-orange-600",value:s.rating||3,onChange:d=>a({...s,rating:parseInt(d.target.value)})}),i.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[i.jsx("span",{children:"Novice"}),i.jsx("span",{children:"Expert"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Notes"}),i.jsx("textarea",{className:"w-full border dark:border-slate-600 rounded p-2 h-20 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.endGameNotes||"",onChange:d=>a({...s,endGameNotes:d.target.value})})]})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded",children:"Cancel"}),i.jsx("button",{onClick:o,className:"px-6 py-2 bg-orange-600 text-white rounded font-medium hover:bg-orange-700",children:"Save Report"})]})]})})]})},gh=()=>{const[e,t]=T.useState(Su),[n,r]=T.useState(!1),[s,a]=T.useState(""),o=f=>{n||t(e.map(h=>h.id===f?{...h,checked:!h.checked}:h))},l=()=>{t(e.map(f=>({...f,checked:!1})))},c=()=>{s.trim()&&(t([...e,{id:Date.now().toString(),text:s.trim(),checked:!1}]),a(""))},d=f=>{t(e.filter(h=>h.id!==f))},u=(f,h)=>{t(e.map(m=>m.id===f?{...m,assignedTo:h}:m))};return i.jsx("div",{className:"h-full flex flex-col max-w-3xl mx-auto w-full p-4 md:p-6",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Pre-Match Checks"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Reset this list before every match."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>r(!n),className:`p-2 rounded-full transition ${n?"bg-orange-100 text-orange-600":"text-slate-500 hover:text-slate-900 hover:bg-slate-200 dark:text-slate-400 dark:hover:bg-slate-700"}`,title:"Edit Checklist",children:i.jsx(Lc,{size:20})}),i.jsx("button",{onClick:l,className:"text-slate-500 hover:text-orange-600 p-2 rounded-full hover:bg-orange-50 dark:text-slate-400 dark:hover:bg-slate-700 transition",title:"Reset Checklist",children:i.jsx(Tc,{size:20})})]})]}),i.jsxs("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 overflow-y-auto flex-1",children:[e.map(f=>i.jsxs("div",{className:`p-4 flex items-center gap-4 transition ${f.checked?"bg-green-50/50 dark:bg-green-900/20":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsx("div",{className:"cursor-pointer flex-shrink-0",onClick:()=>o(f.id),children:!n&&i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition ${f.checked?"bg-green-500 border-green-500 text-white":"border-slate-300 dark:border-slate-500 text-transparent"}`,children:i.jsx(ql,{size:16,fill:"currentColor",className:f.checked?"text-white":""})})}),i.jsx("span",{onClick:()=>o(f.id),className:`text-lg font-medium flex-1 cursor-pointer transition ${f.checked?"text-slate-400 line-through dark:text-slate-500":"text-slate-700 dark:text-slate-200"}`,children:f.text}),n&&i.jsx("div",{className:"relative",children:i.jsxs("select",{className:"text-xs border border-slate-200 dark:border-slate-600 rounded p-1 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 max-w-[120px]",value:f.assignedTo||"",onChange:h=>u(f.id,h.target.value),children:[i.jsx("option",{value:"",children:"Anyone"}),i.jsx("optgroup",{label:"Teams",children:Iu.map(h=>i.jsx("option",{value:h.name,children:h.name},h.id))}),i.jsx("optgroup",{label:"Members",children:ku.map(h=>i.jsxs("option",{value:h.firstName,children:[h.firstName," ",h.lastNameInitial,"."]},h.id))})]})}),!n&&f.assignedTo&&i.jsx("span",{className:"text-xs bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 px-2 py-1 rounded flex-shrink-0",children:f.assignedTo}),n&&i.jsx("button",{onClick:h=>{h.stopPropagation(),d(f.id)},className:"text-red-500 hover:text-red-700 p-2",children:i.jsx(It,{size:18})})]},f.id)),n&&i.jsxs("div",{className:"p-4 flex gap-2 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("input",{type:"text",value:s,onChange:f=>a(f.target.value),onKeyDown:f=>f.key==="Enter"&&c(),placeholder:"Add new item...",className:"flex-1 border rounded px-3 py-2 bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white"}),i.jsx("button",{onClick:c,className:"bg-orange-600 text-white px-4 py-2 rounded font-bold",children:"Add"})]})]})]})})},bh=()=>{const e=T.useRef(null),[t,n]=T.useState("#ef4444"),[r,s]=T.useState("draw"),{matchPlans:a,addMatchPlan:o,deleteMatchPlan:l}=ls(),[c,d]=T.useState([]),[u,f]=T.useState(""),[h,m]=T.useState(""),[y,g]=T.useState(""),[b,p]=T.useState(!1),[x,v]=T.useState(!1),[_,k]=T.useState(!1),[I,N]=T.useState(!1),[C,S]=T.useState(""),M=()=>{o({title:C||`Match Plan ${new Date().toLocaleString()}`,drawingData:c,notes:y,allianceTeam:h,partnerAutonomous:b,partnerPark:x}),k(!1),S(""),alert("Plan saved!")},R=E=>{d(E.drawingData),m(E.allianceTeam),g(E.notes),p(E.partnerAutonomous),v(E.partnerPark),N(!1)};T.useEffect(()=>{if(!e.current)return;const E=ln(e.current),j=Yo().on("start",function(O){ln(this).raise().attr("stroke","white").attr("stroke-width",3)}).on("drag",function(O){r==="drag"&&ln(this).attr("cx",O.x).attr("cy",O.y)}).on("end",function(O){ln(this).attr("stroke","white").attr("stroke-width",2)});E.selectAll(".draggable-robot").call(j)},[r]);const z=E=>{if(r!=="draw")return;const j=e.current;if(!j)return;const O=j.createSVGPoint();O.x=E.nativeEvent.offsetX,O.y=E.nativeEvent.offsetY,f(`M ${O.x} ${O.y}`),j.setPointerCapture(E.pointerId)},Y=E=>{r!=="draw"||!u||f(j=>`${j} L ${E.nativeEvent.offsetX} ${E.nativeEvent.offsetY}`)},B=E=>{r!=="draw"||!u||(d([...c,{d:u,stroke:t,width:3}]),f(""),e.current&&e.current.releasePointerCapture(E.pointerId))};return i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:h-full h-auto lg:overflow-hidden overflow-visible",children:[i.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col overflow-hidden relative min-h-[500px] lg:min-h-0",children:[i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-2 flex items-center justify-between border-b border-slate-200 dark:border-slate-600",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>s("draw"),className:`p-2 rounded ${r==="draw"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:i.jsx(kc,{size:18})}),i.jsx("div",{className:"h-8 w-px bg-slate-300 dark:bg-slate-600 mx-1"}),i.jsx("button",{onClick:()=>n("#ef4444"),className:`w-6 h-6 rounded-full bg-red-500 border-2 ${t==="#ef4444"?"border-slate-800 dark:border-white":"border-transparent"}`}),i.jsx("button",{onClick:()=>n("#3b82f6"),className:`w-6 h-6 rounded-full bg-blue-500 border-2 ${t==="#3b82f6"?"border-slate-800 dark:border-white":"border-transparent"}`}),i.jsx("button",{onClick:()=>n("#22c55e"),className:`w-6 h-6 rounded-full bg-green-500 border-2 ${t==="#22c55e"?"border-slate-800 dark:border-white":"border-transparent"}`}),i.jsx("button",{onClick:()=>n("#facc15"),className:`w-6 h-6 rounded-full bg-yellow-400 border-2 ${t==="#facc15"?"border-slate-800 dark:border-white":"border-transparent"}`})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{const E=[...c];E.pop(),d(E)},className:"p-2 text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white hover:bg-slate-200 dark:hover:bg-slate-600 rounded",title:"Undo",children:i.jsx(Gc,{size:18})}),i.jsx("button",{onClick:()=>d([]),className:"p-2 text-slate-500 dark:text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",title:"Clear",children:i.jsx(It,{size:18})}),i.jsx("div",{className:"h-8 w-px bg-slate-300 dark:bg-slate-600 mx-1"}),i.jsx("button",{onClick:()=>N(!0),className:"p-2 text-slate-500 dark:text-slate-400 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/30 rounded",title:"Load Plans",children:i.jsx(nc,{size:18})}),i.jsx("button",{onClick:()=>k(!0),className:"p-2 text-slate-500 dark:text-slate-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/30 rounded",title:"Save Plan",children:i.jsx(jc,{size:18})})]})]}),i.jsxs("div",{className:"relative flex-1 bg-slate-900 overflow-hidden cursor-crosshair",children:[i.jsx("img",{src:Tu,className:"absolute inset-0 w-full h-full object-contain opacity-50 pointer-events-none select-none",alt:"Field"}),i.jsxs("svg",{ref:e,className:"absolute inset-0 w-full h-full z-10 touch-none",onPointerDown:z,onPointerMove:Y,onPointerUp:B,onPointerCancel:B,onPointerLeave:B,children:[c.map((E,j)=>i.jsx("path",{d:E.d,stroke:E.stroke,strokeWidth:E.width,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},j)),u&&i.jsx("path",{d:u,stroke:t,strokeWidth:3,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("circle",{className:"draggable-robot cursor-move",cx:"50",cy:"50",r:"15",fill:"#ef4444",stroke:"white",strokeWidth:"2"}),i.jsx("circle",{className:"draggable-robot cursor-move",cx:"90",cy:"50",r:"15",fill:"#3b82f6",stroke:"white",strokeWidth:"2"})]})]})]}),i.jsxs("div",{className:"w-full lg:w-80 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-4 flex flex-col",children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Match Notes"}),i.jsxs("div",{className:"space-y-4 flex-1",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Alliance Partner"}),i.jsx("input",{type:"text",value:h,onChange:E=>m(E.target.value),placeholder:"Team # / Name",className:"w-full p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Our Strategy"}),i.jsx("textarea",{value:y,onChange:E=>g(E.target.value),className:"w-full h-32 p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm resize-none text-slate-900 dark:text-white",placeholder:`1. Autonomous path...
2. TeleOp focus...`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Partner Capabilities"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("label",{className:"flex items-center gap-2 p-2 border border-slate-200 dark:border-slate-600 rounded bg-slate-50 dark:bg-slate-700 text-xs text-slate-800 dark:text-slate-200",children:[i.jsx("input",{type:"checkbox",checked:b,onChange:E=>p(E.target.checked)})," Autonomous"]}),i.jsxs("label",{className:"flex items-center gap-2 p-2 border border-slate-200 dark:border-slate-600 rounded bg-slate-50 dark:bg-slate-700 text-xs text-slate-800 dark:text-slate-200",children:[i.jsx("input",{type:"checkbox",checked:x,onChange:E=>v(E.target.checked)})," Lifted Park"]})]})]})]})]}),_&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 w-full max-w-sm",children:[i.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900 dark:text-white",children:"Save Match Plan"}),i.jsx("input",{autoFocus:!0,type:"text",placeholder:"Plan Name (e.g. Match 1)",value:C,onChange:E=>S(E.target.value),onKeyDown:E=>E.key==="Enter"&&M(),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded mb-4 bg-white dark:bg-slate-700 text-slate-900 dark:text-white"}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300",children:"Cancel"}),i.jsx("button",{onClick:M,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Save"})]})]})}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 w-full max-w-md max-h-[80vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Saved Plans"}),i.jsx("button",{onClick:()=>N(!1),children:i.jsx(Ri,{})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:a.length===0?i.jsx("div",{className:"text-center text-slate-500 py-8",children:"No saved plans found."}):a.map(E=>i.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsxs("div",{className:"cursor-pointer flex-1",onClick:()=>R(E),children:[i.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:E.title}),i.jsxs("div",{className:"text-xs text-slate-500",children:[new Date(E.updatedAt).toLocaleDateString(),"  ",E.allianceTeam||"No Team"]})]}),i.jsx("button",{onClick:()=>{l(E.id)},className:"p-2 text-red-400 hover:text-red-600",children:i.jsx(It,{size:16})})]},E.id))})]})})]})},hi=({tasks:e,view:t})=>{const[n,r]=T.useState(""),[s,a]=T.useState([]),[o,l]=T.useState(!1),[c,d]=T.useState(null),[u,f]=T.useState("done"),[h,m]=T.useState(""),[y,g]=T.useState(""),b=async()=>{l(!0);const v=u==="done"?e.filter(_=>_.status==="Done"):e;try{const _=await uh(v);r(_)}catch{alert("Error generating portfolio. Please check your API Key configuration.")}finally{l(!1)}},p=async()=>{l(!0);try{const _=await hh(n||"We built a great robot that has a high scoring autonomous and durable drivetrain.",h);_&&_.length>0?a(_):a([{question:"Describe your robot's drivetrain.",answer:"We use a mecanum drivetrain for omnidirectional movement."},{question:"What was your biggest challenge?",answer:"Our biggest challenge was consistent intake, which we solved with a compliant wheel system."},{question:"How did you use sensors?",answer:"We use odometry pods for precise localization during autonomous."}])}catch{alert("Error generating questions. Showing demo questions instead."),a([{question:"Describe your robot's drivetrain.",answer:"We use a mecanum drivetrain for omnidirectional movement."},{question:"What was your biggest challenge?",answer:"Our biggest challenge was consistent intake, which we solved with a compliant wheel system."}])}finally{l(!1)}},x=v=>{var k;const _=(k=v.target.files)==null?void 0:k[0];if(_){g(_.name);const I=new FileReader;I.onload=N=>{var C;(C=N.target)!=null&&C.result&&m(N.target.result)},I.readAsText(_)}};return i.jsx("div",{className:"h-full flex flex-col p-4 md:p-6 max-w-5xl mx-auto w-full",children:i.jsxs("div",{className:"flex-1 overflow-y-auto",children:[t==="portfolio"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 h-full",children:[i.jsx("div",{className:"md:col-span-1 space-y-4",children:i.jsxs("div",{className:"bg-orange-50 dark:bg-slate-800 p-4 rounded-xl border border-orange-100 dark:border-slate-700",children:[i.jsx("h3",{className:"font-bold text-orange-900 dark:text-orange-400 mb-2",children:"Portfolio Helper"}),i.jsx("p",{className:"text-sm text-orange-800/80 dark:text-slate-300 mb-4",children:"The AI analyzes your tasks to create a summary of your season's technical achievements."}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-2",children:"Include Tasks"}),i.jsxs("div",{className:"flex bg-white dark:bg-slate-900 rounded-lg p-1 border border-orange-100 dark:border-slate-600",children:[i.jsx("button",{onClick:()=>f("done"),className:`flex-1 py-1 text-xs font-medium rounded transition ${u==="done"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:"Completed Only"}),i.jsx("button",{onClick:()=>f("all"),className:`flex-1 py-1 text-xs font-medium rounded transition ${u==="all"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:"All Tasks"})]})]}),i.jsxs("div",{className:"text-xs text-orange-800/60 dark:text-slate-400 font-mono bg-white/50 dark:bg-slate-900/50 p-2 rounded mb-4",children:["Tasks Analyzed: ",u==="done"?e.filter(v=>v.status==="Done").length:e.length]}),i.jsxs("button",{onClick:b,disabled:o,className:"w-full bg-orange-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-orange-700 transition flex justify-center items-center gap-2",children:[o?i.jsx(jn,{className:"animate-spin",size:18}):i.jsx(Ds,{size:18}),"Generate Summary"]})]})}),i.jsxs("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 h-full flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Generated Content"}),n&&i.jsxs("button",{className:"text-xs flex items-center gap-1 text-slate-500 dark:text-slate-400 hover:text-slate-900",children:[i.jsx(ec,{size:14})," Copy MD"]})]}),i.jsx("div",{className:"flex-1 bg-slate-50 dark:bg-slate-900 rounded-lg p-4 font-mono text-sm text-slate-700 dark:text-slate-300 overflow-y-auto whitespace-pre-wrap leading-relaxed border border-slate-100 dark:border-slate-700",children:n||i.jsx("span",{className:"text-slate-400 italic",children:"Content will appear here..."})})]})]}),t==="judging"&&i.jsx("div",{className:"h-full flex flex-col",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2",children:"Study Guide & Context"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-4",children:"Upload a text file/PDF or paste content to help the AI ask better questions."}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[i.jsx("div",{className:"flex-1 relative",children:i.jsx("textarea",{className:"w-full h-24 p-3 text-sm border rounded-lg bg-slate-50 dark:bg-slate-900 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white resize-none",placeholder:"Paste technical info, robot specs, or outreach details here...",value:h,onChange:v=>m(v.target.value)})}),i.jsxs("div",{className:"w-full md:w-48 flex flex-col justify-center items-center border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-900 hover:bg-slate-100 dark:hover:bg-slate-800 transition cursor-pointer relative py-4 md:py-0",children:[i.jsx("input",{type:"file",onChange:x,className:"absolute inset-0 opacity-0 cursor-pointer",accept:".txt,.md,.json"}),i.jsx(Xl,{className:"text-slate-400 mb-2"}),i.jsx("span",{className:"text-xs text-slate-500 font-medium text-center px-2",children:y||"Upload .txt"})]})]}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:p,disabled:o,className:"bg-orange-600 text-white py-2 px-6 rounded-lg text-sm font-medium hover:bg-orange-700 transition flex items-center gap-2 shadow-sm",children:[o?i.jsx(jn,{className:"animate-spin",size:16}):i.jsx(Ds,{size:16}),"Generate Questions"]})})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 pb-6",children:[s.length===0&&!o&&i.jsx("div",{className:"col-span-full text-center py-10 text-slate-400 italic",children:"No flashcards yet. Add context and click Generate."}),s.map((v,_)=>i.jsx("div",{className:"h-64 perspective-1000 cursor-pointer group",onClick:()=>d(c===_?null:_),children:i.jsxs("div",{className:`relative w-full h-full transition-all duration-500 transform-style-3d ${c===_?"rotate-y-180":""}`,children:[i.jsxs("div",{className:"absolute w-full h-full bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-700 p-6 flex flex-col items-center justify-center text-center backface-hidden shadow-sm group-hover:border-orange-200 dark:group-hover:border-slate-500",children:[i.jsxs("span",{className:"text-xs uppercase font-bold text-orange-600 dark:text-orange-400 mb-2",children:["Question ",_+1]}),i.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-100 select-none",children:v.question}),i.jsxs("div",{className:"mt-4 text-xs text-slate-400 flex items-center gap-1",children:["Click to reveal answer ",i.jsx(pr,{size:12})]})]}),i.jsxs("div",{className:"absolute w-full h-full bg-slate-800 dark:bg-slate-900 rounded-xl p-6 flex flex-col items-center justify-center text-center backface-hidden rotate-y-180 shadow-xl border border-slate-700",children:[i.jsx("span",{className:"text-xs uppercase font-bold text-slate-400 mb-2",children:"Suggested Answer"}),i.jsx("p",{className:"text-slate-200 dark:text-slate-300 text-sm leading-relaxed select-none",children:v.answer})]})]})},_))]})]})})]})})},xh=({members:e,setMembers:t,teams:n,setTeams:r})=>{const[s,a]=T.useState(""),[o,l]=T.useState(""),[c,d]=T.useState(""),[u,f]=T.useState(null),h=()=>{if(s.trim()&&o.trim().length===1){const p={id:Date.now().toString(),firstName:s.trim(),lastNameInitial:o.trim().toUpperCase()};t([...e,p]),a(""),l("")}else alert("Please provide a First Name and a single letter Last Initial.")},m=p=>{t(e.filter(x=>x.id!==p)),r(n.map(x=>({...x,memberIds:x.memberIds.filter(v=>v!==p)})))},y=()=>{if(c.trim()){const p={id:Date.now().toString(),name:c.trim(),memberIds:[]};r([...n,p]),d("")}},g=p=>{r(n.filter(x=>x.id!==p))},b=(p,x)=>{r(n.map(v=>{if(v.id!==p)return v;const _=v.memberIds.includes(x);return{...v,memberIds:_?v.memberIds.filter(k=>k!==x):[...v.memberIds,x]}}))};return i.jsxs("div",{className:"p-6 max-w-6xl mx-auto w-full h-full overflow-y-auto",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6",children:"Admin Settings"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-slate-100 dark:border-slate-700 pb-2",children:[i.jsx(zc,{className:"text-orange-600",size:24}),i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Team Roster"})]}),i.jsxs("div",{className:"flex gap-2 mb-4 items-end",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"First Name"}),i.jsx("input",{type:"text",value:s,onChange:p=>a(p.target.value),placeholder:"e.g. Abby",className:"w-full p-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{className:"w-20",children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"Last Init."}),i.jsx("input",{type:"text",value:o,maxLength:1,onChange:p=>l(p.target.value),placeholder:"B",className:"w-full p-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white text-center",onKeyDown:p=>p.key==="Enter"&&h()})]}),i.jsx("button",{onClick:h,className:"bg-orange-600 text-white p-2.5 rounded-lg hover:bg-orange-700 transition mb-[1px]",children:i.jsx(Vc,{size:20})})]}),i.jsx("ul",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:e.map(p=>i.jsxs("li",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg group hover:bg-slate-100 dark:hover:bg-slate-700 transition",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-600 flex items-center justify-center font-bold text-slate-600 dark:text-slate-300 text-xs",children:[p.firstName[0],p.lastNameInitial]}),i.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:[p.firstName," ",p.lastNameInitial,"."]})]}),i.jsx("button",{onClick:()=>m(p.id),className:"text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition",children:i.jsx(It,{size:18})})]},p.id))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-slate-100 dark:border-slate-700 pb-2",children:[i.jsx(ic,{className:"text-orange-600",size:24}),i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Sub-Teams & Assignments"})]}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("input",{type:"text",value:c,onChange:p=>d(p.target.value),placeholder:"New Team Name (e.g. Pit Crew)",className:"flex-1 p-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white",onKeyDown:p=>p.key==="Enter"&&y()}),i.jsx("button",{onClick:y,className:"bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700 transition",children:i.jsx(Lt,{size:20})})]}),i.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:n.map(p=>i.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-lg overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-200",children:p.name}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>f(u===p.id?null:p.id),className:`text-xs px-3 py-1 rounded-full transition ${u===p.id?"bg-orange-100 text-orange-700":"bg-white dark:bg-slate-600 text-slate-600 dark:text-slate-300"}`,children:u===p.id?"Done":"Manage Members"}),i.jsx("button",{onClick:()=>g(p.id),className:"text-slate-400 hover:text-red-500",children:i.jsx(It,{size:18})})]})]}),i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800",children:u===p.id?i.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.map(x=>i.jsxs("div",{onClick:()=>b(p.id,x.id),className:`cursor-pointer p-2 rounded border flex items-center justify-between text-sm ${p.memberIds.includes(x.id)?"border-orange-500 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300":"border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-400"}`,children:[i.jsxs("span",{children:[x.firstName," ",x.lastNameInitial,"."]}),p.memberIds.includes(x.id)&&i.jsx(Kl,{size:14})]},x.id))}):i.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.memberIds.length===0&&i.jsx("span",{className:"text-xs text-slate-400 italic",children:"No members assigned."}),p.memberIds.map(x=>{const v=e.find(_=>_.id===x);return v?i.jsxs("span",{className:"text-xs bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 px-2 py-1 rounded-full border border-slate-200 dark:border-slate-600",children:[v.firstName," ",v.lastNameInitial,"."]},x):null})]})})]},p.id))})]})]})]})};function yh(){var _;const[e,t]=T.useState("kanban"),[n,r]=T.useState(!1),{user:s,signOut:a,isConfigured:o}=Wr(),{tasks:l,members:c,teams:d,theme:u,setTheme:f,addTask:h,updateTask:m,setMembers:y,setTeams:g}=ls(),b=$o(),p=l.map(k=>({...k,timeline:k.timeline.map(I=>({...I,type:I.type}))})),x=async()=>{await a(),b("/login")},v=({id:k,label:I,icon:N})=>i.jsxs("button",{onClick:()=>{t(k),r(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 mb-1
        ${e===k?"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 font-bold shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-slate-200 font-medium"}`,children:[i.jsx(N,{size:20}),i.jsx("span",{children:I})]});return i.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-slate-900 font-sans overflow-hidden transition-colors duration-200",children:[i.jsxs("aside",{className:"hidden lg:flex w-64 flex-col bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 h-full",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3",children:[i.jsx("img",{src:"/logo.png",className:"w-12 h-12 object-contain rounded-lg",alt:"Logo"}),i.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white tracking-tight",children:"FTC Manager"})]}),i.jsxs("nav",{className:"flex-1 p-4 overflow-y-auto",children:[i.jsx(v,{id:"kanban",label:"Sprint Planning",icon:Ts}),i.jsx(v,{id:"checklist",label:"Pre-Match Checklist",icon:Rs}),i.jsx(v,{id:"scouting",label:"Scouting Reports",icon:ks}),i.jsx(v,{id:"planner",label:"Match Planner",icon:Is}),i.jsx("div",{className:"my-4 border-t border-slate-100 dark:border-slate-700"}),i.jsx(v,{id:"portfolio",label:"Portfolio Helper",icon:ws}),i.jsx(v,{id:"judging",label:"Judging Prep",icon:Ss}),i.jsx("div",{className:"my-4 border-t border-slate-100 dark:border-slate-700"}),i.jsx(v,{id:"admin",label:"Admin Settings",icon:Cs})]}),i.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700",children:[i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 rounded-xl p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Appearance"}),i.jsx("button",{onClick:()=>f(u==="light"?"dark":"light"),className:"text-slate-500 dark:text-slate-400 hover:text-orange-600 dark:hover:text-orange-400",children:u==="light"?i.jsx(Os,{size:16}):i.jsx(Ps,{size:16})})]}),i.jsxs("div",{className:"flex justify-between text-sm mb-1 text-slate-600 dark:text-slate-300",children:[i.jsx("span",{children:"Tasks Done"}),i.jsx("span",{className:"font-bold",children:l.filter(k=>k.status==="Done").length})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-600 rounded-full h-1.5 mt-2",children:i.jsx("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:`${l.length>0?l.filter(k=>k.status==="Done").length/l.length*100:0}%`}})})]}),o&&s&&i.jsxs("div",{className:"mt-4 flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-xl",children:[i.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900/50 rounded-full flex items-center justify-center",children:i.jsx(Di,{size:16,className:"text-orange-600 dark:text-orange-400"})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:((_=s.user_metadata)==null?void 0:_.full_name)||s.email})}),i.jsx("button",{onClick:x,className:"p-2 text-slate-400 hover:text-red-500 transition-colors",title:"Sign out",children:i.jsx(As,{size:16})})]})]})]}),i.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 h-16 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between px-4 z-20 safe-area-top",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("img",{src:"/logo.png",className:"w-12 h-12 object-contain rounded-lg",alt:"Logo"}),i.jsx("span",{className:"font-bold text-lg text-slate-900 dark:text-white",children:"FTC Manager"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Zs,{}),i.jsx("button",{onClick:()=>f(u==="light"?"dark":"light"),className:"text-slate-600 dark:text-slate-300",children:u==="light"?i.jsx(Os,{size:20}):i.jsx(Ps,{size:20})}),i.jsx("button",{onClick:()=>r(!n),className:"p-2 text-slate-600 dark:text-slate-300",children:n?i.jsx(Ri,{}):i.jsx(bc,{})})]})]}),n&&i.jsxs("div",{className:"lg:hidden fixed inset-0 bg-white dark:bg-slate-800 z-50 pt-20 px-4 safe-area-top",children:[i.jsxs("nav",{className:"space-y-2",children:[i.jsx(v,{id:"kanban",label:"Sprint Planning",icon:Ts}),i.jsx(v,{id:"checklist",label:"Pre-Match Checklist",icon:Rs}),i.jsx(v,{id:"scouting",label:"Scouting Reports",icon:ks}),i.jsx(v,{id:"planner",label:"Match Planner",icon:Is}),i.jsx(v,{id:"portfolio",label:"Portfolio Helper",icon:ws}),i.jsx(v,{id:"judging",label:"Judging Prep",icon:Ss}),i.jsx(v,{id:"admin",label:"Admin Settings",icon:Cs})]}),o&&s&&i.jsx("div",{className:"mt-8 pt-4 border-t border-slate-200 dark:border-slate-700",children:i.jsxs("button",{onClick:x,className:"w-full flex items-center gap-3 px-4 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-all",children:[i.jsx(As,{size:20}),i.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),i.jsxs("main",{className:"flex-1 h-full overflow-hidden relative pt-16 lg:pt-0",children:[i.jsx("div",{className:"hidden lg:block absolute top-4 right-4 z-10",children:i.jsx(Zs,{})}),i.jsxs("div",{className:"h-full w-full overflow-y-auto bg-slate-50 dark:bg-slate-900 p-4 lg:p-6",children:[e==="kanban"&&i.jsx(mh,{tasks:p,setTasks:k=>{let I=[];typeof k=="function"?I=k(p):I=k,I.forEach(N=>{l.find(S=>S.id===N.id)?m(N.id,N):h(N)})},members:c,teams:d}),e==="checklist"&&i.jsx(gh,{}),e==="scouting"&&i.jsx(ph,{}),e==="planner"&&i.jsx(bh,{}),e==="portfolio"&&i.jsx(hi,{tasks:p,view:"portfolio"}),e==="judging"&&i.jsx(hi,{tasks:p,view:"judging"}),e==="admin"&&i.jsx(xh,{members:c,setMembers:y,teams:d,setTeams:g})]})]})]})}function vh(){const{user:e,isLoading:t,isConfigured:n}=Wr(),{theme:r,initializeStore:s}=ls();return T.useEffect(()=>{s()},[s]),T.useEffect(()=>{r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]),t?i.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4 animate-pulse",children:"B"}),i.jsx("p",{className:"text-slate-400",children:"Loading..."})]})}):i.jsxs(Go,{children:[i.jsx(Zn,{path:"/login",element:!n||e?i.jsx(hs,{to:"/",replace:!0}):i.jsx(wu,{})}),i.jsx(Zn,{path:"/auth/callback",element:i.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4 animate-pulse",children:"B"}),i.jsx("p",{className:"text-slate-400",children:"Completing sign in..."})]})})}),i.jsx(Zn,{path:"/*",element:!n||e?i.jsx(yh,{}):i.jsx(hs,{to:"/login",replace:!0})})]})}const _h=new kl({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}}),Uo=document.getElementById("root");if(!Uo)throw new Error("Could not find root element to mount to");const Eh=dr.createRoot(Uo);Eh.render(i.jsx(Ei.StrictMode,{children:i.jsx(Sl,{client:_h,children:i.jsx(Vo,{children:i.jsx(Al,{children:i.jsx(vh,{})})})})}));
//# sourceMappingURL=index-DLecULCf.js.map
