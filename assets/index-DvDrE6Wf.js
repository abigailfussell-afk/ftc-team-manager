var Nu=Object.defineProperty;var ri=t=>{throw TypeError(t)};var Ru=(t,e,n)=>e in t?Nu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Oe=(t,e,n)=>Ru(t,typeof e!="symbol"?e+"":e,n),No=(t,e,n)=>e.has(t)||ri("Cannot "+n);var A=(t,e,n)=>(No(t,e,"read from private field"),n?n.call(t):e.get(t)),J=(t,e,n)=>e.has(t)?ri("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),H=(t,e,n,o)=>(No(t,e,"write to private field"),o?o.call(t,n):e.set(t,n),n),oe=(t,e,n)=>(No(t,e,"access private method"),n);var kn=(t,e,n,o)=>({set _(s){H(t,e,s,n)},get _(){return A(t,e,o)}});import{r as M,a as Pu,g as Mu,R as Ba,b as Du,c as Ro,N as ai,u as Fu,H as Uu}from"./vendor-B0Cn478z.js";import{s as Nn,d as Lu}from"./charts-CeMqgyHT.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var $a={exports:{}},yo={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gu=M,qu=Symbol.for("react.element"),Vu=Symbol.for("react.fragment"),Hu=Object.prototype.hasOwnProperty,Bu=Gu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$u={key:!0,ref:!0,__self:!0,__source:!0};function Oa(t,e,n){var o,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(o in e)Hu.call(e,o)&&!$u.hasOwnProperty(o)&&(s[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)s[o]===void 0&&(s[o]=e[o]);return{$$typeof:qu,type:t,key:i,ref:a,props:s,_owner:Bu.current}}yo.Fragment=Vu;yo.jsx=Oa;yo.jsxs=Oa;$a.exports=yo;var h=$a.exports,Bo={},li=Pu;Bo.createRoot=li.createRoot,Bo.hydrateRoot=li.hydrateRoot;var vo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ou={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Qe,Ms,Ma,Ku=(Ma=class{constructor(){J(this,Qe,Ou);J(this,Ms,!1)}setTimeoutProvider(t){H(this,Qe,t)}setTimeout(t,e){return A(this,Qe).setTimeout(t,e)}clearTimeout(t){A(this,Qe).clearTimeout(t)}setInterval(t,e){return A(this,Qe).setInterval(t,e)}clearInterval(t){A(this,Qe).clearInterval(t)}},Qe=new WeakMap,Ms=new WeakMap,Ma),$o=new Ku;function Ju(t){setTimeout(t,0)}var xo=typeof window>"u"||"Deno"in globalThis;function _e(){}function zu(t,e){return typeof t=="function"?t(e):t}function Wu(t){return typeof t=="number"&&t>=0&&t!==1/0}function Yu(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Oo(t,e){return typeof t=="function"?t(e):t}function Qu(t,e){return typeof t=="function"?t(e):t}function ui(t,e){const{type:n="all",exact:o,fetchStatus:s,predicate:i,queryKey:a,stale:u}=t;if(a){if(o){if(e.queryHash!==Ds(a,e.options))return!1}else if(!hn(e.queryKey,a))return!1}if(n!=="all"){const d=e.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||i&&!i(e))}function ci(t,e){const{exact:n,status:o,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(fn(e.options.mutationKey)!==fn(i))return!1}else if(!hn(e.options.mutationKey,i))return!1}return!(o&&e.state.status!==o||s&&!s(e))}function Ds(t,e){return((e==null?void 0:e.queryKeyHashFn)||fn)(t)}function fn(t){return JSON.stringify(t,(e,n)=>Ko(n)?Object.keys(n).sort().reduce((o,s)=>(o[s]=n[s],o),{}):n)}function hn(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>hn(t[n],e[n])):!1}var Xu=Object.prototype.hasOwnProperty;function Ka(t,e){if(t===e)return t;const n=di(t)&&di(e);if(!n&&!(Ko(t)&&Ko(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),a=i.length,u=n?new Array(a):{};let d=0;for(let c=0;c<a;c++){const f=n?c:i[c],m=t[f],p=e[f];if(m===p){u[f]=m,(n?c<s:Xu.call(t,f))&&d++;continue}if(m===null||p===null||typeof m!="object"||typeof p!="object"){u[f]=p;continue}const g=Ka(m,p);u[f]=g,g===m&&d++}return s===a&&d===s?t:u}function di(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ko(t){if(!fi(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!fi(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function fi(t){return Object.prototype.toString.call(t)==="[object Object]"}function ju(t){return new Promise(e=>{$o.setTimeout(e,t)})}function Zu(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Ka(t,e):e}function ec(t,e,n=0){const o=[...t,e];return n&&o.length>n?o.slice(1):o}function tc(t,e,n=0){const o=[e,...t];return n&&o.length>n?o.slice(0,-1):o}var Fs=Symbol();function Ja(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Fs?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function nc(t,e,n){let o=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),o||(o=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var ut,Xe,Ft,Da,oc=(Da=class extends vo{constructor(){super();J(this,ut);J(this,Xe);J(this,Ft);H(this,Ft,e=>{if(!xo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){A(this,Xe)||this.setEventListener(A(this,Ft))}onUnsubscribe(){var e;this.hasListeners()||((e=A(this,Xe))==null||e.call(this),H(this,Xe,void 0))}setEventListener(e){var n;H(this,Ft,e),(n=A(this,Xe))==null||n.call(this),H(this,Xe,e(o=>{typeof o=="boolean"?this.setFocused(o):this.onFocus()}))}setFocused(e){A(this,ut)!==e&&(H(this,ut,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof A(this,ut)=="boolean"?A(this,ut):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ut=new WeakMap,Xe=new WeakMap,Ft=new WeakMap,Da),za=new oc;function sc(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function o(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{o({status:"fulfilled",value:s}),t(s)},n.reject=s=>{o({status:"rejected",reason:s}),e(s)},n}var ic=Ju;function rc(){let t=[],e=0,n=u=>{u()},o=u=>{u()},s=ic;const i=u=>{e?t.push(u):s(()=>{n(u)})},a=()=>{const u=t;t=[],u.length&&s(()=>{o(()=>{u.forEach(d=>{n(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||a()}return d},batchCalls:u=>(...d)=>{i(()=>{u(...d)})},schedule:i,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{o=u},setScheduler:u=>{s=u}}}var ue=rc(),Ut,je,Lt,Fa,ac=(Fa=class extends vo{constructor(){super();J(this,Ut,!0);J(this,je);J(this,Lt);H(this,Lt,e=>{if(!xo&&window.addEventListener){const n=()=>e(!0),o=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",o,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",o)}}})}onSubscribe(){A(this,je)||this.setEventListener(A(this,Lt))}onUnsubscribe(){var e;this.hasListeners()||((e=A(this,je))==null||e.call(this),H(this,je,void 0))}setEventListener(e){var n;H(this,Lt,e),(n=A(this,je))==null||n.call(this),H(this,je,e(this.setOnline.bind(this)))}setOnline(e){A(this,Ut)!==e&&(H(this,Ut,e),this.listeners.forEach(o=>{o(e)}))}isOnline(){return A(this,Ut)}},Ut=new WeakMap,je=new WeakMap,Lt=new WeakMap,Fa),Zn=new ac;function lc(t){return Math.min(1e3*2**t,3e4)}function Wa(t){return(t??"online")==="online"?Zn.isOnline():!0}var Jo=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Ya(t){let e=!1,n=0,o;const s=sc(),i=()=>s.status!=="pending",a=y=>{var v;if(!i()){const _=new Jo(y);p(_),(v=t.onCancel)==null||v.call(t,_)}},u=()=>{e=!0},d=()=>{e=!1},c=()=>za.isFocused()&&(t.networkMode==="always"||Zn.isOnline())&&t.canRun(),f=()=>Wa(t.networkMode)&&t.canRun(),m=y=>{i()||(o==null||o(),s.resolve(y))},p=y=>{i()||(o==null||o(),s.reject(y))},g=()=>new Promise(y=>{var v;o=_=>{(i()||c())&&y(_)},(v=t.onPause)==null||v.call(t)}).then(()=>{var y;o=void 0,i()||(y=t.onContinue)==null||y.call(t)}),x=()=>{if(i())return;let y;const v=n===0?t.initialPromise:void 0;try{y=v??t.fn()}catch(_){y=Promise.reject(_)}Promise.resolve(y).then(m).catch(_=>{var S;if(i())return;const T=t.retry??(xo?0:3),b=t.retryDelay??lc,C=typeof b=="function"?b(n,_):b,w=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,_);if(e||!w){p(_);return}n++,(S=t.onFail)==null||S.call(t,n,_),ju(C).then(()=>c()?void 0:g()).then(()=>{e?p(_):x()})})};return{promise:s,status:()=>s.status,cancel:a,continue:()=>(o==null||o(),s),cancelRetry:u,continueRetry:d,canStart:f,start:()=>(f()?x():g().then(x),s)}}var ct,Ua,Qa=(Ua=class{constructor(){J(this,ct)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Wu(this.gcTime)&&H(this,ct,$o.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(xo?1/0:5*60*1e3))}clearGcTimeout(){A(this,ct)&&($o.clearTimeout(A(this,ct)),H(this,ct,void 0))}},ct=new WeakMap,Ua),dt,Gt,ye,ft,te,Cn,ht,Te,Me,La,uc=(La=class extends Qa{constructor(e){super();J(this,Te);J(this,dt);J(this,Gt);J(this,ye);J(this,ft);J(this,te);J(this,Cn);J(this,ht);H(this,ht,!1),H(this,Cn,e.defaultOptions),this.setOptions(e.options),this.observers=[],H(this,ft,e.client),H(this,ye,A(this,ft).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,H(this,dt,pi(this.options)),this.state=e.state??A(this,dt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=A(this,te))==null?void 0:e.promise}setOptions(e){if(this.options={...A(this,Cn),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=pi(this.options);n.data!==void 0&&(this.setState(hi(n.data,n.dataUpdatedAt)),H(this,dt,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&A(this,ye).remove(this)}setData(e,n){const o=Zu(this.state.data,e,this.options);return oe(this,Te,Me).call(this,{data:o,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),o}setState(e,n){oe(this,Te,Me).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var o,s;const n=(o=A(this,te))==null?void 0:o.promise;return(s=A(this,te))==null||s.cancel(e),n?n.then(_e).catch(_e):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(A(this,dt))}isActive(){return this.observers.some(e=>Qu(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Fs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Oo(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Yu(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(o=>o.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=A(this,te))==null||n.continue()}onOnline(){var n;const e=this.observers.find(o=>o.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=A(this,te))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),A(this,ye).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(A(this,te)&&(A(this,ht)?A(this,te).cancel({revert:!0}):A(this,te).cancelRetry()),this.scheduleGc()),A(this,ye).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||oe(this,Te,Me).call(this,{type:"invalidate"})}async fetch(e,n){var d,c,f,m,p,g,x,y,v,_,T,b;if(this.state.fetchStatus!=="idle"&&((d=A(this,te))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(A(this,te))return A(this,te).continueRetry(),A(this,te).promise}if(e&&this.setOptions(e),!this.options.queryFn){const C=this.observers.find(w=>w.options.queryFn);C&&this.setOptions(C.options)}const o=new AbortController,s=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(H(this,ht,!0),o.signal)})},i=()=>{const C=Ja(this.options,n),S=(()=>{const E={client:A(this,ft),queryKey:this.queryKey,meta:this.meta};return s(E),E})();return H(this,ht,!1),this.options.persister?this.options.persister(C,S,this):C(S)},u=(()=>{const C={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:A(this,ft),state:this.state,fetchFn:i};return s(C),C})();(c=this.options.behavior)==null||c.onFetch(u,this),H(this,Gt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=u.fetchOptions)==null?void 0:f.meta))&&oe(this,Te,Me).call(this,{type:"fetch",meta:(m=u.fetchOptions)==null?void 0:m.meta}),H(this,te,Ya({initialPromise:n==null?void 0:n.initialPromise,fn:u.fetchFn,onCancel:C=>{C instanceof Jo&&C.revert&&this.setState({...A(this,Gt),fetchStatus:"idle"}),o.abort()},onFail:(C,w)=>{oe(this,Te,Me).call(this,{type:"failed",failureCount:C,error:w})},onPause:()=>{oe(this,Te,Me).call(this,{type:"pause"})},onContinue:()=>{oe(this,Te,Me).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0}));try{const C=await A(this,te).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(g=(p=A(this,ye).config).onSuccess)==null||g.call(p,C,this),(y=(x=A(this,ye).config).onSettled)==null||y.call(x,C,this.state.error,this),C}catch(C){if(C instanceof Jo){if(C.silent)return A(this,te).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw oe(this,Te,Me).call(this,{type:"error",error:C}),(_=(v=A(this,ye).config).onError)==null||_.call(v,C,this),(b=(T=A(this,ye).config).onSettled)==null||b.call(T,this.state.data,C,this),C}finally{this.scheduleGc()}}},dt=new WeakMap,Gt=new WeakMap,ye=new WeakMap,ft=new WeakMap,te=new WeakMap,Cn=new WeakMap,ht=new WeakMap,Te=new WeakSet,Me=function(e){const n=o=>{switch(e.type){case"failed":return{...o,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...o,fetchStatus:"paused"};case"continue":return{...o,fetchStatus:"fetching"};case"fetch":return{...o,...cc(o.data,this.options),fetchMeta:e.meta??null};case"success":const s={...o,...hi(e.data,e.dataUpdatedAt),dataUpdateCount:o.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return H(this,Gt,e.manual?s:void 0),s;case"error":const i=e.error;return{...o,error:i,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...o,isInvalidated:!0};case"setState":return{...o,...e.state}}};this.state=n(this.state),ue.batch(()=>{this.observers.forEach(o=>{o.onQueryUpdate()}),A(this,ye).notify({query:this,type:"updated",action:e})})},La);function cc(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Wa(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function hi(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function pi(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,o=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function mi(t){return{onFetch:(e,n)=>{var f,m,p,g,x;const o=e.options,s=(p=(m=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:p.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],a=((x=e.state.data)==null?void 0:x.pageParams)||[];let u={pages:[],pageParams:[]},d=0;const c=async()=>{let y=!1;const v=b=>{nc(b,()=>e.signal,()=>y=!0)},_=Ja(e.options,e.fetchOptions),T=async(b,C,w)=>{if(y)return Promise.reject();if(C==null&&b.pages.length)return Promise.resolve(b);const E=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:C,direction:w?"backward":"forward",meta:e.options.meta};return v(F),F})(),N=await _(E),{maxPages:I}=e.options,P=w?tc:ec;return{pages:P(b.pages,N,I),pageParams:P(b.pageParams,C,I)}};if(s&&i.length){const b=s==="backward",C=b?dc:gi,w={pages:i,pageParams:a},S=C(o,w);u=await T(w,S,b)}else{const b=t??i.length;do{const C=d===0?a[0]??o.initialPageParam:gi(o,u);if(d>0&&C==null)break;u=await T(u,C),d++}while(d<b)}return u};e.options.persister?e.fetchFn=()=>{var y,v;return(v=(y=e.options).persister)==null?void 0:v.call(y,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function gi(t,{pages:e,pageParams:n}){const o=e.length-1;return e.length>0?t.getNextPageParam(e[o],e,n[o],n):void 0}function dc(t,{pages:e,pageParams:n}){var o;return e.length>0?(o=t.getPreviousPageParam)==null?void 0:o.call(t,e[0],e,n[0],n):void 0}var bn,Ae,ae,pt,ke,Ke,Ga,fc=(Ga=class extends Qa{constructor(e){super();J(this,ke);J(this,bn);J(this,Ae);J(this,ae);J(this,pt);H(this,bn,e.client),this.mutationId=e.mutationId,H(this,ae,e.mutationCache),H(this,Ae,[]),this.state=e.state||hc(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){A(this,Ae).includes(e)||(A(this,Ae).push(e),this.clearGcTimeout(),A(this,ae).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){H(this,Ae,A(this,Ae).filter(n=>n!==e)),this.scheduleGc(),A(this,ae).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){A(this,Ae).length||(this.state.status==="pending"?this.scheduleGc():A(this,ae).remove(this))}continue(){var e;return((e=A(this,pt))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,u,d,c,f,m,p,g,x,y,v,_,T,b,C,w,S,E,N,I;const n=()=>{oe(this,ke,Ke).call(this,{type:"continue"})},o={client:A(this,bn),meta:this.options.meta,mutationKey:this.options.mutationKey};H(this,pt,Ya({fn:()=>this.options.mutationFn?this.options.mutationFn(e,o):Promise.reject(new Error("No mutationFn found")),onFail:(P,F)=>{oe(this,ke,Ke).call(this,{type:"failed",failureCount:P,error:F})},onPause:()=>{oe(this,ke,Ke).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>A(this,ae).canRun(this)}));const s=this.state.status==="pending",i=!A(this,pt).canStart();try{if(s)n();else{oe(this,ke,Ke).call(this,{type:"pending",variables:e,isPaused:i}),await((u=(a=A(this,ae).config).onMutate)==null?void 0:u.call(a,e,this,o));const F=await((c=(d=this.options).onMutate)==null?void 0:c.call(d,e,o));F!==this.state.context&&oe(this,ke,Ke).call(this,{type:"pending",context:F,variables:e,isPaused:i})}const P=await A(this,pt).start();return await((m=(f=A(this,ae).config).onSuccess)==null?void 0:m.call(f,P,e,this.state.context,this,o)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,P,e,this.state.context,o)),await((y=(x=A(this,ae).config).onSettled)==null?void 0:y.call(x,P,null,this.state.variables,this.state.context,this,o)),await((_=(v=this.options).onSettled)==null?void 0:_.call(v,P,null,e,this.state.context,o)),oe(this,ke,Ke).call(this,{type:"success",data:P}),P}catch(P){try{await((b=(T=A(this,ae).config).onError)==null?void 0:b.call(T,P,e,this.state.context,this,o))}catch(F){Promise.reject(F)}try{await((w=(C=this.options).onError)==null?void 0:w.call(C,P,e,this.state.context,o))}catch(F){Promise.reject(F)}try{await((E=(S=A(this,ae).config).onSettled)==null?void 0:E.call(S,void 0,P,this.state.variables,this.state.context,this,o))}catch(F){Promise.reject(F)}try{await((I=(N=this.options).onSettled)==null?void 0:I.call(N,void 0,P,e,this.state.context,o))}catch(F){Promise.reject(F)}throw oe(this,ke,Ke).call(this,{type:"error",error:P}),P}finally{A(this,ae).runNext(this)}}},bn=new WeakMap,Ae=new WeakMap,ae=new WeakMap,pt=new WeakMap,ke=new WeakSet,Ke=function(e){const n=o=>{switch(e.type){case"failed":return{...o,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...o,isPaused:!0};case"continue":return{...o,isPaused:!1};case"pending":return{...o,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...o,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...o,data:void 0,error:e.error,failureCount:o.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ue.batch(()=>{A(this,Ae).forEach(o=>{o.onMutationUpdate(e)}),A(this,ae).notify({mutation:this,type:"updated",action:e})})},Ga);function hc(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fe,Ce,wn,qa,pc=(qa=class extends vo{constructor(e={}){super();J(this,Fe);J(this,Ce);J(this,wn);this.config=e,H(this,Fe,new Set),H(this,Ce,new Map),H(this,wn,0)}build(e,n,o){const s=new fc({client:e,mutationCache:this,mutationId:++kn(this,wn)._,options:e.defaultMutationOptions(n),state:o});return this.add(s),s}add(e){A(this,Fe).add(e);const n=Rn(e);if(typeof n=="string"){const o=A(this,Ce).get(n);o?o.push(e):A(this,Ce).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(A(this,Fe).delete(e)){const n=Rn(e);if(typeof n=="string"){const o=A(this,Ce).get(n);if(o)if(o.length>1){const s=o.indexOf(e);s!==-1&&o.splice(s,1)}else o[0]===e&&A(this,Ce).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Rn(e);if(typeof n=="string"){const o=A(this,Ce).get(n),s=o==null?void 0:o.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var o;const n=Rn(e);if(typeof n=="string"){const s=(o=A(this,Ce).get(n))==null?void 0:o.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ue.batch(()=>{A(this,Fe).forEach(e=>{this.notify({type:"removed",mutation:e})}),A(this,Fe).clear(),A(this,Ce).clear()})}getAll(){return Array.from(A(this,Fe))}find(e){const n={exact:!0,...e};return this.getAll().find(o=>ci(n,o))}findAll(e={}){return this.getAll().filter(n=>ci(e,n))}notify(e){ue.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ue.batch(()=>Promise.all(e.map(n=>n.continue().catch(_e))))}},Fe=new WeakMap,Ce=new WeakMap,wn=new WeakMap,qa);function Rn(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Ne,Va,mc=(Va=class extends vo{constructor(e={}){super();J(this,Ne);this.config=e,H(this,Ne,new Map)}build(e,n,o){const s=n.queryKey,i=n.queryHash??Ds(s,n);let a=this.get(i);return a||(a=new uc({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:o,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){A(this,Ne).has(e.queryHash)||(A(this,Ne).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=A(this,Ne).get(e.queryHash);n&&(e.destroy(),n===e&&A(this,Ne).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ue.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return A(this,Ne).get(e)}getAll(){return[...A(this,Ne).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(o=>ui(n,o))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(o=>ui(e,o)):n}notify(e){ue.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ue.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ue.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ne=new WeakMap,Va),j,Ze,et,qt,Vt,tt,Ht,Bt,Ha,gc=(Ha=class{constructor(t={}){J(this,j);J(this,Ze);J(this,et);J(this,qt);J(this,Vt);J(this,tt);J(this,Ht);J(this,Bt);H(this,j,t.queryCache||new mc),H(this,Ze,t.mutationCache||new pc),H(this,et,t.defaultOptions||{}),H(this,qt,new Map),H(this,Vt,new Map),H(this,tt,0)}mount(){kn(this,tt)._++,A(this,tt)===1&&(H(this,Ht,za.subscribe(async t=>{t&&(await this.resumePausedMutations(),A(this,j).onFocus())})),H(this,Bt,Zn.subscribe(async t=>{t&&(await this.resumePausedMutations(),A(this,j).onOnline())})))}unmount(){var t,e;kn(this,tt)._--,A(this,tt)===0&&((t=A(this,Ht))==null||t.call(this),H(this,Ht,void 0),(e=A(this,Bt))==null||e.call(this),H(this,Bt,void 0))}isFetching(t){return A(this,j).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return A(this,Ze).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=A(this,j).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=A(this,j).build(this,e),o=n.state.data;return o===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Oo(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(o))}getQueriesData(t){return A(this,j).findAll(t).map(({queryKey:e,state:n})=>{const o=n.data;return[e,o]})}setQueryData(t,e,n){const o=this.defaultQueryOptions({queryKey:t}),s=A(this,j).get(o.queryHash),i=s==null?void 0:s.state.data,a=zu(e,i);if(a!==void 0)return A(this,j).build(this,o).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return ue.batch(()=>A(this,j).findAll(t).map(({queryKey:o})=>[o,this.setQueryData(o,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=A(this,j).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=A(this,j);ue.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=A(this,j);return ue.batch(()=>(n.findAll(t).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},o=ue.batch(()=>A(this,j).findAll(t).map(s=>s.cancel(n)));return Promise.all(o).then(_e).catch(_e)}invalidateQueries(t,e={}){return ue.batch(()=>(A(this,j).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},o=ue.batch(()=>A(this,j).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(_e)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(o).then(_e)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=A(this,j).build(this,e);return n.isStaleByTime(Oo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(_e).catch(_e)}fetchInfiniteQuery(t){return t.behavior=mi(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(_e).catch(_e)}ensureInfiniteQueryData(t){return t.behavior=mi(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Zn.isOnline()?A(this,Ze).resumePausedMutations():Promise.resolve()}getQueryCache(){return A(this,j)}getMutationCache(){return A(this,Ze)}getDefaultOptions(){return A(this,et)}setDefaultOptions(t){H(this,et,t)}setQueryDefaults(t,e){A(this,qt).set(fn(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...A(this,qt).values()],n={};return e.forEach(o=>{hn(t,o.queryKey)&&Object.assign(n,o.defaultOptions)}),n}setMutationDefaults(t,e){A(this,Vt).set(fn(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...A(this,Vt).values()],n={};return e.forEach(o=>{hn(t,o.mutationKey)&&Object.assign(n,o.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...A(this,et).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ds(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Fs&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...A(this,et).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){A(this,j).clear(),A(this,Ze).clear()}},j=new WeakMap,Ze=new WeakMap,et=new WeakMap,qt=new WeakMap,Vt=new WeakMap,tt=new WeakMap,Ht=new WeakMap,Bt=new WeakMap,Ha),yc=M.createContext(void 0),vc=({client:t,children:e})=>(M.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),h.jsx(yc.Provider,{value:t,children:e}));console.warn("Supabase credentials not found. Running in offline/demo mode. Set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in .env.local to enable cloud features.");const xc=()=>!1,Xa=M.createContext(void 0);function _c({children:t}){const[e,n]=M.useState({user:null,session:null,isLoading:!0,isConfigured:xc()});M.useEffect(()=>{{n(f=>({...f,isLoading:!1}));return}},[]);const o=M.useCallback(async(f,m)=>({error:{message:"Supabase not configured"}}),[]),s=M.useCallback(async(f,m,p)=>({error:{message:"Supabase not configured"}}),[]),i=M.useCallback(async()=>({error:{message:"Supabase not configured"}}),[]),a=M.useCallback(async()=>({error:{message:"Supabase not configured"}}),[]),u=M.useCallback(async()=>{},[]),d=M.useCallback(async f=>({error:{message:"Supabase not configured"}}),[]),c={...e,signInWithEmail:o,signUpWithEmail:s,signInWithGoogle:i,signInWithMicrosoft:a,signOut:u,resetPassword:d};return h.jsx(Xa.Provider,{value:c,children:t})}function Us(){const t=M.useContext(Xa);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cc=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,o)=>o?o.toUpperCase():n.toLowerCase()),yi=t=>{const e=Cc(t);return e.charAt(0).toUpperCase()+e.slice(1)},ja=(...t)=>t.filter((e,n,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===n).join(" ").trim(),bc=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:s="",children:i,iconNode:a,...u},d)=>M.createElement("svg",{ref:d,...wc,width:e,height:e,stroke:t,strokeWidth:o?Number(n)*24/Number(e):n,className:ja("lucide",s),...!i&&!bc(u)&&{"aria-hidden":"true"},...u},[...a.map(([c,f])=>M.createElement(c,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=(t,e)=>{const n=M.forwardRef(({className:o,...s},i)=>M.createElement(Ec,{ref:i,iconNode:e,className:ja(`lucide-${Tc(yi(t))}`,`lucide-${t}`,o),...s}));return n.displayName=yi(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],zo=$("arrow-right",Sc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],vi=$("book-open",Ic);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],xi=$("bot",Ac);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Nc=$("calendar",kc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Pc=$("check",Rc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Dc=$("chevron-down",Mc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Uc=$("chevron-right",Fc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Gc=$("circle-check",Lc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],_i=$("clipboard-check",qc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Hc=$("clock",Vc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],$c=$("cloud-upload",Bc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Kc=$("download",Oc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Ti=$("folder-open",Jc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],Ci=$("gamepad-2",zc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],bi=$("graduation-cap",Wc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],wi=$("layers",Yc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ei=$("layout-dashboard",Qc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],jc=$("list",Xc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],eo=$("loader-circle",Zc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],td=$("lock",ed);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Si=$("log-out",nd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],sd=$("mail",od);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],rd=$("menu",id);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],ld=$("mic",ad);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ii=$("minus",ud);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ai=$("moon",cd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],fd=$("panels-top-left",dd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],pd=$("pen",hd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rn=$("plus",md);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],yd=$("rotate-ccw",gd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ki=$("save",vd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_d=$("send",xd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ni=$("settings",Td);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ri=$("sparkles",Cd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Pi=$("square-check-big",bd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ed=$("square-pen",wd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Mi=$("sun",Sd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],$t=$("trash-2",Id);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],kd=$("trophy",Ad);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Rd=$("undo",Nd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Md=$("user-plus",Pd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Za=$("user",Dd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ud=$("users",Fd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],el=$("x",Ld),Gd={},Di=t=>{let e;const n=new Set,o=(f,m)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const g=e;e=m??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(x=>x(e,g))}},s=()=>e,d={setState:o,getState:s,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Gd?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(o,s,d);return d},qd=t=>t?Di(t):Di;var tl={exports:{}},nl={},ol={exports:{}},sl={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ot=M;function Vd(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hd=typeof Object.is=="function"?Object.is:Vd,Bd=Ot.useState,$d=Ot.useEffect,Od=Ot.useLayoutEffect,Kd=Ot.useDebugValue;function Jd(t,e){var n=e(),o=Bd({inst:{value:n,getSnapshot:e}}),s=o[0].inst,i=o[1];return Od(function(){s.value=n,s.getSnapshot=e,Po(s)&&i({inst:s})},[t,n,e]),$d(function(){return Po(s)&&i({inst:s}),t(function(){Po(s)&&i({inst:s})})},[t]),Kd(n),n}function Po(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hd(t,n)}catch{return!0}}function zd(t,e){return e()}var Wd=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?zd:Jd;sl.useSyncExternalStore=Ot.useSyncExternalStore!==void 0?Ot.useSyncExternalStore:Wd;ol.exports=sl;var Yd=ol.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _o=M,Qd=Yd;function Xd(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jd=typeof Object.is=="function"?Object.is:Xd,Zd=Qd.useSyncExternalStore,ef=_o.useRef,tf=_o.useEffect,nf=_o.useMemo,of=_o.useDebugValue;nl.useSyncExternalStoreWithSelector=function(t,e,n,o,s){var i=ef(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=nf(function(){function d(g){if(!c){if(c=!0,f=g,g=o(g),s!==void 0&&a.hasValue){var x=a.value;if(s(x,g))return m=x}return m=g}if(x=m,jd(f,g))return x;var y=o(g);return s!==void 0&&s(x,y)?(f=g,x):(f=g,m=y)}var c=!1,f,m,p=n===void 0?null:n;return[function(){return d(e())},p===null?void 0:function(){return d(p())}]},[e,n,o,s]);var u=Zd(t,i[0],i[1]);return tf(function(){a.hasValue=!0,a.value=u},[u]),of(u),u};tl.exports=nl;var sf=tl.exports;const rf=Mu(sf),il={},{useDebugValue:af}=Ba,{useSyncExternalStoreWithSelector:lf}=rf;let Fi=!1;const uf=t=>t;function cf(t,e=uf,n){(il?"production":void 0)!=="production"&&n&&!Fi&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Fi=!0);const o=lf(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return af(o),o}const df=t=>{(il?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?qd(t):t,n=(o,s)=>cf(e,o,s);return Object.assign(n,e),n},ff=t=>df,hf={};function pf(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const a=d=>d===null?null:JSON.parse(d,void 0),u=(i=n.getItem(s))!=null?i:null;return u instanceof Promise?u.then(a):a(u)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const pn=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(o){return pn(o)(n)},catch(o){return this}}}catch(n){return{then(o){return this},catch(o){return pn(o)(n)}}}},mf=(t,e)=>(n,o,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,_)=>({..._,...v}),...e},a=!1;const u=new Set,d=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},o,s);const f=pn(i.serialize),m=()=>{const v=i.partialize({...o()});let _;const T=f({state:v,version:i.version}).then(b=>c.setItem(i.name,b)).catch(b=>{_=b});if(_)throw _;return T},p=s.setState;s.setState=(v,_)=>{p(v,_),m()};const g=t((...v)=>{n(...v),m()},o,s);let x;const y=()=>{var v;if(!c)return;a=!1,u.forEach(T=>T(o()));const _=((v=i.onRehydrateStorage)==null?void 0:v.call(i,o()))||void 0;return pn(c.getItem.bind(c))(i.name).then(T=>{if(T)return i.deserialize(T)}).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==i.version){if(i.migrate)return i.migrate(T.state,T.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return T.state}).then(T=>{var b;return x=i.merge(T,(b=o())!=null?b:g),n(x,!0),m()}).then(()=>{_==null||_(x,void 0),a=!0,d.forEach(T=>T(x))}).catch(T=>{_==null||_(void 0,T)})};return s.persist={setOptions:v=>{i={...i,...v},v.getStorage&&(c=v.getStorage())},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>a,onHydrate:v=>(u.add(v),()=>{u.delete(v)}),onFinishHydration:v=>(d.add(v),()=>{d.delete(v)})},y(),x||g},gf=(t,e)=>(n,o,s)=>{let i={storage:pf(()=>localStorage),partialize:y=>y,version:0,merge:(y,v)=>({...v,...y}),...e},a=!1;const u=new Set,d=new Set;let c=i.storage;if(!c)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...y)},o,s);const f=()=>{const y=i.partialize({...o()});return c.setItem(i.name,{state:y,version:i.version})},m=s.setState;s.setState=(y,v)=>{m(y,v),f()};const p=t((...y)=>{n(...y),f()},o,s);s.getInitialState=()=>p;let g;const x=()=>{var y,v;if(!c)return;a=!1,u.forEach(T=>{var b;return T((b=o())!=null?b:p)});const _=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(y=o())!=null?y:p))||void 0;return pn(c.getItem.bind(c))(i.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==i.version){if(i.migrate)return[!0,i.migrate(T.state,T.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var b;const[C,w]=T;if(g=i.merge(w,(b=o())!=null?b:p),n(g,!0),C)return f()}).then(()=>{_==null||_(g,void 0),g=o(),a=!0,d.forEach(T=>T(g))}).catch(T=>{_==null||_(void 0,T)})};return s.persist={setOptions:y=>{i={...i,...y},y.storage&&(c=y.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>a,onHydrate:y=>(u.add(y),()=>{u.delete(y)}),onFinishHydration:y=>(d.add(y),()=>{d.delete(y)})},i.skipHydration||x(),g||p},yf=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((hf?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),mf(t,e)):gf(t,e),vf=yf,Q=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Z=Object.keys,ie=Array.isArray;function de(t,e){return typeof e!="object"||Z(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||Q.Promise||(Q.Promise=Promise);const mn=Object.getPrototypeOf,xf={}.hasOwnProperty;function me(t,e){return xf.call(t,e)}function Kt(t,e){typeof e=="function"&&(e=e(mn(t))),(typeof Reflect>"u"?Z:Reflect.ownKeys)(e).forEach(n=>{Ge(t,n,e[n])})}const rl=Object.defineProperty;function Ge(t,e,n,o){rl(t,e,de(n&&me(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},o))}function Nt(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Ge(t.prototype,"constructor",t),{extend:Kt.bind(null,t.prototype)}}}}const _f=Object.getOwnPropertyDescriptor;function Ls(t,e){let n;return _f(t,e)||(n=mn(t))&&Ls(n,e)}const Tf=[].slice;function to(t,e,n){return Tf.call(t,e,n)}function al(t,e){return e(t)}function nn(t){if(!t)throw new Error("Assertion Failed")}function ll(t){Q.setImmediate?setImmediate(t):setTimeout(t,0)}function ul(t,e){return t.reduce((n,o,s)=>{var i=e(o,s);return i&&(n[i[0]]=i[1]),n},{})}function qe(t,e){if(typeof e=="string"&&me(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],o=0,s=e.length;o<s;++o){var i=qe(t,e[o]);n.push(i)}return n}var a=e.indexOf(".");if(a!==-1){var u=t[e.substr(0,a)];return u==null?void 0:qe(u,e.substr(a+1))}}function be(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){nn(typeof n!="string"&&"length"in n);for(var o=0,s=e.length;o<s;++o)be(t,e[o],n[o])}else{var i=e.indexOf(".");if(i!==-1){var a=e.substr(0,i),u=e.substr(i+1);if(u==="")n===void 0?ie(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var d=t[a];d&&me(t,a)||(d=t[a]={}),be(d,u,n)}}else n===void 0?ie(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function cl(t){var e={};for(var n in t)me(t,n)&&(e[n]=t[n]);return e}const Cf=[].concat;function dl(t){return Cf.apply([],t)}const fl="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(dl([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>Q[t]),bf=fl.map(t=>Q[t]);ul(fl,t=>[t,!0]);let We=null;function En(t){We=typeof WeakMap<"u"&&new WeakMap;const e=Wo(t);return We=null,e}function Wo(t){if(!t||typeof t!="object")return t;let e=We&&We.get(t);if(e)return e;if(ie(t)){e=[],We&&We.set(t,e);for(var n=0,o=t.length;n<o;++n)e.push(Wo(t[n]))}else if(bf.indexOf(t.constructor)>=0)e=t;else{const i=mn(t);for(var s in e=i===Object.prototype?{}:Object.create(i),We&&We.set(t,e),t)me(t,s)&&(e[s]=Wo(t[s]))}return e}const{toString:wf}={};function Yo(t){return wf.call(t).slice(8,-1)}const Qo=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ef=typeof Qo=="symbol"?function(t){var e;return t!=null&&(e=t[Qo])&&e.apply(t)}:function(){return null},Et={};function Ue(t){var e,n,o,s;if(arguments.length===1){if(ie(t))return t.slice();if(this===Et&&typeof t=="string")return[t];if(s=Ef(t)){for(n=[];!(o=s.next()).done;)n.push(o.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const Gs=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Re=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function hl(t,e){Re=t,pl=e}var pl=()=>!0;const Sf=!new Error("").stack;function _t(){if(Sf)try{throw _t.arguments,new Error}catch(t){return t}return new Error}function Xo(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(pl).map(o=>`
`+o).join("")):""}var ml=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],qs=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ml),If={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Rt(t,e){this._e=_t(),this.name=t,this.message=e}function gl(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,o,s)=>s.indexOf(n)===o).join(`
`)}function no(t,e,n,o){this._e=_t(),this.failures=e,this.failedKeys=o,this.successCount=n,this.message=gl(t,e)}function an(t,e){this._e=_t(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=gl(t,e)}Nt(Rt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Xo(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Nt(no).from(Rt),Nt(an).from(Rt);var Vs=qs.reduce((t,e)=>(t[e]=e+"Error",t),{});const Af=Rt;var q=qs.reduce((t,e)=>{var n=e+"Error";function o(s,i){this._e=_t(),this.name=n,s?typeof s=="string"?(this.message=`${s}${i?`
 `+i:""}`,this.inner=i||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=If[e]||n,this.inner=null)}return Nt(o).from(Af),t[e]=o,t},{});q.Syntax=SyntaxError,q.Type=TypeError,q.Range=RangeError;var Ui=ml.reduce((t,e)=>(t[e+"Error"]=q[e],t),{}),On=qs.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=q[e]),t),{});function Y(){}function gn(t){return t}function kf(t,e){return t==null||t===gn?e:function(n){return e(t(n))}}function vt(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Nf(t,e){return t===Y?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?vt(o,this.onsuccess):o),s&&(this.onerror=this.onerror?vt(s,this.onerror):s),i!==void 0?i:n}}function Rf(t,e){return t===Y?e:function(){t.apply(this,arguments);var n=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?vt(n,this.onsuccess):n),o&&(this.onerror=this.onerror?vt(o,this.onerror):o)}}function Pf(t,e){return t===Y?e:function(n){var o=t.apply(this,arguments);de(n,o);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?vt(s,this.onsuccess):s),i&&(this.onerror=this.onerror?vt(i,this.onerror):i),o===void 0?a===void 0?void 0:a:de(o,a)}}function Mf(t,e){return t===Y?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Hs(t,e){return t===Y?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var o=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then(function(){return e.apply(o,i)})}return e.apply(this,arguments)}}On.ModifyError=no,On.DexieError=Rt,On.BulkError=an;var yn={};const yl=100,[jo,oo,Zo]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,mn(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,mn(e),t]})(),vl=oo&&oo.then,Kn=jo&&jo.constructor,Bs=!!Zo;var es=!1,Df=Zo?()=>{Zo.then(Pn)}:Q.setImmediate?setImmediate.bind(null,Pn):Q.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Pn(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Pn,0)},ln=function(t,e){on.push([t,e]),so&&(Df(),so=!1)},ts=!0,so=!0,mt=[],Jn=[],ns=null,os=gn,Pt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:qi,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{qi(t[0],t[1])}catch{}})}},G=Pt,on=[],gt=0,zn=[];function U(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Y,this._lib=!1;var e=this._PSD=G;if(Re&&(this._stackHolder=_t(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==yn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&is(this,this._value))}this._state=null,this._value=null,++e.ref,_l(this,t)}const ss={get:function(){var t=G,e=io;function n(o,s){var i=!t.global&&(t!==G||e!==io);const a=i&&!Ve();var u=new U((d,c)=>{$s(this,new xl(ro(o,t,i,a),ro(s,t,i,a),d,c,t))});return Re&&bl(u,this),u}return n.prototype=yn,n},set:function(t){Ge(this,"then",t&&t.prototype===yn?ss:{get:function(){return t},set:ss.set})}};function xl(t,e,n,o,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=o,this.psd=s}function _l(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&Sn();n&&typeof n.then=="function"?_l(t,(s,i)=>{n instanceof U?n._then(s,i):n.then(s,i)}):(t._state=!0,t._value=n,Tl(t)),o&&In()}},is.bind(null,t))}catch(n){is(t,n)}}function is(t,e){if(Jn.push(e),t._state===null){var n=t._lib&&Sn();e=os(e),t._state=!1,t._value=e,Re&&e!==null&&typeof e=="object"&&!e._promise&&function(o,s,i){try{o.apply(null,i)}catch{}}(()=>{var o=Ls(e,"stack");e._promise=t,Ge(e,"stack",{get:()=>es?o&&(o.get?o.get.apply(e):o.value):t.stack})}),function(o){mt.some(s=>s._value===o._value)||mt.push(o)}(t),Tl(t),n&&In()}}function Tl(t){var e=t._listeners;t._listeners=[];for(var n=0,o=e.length;n<o;++n)$s(t,e[n]);var s=t._PSD;--s.ref||s.finalize(),gt===0&&(++gt,ln(()=>{--gt==0&&Os()},[]))}function $s(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++gt,ln(Ff,[n,t,e])}else t._listeners.push(e)}function Ff(t,e,n){try{ns=e;var o,s=e._value;e._state?o=t(s):(Jn.length&&(Jn=[]),o=t(s),Jn.indexOf(s)===-1&&function(i){for(var a=mt.length;a;)if(mt[--a]._value===i._value)return void mt.splice(a,1)}(e)),n.resolve(o)}catch(i){n.reject(i)}finally{ns=null,--gt==0&&Os(),--n.psd.ref||n.psd.finalize()}}function Cl(t,e,n){if(e.length===n)return e;var o="";if(t._state===!1){var s,i,a=t._value;a!=null?(s=a.name||"Error",i=a.message||a,o=Xo(a,0)):(s=a,i=""),e.push(s+(i?": "+i:"")+o)}return Re&&((o=Xo(t._stackHolder,2))&&e.indexOf(o)===-1&&e.push(o),t._prev&&Cl(t._prev,e,n)),e}function bl(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Pn(){Sn()&&In()}function Sn(){var t=ts;return ts=!1,so=!1,t}function In(){var t,e,n;do for(;on.length>0;)for(t=on,on=[],n=t.length,e=0;e<n;++e){var o=t[e];o[0].apply(null,o[1])}while(on.length>0);ts=!0,so=!0}function Os(){var t=mt;mt=[],t.forEach(o=>{o._PSD.onunhandled.call(null,o._value,o)});for(var e=zn.slice(0),n=e.length;n;)e[--n]()}function Mn(t){return new U(yn,!1,t)}function X(t,e){var n=G;return function(){var o=Sn(),s=G;try{return ot(n,!0),t.apply(this,arguments)}catch(i){e&&e(i)}finally{ot(s,!1),o&&In()}}}Kt(U.prototype,{then:ss,_then:function(t,e){$s(this,new xl(null,null,t,e,G))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,o=>o instanceof e?n(o):Mn(o)):this.then(null,o=>o&&o.name===e?n(o):Mn(o))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Mn(e)))},stack:{get:function(){if(this._stack)return this._stack;try{es=!0;var t=Cl(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{es=!1}}},timeout:function(t,e){return t<1/0?new U((n,o)=>{var s=setTimeout(()=>o(new q.Timeout(e)),t);this.then(n,o).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Ge(U.prototype,Symbol.toStringTag,"Dexie.Promise"),Pt.env=wl(),Kt(U,{all:function(){var t=Ue.apply(null,arguments).map(Dn);return new U(function(e,n){t.length===0&&e([]);var o=t.length;t.forEach((s,i)=>U.resolve(s).then(a=>{t[i]=a,--o||e(t)},n))})},resolve:t=>{if(t instanceof U)return t;if(t&&typeof t.then=="function")return new U((n,o)=>{t.then(n,o)});var e=new U(yn,!0,t);return bl(e,ns),e},reject:Mn,race:function(){var t=Ue.apply(null,arguments).map(Dn);return new U((e,n)=>{t.map(o=>U.resolve(o).then(e,n))})},PSD:{get:()=>G,set:t=>G=t},totalEchoes:{get:()=>io},newPSD:nt,usePSD:zt,scheduler:{get:()=>ln,set:t=>{ln=t}},rejectionMapper:{get:()=>os,set:t=>{os=t}},follow:(t,e)=>new U((n,o)=>nt((s,i)=>{var a=G;a.unhandleds=[],a.onunhandled=i,a.finalize=vt(function(){(function(u){function d(){u(),zn.splice(zn.indexOf(d),1)}zn.push(d),++gt,ln(()=>{--gt==0&&Os()},[])})(()=>{this.unhandleds.length===0?s():i(this.unhandleds[0])})},a.finalize),t()},e,n,o))}),Kn&&(Kn.allSettled&&Ge(U,"allSettled",function(){const t=Ue.apply(null,arguments).map(Dn);return new U(e=>{t.length===0&&e([]);let n=t.length;const o=new Array(n);t.forEach((s,i)=>U.resolve(s).then(a=>o[i]={status:"fulfilled",value:a},a=>o[i]={status:"rejected",reason:a}).then(()=>--n||e(o)))})}),Kn.any&&typeof AggregateError<"u"&&Ge(U,"any",function(){const t=Ue.apply(null,arguments).map(Dn);return new U((e,n)=>{t.length===0&&n(new AggregateError([]));let o=t.length;const s=new Array(o);t.forEach((i,a)=>U.resolve(i).then(u=>e(u),u=>{s[a]=u,--o||n(new AggregateError(s))}))})}));const se={awaits:0,echoes:0,id:0};var Uf=0,Wn=[],Mo=0,io=0,Lf=0;function nt(t,e,n,o){var s=G,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++Lf;var a=Pt.env;i.env=Bs?{Promise:U,PromiseProp:{value:U,configurable:!0,writable:!0},all:U.all,race:U.race,allSettled:U.allSettled,any:U.any,resolve:U.resolve,reject:U.reject,nthen:Li(a.nthen,i),gthen:Li(a.gthen,i)}:{},e&&de(i,e),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=zt(i,t,n,o);return i.ref===0&&i.finalize(),u}function Jt(){return se.id||(se.id=++Uf),++se.awaits,se.echoes+=yl,se.id}function Ve(){return!!se.awaits&&(--se.awaits==0&&(se.id=0),se.echoes=se.awaits*yl,!0)}function Dn(t){return se.echoes&&t&&t.constructor===Kn?(Jt(),t.then(e=>(Ve(),e),e=>(Ve(),ee(e)))):t}function Gf(t){++io,se.echoes&&--se.echoes!=0||(se.echoes=se.id=0),Wn.push(G),ot(t,!0)}function qf(){var t=Wn[Wn.length-1];Wn.pop(),ot(t,!1)}function ot(t,e){var n=G;if((e?!se.echoes||Mo++&&t===G:!Mo||--Mo&&t===G)||El(e?Gf.bind(null,t):qf),t!==G&&(G=t,n===Pt&&(Pt.env=wl()),Bs)){var o=Pt.env.Promise,s=t.env;oo.then=s.nthen,o.prototype.then=s.gthen,(n.global||t.global)&&(Object.defineProperty(Q,"Promise",s.PromiseProp),o.all=s.all,o.race=s.race,o.resolve=s.resolve,o.reject=s.reject,s.allSettled&&(o.allSettled=s.allSettled),s.any&&(o.any=s.any))}}function wl(){var t=Q.Promise;return Bs?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(Q,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:oo.then,gthen:t.prototype.then}:{}}function zt(t,e,n,o,s){var i=G;try{return ot(t,!0),e(n,o,s)}finally{ot(i,!1)}}function El(t){vl.call(jo,t)}function ro(t,e,n,o){return typeof t!="function"?t:function(){var s=G;n&&Jt(),ot(e,!0);try{return t.apply(this,arguments)}finally{ot(s,!1),o&&El(Ve)}}}function Li(t,e){return function(n,o){return t.call(this,ro(n,e),ro(o,e))}}(""+vl).indexOf("[native code]")===-1&&(Jt=Ve=Y);const Gi="unhandledrejection";function qi(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var o,s={promise:e,reason:t};if(Q.document&&document.createEvent?((o=document.createEvent("Event")).initEvent(Gi,!0,!0),de(o,s)):Q.CustomEvent&&de(o=new CustomEvent(Gi,{detail:s}),s),o&&Q.dispatchEvent&&(dispatchEvent(o),!Q.PromiseRejectionEvent&&Q.onunhandledrejection))try{Q.onunhandledrejection(o)}catch{}Re&&o&&!o.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var ee=U.reject;function rs(t,e,n,o){if(t.idbdb&&(t._state.openComplete||G.letThrough||t._vip)){var s=t._createTransaction(e,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===Vs.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>rs(t,e,n,o))):ee(i)}return s._promise(e,(i,a)=>nt(()=>(G.trans=s,o(i,a,s)))).then(i=>s._completion.then(()=>i))}if(t._state.openComplete)return ee(new q.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return ee(new q.DatabaseClosed);t.open().catch(Y)}return t._state.dbReadyPromise.then(()=>rs(t,e,n,o))}const Vi="3.2.7",lt="",as=-1/0,Pe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Sl="String expected.",un=[],To=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Vf=To,Hf=To,Il=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Co="__dbnames",Do="readonly",Fo="readwrite";function xt(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Al={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Fn(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=En(e))[t],e)}class Bf{_trans(e,n,o){const s=this._tx||G.trans,i=this.name;function a(d,c,f){if(!f.schema[i])throw new q.NotFound("Table "+i+" not part of transaction");return n(f.idbtrans,f)}const u=Sn();try{return s&&s.db===this.db?s===G.trans?s._promise(e,a,o):nt(()=>s._promise(e,a,o),{trans:s,transless:G.transless||G}):rs(this.db,e,[this.name],a)}finally{u&&In()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",o=>this.core.get({trans:o,key:e}).then(s=>this.hook.reading.fire(s))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(ie(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=Z(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const o=this.schema.indexes.concat(this.schema.primKey).filter(c=>{if(c.compound&&n.every(f=>c.keyPath.indexOf(f)>=0)){for(let f=0;f<n.length;++f)if(n.indexOf(c.keyPath[f])===-1)return!1;return!0}return!1}).sort((c,f)=>c.keyPath.length-f.keyPath.length)[0];if(o&&this.db._maxKey!==lt){const c=o.keyPath.slice(0,n.length);return this.where(c).equals(c.map(f=>e[f]))}!o&&Re&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,i=this.db._deps.indexedDB;function a(c,f){try{return i.cmp(c,f)===0}catch{return!1}}const[u,d]=n.reduce(([c,f],m)=>{const p=s[m],g=e[m];return[c||p,c||!p?xt(f,p&&p.multi?x=>{const y=qe(x,m);return ie(y)&&y.some(v=>a(g,v))}:x=>a(g,qe(x,m))):f]},[null,null]);return u?this.where(u.name).equals(e[u.keyPath]).filter(d):o?this.filter(d):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,ie(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=o=>{if(!o)return o;const s=Object.create(e.prototype);for(var i in o)if(me(o,i))try{s[i]=o[i]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){de(this,e)})}add(e,n){const{auto:o,keyPath:s}=this.schema.primKey;let i=e;return s&&o&&(i=Fn(s)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:n!=null?[n]:null,values:[i]})).then(a=>a.numFailures?U.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{be(e,s,a)}catch{}return a})}update(e,n){if(typeof e!="object"||ie(e))return this.where(":id").equals(e).modify(n);{const o=qe(e,this.schema.primKey.keyPath);if(o===void 0)return ee(new q.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Z(n).forEach(s=>{be(e,s,n[s])}):n(e,{value:e,primKey:o})}catch{}return this.where(":id").equals(o).modify(n)}}put(e,n){const{auto:o,keyPath:s}=this.schema.primKey;let i=e;return s&&o&&(i=Fn(s)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[i],keys:n!=null?[n]:null})).then(a=>a.numFailures?U.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{be(e,s,a)}catch{}return a})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?U.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Al})).then(e=>e.numFailures?U.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(o=>o.map(s=>this.hook.reading.fire(s))))}bulkAdd(e,n,o){const s=Array.isArray(n)?n:void 0,i=(o=o||(s?void 0:n))?o.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:u,keyPath:d}=this.schema.primKey;if(d&&s)throw new q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let f=d&&u?e.map(Fn(d)):e;return this.core.mutate({trans:a,type:"add",keys:s,values:f,wantResults:i}).then(({numFailures:m,results:p,lastResult:g,failures:x})=>{if(m===0)return i?p:g;throw new an(`${this.name}.bulkAdd(): ${m} of ${c} operations failed`,x)})})}bulkPut(e,n,o){const s=Array.isArray(n)?n:void 0,i=(o=o||(s?void 0:n))?o.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:u,keyPath:d}=this.schema.primKey;if(d&&s)throw new q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let f=d&&u?e.map(Fn(d)):e;return this.core.mutate({trans:a,type:"put",keys:s,values:f,wantResults:i}).then(({numFailures:m,results:p,lastResult:g,failures:x})=>{if(m===0)return i?p:g;throw new an(`${this.name}.bulkPut(): ${m} of ${c} operations failed`,x)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",o=>this.core.mutate({trans:o,type:"delete",keys:e})).then(({numFailures:o,lastResult:s,failures:i})=>{if(o===0)return s;throw new an(`${this.name}.bulkDelete(): ${o} of ${n} operations failed`,i)})}}function cn(t){var e={},n=function(a,u){if(u){for(var d=arguments.length,c=new Array(d-1);--d;)c[d-1]=arguments[d];return e[a].subscribe.apply(null,c),t}if(typeof a=="string")return e[a]};n.addEventType=i;for(var o=1,s=arguments.length;o<s;++o)i(arguments[o]);return n;function i(a,u,d){if(typeof a!="object"){var c;u||(u=Mf),d||(d=Y);var f={subscribers:[],fire:d,subscribe:function(m){f.subscribers.indexOf(m)===-1&&(f.subscribers.push(m),f.fire=u(f.fire,m))},unsubscribe:function(m){f.subscribers=f.subscribers.filter(function(p){return p!==m}),f.fire=f.subscribers.reduce(u,d)}};return e[a]=n[a]=f,f}Z(c=a).forEach(function(m){var p=c[m];if(ie(p))i(m,c[m][0],c[m][1]);else{if(p!=="asap")throw new q.InvalidArgument("Invalid event config");var g=i(m,gn,function(){for(var x=arguments.length,y=new Array(x);x--;)y[x]=arguments[x];g.subscribers.forEach(function(v){ll(function(){v.apply(null,y)})})})}})}}function jt(t,e){return Nt(e).from({prototype:t}),e}function Ct(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Uo(t,e){t.filter=xt(t.filter,e)}function Lo(t,e,n){var o=t.replayFilter;t.replayFilter=o?()=>xt(o(),e()):e,t.justLimit=n&&!o}function Yn(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new q.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Hi(t,e,n){const o=Yn(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function Un(t,e,n,o){const s=t.replayFilter?xt(t.filter,t.replayFilter()):t.filter;if(t.or){const i={},a=(u,d,c)=>{if(!s||s(d,c,p=>d.stop(p),p=>d.fail(p))){var f=d.primaryKey,m=""+f;m==="[object ArrayBuffer]"&&(m=""+new Uint8Array(f)),me(i,m)||(i[m]=!0,e(u,d,c))}};return Promise.all([t.or._iterate(a,n),Bi(Hi(t,o,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}return Bi(Hi(t,o,n),xt(t.algorithm,s),e,!t.keysOnly&&t.valueMapper)}function Bi(t,e,n,o){var s=X(o?(i,a,u)=>n(o(i),a,u):n);return t.then(i=>{if(i)return i.start(()=>{var a=()=>i.continue();e&&!e(i,u=>a=u,u=>{i.stop(u),a=Y},u=>{i.fail(u),a=Y})||s(i.value,i,u=>a=u),a()})})}function ce(t,e){try{const n=$i(t),o=$i(e);if(n!==o)return n==="Array"?1:o==="Array"?-1:n==="binary"?1:o==="binary"?-1:n==="string"?1:o==="string"?-1:n==="Date"?1:o!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(s,i){const a=s.length,u=i.length,d=a<u?a:u;for(let c=0;c<d;++c)if(s[c]!==i[c])return s[c]<i[c]?-1:1;return a===u?0:a<u?-1:1}(Oi(t),Oi(e));case"Array":return function(s,i){const a=s.length,u=i.length,d=a<u?a:u;for(let c=0;c<d;++c){const f=ce(s[c],i[c]);if(f!==0)return f}return a===u?0:a<u?-1:1}(t,e)}}catch{}return NaN}function $i(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Yo(t);return n==="ArrayBuffer"?"binary":n}function Oi(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class $f{_read(e,n){var o=this._ctx;return o.error?o.table._trans(null,ee.bind(null,o.error)):o.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,ee.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=xt(n.algorithm,e)}_iterate(e,n){return Un(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return e&&de(o,e),n._ctx=o,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(o=>Un(n,e,o,n.table.core))}count(e){return this._read(n=>{const o=this._ctx,s=o.table.core;if(Ct(o,!0))return s.count({trans:n,query:{index:Yn(o,s.schema),range:o.range}}).then(a=>Math.min(a,o.limit));var i=0;return Un(o,()=>(++i,!1),n,s).then(()=>i)}).then(e)}sortBy(e,n){const o=e.split(".").reverse(),s=o[0],i=o.length-1;function a(c,f){return f?a(c[o[f]],f-1):c[s]}var u=this._ctx.dir==="next"?1:-1;function d(c,f){var m=a(c,i),p=a(f,i);return m<p?-u:m>p?u:0}return this.toArray(function(c){return c.sort(d)}).then(n)}toArray(e){return this._read(n=>{var o=this._ctx;if(o.dir==="next"&&Ct(o,!0)&&o.limit>0){const{valueMapper:s}=o,i=Yn(o,o.table.core.schema);return o.table.core.query({trans:n,limit:o.limit,values:!0,query:{index:i,range:o.range}}).then(({result:a})=>s?a.map(s):a)}{const s=[];return Un(o,i=>s.push(i),n,o.table.core).then(()=>s)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,Ct(n)?Lo(n,()=>{var o=e;return(s,i)=>o===0||(o===1?(--o,!1):(i(()=>{s.advance(o),o=0}),!1))}):Lo(n,()=>{var o=e;return()=>--o<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Lo(this._ctx,()=>{var n=e;return function(o,s,i){return--n<=0&&s(i),n>=0}},!0),this}until(e,n){return Uo(this._ctx,function(o,s,i){return!e(o.value)||(s(i),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,o;return Uo(this._ctx,function(s){return e(s.value)}),n=this._ctx,o=e,n.isMatch=xt(n.isMatch,o),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(o,s){e(s.key,s)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(o,s){e(s.primaryKey,s)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var o=[];return this.each(function(s,i){o.push(i.key)}).then(function(){return o}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&Ct(n,!0)&&n.limit>0)return this._read(s=>{var i=Yn(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:s})=>s).then(e);n.keysOnly=!n.isMatch;var o=[];return this.each(function(s,i){o.push(i.primaryKey)}).then(function(){return o}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var o={};return Uo(this._ctx,function(s){var i=s.primaryKey.toString(),a=me(o,i);return o[i]=!0,!a}),this}modify(e){var n=this._ctx;return this._write(o=>{var s;if(typeof e=="function")s=e;else{var i=Z(e),a=i.length;s=function(y){for(var v=!1,_=0;_<a;++_){var T=i[_],b=e[T];qe(y,T)!==b&&(be(y,T,b),v=!0)}return v}}const u=n.table.core,{outbound:d,extractKey:c}=u.schema.primaryKey,f=this.db._options.modifyChunkSize||200,m=[];let p=0;const g=[],x=(y,v)=>{const{failures:_,numFailures:T}=v;p+=y-T;for(let b of Z(_))m.push(_[b])};return this.clone().primaryKeys().then(y=>{const v=_=>{const T=Math.min(f,y.length-_);return u.getMany({trans:o,keys:y.slice(_,_+T),cache:"immutable"}).then(b=>{const C=[],w=[],S=d?[]:null,E=[];for(let I=0;I<T;++I){const P=b[I],F={value:En(P),primKey:y[_+I]};s.call(F,F.value,F)!==!1&&(F.value==null?E.push(y[_+I]):d||ce(c(P),c(F.value))===0?(w.push(F.value),d&&S.push(y[_+I])):(E.push(y[_+I]),C.push(F.value)))}const N=Ct(n)&&n.limit===1/0&&(typeof e!="function"||e===Go)&&{index:n.index,range:n.range};return Promise.resolve(C.length>0&&u.mutate({trans:o,type:"add",values:C}).then(I=>{for(let P in I.failures)E.splice(parseInt(P),1);x(C.length,I)})).then(()=>(w.length>0||N&&typeof e=="object")&&u.mutate({trans:o,type:"put",keys:S,values:w,criteria:N,changeSpec:typeof e!="function"&&e}).then(I=>x(w.length,I))).then(()=>(E.length>0||N&&e===Go)&&u.mutate({trans:o,type:"delete",keys:E,criteria:N}).then(I=>x(E.length,I))).then(()=>y.length>_+T&&v(_+f))})};return v(0).then(()=>{if(m.length>0)throw new no("Error modifying one or more objects",m,p,g);return y.length})})})}delete(){var e=this._ctx,n=e.range;return Ct(e)&&(e.isPrimKey&&!Hf||n.type===3)?this._write(o=>{const{primaryKey:s}=e.table.core.schema,i=n;return e.table.core.count({trans:o,query:{index:s,range:i}}).then(a=>e.table.core.mutate({trans:o,type:"deleteRange",range:i}).then(({failures:u,lastResult:d,results:c,numFailures:f})=>{if(f)throw new no("Could not delete some values",Object.keys(u).map(m=>u[m]),a-f);return a-f}))}):this.modify(Go)}}const Go=(t,e)=>e.value=null;function Of(t,e){return t<e?-1:t===e?0:1}function Kf(t,e){return t>e?-1:t===e?0:1}function he(t,e,n){var o=t instanceof Nl?new t.Collection(t):t;return o._ctx.error=n?new n(e):new TypeError(e),o}function bt(t){return new t.Collection(t,()=>kl("")).limit(0)}function Jf(t,e,n,o,s,i){for(var a=Math.min(t.length,o.length),u=-1,d=0;d<a;++d){var c=e[d];if(c!==o[d])return s(t[d],n[d])<0?t.substr(0,d)+n[d]+n.substr(d+1):s(t[d],o[d])<0?t.substr(0,d)+o[d]+n.substr(d+1):u>=0?t.substr(0,u)+e[u]+n.substr(u+1):null;s(t[d],c)<0&&(u=d)}return a<o.length&&i==="next"?t+n.substr(t.length):a<t.length&&i==="prev"?t.substr(0,n.length):u<0?null:t.substr(0,u)+o[u]+n.substr(u+1)}function Ln(t,e,n,o){var s,i,a,u,d,c,f,m=n.length;if(!n.every(y=>typeof y=="string"))return he(t,Sl);function p(y){s=function(_){return _==="next"?T=>T.toUpperCase():T=>T.toLowerCase()}(y),i=function(_){return _==="next"?T=>T.toLowerCase():T=>T.toUpperCase()}(y),a=y==="next"?Of:Kf;var v=n.map(function(_){return{lower:i(_),upper:s(_)}}).sort(function(_,T){return a(_.lower,T.lower)});u=v.map(function(_){return _.upper}),d=v.map(function(_){return _.lower}),c=y,f=y==="next"?"":o}p("next");var g=new t.Collection(t,()=>Je(u[0],d[m-1]+o));g._ondirectionchange=function(y){p(y)};var x=0;return g._addAlgorithm(function(y,v,_){var T=y.key;if(typeof T!="string")return!1;var b=i(T);if(e(b,d,x))return!0;for(var C=null,w=x;w<m;++w){var S=Jf(T,b,u[w],d[w],a,c);S===null&&C===null?x=w+1:(C===null||a(C,S)>0)&&(C=S)}return v(C!==null?function(){y.continue(C+f)}:_),!1}),g}function Je(t,e,n,o){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:o}}function kl(t){return{type:1,lower:t,upper:t}}class Nl{get Collection(){return this._ctx.table.db.Collection}between(e,n,o,s){o=o!==!1,s=s===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(o||s)&&(!o||!s)?bt(this):new this.Collection(this,()=>Je(e,n,!o,!s))}catch{return he(this,Pe)}}equals(e){return e==null?he(this,Pe):new this.Collection(this,()=>kl(e))}above(e){return e==null?he(this,Pe):new this.Collection(this,()=>Je(e,void 0,!0))}aboveOrEqual(e){return e==null?he(this,Pe):new this.Collection(this,()=>Je(e,void 0,!1))}below(e){return e==null?he(this,Pe):new this.Collection(this,()=>Je(void 0,e,!1,!0))}belowOrEqual(e){return e==null?he(this,Pe):new this.Collection(this,()=>Je(void 0,e))}startsWith(e){return typeof e!="string"?he(this,Sl):this.between(e,e+lt,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Ln(this,(n,o)=>n.indexOf(o[0])===0,[e],lt)}equalsIgnoreCase(e){return Ln(this,(n,o)=>n===o[0],[e],"")}anyOfIgnoreCase(){var e=Ue.apply(Et,arguments);return e.length===0?bt(this):Ln(this,(n,o)=>o.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Ue.apply(Et,arguments);return e.length===0?bt(this):Ln(this,(n,o)=>o.some(s=>n.indexOf(s)===0),e,lt)}anyOf(){const e=Ue.apply(Et,arguments);let n=this._cmp;try{e.sort(n)}catch{return he(this,Pe)}if(e.length===0)return bt(this);const o=new this.Collection(this,()=>Je(e[0],e[e.length-1]));o._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,e.sort(n)};let s=0;return o._addAlgorithm((i,a,u)=>{const d=i.key;for(;n(d,e[s])>0;)if(++s,s===e.length)return a(u),!1;return n(d,e[s])===0||(a(()=>{i.continue(e[s])}),!1)}),o}notEqual(e){return this.inAnyRange([[as,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Ue.apply(Et,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return he(this,Pe)}const n=e.reduce((o,s)=>o?o.concat([[o[o.length-1][1],s]]):[[as,s]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const o=this._cmp,s=this._ascending,i=this._descending,a=this._min,u=this._max;if(e.length===0)return bt(this);if(!e.every(T=>T[0]!==void 0&&T[1]!==void 0&&s(T[0],T[1])<=0))return he(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",q.InvalidArgument);const d=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let f,m=s;function p(T,b){return m(T[0],b[0])}try{f=e.reduce(function(T,b){let C=0,w=T.length;for(;C<w;++C){const S=T[C];if(o(b[0],S[1])<0&&o(b[1],S[0])>0){S[0]=a(S[0],b[0]),S[1]=u(S[1],b[1]);break}}return C===w&&T.push(b),T},[]),f.sort(p)}catch{return he(this,Pe)}let g=0;const x=c?T=>s(T,f[g][1])>0:T=>s(T,f[g][1])>=0,y=d?T=>i(T,f[g][0])>0:T=>i(T,f[g][0])>=0;let v=x;const _=new this.Collection(this,()=>Je(f[0][0],f[f.length-1][1],!d,!c));return _._ondirectionchange=T=>{T==="next"?(v=x,m=s):(v=y,m=i),f.sort(p)},_._addAlgorithm((T,b,C)=>{for(var w=T.key;v(w);)if(++g,g===f.length)return b(C),!1;return!!function(S){return!x(S)&&!y(S)}(w)||(this._cmp(w,f[g][1])===0||this._cmp(w,f[g][0])===0||b(()=>{m===s?T.continue(f[g][0]):T.continue(f[g][1])}),!1)}),_}startsWithAnyOf(){const e=Ue.apply(Et,arguments);return e.every(n=>typeof n=="string")?e.length===0?bt(this):this.inAnyRange(e.map(n=>[n,n+lt])):he(this,"startsWithAnyOf() only works with strings")}}function Ie(t){return X(function(e){return vn(e),t(e.target.error),!1})}function vn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const xn="storagemutated",Ye="x-storagemutated-1",st=cn(null,xn);class zf{_lock(){return nn(!G.global),++this._reculock,this._reculock!==1||G.global||(G.lockOwnerFor=this),this}_unlock(){if(nn(!G.global),--this._reculock==0)for(G.global||(G.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{zt(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&G.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,o=this.db._state.dbOpenError;if(nn(!this.idbtrans),!e&&!n)switch(o&&o.name){case"DatabaseClosedError":throw new q.DatabaseClosed(o);case"MissingAPIError":throw new q.MissingAPI(o.message,o);default:throw new q.OpenFailed(o)}if(!this.active)throw new q.TransactionInactive;return nn(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=X(s=>{vn(s),this._reject(e.error)}),e.onabort=X(s=>{vn(s),this.active&&this._reject(new q.Abort(e.error)),this.active=!1,this.on("abort").fire(s)}),e.oncomplete=X(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&st.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,o){if(e==="readwrite"&&this.mode!=="readwrite")return ee(new q.ReadOnly("Transaction is readonly"));if(!this.active)return ee(new q.TransactionInactive);if(this._locked())return new U((i,a)=>{this._blockedFuncs.push([()=>{this._promise(e,n,o).then(i,a)},G])});if(o)return nt(()=>{var i=new U((a,u)=>{this._lock();const d=n(a,u,this);d&&d.then&&d.then(a,u)});return i.finally(()=>this._unlock()),i._lib=!0,i});var s=new U((i,a)=>{var u=n(i,a,this);u&&u.then&&u.then(i,a)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const o=U.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>o);else{n._waitingFor=o,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=a)})()}var i=n._waitingFor;return new U((a,u)=>{o.then(d=>n._waitingQueue.push(X(a.bind(null,d))),d=>n._waitingQueue.push(X(u.bind(null,d)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new q.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(me(n,e))return n[e];const o=this.schema[e];if(!o)throw new q.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,o,this);return s.core=this.db.core.table(e),n[e]=s,s}}function ls(t,e,n,o,s,i,a){return{name:t,keyPath:e,unique:n,multi:o,auto:s,compound:i,src:(n&&!a?"&":"")+(o?"*":"")+(s?"++":"")+Rl(e)}}function Rl(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Pl(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:ul(n,o=>[o.name,o])}}let _n=t=>{try{return t.only([[]]),_n=()=>[[]],[[]]}catch{return _n=()=>lt,lt}};function us(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?o=>o[e]:o=>qe(o,e)}(t):e=>qe(e,t)}function Ki(t){return[].slice.call(t)}let Wf=0;function dn(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Yf(t,e,n){function o(d){if(d.type===3)return null;if(d.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:f,lowerOpen:m,upperOpen:p}=d;return c===void 0?f===void 0?null:e.upperBound(f,!!p):f===void 0?e.lowerBound(c,!!m):e.bound(c,f,!!m,!!p)}const{schema:s,hasGetAll:i}=function(d,c){const f=Ki(d.objectStoreNames);return{schema:{name:d.name,tables:f.map(m=>c.objectStore(m)).map(m=>{const{keyPath:p,autoIncrement:g}=m,x=ie(p),y=p==null,v={},_={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y,compound:x,keyPath:p,autoIncrement:g,unique:!0,extractKey:us(p)},indexes:Ki(m.indexNames).map(T=>m.index(T)).map(T=>{const{name:b,unique:C,multiEntry:w,keyPath:S}=T,E={name:b,compound:ie(S),keyPath:S,unique:C,multiEntry:w,extractKey:us(S)};return v[dn(S)]=E,E}),getIndexByKeyPath:T=>v[dn(T)]};return v[":id"]=_.primaryKey,p!=null&&(v[dn(p)]=_.primaryKey),_})},hasGetAll:f.length>0&&"getAll"in c.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),a=s.tables.map(d=>function(c){const f=c.name;return{name:f,schema:c,mutate:function({trans:m,type:p,keys:g,values:x,range:y}){return new Promise((v,_)=>{v=X(v);const T=m.objectStore(f),b=T.keyPath==null,C=p==="put"||p==="add";if(!C&&p!=="delete"&&p!=="deleteRange")throw new Error("Invalid operation type: "+p);const{length:w}=g||x||{length:1};if(g&&x&&g.length!==x.length)throw new Error("Given keys array must have same length as given values array.");if(w===0)return v({numFailures:0,failures:{},results:[],lastResult:void 0});let S;const E=[],N=[];let I=0;const P=W=>{++I,vn(W)};if(p==="deleteRange"){if(y.type===4)return v({numFailures:I,failures:N,results:[],lastResult:void 0});y.type===3?E.push(S=T.clear()):E.push(S=T.delete(o(y)))}else{const[W,O]=C?b?[x,g]:[x,null]:[g,null];if(C)for(let K=0;K<w;++K)E.push(S=O&&O[K]!==void 0?T[p](W[K],O[K]):T[p](W[K])),S.onerror=P;else for(let K=0;K<w;++K)E.push(S=T[p](W[K])),S.onerror=P}const F=W=>{const O=W.target.result;E.forEach((K,L)=>K.error!=null&&(N[L]=K.error)),v({numFailures:I,failures:N,results:p==="delete"?g:E.map(K=>K.result),lastResult:O})};S.onerror=W=>{P(W),F(W)},S.onsuccess=F})},getMany:({trans:m,keys:p})=>new Promise((g,x)=>{g=X(g);const y=m.objectStore(f),v=p.length,_=new Array(v);let T,b=0,C=0;const w=E=>{const N=E.target;_[N._pos]=N.result,++C===b&&g(_)},S=Ie(x);for(let E=0;E<v;++E)p[E]!=null&&(T=y.get(p[E]),T._pos=E,T.onsuccess=w,T.onerror=S,++b);b===0&&g(_)}),get:({trans:m,key:p})=>new Promise((g,x)=>{g=X(g);const y=m.objectStore(f).get(p);y.onsuccess=v=>g(v.target.result),y.onerror=Ie(x)}),query:function(m){return p=>new Promise((g,x)=>{g=X(g);const{trans:y,values:v,limit:_,query:T}=p,b=_===1/0?void 0:_,{index:C,range:w}=T,S=y.objectStore(f),E=C.isPrimaryKey?S:S.index(C.name),N=o(w);if(_===0)return g({result:[]});if(m){const I=v?E.getAll(N,b):E.getAllKeys(N,b);I.onsuccess=P=>g({result:P.target.result}),I.onerror=Ie(x)}else{let I=0;const P=v||!("openKeyCursor"in E)?E.openCursor(N):E.openKeyCursor(N),F=[];P.onsuccess=W=>{const O=P.result;return O?(F.push(v?O.value:O.primaryKey),++I===_?g({result:F}):void O.continue()):g({result:F})},P.onerror=Ie(x)}})}(i),openCursor:function({trans:m,values:p,query:g,reverse:x,unique:y}){return new Promise((v,_)=>{v=X(v);const{index:T,range:b}=g,C=m.objectStore(f),w=T.isPrimaryKey?C:C.index(T.name),S=x?y?"prevunique":"prev":y?"nextunique":"next",E=p||!("openKeyCursor"in w)?w.openCursor(o(b),S):w.openKeyCursor(o(b),S);E.onerror=Ie(_),E.onsuccess=X(N=>{const I=E.result;if(!I)return void v(null);I.___id=++Wf,I.done=!1;const P=I.continue.bind(I);let F=I.continuePrimaryKey;F&&(F=F.bind(I));const W=I.advance.bind(I),O=()=>{throw new Error("Cursor not stopped")};I.trans=m,I.stop=I.continue=I.continuePrimaryKey=I.advance=()=>{throw new Error("Cursor not started")},I.fail=X(_),I.next=function(){let K=1;return this.start(()=>K--?this.continue():this.stop()).then(()=>this)},I.start=K=>{const L=new Promise((R,V)=>{R=X(R),E.onerror=Ie(V),I.fail=V,I.stop=ge=>{I.stop=I.continue=I.continuePrimaryKey=I.advance=O,R(ge)}}),k=()=>{if(E.result)try{K()}catch(R){I.fail(R)}else I.done=!0,I.start=()=>{throw new Error("Cursor behind last entry")},I.stop()};return E.onsuccess=X(R=>{E.onsuccess=k,k()}),I.continue=P,I.continuePrimaryKey=F,I.advance=W,k(),L},v(I)},_)})},count({query:m,trans:p}){const{index:g,range:x}=m;return new Promise((y,v)=>{const _=p.objectStore(f),T=g.isPrimaryKey?_:_.index(g.name),b=o(x),C=b?T.count(b):T.count();C.onsuccess=X(w=>y(w.target.result)),C.onerror=Ie(v)})}}}(d)),u={};return a.forEach(d=>u[d.name]=d),{stack:"dbcore",transaction:t.transaction.bind(t),table(d){if(!u[d])throw new Error(`Table '${d}' not found`);return u[d]},MIN_KEY:-1/0,MAX_KEY:_n(e),schema:s}}function cs({_novip:t},e){const n=e.db,o=function(s,i,{IDBKeyRange:a,indexedDB:u},d){return{dbcore:function(f,m){return m.reduce((p,{create:g})=>({...p,...g(p)}),f)}(Yf(i,a,d),s.dbcore)}}(t._middlewares,n,t._deps,e);t.core=o.dbcore,t.tables.forEach(s=>{const i=s.name;t.core.schema.tables.some(a=>a.name===i)&&(s.core=t.core.table(i),t[i]instanceof t.Table&&(t[i].core=s.core))})}function ao({_novip:t},e,n,o){n.forEach(s=>{const i=o[s];e.forEach(a=>{const u=Ls(a,s);(!u||"value"in u&&u.value===void 0)&&(a===t.Transaction.prototype||a instanceof t.Transaction?Ge(a,s,{get(){return this.table(s)},set(d){rl(this,s,{value:d,writable:!0,configurable:!0,enumerable:!0})}}):a[s]=new t.Table(s,i))})})}function ds({_novip:t},e){e.forEach(n=>{for(let o in n)n[o]instanceof t.Table&&delete n[o]})}function Qf(t,e){return t._cfg.version-e._cfg.version}function Xf(t,e,n,o){const s=t._dbSchema,i=t._createTransaction("readwrite",t._storeNames,s);i.create(n),i._completion.catch(o);const a=i._reject.bind(i),u=G.transless||G;nt(()=>{G.trans=i,G.transless=u,e===0?(Z(s).forEach(d=>{qo(n,d,s[d].primKey,s[d].indexes)}),cs(t,n),U.follow(()=>t.on.populate.fire(i)).catch(a)):function({_novip:d},c,f,m){const p=[],g=d._versions;let x=d._dbSchema=hs(d,d.idbdb,m),y=!1;const v=g.filter(T=>T._cfg.version>=c);function _(){return p.length?U.resolve(p.shift()(f.idbtrans)).then(_):U.resolve()}return v.forEach(T=>{p.push(()=>{const b=x,C=T._cfg.dbschema;ps(d,b,m),ps(d,C,m),x=d._dbSchema=C;const w=Ml(b,C);w.add.forEach(E=>{qo(m,E[0],E[1].primKey,E[1].indexes)}),w.change.forEach(E=>{if(E.recreate)throw new q.Upgrade("Not yet support for changing primary key");{const N=m.objectStore(E.name);E.add.forEach(I=>fs(N,I)),E.change.forEach(I=>{N.deleteIndex(I.name),fs(N,I)}),E.del.forEach(I=>N.deleteIndex(I))}});const S=T._cfg.contentUpgrade;if(S&&T._cfg.version>c){cs(d,m),f._memoizedTables={},y=!0;let E=cl(C);w.del.forEach(F=>{E[F]=b[F]}),ds(d,[d.Transaction.prototype]),ao(d,[d.Transaction.prototype],Z(E),E),f.schema=E;const N=Gs(S);let I;N&&Jt();const P=U.follow(()=>{if(I=S(f),I&&N){var F=Ve.bind(null,null);I.then(F,F)}});return I&&typeof I.then=="function"?U.resolve(I):P.then(()=>I)}}),p.push(b=>{(!y||!Vf)&&function(C,w){[].slice.call(w.db.objectStoreNames).forEach(S=>C[S]==null&&w.db.deleteObjectStore(S))}(T._cfg.dbschema,b),ds(d,[d.Transaction.prototype]),ao(d,[d.Transaction.prototype],d._storeNames,d._dbSchema),f.schema=d._dbSchema})}),_().then(()=>{var T,b;b=m,Z(T=x).forEach(C=>{b.db.objectStoreNames.contains(C)||qo(b,C,T[C].primKey,T[C].indexes)})})}(t,e,i,n).catch(a)})}function Ml(t,e){const n={del:[],add:[],change:[]};let o;for(o in t)e[o]||n.del.push(o);for(o in e){const s=t[o],i=e[o];if(s){const a={name:o,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!To)a.recreate=!0,n.change.push(a);else{const u=s.idxByName,d=i.idxByName;let c;for(c in u)d[c]||a.del.push(c);for(c in d){const f=u[c],m=d[c];f?f.src!==m.src&&a.change.push(m):a.add.push(m)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([o,i])}return n}function qo(t,e,n,o){const s=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return o.forEach(i=>fs(s,i)),s}function fs(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function hs(t,e,n){const o={};return to(e.objectStoreNames,0).forEach(s=>{const i=n.objectStore(s);let a=i.keyPath;const u=ls(Rl(a),a||"",!1,!1,!!i.autoIncrement,a&&typeof a!="string",!0),d=[];for(let f=0;f<i.indexNames.length;++f){const m=i.index(i.indexNames[f]);a=m.keyPath;var c=ls(m.name,a,!!m.unique,!!m.multiEntry,!1,a&&typeof a!="string",!1);d.push(c)}o[s]=Pl(s,u,d)}),o}function ps({_novip:t},e,n){const o=n.db.objectStoreNames;for(let s=0;s<o.length;++s){const i=o[s],a=n.objectStore(i);t._hasGetAll="getAll"in a;for(let u=0;u<a.indexNames.length;++u){const d=a.indexNames[u],c=a.index(d).keyPath,f=typeof c=="string"?c:"["+to(c).join("+")+"]";if(e[i]){const m=e[i].idxByName[f];m&&(m.name=d,delete e[i].idxByName[f],e[i].idxByName[d]=m)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Q.WorkerGlobalScope&&Q instanceof Q.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class jf{_parseStoresSpec(e,n){Z(e).forEach(o=>{if(e[o]!==null){var s=e[o].split(",").map((a,u)=>{const d=(a=a.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return ls(d,c||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),ie(c),u===0)}),i=s.shift();if(i.multi)throw new q.Schema("Primary key cannot be multi-valued");s.forEach(a=>{if(a.auto)throw new q.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new q.Schema("Index must have a name and cannot be an empty string")}),n[o]=Pl(o,i,s)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?de(this._cfg.storesSource,e):e;const o=n._versions,s={};let i={};return o.forEach(a=>{de(s,a._cfg.storesSource),i=a._cfg.dbschema={},a._parseStoresSpec(s,i)}),n._dbSchema=i,ds(n,[n._allTables,n,n.Transaction.prototype]),ao(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Z(i),i),n._storeNames=Z(i),this}upgrade(e){return this._cfg.contentUpgrade=Hs(this._cfg.contentUpgrade||Y,e),this}}function Ks(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new yt(Co,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Js(t){return t&&typeof t.databases=="function"}function ms(t){return nt(function(){return G.letThrough=!0,t()})}function Zf(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function eh(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?ee(e.dbOpenError):t);Re&&(e.openCanceller._stackHolder=_t()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const o=e.openCanceller;function s(){if(e.openCanceller!==o)throw new q.DatabaseClosed("db.open() was cancelled")}let i=e.dbReadyResolve,a=null,u=!1;const d=()=>new U((c,f)=>{if(s(),!n)throw new q.MissingAPI;const m=t.name,p=e.autoSchema?n.open(m):n.open(m,Math.round(10*t.verno));if(!p)throw new q.MissingAPI;p.onerror=Ie(f),p.onblocked=X(t._fireOnBlocked),p.onupgradeneeded=X(g=>{if(a=p.transaction,e.autoSchema&&!t._options.allowEmptyDB){p.onerror=vn,a.abort(),p.result.close();const y=n.deleteDatabase(m);y.onsuccess=y.onerror=X(()=>{f(new q.NoSuchDatabase(`Database ${m} doesnt exist`))})}else{a.onerror=Ie(f);var x=g.oldVersion>Math.pow(2,62)?0:g.oldVersion;u=x<1,t._novip.idbdb=p.result,Xf(t,x/10,a,f)}},f),p.onsuccess=X(()=>{a=null;const g=t._novip.idbdb=p.result,x=to(g.objectStoreNames);if(x.length>0)try{const v=g.transaction((y=x).length===1?y[0]:y,"readonly");e.autoSchema?function({_novip:_},T,b){_.verno=T.version/10;const C=_._dbSchema=hs(0,T,b);_._storeNames=to(T.objectStoreNames,0),ao(_,[_._allTables],Z(C),C)}(t,g,v):(ps(t,t._dbSchema,v),function(_,T){const b=Ml(hs(0,_.idbdb,T),_._dbSchema);return!(b.add.length||b.change.some(C=>C.add.length||C.change.length))}(t,v)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),cs(t,v)}catch{}var y;un.push(t),g.onversionchange=X(v=>{e.vcFired=!0,t.on("versionchange").fire(v)}),g.onclose=X(v=>{t.on("close").fire(v)}),u&&function({indexedDB:v,IDBKeyRange:_},T){!Js(v)&&T!==Co&&Ks(v,_).put({name:T}).catch(Y)}(t._deps,m),c()},f)}).catch(c=>c&&c.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d()):U.reject(c));return U.race([o,(typeof navigator>"u"?U.resolve():Zf()).then(d)]).then(()=>(s(),e.onReadyBeingFired=[],U.resolve(ms(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let f=e.onReadyBeingFired.reduce(Hs,Y);return e.onReadyBeingFired=[],U.resolve(ms(()=>f(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{a&&a.abort()}catch{}return o===e.openCanceller&&t._close(),ee(c)}).finally(()=>{e.openComplete=!0,i()})}function gs(t){var e=i=>t.next(i),n=s(e),o=s(i=>t.throw(i));function s(i){return a=>{var u=i(a),d=u.value;return u.done?d:d&&typeof d.then=="function"?d.then(n,o):ie(d)?Promise.all(d).then(n,o):n(d)}}return s(e)()}function th(t,e,n){var o=arguments.length;if(o<2)throw new q.InvalidArgument("Too few arguments");for(var s=new Array(o-1);--o;)s[o-1]=arguments[o];return n=s.pop(),[t,dl(s),n]}function Dl(t,e,n,o,s){return U.resolve().then(()=>{const i=G.transless||G,a=t._createTransaction(e,n,t._dbSchema,o),u={trans:a,transless:i};if(o)a.idbtrans=o.idbtrans;else try{a.create(),t._state.PR1398_maxLoop=3}catch(m){return m.name===Vs.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Dl(t,e,n,null,s))):ee(m)}const d=Gs(s);let c;d&&Jt();const f=U.follow(()=>{if(c=s.call(a,a),c)if(d){var m=Ve.bind(null,null);c.then(m,m)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=gs(c))},u);return(c&&typeof c.then=="function"?U.resolve(c).then(m=>a.active?m:ee(new q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):f.then(()=>c)).then(m=>(o&&a._resolve(),a._completion.then(()=>m))).catch(m=>(a._reject(m),ee(m)))})}function Gn(t,e,n){const o=ie(t)?t.slice():[t];for(let s=0;s<n;++s)o.push(e);return o}const nh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:o}=n,s={},i=[];function a(f,m,p){const g=dn(f),x=s[g]=s[g]||[],y=f==null?0:typeof f=="string"?1:f.length,v=m>0,_={...p,isVirtual:v,keyTail:m,keyLength:y,extractKey:us(f),unique:!v&&p.unique};return x.push(_),_.isPrimaryKey||i.push(_),y>1&&a(y===2?f[0]:f.slice(0,y-1),m+1,p),x.sort((T,b)=>T.keyTail-b.keyTail),_}const u=a(o.primaryKey.keyPath,0,o.primaryKey);s[":id"]=[u];for(const f of o.indexes)a(f.keyPath,0,f);function d(f){const m=f.query.index;return m.isVirtual?{...f,query:{index:m,range:(p=f.query.range,g=m.keyTail,{type:p.type===1?2:p.type,lower:Gn(p.lower,p.lowerOpen?t.MAX_KEY:t.MIN_KEY,g),lowerOpen:!0,upper:Gn(p.upper,p.upperOpen?t.MIN_KEY:t.MAX_KEY,g),upperOpen:!0})}}:f;var p,g}return{...n,schema:{...o,primaryKey:u,indexes:i,getIndexByKeyPath:function(f){const m=s[dn(f)];return m&&m[0]}},count:f=>n.count(d(f)),query:f=>n.query(d(f)),openCursor(f){const{keyTail:m,isVirtual:p,keyLength:g}=f.query.index;return p?n.openCursor(d(f)).then(x=>x&&function(y){return Object.create(y,{continue:{value:function(_){_!=null?y.continue(Gn(_,f.reverse?t.MAX_KEY:t.MIN_KEY,m)):f.unique?y.continue(y.key.slice(0,g).concat(f.reverse?t.MIN_KEY:t.MAX_KEY,m)):y.continue()}},continuePrimaryKey:{value(_,T){y.continuePrimaryKey(Gn(_,t.MAX_KEY,m),T)}},primaryKey:{get:()=>y.primaryKey},key:{get(){const _=y.key;return g===1?_[0]:_.slice(0,g)}},value:{get:()=>y.value}})}(x)):n.openCursor(f)}}}}}};function zs(t,e,n,o){return n=n||{},o=o||"",Z(t).forEach(s=>{if(me(e,s)){var i=t[s],a=e[s];if(typeof i=="object"&&typeof a=="object"&&i&&a){const u=Yo(i);u!==Yo(a)?n[o+s]=e[s]:u==="Object"?zs(i,a,n,o+s+"."):i!==a&&(n[o+s]=e[s])}else i!==a&&(n[o+s]=e[s])}else n[o+s]=void 0}),Z(e).forEach(s=>{me(t,s)||(n[o+s]=e[s])}),n}const oh={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:o}=n.schema;return{...n,mutate(i){const a=G.trans,{deleting:u,creating:d,updating:c}=a.table(e).hook;switch(i.type){case"add":if(d.fire===Y)break;return a._promise("readwrite",()=>f(i),!0);case"put":if(d.fire===Y&&c.fire===Y)break;return a._promise("readwrite",()=>f(i),!0);case"delete":if(u.fire===Y)break;return a._promise("readwrite",()=>f(i),!0);case"deleteRange":if(u.fire===Y)break;return a._promise("readwrite",()=>function(p){return m(p.trans,p.range,1e4)}(i),!0)}return n.mutate(i);function f(p){const g=G.trans,x=p.keys||function(y,v){return v.type==="delete"?v.keys:v.keys||v.values.map(y.extractKey)}(o,p);if(!x)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?{...p,keys:x}:{...p}).type!=="delete"&&(p.values=[...p.values]),p.keys&&(p.keys=[...p.keys]),function(y,v,_){return v.type==="add"?Promise.resolve([]):y.getMany({trans:v.trans,keys:_,cache:"immutable"})}(n,p,x).then(y=>{const v=x.map((_,T)=>{const b=y[T],C={onerror:null,onsuccess:null};if(p.type==="delete")u.fire.call(C,_,b,g);else if(p.type==="add"||b===void 0){const w=d.fire.call(C,_,p.values[T],g);_==null&&w!=null&&(_=w,p.keys[T]=_,o.outbound||be(p.values[T],o.keyPath,_))}else{const w=zs(b,p.values[T]),S=c.fire.call(C,w,_,b,g);if(S){const E=p.values[T];Object.keys(S).forEach(N=>{me(E,N)?E[N]=S[N]:be(E,N,S[N])})}}return C});return n.mutate(p).then(({failures:_,results:T,numFailures:b,lastResult:C})=>{for(let w=0;w<x.length;++w){const S=T?T[w]:x[w],E=v[w];S==null?E.onerror&&E.onerror(_[w]):E.onsuccess&&E.onsuccess(p.type==="put"&&y[w]?p.values[w]:S)}return{failures:_,results:T,numFailures:b,lastResult:C}}).catch(_=>(v.forEach(T=>T.onerror&&T.onerror(_)),Promise.reject(_)))})}function m(p,g,x){return n.query({trans:p,values:!1,query:{index:o,range:g},limit:x}).then(({result:y})=>f({type:"delete",keys:y,trans:p}).then(v=>v.numFailures>0?Promise.reject(v.failures[0]):y.length<x?{failures:[],numFailures:0,lastResult:void 0}:m(p,{...g,lower:y[y.length-1],lowerOpen:!0},x)))}}}}})};function Fl(t,e,n){try{if(!e||e.keys.length<t.length)return null;const o=[];for(let s=0,i=0;s<e.keys.length&&i<t.length;++s)ce(e.keys[s],t[i])===0&&(o.push(n?En(e.values[s]):e.values[s]),++i);return o.length===t.length?o:null}catch{return null}}const sh={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:o=>{if(!o.cache)return n.getMany(o);const s=Fl(o.keys,o.trans._cache,o.cache==="clone");return s?U.resolve(s):n.getMany(o).then(i=>(o.trans._cache={keys:o.keys,values:o.cache==="clone"?En(i):i},i))},mutate:o=>(o.type!=="add"&&(o.trans._cache=null),n.mutate(o))}}})};function Ws(t){return!("from"in t)}const De=function(t,e){if(!this){const n=new De;return t&&"d"in t&&de(n,t),n}de(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Tn(t,e,n){const o=ce(e,n);if(isNaN(o))return;if(o>0)throw RangeError();if(Ws(t))return de(t,{from:e,to:n,d:1});const s=t.l,i=t.r;if(ce(n,t.from)<0)return s?Tn(s,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Ji(t);if(ce(e,t.to)>0)return i?Tn(i,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Ji(t);ce(e,t.from)<0&&(t.from=e,t.l=null,t.d=i?i.d+1:1),ce(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const a=!t.r;s&&!t.l&&lo(t,s),i&&a&&lo(t,i)}function lo(t,e){Ws(e)||function n(o,{from:s,to:i,l:a,r:u}){Tn(o,s,i),a&&n(o,a),u&&n(o,u)}(t,e)}function ih(t,e){const n=ys(e);let o=n.next();if(o.done)return!1;let s=o.value;const i=ys(t);let a=i.next(s.from),u=a.value;for(;!o.done&&!a.done;){if(ce(u.from,s.to)<=0&&ce(u.to,s.from)>=0)return!0;ce(s.from,u.from)<0?s=(o=n.next(u.from)).value:u=(a=i.next(s.from)).value}return!1}function ys(t){let e=Ws(t)?null:{s:0,n:t};return{next(n){const o=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,o)for(;e.n.l&&ce(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!o||ce(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Ji(t){var e,n;const o=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),s=o>1?"r":o<-1?"l":"";if(s){const i=s==="r"?"l":"r",a={...t},u=t[s];t.from=u.from,t.to=u.to,t[s]=u[s],a[s]=u[i],t[i]=a,a.d=zi(a)}t.d=zi(t)}function zi({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}Kt(De.prototype,{add(t){return lo(this,t),this},addKey(t){return Tn(this,t,t),this},addKeys(t){return t.forEach(e=>Tn(this,e,e)),this},[Qo](){return ys(this)}});const rh={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new De(t.MIN_KEY,t.MAX_KEY);return{...t,table:o=>{const s=t.table(o),{schema:i}=s,{primaryKey:a}=i,{extractKey:u,outbound:d}=a,c={...s,mutate:p=>{const g=p.trans,x=g.mutatedParts||(g.mutatedParts={}),y=S=>{const E=`idb://${e}/${o}/${S}`;return x[E]||(x[E]=new De)},v=y(""),_=y(":dels"),{type:T}=p;let[b,C]=p.type==="deleteRange"?[p.range]:p.type==="delete"?[p.keys]:p.values.length<50?[[],p.values]:[];const w=p.trans._cache;return s.mutate(p).then(S=>{if(ie(b)){T!=="delete"&&(b=S.results),v.addKeys(b);const E=Fl(b,w);E||T==="add"||_.addKeys(b),(E||C)&&function(N,I,P,F){function W(O){const K=N(O.name||"");function L(R){return R!=null?O.extractKey(R):null}const k=R=>O.multiEntry&&ie(R)?R.forEach(V=>K.addKey(V)):K.addKey(R);(P||F).forEach((R,V)=>{const ge=P&&L(P[V]),Xt=F&&L(F[V]);ce(ge,Xt)!==0&&(ge!=null&&k(ge),Xt!=null&&k(Xt))})}I.indexes.forEach(W)}(y,i,E,C)}else if(b){const E={from:b.lower,to:b.upper};_.add(E),v.add(E)}else v.add(n),_.add(n),i.indexes.forEach(E=>y(E.name).add(n));return S})}},f=({query:{index:p,range:g}})=>{var x,y;return[p,new De((x=g.lower)!==null&&x!==void 0?x:t.MIN_KEY,(y=g.upper)!==null&&y!==void 0?y:t.MAX_KEY)]},m={get:p=>[a,new De(p.key)],getMany:p=>[a,new De().addKeys(p.keys)],count:f,query:f,openCursor:f};return Z(m).forEach(p=>{c[p]=function(g){const{subscr:x}=G;if(x){const y=C=>{const w=`idb://${e}/${o}/${C}`;return x[w]||(x[w]=new De)},v=y(""),_=y(":dels"),[T,b]=m[p](g);if(y(T.name||"").add(b),!T.isPrimaryKey){if(p!=="count"){const C=p==="query"&&d&&g.values&&s.query({...g,values:!1});return s[p].apply(this,arguments).then(w=>{if(p==="query"){if(d&&g.values)return C.then(({result:E})=>(v.addKeys(E),w));const S=g.values?w.result.map(u):w.result;g.values?v.addKeys(S):_.addKeys(S)}else if(p==="openCursor"){const S=w,E=g.values;return S&&Object.create(S,{key:{get:()=>(_.addKey(S.primaryKey),S.key)},primaryKey:{get(){const N=S.primaryKey;return _.addKey(N),N}},value:{get:()=>(E&&v.addKey(S.primaryKey),S.value)}})}return w})}_.add(n)}}return s[p].apply(this,arguments)}}),c}}}};class yt{constructor(e,n){this._middlewares={},this.verno=0;const o=yt.dependencies;this._options=n={addons:yt.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Y,dbReadyPromise:null,cancelOpen:Y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;i.dbReadyPromise=new U(u=>{i.dbReadyResolve=u}),i.openCanceller=new U((u,d)=>{i.cancelOpen=d}),this._state=i,this.name=e,this.on=cn(this,"populate","blocked","versionchange","close",{ready:[Hs,Y]}),this.on.ready.subscribe=al(this.on.ready.subscribe,u=>(d,c)=>{yt.vip(()=>{const f=this._state;if(f.openComplete)f.dbOpenError||U.resolve().then(d),c&&u(d);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(d),c&&u(d);else{u(d);const m=this;c||u(function p(){m.on.ready.unsubscribe(d),m.on.ready.unsubscribe(p)})}})}),this.Collection=(a=this,jt($f.prototype,function(u,d){this.db=a;let c=Al,f=null;if(d)try{c=d()}catch(x){f=x}const m=u._ctx,p=m.table,g=p.hook.reading.fire;this._ctx={table:p,index:m.index,isPrimKey:!m.index||p.schema.primKey.keyPath&&m.index===p.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:m.or,valueMapper:g!==gn?g:null}})),this.Table=function(u){return jt(Bf.prototype,function(d,c,f){this.db=u,this._tx=f,this.name=d,this.schema=c,this.hook=u._allTables[d]?u._allTables[d].hook:cn(null,{creating:[Nf,Y],reading:[kf,gn],updating:[Pf,Y],deleting:[Rf,Y]})})}(this),this.Transaction=function(u){return jt(zf.prototype,function(d,c,f,m,p){this.db=u,this.mode=d,this.storeNames=c,this.schema=f,this.chromeTransactionDurability=m,this.idbtrans=null,this.on=cn(this,"complete","error","abort"),this.parent=p||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new U((g,x)=>{this._resolve=g,this._reject=x}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},g=>{var x=this.active;return this.active=!1,this.on.error.fire(g),this.parent?this.parent._reject(g):x&&this.idbtrans&&this.idbtrans.abort(),ee(g)})})}(this),this.Version=function(u){return jt(jf.prototype,function(d){this.db=u,this._cfg={version:d,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(u){return jt(Nl.prototype,function(d,c,f){this.db=u,this._ctx={table:d,index:c===":id"?null:c,or:f};const m=u._deps.indexedDB;if(!m)throw new q.MissingAPI;this._cmp=this._ascending=m.cmp.bind(m),this._descending=(p,g)=>m.cmp(g,p),this._max=(p,g)=>m.cmp(p,g)>0?p:g,this._min=(p,g)=>m.cmp(p,g)<0?p:g,this._IDBKeyRange=u._deps.IDBKeyRange})}(this),this.on("versionchange",u=>{u.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",u=>{!u.newVersion||u.newVersion<u.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${u.oldVersion/10}`)}),this._maxKey=_n(n.IDBKeyRange),this._createTransaction=(u,d,c,f)=>new this.Transaction(u,d,c,this._options.chromeTransactionDurability,f),this._fireOnBlocked=u=>{this.on("blocked").fire(u),un.filter(d=>d.name===this.name&&d!==this&&!d._state.vcFired).map(d=>d.on("versionchange").fire(u))},this.use(nh),this.use(oh),this.use(rh),this.use(sh),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(u=>u(this))}version(e){if(isNaN(e)||e<.1)throw new q.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var o=n.filter(s=>s._cfg.version===e)[0];return o||(o=new this.Version(e),n.push(o),n.sort(Qf),o.stores({}),this._state.autoSchema=!1,o)}_whenReady(e){return this.idbdb&&(this._state.openComplete||G.letThrough||this._vip)?e():new U((n,o)=>{if(this._state.openComplete)return o(new q.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void o(new q.DatabaseClosed);this.open().catch(Y)}this._state.dbReadyPromise.then(n,o)}).then(e)}use({stack:e,create:n,level:o,name:s}){s&&this.unuse({stack:e,name:s});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:n,level:o??10,name:s}),i.sort((a,u)=>a.level-u.level),this}unuse({stack:e,name:n,create:o}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(s=>o?s.create!==o:!!n&&s.name!==n)),this}open(){return eh(this)}_close(){const e=this._state,n=un.indexOf(this);if(n>=0&&un.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new U(o=>{e.dbReadyResolve=o}),e.openCanceller=new U((o,s)=>{e.cancelOpen=s})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new q.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new U((o,s)=>{const i=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=X(()=>{(function({indexedDB:u,IDBKeyRange:d},c){!Js(u)&&c!==Co&&Ks(u,d).delete(c).catch(Y)})(this._deps,this.name),o()}),a.onerror=Ie(s),a.onblocked=this._fireOnBlocked};if(e)throw new q.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Z(this._allTables).map(e=>this._allTables[e])}transaction(){const e=th.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,o){let s=G.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const i=e.indexOf("?")!==-1;let a,u;e=e.replace("!","").replace("?","");try{if(u=n.map(c=>{var f=c instanceof this.Table?c.name:c;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),e=="r"||e===Do)a=Do;else{if(e!="rw"&&e!=Fo)throw new q.InvalidArgument("Invalid transaction mode: "+e);a=Fo}if(s){if(s.mode===Do&&a===Fo){if(!i)throw new q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&u.forEach(c=>{if(s&&s.storeNames.indexOf(c)===-1){if(!i)throw new q.SubTransaction("Table "+c+" not included in parent transaction.");s=null}}),i&&s&&!s.active&&(s=null)}}catch(c){return s?s._promise(null,(f,m)=>{m(c)}):ee(c)}const d=Dl.bind(null,this,a,u,s,o);return s?s._promise(a,d,"lock"):G.trans?zt(G.transless,()=>this._whenReady(d)):this._whenReady(d)}table(e){if(!me(this._allTables,e))throw new q.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const ah=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class lh{constructor(e){this._subscribe=e}subscribe(e,n,o){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:o})}[ah](){return this}}function Ul(t,e){return Z(e).forEach(n=>{lo(t[n]||(t[n]=new De),e[n])}),t}function uh(t){let e,n=!1;const o=new lh(s=>{const i=Gs(t);let a=!1,u={},d={};const c={get closed(){return a},unsubscribe:()=>{a=!0,st.storagemutated.unsubscribe(g)}};s.start&&s.start(c);let f=!1,m=!1;function p(){return Z(d).some(y=>u[y]&&ih(u[y],d[y]))}const g=y=>{Ul(u,y),p()&&x()},x=()=>{if(f||a)return;u={};const y={},v=function(_){i&&Jt();const T=()=>nt(t,{subscr:_,trans:null}),b=G.trans?zt(G.transless,T):T();return i&&b.then(Ve,Ve),b}(y);m||(st(xn,g),m=!0),f=!0,Promise.resolve(v).then(_=>{n=!0,e=_,f=!1,a||(p()?x():(u={},d=y,s.next&&s.next(_)))},_=>{f=!1,n=!1,s.error&&s.error(_),c.unsubscribe()})};return x(),c});return o.hasValue=()=>n,o.getValue=()=>e,o}let vs;try{vs={indexedDB:Q.indexedDB||Q.mozIndexedDB||Q.webkitIndexedDB||Q.msIndexedDB,IDBKeyRange:Q.IDBKeyRange||Q.webkitIDBKeyRange}}catch{vs={indexedDB:null,IDBKeyRange:null}}const rt=yt;function Qn(t){let e=Le;try{Le=!0,st.storagemutated.fire(t)}finally{Le=e}}Kt(rt,{...On,delete:t=>new rt(t,{addons:[]}).delete(),exists:t=>new rt(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Js(e)?Promise.resolve(e.databases()).then(o=>o.map(s=>s.name).filter(s=>s!==Co)):Ks(e,n).toCollection().primaryKeys()}(rt.dependencies).then(t)}catch{return ee(new q.MissingAPI)}},defineClass:()=>function(t){de(this,t)},ignoreTransaction:t=>G.trans?zt(G.transless,t):t(),vip:ms,async:function(t){return function(){try{var e=gs(t.apply(this,arguments));return e&&typeof e.then=="function"?e:U.resolve(e)}catch(n){return ee(n)}}},spawn:function(t,e,n){try{var o=gs(t.apply(n,e||[]));return o&&typeof o.then=="function"?o:U.resolve(o)}catch(s){return ee(s)}},currentTransaction:{get:()=>G.trans||null},waitFor:function(t,e){const n=U.resolve(typeof t=="function"?rt.ignoreTransaction(t):t).timeout(e||6e4);return G.trans?G.trans.waitFor(n):n},Promise:U,debug:{get:()=>Re,set:t=>{hl(t,t==="dexie"?()=>!0:Il)}},derive:Nt,extend:de,props:Kt,override:al,Events:cn,on:st,liveQuery:uh,extendObservabilitySet:Ul,getByKeyPath:qe,setByKeyPath:be,delByKeyPath:function(t,e){typeof e=="string"?be(t,e,void 0):"length"in e&&[].map.call(e,function(n){be(t,n,void 0)})},shallowClone:cl,deepClone:En,getObjectDiff:zs,cmp:ce,asap:ll,minKey:as,addons:[],connections:un,errnames:Vs,dependencies:vs,semVer:Vi,version:Vi.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),rt.maxKey=_n(rt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(st(xn,t=>{if(!Le){let e;To?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Ye,!0,!0,t)):e=new CustomEvent(Ye,{detail:t}),Le=!0,dispatchEvent(e),Le=!1}}),addEventListener(Ye,({detail:t})=>{Le||Qn(t)}));let Le=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Ye);typeof t.unref=="function"&&t.unref(),st(xn,e=>{Le||t.postMessage(e)}),t.onmessage=e=>{e.data&&Qn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){st(xn,e=>{try{Le||(typeof localStorage<"u"&&localStorage.setItem(Ye,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Ye,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Ye){const n=JSON.parse(e.newValue);n&&Qn(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Ye&&Qn(e.changedParts)})}U.rejectionMapper=function(t,e){if(!t||t instanceof Rt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Ui[t.name])return t;var n=new Ui[t.name](e||t.message,t);return"stack"in t&&Ge(n,"stack",{get:function(){return this.inner.stack}}),n},hl(Re,Il);class ch extends yt{constructor(){super("FTCManagerDB");Oe(this,"tasks");Oe(this,"checklists");Oe(this,"scoutingReports");Oe(this,"matchPlans");Oe(this,"syncQueue");Oe(this,"members");Oe(this,"teams");this.version(1).stores({tasks:"id, organizationId, teamId, status, syncStatus, updatedAt",checklists:"id, organizationId, syncStatus",scoutingReports:"id, organizationId, opponentTeamNumber, matchNumber, syncStatus",matchPlans:"id, organizationId, syncStatus",syncQueue:"id, tableName, timestamp, retryCount",members:"id, organizationId, syncStatus",teams:"id, organizationId, syncStatus"})}}const uo=new ch;function ze(){return crypto.randomUUID()}async function wt(t,e,n,o){await uo.syncQueue.add({id:ze(),tableName:t,recordId:e,operation:n,data:o,timestamp:Date.now(),retryCount:0})}async function dh(){return await uo.syncQueue.count()}const Wi=[{id:"m1",firstName:"Abby",lastNameInitial:"B"},{id:"m2",firstName:"Ben",lastNameInitial:"C"},{id:"m3",firstName:"Charlie",lastNameInitial:"D"},{id:"m4",firstName:"Dana",lastNameInitial:"E"},{id:"m5",firstName:"Evan",lastNameInitial:"F"}],Yi=[{id:"t1",name:"Programming",memberIds:["m1"]},{id:"t2",name:"Build",memberIds:["m2"]},{id:"t3",name:"Drive",memberIds:["m3"]},{id:"t4",name:"Scouting",memberIds:["m5"]},{id:"t5",name:"Outreach",memberIds:["m4"]}],Qi=[{id:"1",text:"Turn off robot",checked:!1},{id:"2",text:"Swap main battery",checked:!1},{id:"3",text:"Charge old battery",checked:!1},{id:"4",text:"Charge Driver Hub",checked:!1},{id:"5",text:"Tighten chassis screws",checked:!1},{id:"6",text:"Check wiring connections",checked:!1},{id:"7",text:"Clean wheels",checked:!1},{id:"8",text:"Reset servo positions",checked:!1}],An=ff()(vf((t,e)=>({currentOrganizationId:null,isDemoMode:!0,tasks:[],members:Wi,teams:Yi,scoutingReports:[],checklist:Qi,matchPlans:[],theme:"light",geminiApiKey:null,setTheme:n=>{t({theme:n}),n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},setGeminiApiKey:n=>t({geminiApiKey:n}),addTask:n=>{const o={...n,id:ze(),createdAt:Date.now(),timeline:[{id:ze(),type:"history",authorId:"System",content:"Task created",timestamp:Date.now()}]};t(s=>({tasks:[...s.tasks,o]})),e().isDemoMode||wt("tasks",o.id,"create",o)},updateTask:(n,o)=>{if(t(s=>({tasks:s.tasks.map(i=>i.id===n?{...i,...o}:i)})),!e().isDemoMode){const s=e().tasks.find(i=>i.id===n);s&&wt("tasks",n,"update",{...s,...o})}},deleteTask:n=>{t(o=>({tasks:o.tasks.filter(s=>s.id!==n)})),e().isDemoMode||wt("tasks",n,"delete",null)},addMember:(n,o)=>{const s={id:ze(),firstName:n,lastNameInitial:o};t(i=>({members:[...i.members,s]}))},removeMember:n=>{t(o=>({members:o.members.filter(s=>s.id!==n),teams:o.teams.map(s=>({...s,memberIds:s.memberIds.filter(i=>i!==n)}))}))},setMembers:n=>t({members:n}),addTeam:n=>{const o={id:ze(),name:n,memberIds:[]};t(s=>({teams:[...s.teams,o]}))},removeTeam:n=>{t(o=>({teams:o.teams.filter(s=>s.id!==n)}))},toggleMemberInTeam:(n,o)=>{t(s=>({teams:s.teams.map(i=>{if(i.id!==n)return i;const a=i.memberIds.includes(o)?i.memberIds.filter(u=>u!==o):[...i.memberIds,o];return{...i,memberIds:a}})}))},setTeams:n=>t({teams:n}),addScoutingReport:n=>{const o={...n,id:ze()};t(s=>({scoutingReports:[...s.scoutingReports,o]}))},toggleChecklistItem:n=>{t(o=>({checklist:o.checklist.map(s=>s.id===n?{...s,checked:!s.checked}:s)}))},resetChecklist:()=>{t(n=>({checklist:n.checklist.map(o=>({...o,checked:!1}))}))},addChecklistItem:n=>{const o={id:ze(),text:n,checked:!1};t(s=>({checklist:[...s.checklist,o]}))},deleteChecklistItem:n=>{t(o=>({checklist:o.checklist.filter(s=>s.id!==n)}))},updateChecklistAssignment:(n,o)=>{t(s=>({checklist:s.checklist.map(i=>i.id===n?{...i,assignedTo:o}:i)}))},addMatchPlan:n=>{const o={...n,id:ze(),updatedAt:Date.now()};t(s=>({matchPlans:[...s.matchPlans,o]})),e().isDemoMode||wt("matchPlans",o.id,"create",o)},deleteMatchPlan:n=>{t(o=>({matchPlans:o.matchPlans.filter(s=>s.id!==n)})),e().isDemoMode||wt("matchPlans",n,"delete",null)},updateMatchPlan:(n,o)=>{if(t(s=>({matchPlans:s.matchPlans.map(i=>i.id===n?{...i,...o,updatedAt:Date.now()}:i)})),!e().isDemoMode){const s=e().matchPlans.find(i=>i.id===n);s&&wt("matchPlans",n,"update",{...s,...o})}},initializeStore:async()=>{try{const n=await uo.tasks.toArray();n.length>0&&t({tasks:n.map(s=>({id:s.id,title:s.title,description:s.description||"",status:s.status,type:s.type,assignedTo:s.assignedTo||"",department:s.teamId||"",tags:s.tags,checklist:s.checklist,timeline:Array.isArray(s.timeline)?s.timeline.map(i=>({...i,type:i.type})):[],createdAt:s.createdAt,dueDate:s.dueDate}))});const o=await uo.matchPlans.toArray();o.length>0&&t({matchPlans:o.map(s=>({id:s.id,title:s.title||`Match ${s.matchNumber||"?"}`,drawingData:s.drawingData,notes:s.notes||"",allianceTeam:s.allianceTeam||"",partnerAutonomous:s.partnerAutonomous||!1,partnerPark:s.partnerPark||!1,updatedAt:s.updatedAt}))})}catch(n){console.warn("Failed to load from IndexedDB:",n)}},resetToDefaults:()=>{t({tasks:[],members:Wi,teams:Yi,scoutingReports:[],checklist:Qi,matchPlans:[]})}}),{name:"ftc-team-manager-storage",partialize:t=>({tasks:t.tasks,members:t.members,teams:t.teams,scoutingReports:t.scoutingReports,checklist:t.checklist,matchPlans:t.matchPlans,theme:t.theme,geminiApiKey:t.geminiApiKey})}));if(typeof window<"u"){const t=localStorage.getItem("ftc-team-manager-storage");if(t)try{const{state:e}=JSON.parse(t);(e==null?void 0:e.theme)==="dark"&&document.documentElement.classList.add("dark")}catch{}}function fh(){const{signInWithEmail:t,signUpWithEmail:e,signInWithGoogle:n,signInWithMicrosoft:o,resetPassword:s,isConfigured:i}=Us(),[a,u]=M.useState("login"),[d,c]=M.useState(""),[f,m]=M.useState(""),[p,g]=M.useState(""),[x,y]=M.useState(!1),[v,_]=M.useState(null),[T,b]=M.useState(null),C=async E=>{E.preventDefault(),y(!0),_(null),b(null);try{if(a==="login"){const{error:N}=await t(d,f);N&&_(N.message)}else if(a==="signup"){const{error:N}=await e(d,f,p);N?_(N.message):b("Check your email for a confirmation link!")}else if(a==="forgot"){const{error:N}=await s(d);N?_(N.message):b("Password reset email sent!")}}catch{_("An unexpected error occurred")}finally{y(!1)}},w=async()=>{y(!0),_(null);const{error:E}=await n();E&&(_(E.message),y(!1))},S=async()=>{y(!0),_(null);const{error:E}=await o();E&&(_(E.message),y(!1))};return i?h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:h.jsxs("div",{className:"max-w-md w-full",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl shadow-lg shadow-orange-500/25 mb-4",children:h.jsx(xi,{className:"w-8 h-8 text-white"})}),h.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"FTC Team Manager"}),h.jsxs("p",{className:"text-slate-400",children:[a==="login"&&"Sign in to your account",a==="signup"&&"Create your account",a==="forgot"&&"Reset your password"]})]}),h.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700 rounded-2xl p-6 shadow-xl",children:[v&&h.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 mb-4",children:h.jsx("p",{className:"text-red-400 text-sm",children:v})}),T&&h.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-3 mb-4",children:h.jsx("p",{className:"text-green-400 text-sm",children:T})}),a!=="forgot"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"space-y-3 mb-6",children:[h.jsxs("button",{onClick:w,disabled:x,className:"w-full flex items-center justify-center gap-3 bg-white text-slate-900 font-medium py-3 px-4 rounded-xl hover:bg-slate-100 transition-all disabled:opacity-50",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),h.jsxs("button",{onClick:S,disabled:x,className:"w-full flex items-center justify-center gap-3 bg-slate-700 text-white font-medium py-3 px-4 rounded-xl hover:bg-slate-600 transition-all disabled:opacity-50",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"#F25022",d:"M1 1h10v10H1z"}),h.jsx("path",{fill:"#00A4EF",d:"M1 13h10v10H1z"}),h.jsx("path",{fill:"#7FBA00",d:"M13 1h10v10H13z"}),h.jsx("path",{fill:"#FFB900",d:"M13 13h10v10H13z"})]}),"Continue with Microsoft"]})]}),h.jsxs("div",{className:"relative mb-6",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-slate-600"})}),h.jsx("div",{className:"relative flex justify-center text-sm",children:h.jsx("span",{className:"px-4 bg-slate-800/50 text-slate-400",children:"or continue with email"})})]})]}),h.jsxs("form",{onSubmit:C,className:"space-y-4",children:[a==="signup"&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Full Name"}),h.jsxs("div",{className:"relative",children:[h.jsx(Za,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),h.jsx("input",{type:"text",value:p,onChange:E=>g(E.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"John Smith",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(sd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),h.jsx("input",{type:"email",value:d,onChange:E=>c(E.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"you@team12345.org",required:!0})]})]}),a!=="forgot"&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(td,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),h.jsx("input",{type:"password",value:f,onChange:E=>m(E.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"",required:!0,minLength:6})]})]}),h.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold py-3 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg shadow-orange-500/25 disabled:opacity-50",children:x?h.jsx(eo,{className:"w-5 h-5 animate-spin"}):h.jsxs(h.Fragment,{children:[a==="login"&&"Sign In",a==="signup"&&"Create Account",a==="forgot"&&"Send Reset Link",h.jsx(zo,{className:"w-4 h-4"})]})})]}),h.jsxs("div",{className:"mt-6 text-center text-sm",children:[a==="login"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>u("forgot"),className:"text-slate-400 hover:text-orange-400 transition-colors",children:"Forgot password?"}),h.jsxs("p",{className:"mt-4 text-slate-400",children:["Don't have an account?"," ",h.jsx("button",{onClick:()=>u("signup"),className:"text-orange-400 hover:text-orange-300 font-medium",children:"Sign up"})]})]}),a==="signup"&&h.jsxs("p",{className:"text-slate-400",children:["Already have an account?"," ",h.jsx("button",{onClick:()=>u("login"),className:"text-orange-400 hover:text-orange-300 font-medium",children:"Sign in"})]}),a==="forgot"&&h.jsx("button",{onClick:()=>u("login"),className:"text-orange-400 hover:text-orange-300 font-medium",children:"Back to sign in"})]})]})]})}):h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:h.jsxs("div",{className:"max-w-md w-full",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl shadow-lg shadow-orange-500/25 mb-4",children:h.jsx(xi,{className:"w-8 h-8 text-white"})}),h.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"FTC Team Manager"}),h.jsx("p",{className:"text-slate-400",children:"Running in Demo Mode"})]}),h.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700 rounded-2xl p-6 shadow-xl",children:[h.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 mb-6",children:h.jsxs("p",{className:"text-amber-200 text-sm",children:[h.jsx("strong",{children:"Demo Mode:"})," Cloud sync is disabled. Your data will be saved locally in this browser. To enable authentication and cloud sync, configure your Supabase credentials in ",h.jsx("code",{className:"bg-slate-700 px-1 rounded",children:".env.local"})]})}),h.jsxs("a",{href:"/",className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold py-3 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg shadow-orange-500/25",children:["Continue to App",h.jsx(zo,{className:"w-4 h-4"})]})]})]})})}function hh(){const[t,e]=M.useState(navigator.onLine),[n,o]=M.useState("idle"),[s,i]=M.useState(0),[a,u]=M.useState(null),[d,c]=M.useState(null);M.useEffect(()=>{const m=()=>{e(!0),o("idle")},p=()=>{e(!1),o("offline")};return window.addEventListener("online",m),window.addEventListener("offline",p),()=>{window.removeEventListener("online",m),window.removeEventListener("offline",p)}},[]),M.useEffect(()=>{const m=async()=>{const g=await dh();i(g)};m();const p=setInterval(m,5e3);return()=>clearInterval(p)},[]),M.useEffect(()=>{t&&s>0&&n==="idle"&&f()},[t,s]);const f=M.useCallback(async()=>{{o("offline");return}},[t]);return{isOnline:t,syncStatus:n,pendingChanges:s,lastSyncTime:a,sync:f,error:d}}function Xi(){return hh(),null}const St={Backlog:"Backlog",ToDo:"To Do",InProgress:"In Progress",Validation:"Validation",Done:"Done"},Zt={Feature:"Feature",Bug:"Bug"},ji=[St.Backlog,St.ToDo,St.InProgress,St.Validation,St.Done],ph=[{id:"m1",firstName:"Abby",lastNameInitial:"B"},{id:"m2",firstName:"Ben",lastNameInitial:"C"},{id:"m3",firstName:"Charlie",lastNameInitial:"D"},{id:"m4",firstName:"Dana",lastNameInitial:"E"},{id:"m5",firstName:"Evan",lastNameInitial:"F"}],mh=[{id:"t1",name:"Programming",memberIds:["m1"]},{id:"t2",name:"Build",memberIds:["m2"]},{id:"t3",name:"Drive",memberIds:["m3"]},{id:"t4",name:"Scouting",memberIds:["m5"]},{id:"t5",name:"Outreach",memberIds:["m4"]}],gh=[{id:"1",text:"Turn off robot",checked:!1},{id:"2",text:"Swap main battery",checked:!1},{id:"3",text:"Charge old battery",checked:!1},{id:"4",text:"Charge Driver Hub",checked:!1},{id:"5",text:"Tighten chassis screws",checked:!1},{id:"6",text:"Check wiring connections",checked:!1},{id:"7",text:"Clean wheels",checked:!1},{id:"8",text:"Reset servo positions",checked:!1}],yh="DecodeField.png";var vh={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let xh,_h;function Th(){return{geminiUrl:xh,vertexUrl:_h}}function Ch(t,e,n,o){var s,i;if(!(t!=null&&t.baseUrl)){const a=Th();return e?(s=a.vertexUrl)!==null&&s!==void 0?s:n:(i=a.geminiUrl)!==null&&i!==void 0?i:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Be{}function D(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const i=e[s];return i!=null?String(i):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function l(t,e,n){for(let i=0;i<e.length-1;i++){const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];l(f,e.slice(i+1),n[c])}else for(const c of d)l(c,e.slice(i+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];l(d[0],e.slice(i+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function r(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const s=e[o];if(s.endsWith("[]")){const i=s.slice(0,-2);if(i in t){const a=t[i];return Array.isArray(a)?a.map(u=>r(u,e.slice(o+1),n)):n}else return n}else t=t[s]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function bh(t,e){for(const[n,o]of Object.entries(e)){const s=n.split("."),i=o.split("."),a=new Set;let u=-1;for(let d=0;d<s.length;d++)if(s[d]==="*"){u=d;break}if(u!==-1&&i.length>u)for(let d=u;d<i.length;d++){const c=i[d];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&a.add(c)}xs(t,s,i,0,a)}}function xs(t,e,n,o,s){if(o>=e.length||typeof t!="object"||t===null)return;const i=e[o];if(i.endsWith("[]")){const a=i.slice(0,-2),u=t;if(a in u&&Array.isArray(u[a]))for(const d of u[a])xs(d,e,n,o+1,s)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,u=Object.keys(a).filter(c=>!c.startsWith("_")&&!s.has(c)),d={};for(const c of u)d[c]=a[c];for(const[c,f]of Object.entries(d)){const m=[];for(const p of n.slice(o))p==="*"?m.push(c):m.push(p);l(a,m,f)}for(const c of u)delete a[c]}}else{const a=t;i in a&&xs(a[i],e,n,o+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ys(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wh(t){const e={},n=r(t,["operationName"]);n!=null&&l(e,["operationName"],n);const o=r(t,["resourceName"]);return o!=null&&l(e,["_url","resourceName"],o),e}function Eh(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=r(t,["done"]);s!=null&&l(e,["done"],s);const i=r(t,["error"]);i!=null&&l(e,["error"],i);const a=r(t,["response","generateVideoResponse"]);return a!=null&&l(e,["response"],Ih(a)),e}function Sh(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=r(t,["done"]);s!=null&&l(e,["done"],s);const i=r(t,["error"]);i!=null&&l(e,["error"],i);const a=r(t,["response"]);return a!=null&&l(e,["response"],Ah(a)),e}function Ih(t){const e={},n=r(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>kh(a))),l(e,["generatedVideos"],i)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const s=r(t,["raiMediaFilteredReasons"]);return s!=null&&l(e,["raiMediaFilteredReasons"],s),e}function Ah(t){const e={},n=r(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Nh(a))),l(e,["generatedVideos"],i)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const s=r(t,["raiMediaFilteredReasons"]);return s!=null&&l(e,["raiMediaFilteredReasons"],s),e}function kh(t){const e={},n=r(t,["video"]);return n!=null&&l(e,["video"],Uh(n)),e}function Nh(t){const e={},n=r(t,["_self"]);return n!=null&&l(e,["video"],Lh(n)),e}function Rh(t){const e={},n=r(t,["operationName"]);return n!=null&&l(e,["_url","operationName"],n),e}function Ph(t){const e={},n=r(t,["operationName"]);return n!=null&&l(e,["_url","operationName"],n),e}function Mh(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=r(t,["done"]);s!=null&&l(e,["done"],s);const i=r(t,["error"]);i!=null&&l(e,["error"],i);const a=r(t,["response"]);return a!=null&&l(e,["response"],Dh(a)),e}function Dh(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["parent"]);o!=null&&l(e,["parent"],o);const s=r(t,["documentName"]);return s!=null&&l(e,["documentName"],s),e}function Ll(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=r(t,["done"]);s!=null&&l(e,["done"],s);const i=r(t,["error"]);i!=null&&l(e,["error"],i);const a=r(t,["response"]);return a!=null&&l(e,["response"],Fh(a)),e}function Fh(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["parent"]);o!=null&&l(e,["parent"],o);const s=r(t,["documentName"]);return s!=null&&l(e,["documentName"],s),e}function Uh(t){const e={},n=r(t,["uri"]);n!=null&&l(e,["uri"],n);const o=r(t,["encodedVideo"]);o!=null&&l(e,["videoBytes"],Ys(o));const s=r(t,["encoding"]);return s!=null&&l(e,["mimeType"],s),e}function Lh(t){const e={},n=r(t,["gcsUri"]);n!=null&&l(e,["uri"],n);const o=r(t,["bytesBase64Encoded"]);o!=null&&l(e,["videoBytes"],Ys(o));const s=r(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Zi;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Zi||(Zi={}));var er;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(er||(er={}));var tr;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(tr||(tr={}));var pe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(pe||(pe={}));var nr;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(nr||(nr={}));var or;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(or||(or={}));var sr;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(sr||(sr={}));var ir;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ir||(ir={}));var rr;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(rr||(rr={}));var ar;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(ar||(ar={}));var lr;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(lr||(lr={}));var ur;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(ur||(ur={}));var cr;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(cr||(cr={}));var dr;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(dr||(dr={}));var fr;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(fr||(fr={}));var hr;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(hr||(hr={}));var pr;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(pr||(pr={}));var mr;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(mr||(mr={}));var gr;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(gr||(gr={}));var co;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(co||(co={}));var yr;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(yr||(yr={}));var vr;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(vr||(vr={}));var xr;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(xr||(xr={}));var _s;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_s||(_s={}));var _r;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(_r||(_r={}));var Tr;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Tr||(Tr={}));var Cr;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Cr||(Cr={}));var br;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(br||(br={}));var wr;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(wr||(wr={}));var Er;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Er||(Er={}));var Sr;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Sr||(Sr={}));var Ir;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ir||(Ir={}));var Ar;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Ar||(Ar={}));var kr;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(kr||(kr={}));var Nr;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Nr||(Nr={}));var Rr;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Rr||(Rr={}));var Pr;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Pr||(Pr={}));var Mr;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Mr||(Mr={}));var Dr;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Dr||(Dr={}));var Fr;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Fr||(Fr={}));var Ur;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Ur||(Ur={}));var Lr;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Lr||(Lr={}));var Gr;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Gr||(Gr={}));var qr;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(qr||(qr={}));var Vr;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Vr||(Vr={}));var Hr;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Hr||(Hr={}));var Br;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Br||(Br={}));var $r;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})($r||($r={}));var Or;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Or||(Or={}));var Kr;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Kr||(Kr={}));var Jr;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Jr||(Jr={}));var zr;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(zr||(zr={}));var Wr;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Wr||(Wr={}));var Yr;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Yr||(Yr={}));var Qr;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Qr||(Qr={}));var At;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(At||(At={}));class Ts{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class en{get text(){var e,n,o,s,i,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const m=[];for(const p of(d=(u=(a=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[g,x]of Object.entries(p))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(x!==null||x!==void 0)&&m.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,c+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,o,s,i,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const m of(d=(u=(a=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[p,g]of Object.entries(m))p!=="inlineData"&&(g!==null||g!==void 0)&&f.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,o,s,i,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(a=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,o,s,i,a,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(a=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,o,s,i,a,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(a=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class Xr{}class jr{}class Gh{}class qh{}class Vh{}class Hh{}class Zr{}class ea{}class ta{}class Bh{}class fo{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new fo;let s;const i=e;return n?s=Sh(i):s=Eh(i),Object.assign(o,s),o}}class na{}class oa{}class sa{}class ia{}class $h{}class Oh{}class Kh{}class Qs{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Qs,i=Mh(e);return Object.assign(o,i),o}}class Jh{}class zh{}class Wh{}class ra{}class Yh{get text(){var e,n,o;let s="",i=!1;const a=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;i=!0,s+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?s:void 0}get data(){var e,n,o;let s="";const i=[];for(const a of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&i.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Qh{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Xs{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Xs,i=Ll(e);return Object.assign(o,i),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Gl(t,e){const n=z(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ql(t){return Array.isArray(t)?t.map(e=>ho(e)):[ho(t)]}function ho(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Vl(t){const e=ho(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Hl(t){const e=ho(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function aa(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Bl(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>aa(e)):[aa(t)]}function Cs(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function la(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ua(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function re(t){if(t==null)throw new Error("ContentUnion is required");return Cs(t)?t:{role:"user",parts:Bl(t)}}function js(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=re(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=re(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>re(n)):[re(e)]}function ve(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(la(t)||ua(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[re(t)]}const e=[],n=[],o=Cs(t[0]);for(const s of t){const i=Cs(s);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(s);else{if(la(s)||ua(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:Bl(n)}),e}function Xh(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(pe).includes(n[0].toUpperCase())?n[0].toUpperCase():pe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(pe).includes(o.toUpperCase())?o.toUpperCase():pe.TYPE_UNSPECIFIED})}}function Mt(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&Xh(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(pe).includes(u.toUpperCase())?u.toUpperCase():pe.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Mt(u);else if(o.includes(a)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(Mt(c))}e[a]=d}else if(s.includes(a)){const d={};for(const[c,f]of Object.entries(u))d[c]=Mt(f);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function Zs(t){return Mt(t)}function ei(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ti(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Wt(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Mt(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Mt(e.response));return t}function Yt(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function jh(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function $e(t,e){if(typeof e!="string")throw new Error("name must be a string");return jh(t,e,"cachedContents")}function $l(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function it(t){return Ys(t)}function Zh(t){return t!=null&&typeof t=="object"&&"name"in t}function ep(t){return t!=null&&typeof t=="object"&&"video"in t}function tp(t){return t!=null&&typeof t=="object"&&"uri"in t}function Ol(t){var e;let n;if(Zh(t)&&(n=t.name),!(tp(t)&&(n=t.uri,n===void 0))&&!(ep(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Kl(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Jl(t){for(const e of["models","tunedModels","publisherModels"])if(np(t,e))return t[e];return[]}function np(t,e){return t!==null&&typeof t=="object"&&e in t}function op(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function sp(t,e={}){const n=[],o=new Set;for(const s of t){const i=s.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);const a=op(s,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function zl(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function ip(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Wl(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let i=!1;for(const a of s){if(typeof a!="object"||a===null)continue;const d=a.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Qt(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Yl(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rp(t){const e={},n=r(t,["responsesFile"]);n!=null&&l(e,["fileName"],n);const o=r(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>Vp(a))),l(e,["inlinedResponses"],i)}const s=r(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>a)),l(e,["inlinedEmbedContentResponses"],i)}return e}function ap(t){const e={},n=r(t,["predictionsFormat"]);n!=null&&l(e,["format"],n);const o=r(t,["gcsDestination","outputUriPrefix"]);o!=null&&l(e,["gcsUri"],o);const s=r(t,["bigqueryDestination","outputUri"]);return s!=null&&l(e,["bigqueryUri"],s),e}function lp(t){const e={},n=r(t,["format"]);n!=null&&l(e,["predictionsFormat"],n);const o=r(t,["gcsUri"]);o!=null&&l(e,["gcsDestination","outputUriPrefix"],o);const s=r(t,["bigqueryUri"]);if(s!=null&&l(e,["bigqueryDestination","outputUri"],s),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(r(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Xn(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["metadata","displayName"]);o!=null&&l(e,["displayName"],o);const s=r(t,["metadata","state"]);s!=null&&l(e,["state"],Yl(s));const i=r(t,["metadata","createTime"]);i!=null&&l(e,["createTime"],i);const a=r(t,["metadata","endTime"]);a!=null&&l(e,["endTime"],a);const u=r(t,["metadata","updateTime"]);u!=null&&l(e,["updateTime"],u);const d=r(t,["metadata","model"]);d!=null&&l(e,["model"],d);const c=r(t,["metadata","output"]);return c!=null&&l(e,["dest"],rp(Wl(c))),e}function bs(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["displayName"]);o!=null&&l(e,["displayName"],o);const s=r(t,["state"]);s!=null&&l(e,["state"],Yl(s));const i=r(t,["error"]);i!=null&&l(e,["error"],i);const a=r(t,["createTime"]);a!=null&&l(e,["createTime"],a);const u=r(t,["startTime"]);u!=null&&l(e,["startTime"],u);const d=r(t,["endTime"]);d!=null&&l(e,["endTime"],d);const c=r(t,["updateTime"]);c!=null&&l(e,["updateTime"],c);const f=r(t,["model"]);f!=null&&l(e,["model"],f);const m=r(t,["inputConfig"]);m!=null&&l(e,["src"],up(m));const p=r(t,["outputConfig"]);p!=null&&l(e,["dest"],ap(Wl(p)));const g=r(t,["completionStats"]);return g!=null&&l(e,["completionStats"],g),e}function up(t){const e={},n=r(t,["instancesFormat"]);n!=null&&l(e,["format"],n);const o=r(t,["gcsSource","uris"]);o!=null&&l(e,["gcsUri"],o);const s=r(t,["bigquerySource","inputUri"]);return s!=null&&l(e,["bigqueryUri"],s),e}function cp(t,e){const n={};if(r(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=r(e,["fileName"]);o!=null&&l(n,["fileName"],o);const s=r(e,["inlinedRequests"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>qp(t,a))),l(n,["requests","requests"],i)}return n}function dp(t){const e={},n=r(t,["format"]);n!=null&&l(e,["instancesFormat"],n);const o=r(t,["gcsUri"]);o!=null&&l(e,["gcsSource","uris"],o);const s=r(t,["bigqueryUri"]);if(s!=null&&l(e,["bigquerySource","inputUri"],s),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function fp(t){const e={},n=r(t,["data"]);if(n!=null&&l(e,["data"],n),r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function hp(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],Qt(t,o)),n}function pp(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],Qt(t,o)),n}function mp(t){const e={},n=r(t,["content"]);n!=null&&l(e,["content"],n);const o=r(t,["citationMetadata"]);o!=null&&l(e,["citationMetadata"],gp(o));const s=r(t,["tokenCount"]);s!=null&&l(e,["tokenCount"],s);const i=r(t,["finishReason"]);i!=null&&l(e,["finishReason"],i);const a=r(t,["avgLogprobs"]);a!=null&&l(e,["avgLogprobs"],a);const u=r(t,["groundingMetadata"]);u!=null&&l(e,["groundingMetadata"],u);const d=r(t,["index"]);d!=null&&l(e,["index"],d);const c=r(t,["logprobsResult"]);c!=null&&l(e,["logprobsResult"],c);const f=r(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),l(e,["safetyRatings"],p)}const m=r(t,["urlContextMetadata"]);return m!=null&&l(e,["urlContextMetadata"],m),e}function gp(t){const e={},n=r(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["citations"],o)}return e}function Ql(t){const e={},n=r(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>zp(i))),l(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&l(e,["role"],o),e}function yp(t,e){const n={},o=r(t,["displayName"]);if(e!==void 0&&o!=null&&l(e,["batch","displayName"],o),r(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function vp(t,e){const n={},o=r(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=r(t,["dest"]);return e!==void 0&&s!=null&&l(e,["outputConfig"],lp(ip(s))),n}function ca(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["src"]);s!=null&&l(n,["batch","inputConfig"],cp(t,zl(t,s)));const i=r(e,["config"]);return i!=null&&yp(i,n),n}function xp(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["model"],z(t,o));const s=r(e,["src"]);s!=null&&l(n,["inputConfig"],dp(zl(t,s)));const i=r(e,["config"]);return i!=null&&vp(i,n),n}function _p(t,e){const n={},o=r(t,["displayName"]);return e!==void 0&&o!=null&&l(e,["batch","displayName"],o),n}function Tp(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["src"]);s!=null&&l(n,["batch","inputConfig"],Ap(t,s));const i=r(e,["config"]);return i!=null&&_p(i,n),n}function Cp(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],Qt(t,o)),n}function bp(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],Qt(t,o)),n}function wp(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["name"]);o!=null&&l(e,["name"],o);const s=r(t,["done"]);s!=null&&l(e,["done"],s);const i=r(t,["error"]);return i!=null&&l(e,["error"],i),e}function Ep(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["name"]);o!=null&&l(e,["name"],o);const s=r(t,["done"]);s!=null&&l(e,["done"],s);const i=r(t,["error"]);return i!=null&&l(e,["error"],i),e}function Sp(t,e){const n={},o=r(e,["contents"]);if(o!=null){let i=js(t,o);Array.isArray(i)&&(i=i.map(a=>a)),l(n,["requests[]","request","content"],i)}const s=r(e,["config"]);return s!=null&&(l(n,["_self"],Ip(s,n)),bh(n,{"requests[].*":"requests[].request.*"})),n}function Ip(t,e){const n={},o=r(t,["taskType"]);e!==void 0&&o!=null&&l(e,["requests[]","taskType"],o);const s=r(t,["title"]);e!==void 0&&s!=null&&l(e,["requests[]","title"],s);const i=r(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&l(e,["requests[]","outputDimensionality"],i),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Ap(t,e){const n={},o=r(e,["fileName"]);o!=null&&l(n,["file_name"],o);const s=r(e,["inlinedRequests"]);return s!=null&&l(n,["requests"],Sp(t,s)),n}function kp(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Np(t){const e={},n=r(t,["id"]);n!=null&&l(e,["id"],n);const o=r(t,["args"]);o!=null&&l(e,["args"],o);const s=r(t,["name"]);if(s!=null&&l(e,["name"],s),r(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Rp(t){const e={},n=r(t,["mode"]);n!=null&&l(e,["mode"],n);const o=r(t,["allowedFunctionNames"]);if(o!=null&&l(e,["allowedFunctionNames"],o),r(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Pp(t,e,n){const o={},s=r(e,["systemInstruction"]);n!==void 0&&s!=null&&l(n,["systemInstruction"],Ql(re(s)));const i=r(e,["temperature"]);i!=null&&l(o,["temperature"],i);const a=r(e,["topP"]);a!=null&&l(o,["topP"],a);const u=r(e,["topK"]);u!=null&&l(o,["topK"],u);const d=r(e,["candidateCount"]);d!=null&&l(o,["candidateCount"],d);const c=r(e,["maxOutputTokens"]);c!=null&&l(o,["maxOutputTokens"],c);const f=r(e,["stopSequences"]);f!=null&&l(o,["stopSequences"],f);const m=r(e,["responseLogprobs"]);m!=null&&l(o,["responseLogprobs"],m);const p=r(e,["logprobs"]);p!=null&&l(o,["logprobs"],p);const g=r(e,["presencePenalty"]);g!=null&&l(o,["presencePenalty"],g);const x=r(e,["frequencyPenalty"]);x!=null&&l(o,["frequencyPenalty"],x);const y=r(e,["seed"]);y!=null&&l(o,["seed"],y);const v=r(e,["responseMimeType"]);v!=null&&l(o,["responseMimeType"],v);const _=r(e,["responseSchema"]);_!=null&&l(o,["responseSchema"],Zs(_));const T=r(e,["responseJsonSchema"]);if(T!=null&&l(o,["responseJsonSchema"],T),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=r(e,["safetySettings"]);if(n!==void 0&&b!=null){let O=b;Array.isArray(O)&&(O=O.map(K=>Wp(K))),l(n,["safetySettings"],O)}const C=r(e,["tools"]);if(n!==void 0&&C!=null){let O=Yt(C);Array.isArray(O)&&(O=O.map(K=>Qp(Wt(K)))),l(n,["tools"],O)}const w=r(e,["toolConfig"]);if(n!==void 0&&w!=null&&l(n,["toolConfig"],Yp(w)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=r(e,["cachedContent"]);n!==void 0&&S!=null&&l(n,["cachedContent"],$e(t,S));const E=r(e,["responseModalities"]);E!=null&&l(o,["responseModalities"],E);const N=r(e,["mediaResolution"]);N!=null&&l(o,["mediaResolution"],N);const I=r(e,["speechConfig"]);if(I!=null&&l(o,["speechConfig"],ei(I)),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=r(e,["thinkingConfig"]);P!=null&&l(o,["thinkingConfig"],P);const F=r(e,["imageConfig"]);F!=null&&l(o,["imageConfig"],Gp(F));const W=r(e,["enableEnhancedCivicAnswers"]);return W!=null&&l(o,["enableEnhancedCivicAnswers"],W),o}function Mp(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>mp(c))),l(e,["candidates"],d)}const s=r(t,["modelVersion"]);s!=null&&l(e,["modelVersion"],s);const i=r(t,["promptFeedback"]);i!=null&&l(e,["promptFeedback"],i);const a=r(t,["responseId"]);a!=null&&l(e,["responseId"],a);const u=r(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function Dp(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],Qt(t,o)),n}function Fp(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],Qt(t,o)),n}function Up(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function Lp(t){const e={};if(r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function Gp(t){const e={},n=r(t,["aspectRatio"]);n!=null&&l(e,["aspectRatio"],n);const o=r(t,["imageSize"]);if(o!=null&&l(e,["imageSize"],o),r(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(r(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function qp(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["request","model"],z(t,o));const s=r(e,["contents"]);if(s!=null){let u=ve(s);Array.isArray(u)&&(u=u.map(d=>Ql(d))),l(n,["request","contents"],u)}const i=r(e,["metadata"]);i!=null&&l(n,["metadata"],i);const a=r(e,["config"]);return a!=null&&l(n,["request","generationConfig"],Pp(t,a,r(n,["request"],{}))),n}function Vp(t){const e={},n=r(t,["response"]);n!=null&&l(e,["response"],Mp(n));const o=r(t,["error"]);return o!=null&&l(e,["error"],o),e}function Hp(t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);if(e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),r(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Bp(t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);e!==void 0&&s!=null&&l(e,["_query","pageToken"],s);const i=r(t,["filter"]);return e!==void 0&&i!=null&&l(e,["_query","filter"],i),n}function $p(t){const e={},n=r(t,["config"]);return n!=null&&Hp(n,e),e}function Op(t){const e={},n=r(t,["config"]);return n!=null&&Bp(n,e),e}function Kp(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=r(t,["operations"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>Xn(a))),l(e,["batchJobs"],i)}return e}function Jp(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=r(t,["batchPredictionJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>bs(a))),l(e,["batchJobs"],i)}return e}function zp(t){const e={},n=r(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=r(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=r(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const i=r(t,["fileData"]);i!=null&&l(e,["fileData"],kp(i));const a=r(t,["functionCall"]);a!=null&&l(e,["functionCall"],Np(a));const u=r(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=r(t,["inlineData"]);d!=null&&l(e,["inlineData"],fp(d));const c=r(t,["text"]);c!=null&&l(e,["text"],c);const f=r(t,["thought"]);f!=null&&l(e,["thought"],f);const m=r(t,["thoughtSignature"]);m!=null&&l(e,["thoughtSignature"],m);const p=r(t,["videoMetadata"]);return p!=null&&l(e,["videoMetadata"],p),e}function Wp(t){const e={},n=r(t,["category"]);if(n!=null&&l(e,["category"],n),r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=r(t,["threshold"]);return o!=null&&l(e,["threshold"],o),e}function Yp(t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],Rp(n));const o=r(t,["retrievalConfig"]);return o!=null&&l(e,["retrievalConfig"],o),e}function Qp(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),l(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=r(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const i=r(t,["fileSearch"]);i!=null&&l(e,["fileSearch"],i);const a=r(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=r(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],Up(u));const d=r(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],Lp(d));const c=r(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var He;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(He||(He={}));class Tt{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(i=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xp extends Be{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Tt(He.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=ca(this.apiClient,e),o=n._url,s=D("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,d=u.requests,c=[];for(const f of d){const m=Object.assign({},f);if(m.systemInstruction){const p=m.systemInstruction;delete m.systemInstruction;const g=m.request;g.systemInstruction=p,m.request=g}c.push(m)}return u.requests=c,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const i=this.getGcsUri(e),a=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?o.dest=`${i.slice(0,-6)}/dest`:o.dest=`${i}_dest_${s}`;else if(a)o.dest=`${a}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=xp(this.apiClient,e);return u=D("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>bs(f))}else{const c=ca(this.apiClient,e);return u=D("{model}:batchGenerateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>Xn(f))}}async createEmbeddingsInternal(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Tp(this.apiClient,e);return i=D("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Xn(d))}}async get(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Fp(this.apiClient,e);return u=D("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>bs(f))}else{const c=Dp(this.apiClient,e);return u=D("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>Xn(f))}}async cancel(e){var n,o,s,i;let a="",u={};if(this.apiClient.isVertexAI()){const d=pp(this.apiClient,e);a=D("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=hp(this.apiClient,e);a=D("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Op(e);return u=D("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Jp(f),p=new ra;return Object.assign(p,m),p})}else{const c=$p(e);return u=D("batches",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Kp(f),p=new ra;return Object.assign(p,m),p})}}async delete(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=bp(this.apiClient,e);return u=D("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>Ep(f))}else{const c=Cp(this.apiClient,e);return u=D("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>wp(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jp(t){const e={},n=r(t,["data"]);if(n!=null&&l(e,["data"],n),r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function da(t){const e={},n=r(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Tm(i))),l(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&l(e,["role"],o),e}function Zp(t,e){const n={},o=r(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const s=r(t,["expireTime"]);e!==void 0&&s!=null&&l(e,["expireTime"],s);const i=r(t,["displayName"]);e!==void 0&&i!=null&&l(e,["displayName"],i);const a=r(t,["contents"]);if(e!==void 0&&a!=null){let f=ve(a);Array.isArray(f)&&(f=f.map(m=>da(m))),l(e,["contents"],f)}const u=r(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],da(re(u)));const d=r(t,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(m=>bm(m))),l(e,["tools"],f)}const c=r(t,["toolConfig"]);if(e!==void 0&&c!=null&&l(e,["toolConfig"],Cm(c)),r(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function em(t,e){const n={},o=r(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const s=r(t,["expireTime"]);e!==void 0&&s!=null&&l(e,["expireTime"],s);const i=r(t,["displayName"]);e!==void 0&&i!=null&&l(e,["displayName"],i);const a=r(t,["contents"]);if(e!==void 0&&a!=null){let m=ve(a);Array.isArray(m)&&(m=m.map(p=>p)),l(e,["contents"],m)}const u=r(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],re(u));const d=r(t,["tools"]);if(e!==void 0&&d!=null){let m=d;Array.isArray(m)&&(m=m.map(p=>wm(p))),l(e,["tools"],m)}const c=r(t,["toolConfig"]);e!==void 0&&c!=null&&l(e,["toolConfig"],c);const f=r(t,["kmsKeyName"]);return e!==void 0&&f!=null&&l(e,["encryption_spec","kmsKeyName"],f),n}function tm(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["model"],Gl(t,o));const s=r(e,["config"]);return s!=null&&Zp(s,n),n}function nm(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["model"],Gl(t,o));const s=r(e,["config"]);return s!=null&&em(s,n),n}function om(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],$e(t,o)),n}function sm(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],$e(t,o)),n}function im(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function rm(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function am(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function lm(t){const e={},n=r(t,["id"]);n!=null&&l(e,["id"],n);const o=r(t,["args"]);o!=null&&l(e,["args"],o);const s=r(t,["name"]);if(s!=null&&l(e,["name"],s),r(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function um(t){const e={},n=r(t,["mode"]);n!=null&&l(e,["mode"],n);const o=r(t,["allowedFunctionNames"]);if(o!=null&&l(e,["allowedFunctionNames"],o),r(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cm(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&l(e,["description"],n);const o=r(t,["name"]);o!=null&&l(e,["name"],o);const s=r(t,["parameters"]);s!=null&&l(e,["parameters"],s);const i=r(t,["parametersJsonSchema"]);i!=null&&l(e,["parametersJsonSchema"],i);const a=r(t,["response"]);a!=null&&l(e,["response"],a);const u=r(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function dm(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],$e(t,o)),n}function fm(t,e){const n={},o=r(e,["name"]);return o!=null&&l(n,["_url","name"],$e(t,o)),n}function hm(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function pm(t){const e={};if(r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function mm(t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function gm(t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function ym(t){const e={},n=r(t,["config"]);return n!=null&&mm(n,e),e}function vm(t){const e={},n=r(t,["config"]);return n!=null&&gm(n,e),e}function xm(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=r(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>a)),l(e,["cachedContents"],i)}return e}function _m(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=r(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>a)),l(e,["cachedContents"],i)}return e}function Tm(t){const e={},n=r(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=r(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=r(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const i=r(t,["fileData"]);i!=null&&l(e,["fileData"],am(i));const a=r(t,["functionCall"]);a!=null&&l(e,["functionCall"],lm(a));const u=r(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=r(t,["inlineData"]);d!=null&&l(e,["inlineData"],jp(d));const c=r(t,["text"]);c!=null&&l(e,["text"],c);const f=r(t,["thought"]);f!=null&&l(e,["thought"],f);const m=r(t,["thoughtSignature"]);m!=null&&l(e,["thoughtSignature"],m);const p=r(t,["videoMetadata"]);return p!=null&&l(e,["videoMetadata"],p),e}function Cm(t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],um(n));const o=r(t,["retrievalConfig"]);return o!=null&&l(e,["retrievalConfig"],o),e}function bm(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),l(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=r(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const i=r(t,["fileSearch"]);i!=null&&l(e,["fileSearch"],i);const a=r(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=r(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],hm(u));const d=r(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],pm(d));const c=r(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}function wm(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>cm(p))),l(e,["functionDeclarations"],m)}const o=r(t,["retrieval"]);o!=null&&l(e,["retrieval"],o);const s=r(t,["googleSearchRetrieval"]);s!=null&&l(e,["googleSearchRetrieval"],s);const i=r(t,["computerUse"]);if(i!=null&&l(e,["computerUse"],i),r(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=r(t,["codeExecution"]);a!=null&&l(e,["codeExecution"],a);const u=r(t,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);const d=r(t,["googleMaps"]);d!=null&&l(e,["googleMaps"],d);const c=r(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],c);const f=r(t,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function Em(t,e){const n={},o=r(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const s=r(t,["expireTime"]);return e!==void 0&&s!=null&&l(e,["expireTime"],s),n}function Sm(t,e){const n={},o=r(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const s=r(t,["expireTime"]);return e!==void 0&&s!=null&&l(e,["expireTime"],s),n}function Im(t,e){const n={},o=r(e,["name"]);o!=null&&l(n,["_url","name"],$e(t,o));const s=r(e,["config"]);return s!=null&&Em(s,n),n}function Am(t,e){const n={},o=r(e,["name"]);o!=null&&l(n,["_url","name"],$e(t,o));const s=r(e,["config"]);return s!=null&&Sm(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class km extends Be{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Tt(He.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=nm(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const c=tm(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async get(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=fm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const c=dm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async delete(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=sm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=rm(f),p=new sa;return Object.assign(p,m),p})}else{const c=om(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=im(f),p=new sa;return Object.assign(p,m),p})}}async update(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Am(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const c=Im(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async listInternal(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=vm(e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=_m(f),p=new ia;return Object.assign(p,m),p})}else{const c=ym(e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=xm(f),p=new ia;return Object.assign(p,m),p})}}}function po(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n}function fa(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function B(t){return this instanceof B?(this.v=t,this):new B(t)}function we(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(g){return function(x){return Promise.resolve(x).then(g,m)}}function u(g,x){o[g]&&(s[g]=function(y){return new Promise(function(v,_){i.push([g,y,v,_])>1||d(g,y)})},x&&(s[g]=x(s[g])))}function d(g,x){try{c(o[g](x))}catch(y){p(i[0][3],y)}}function c(g){g.value instanceof B?Promise.resolve(g.value.v).then(f,m):p(i[0][2],g)}function f(g){d("next",g)}function m(g){d("throw",g)}function p(g,x){g(x),i.shift(),i.length&&d(i[0][0],i[0][1])}}function Ee(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof fa=="function"?fa(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=t[i]&&function(a){return new Promise(function(u,d){a=t[i](a),s(u,d,a.done,a.value)})}}function s(i,a,u,d){Promise.resolve(d).then(function(c){i({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nm(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Xl(n)}function Xl(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Rm(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ha(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let i=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),i&&!Xl(t[o])&&(i=!1),o++;i?e.push(...s):e.pop()}return e}class Pm{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Mm(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Mm{constructor(e,n,o,s={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=i,this.sendPromise=Promise.resolve(),Rm(i)}async sendMessage(e){var n;await this.sendPromise;const o=re(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,a,u;const d=await s,c=(a=(i=d.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content,f=d.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];f!=null&&(p=(u=f.slice(m))!==null&&u!==void 0?u:[]);const g=c?[c]:[];this.recordHistory(o,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const o=re(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const i=await s;return this.processStreamResponse(i,o)}getHistory(e=!1){const n=e?ha(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return we(this,arguments,function*(){var s,i,a,u,d,c;const f=[];try{for(var m=!0,p=Ee(e),g;g=yield B(p.next()),s=g.done,!s;m=!0){u=g.value,m=!1;const x=u;if(Nm(x)){const y=(c=(d=x.candidates)===null||d===void 0?void 0:d[0])===null||c===void 0?void 0:c.content;y!==void 0&&f.push(y)}yield yield B(x)}}catch(x){i={error:x}}finally{try{!m&&!s&&(a=p.return)&&(yield B(a.call(p)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(i=>i.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...ha(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bo extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,bo.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dm(t){const e={},n=r(t,["file"]);return n!=null&&l(e,["file"],n),e}function Fm(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Um(t){const e={},n=r(t,["name"]);return n!=null&&l(e,["_url","file"],Ol(n)),e}function Lm(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Gm(t){const e={},n=r(t,["name"]);return n!=null&&l(e,["_url","file"],Ol(n)),e}function qm(t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function Vm(t){const e={},n=r(t,["config"]);return n!=null&&qm(n,e),e}function Hm(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=r(t,["files"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>a)),l(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bm extends Be{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Tt(He.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Vm(e);return i=D("files",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Hm(d),f=new Jh;return Object.assign(f,c),f})}}async createInternal(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Dm(e);return i=D("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Fm(d),f=new zh;return Object.assign(f,c),f})}}async get(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Gm(e);return i=D("files/{file}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Um(e);return i=D("files/{file}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Lm(d),f=new Wh;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jn(t){const e={},n=r(t,["data"]);if(n!=null&&l(e,["data"],n),r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function $m(t){const e={},n=r(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>ig(i))),l(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&l(e,["role"],o),e}function Om(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Km(t){const e={},n=r(t,["id"]);n!=null&&l(e,["id"],n);const o=r(t,["args"]);o!=null&&l(e,["args"],o);const s=r(t,["name"]);if(s!=null&&l(e,["name"],s),r(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Jm(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&l(e,["description"],n);const o=r(t,["name"]);o!=null&&l(e,["name"],o);const s=r(t,["parameters"]);s!=null&&l(e,["parameters"],s);const i=r(t,["parametersJsonSchema"]);i!=null&&l(e,["parametersJsonSchema"],i);const a=r(t,["response"]);a!=null&&l(e,["response"],a);const u=r(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function zm(t){const e={},n=r(t,["modelSelectionConfig"]);n!=null&&l(e,["modelConfig"],n);const o=r(t,["responseJsonSchema"]);o!=null&&l(e,["responseJsonSchema"],o);const s=r(t,["audioTimestamp"]);s!=null&&l(e,["audioTimestamp"],s);const i=r(t,["candidateCount"]);i!=null&&l(e,["candidateCount"],i);const a=r(t,["enableAffectiveDialog"]);a!=null&&l(e,["enableAffectiveDialog"],a);const u=r(t,["frequencyPenalty"]);u!=null&&l(e,["frequencyPenalty"],u);const d=r(t,["logprobs"]);d!=null&&l(e,["logprobs"],d);const c=r(t,["maxOutputTokens"]);c!=null&&l(e,["maxOutputTokens"],c);const f=r(t,["mediaResolution"]);f!=null&&l(e,["mediaResolution"],f);const m=r(t,["presencePenalty"]);m!=null&&l(e,["presencePenalty"],m);const p=r(t,["responseLogprobs"]);p!=null&&l(e,["responseLogprobs"],p);const g=r(t,["responseMimeType"]);g!=null&&l(e,["responseMimeType"],g);const x=r(t,["responseModalities"]);x!=null&&l(e,["responseModalities"],x);const y=r(t,["responseSchema"]);y!=null&&l(e,["responseSchema"],y);const v=r(t,["routingConfig"]);v!=null&&l(e,["routingConfig"],v);const _=r(t,["seed"]);_!=null&&l(e,["seed"],_);const T=r(t,["speechConfig"]);T!=null&&l(e,["speechConfig"],T);const b=r(t,["stopSequences"]);b!=null&&l(e,["stopSequences"],b);const C=r(t,["temperature"]);C!=null&&l(e,["temperature"],C);const w=r(t,["thinkingConfig"]);w!=null&&l(e,["thinkingConfig"],w);const S=r(t,["topK"]);S!=null&&l(e,["topK"],S);const E=r(t,["topP"]);if(E!=null&&l(e,["topP"],E),r(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Wm(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function Ym(t){const e={};if(r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function Qm(t,e){const n={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig"],o);const s=r(t,["responseModalities"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","responseModalities"],s);const i=r(t,["temperature"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig","temperature"],i);const a=r(t,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);const u=r(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const d=r(t,["maxOutputTokens"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","maxOutputTokens"],d);const c=r(t,["mediaResolution"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","mediaResolution"],c);const f=r(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const m=r(t,["speechConfig"]);e!==void 0&&m!=null&&l(e,["setup","generationConfig","speechConfig"],ti(m));const p=r(t,["thinkingConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","thinkingConfig"],p);const g=r(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=r(t,["systemInstruction"]);e!==void 0&&x!=null&&l(e,["setup","systemInstruction"],$m(re(x)));const y=r(t,["tools"]);if(e!==void 0&&y!=null){let S=Yt(y);Array.isArray(S)&&(S=S.map(E=>ag(Wt(E)))),l(e,["setup","tools"],S)}const v=r(t,["sessionResumption"]);e!==void 0&&v!=null&&l(e,["setup","sessionResumption"],rg(v));const _=r(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&l(e,["setup","inputAudioTranscription"],_);const T=r(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&l(e,["setup","outputAudioTranscription"],T);const b=r(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&l(e,["setup","realtimeInputConfig"],b);const C=r(t,["contextWindowCompression"]);e!==void 0&&C!=null&&l(e,["setup","contextWindowCompression"],C);const w=r(t,["proactivity"]);if(e!==void 0&&w!=null&&l(e,["setup","proactivity"],w),r(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Xm(t,e){const n={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig"],zm(o));const s=r(t,["responseModalities"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","responseModalities"],s);const i=r(t,["temperature"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig","temperature"],i);const a=r(t,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);const u=r(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const d=r(t,["maxOutputTokens"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","maxOutputTokens"],d);const c=r(t,["mediaResolution"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","mediaResolution"],c);const f=r(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const m=r(t,["speechConfig"]);e!==void 0&&m!=null&&l(e,["setup","generationConfig","speechConfig"],ti(m));const p=r(t,["thinkingConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","thinkingConfig"],p);const g=r(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=r(t,["systemInstruction"]);e!==void 0&&x!=null&&l(e,["setup","systemInstruction"],re(x));const y=r(t,["tools"]);if(e!==void 0&&y!=null){let E=Yt(y);Array.isArray(E)&&(E=E.map(N=>lg(Wt(N)))),l(e,["setup","tools"],E)}const v=r(t,["sessionResumption"]);e!==void 0&&v!=null&&l(e,["setup","sessionResumption"],v);const _=r(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&l(e,["setup","inputAudioTranscription"],_);const T=r(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&l(e,["setup","outputAudioTranscription"],T);const b=r(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&l(e,["setup","realtimeInputConfig"],b);const C=r(t,["contextWindowCompression"]);e!==void 0&&C!=null&&l(e,["setup","contextWindowCompression"],C);const w=r(t,["proactivity"]);e!==void 0&&w!=null&&l(e,["setup","proactivity"],w);const S=r(t,["explicitVadSignal"]);return e!==void 0&&S!=null&&l(e,["setup","explicitVadSignal"],S),n}function jm(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["setup","model"],z(t,o));const s=r(e,["config"]);return s!=null&&l(n,["config"],Qm(s,n)),n}function Zm(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["setup","model"],z(t,o));const s=r(e,["config"]);return s!=null&&l(n,["config"],Xm(s,n)),n}function eg(t){const e={},n=r(t,["musicGenerationConfig"]);return n!=null&&l(e,["musicGenerationConfig"],n),e}function tg(t){const e={},n=r(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["weightedPrompts"],o)}return e}function ng(t){const e={},n=r(t,["media"]);if(n!=null){let c=ql(n);Array.isArray(c)&&(c=c.map(f=>jn(f))),l(e,["mediaChunks"],c)}const o=r(t,["audio"]);o!=null&&l(e,["audio"],jn(Hl(o)));const s=r(t,["audioStreamEnd"]);s!=null&&l(e,["audioStreamEnd"],s);const i=r(t,["video"]);i!=null&&l(e,["video"],jn(Vl(i)));const a=r(t,["text"]);a!=null&&l(e,["text"],a);const u=r(t,["activityStart"]);u!=null&&l(e,["activityStart"],u);const d=r(t,["activityEnd"]);return d!=null&&l(e,["activityEnd"],d),e}function og(t){const e={},n=r(t,["media"]);if(n!=null){let c=ql(n);Array.isArray(c)&&(c=c.map(f=>f)),l(e,["mediaChunks"],c)}const o=r(t,["audio"]);o!=null&&l(e,["audio"],Hl(o));const s=r(t,["audioStreamEnd"]);s!=null&&l(e,["audioStreamEnd"],s);const i=r(t,["video"]);i!=null&&l(e,["video"],Vl(i));const a=r(t,["text"]);a!=null&&l(e,["text"],a);const u=r(t,["activityStart"]);u!=null&&l(e,["activityStart"],u);const d=r(t,["activityEnd"]);return d!=null&&l(e,["activityEnd"],d),e}function sg(t){const e={},n=r(t,["setupComplete"]);n!=null&&l(e,["setupComplete"],n);const o=r(t,["serverContent"]);o!=null&&l(e,["serverContent"],o);const s=r(t,["toolCall"]);s!=null&&l(e,["toolCall"],s);const i=r(t,["toolCallCancellation"]);i!=null&&l(e,["toolCallCancellation"],i);const a=r(t,["usageMetadata"]);a!=null&&l(e,["usageMetadata"],ug(a));const u=r(t,["goAway"]);u!=null&&l(e,["goAway"],u);const d=r(t,["sessionResumptionUpdate"]);d!=null&&l(e,["sessionResumptionUpdate"],d);const c=r(t,["voiceActivityDetectionSignal"]);return c!=null&&l(e,["voiceActivityDetectionSignal"],c),e}function ig(t){const e={},n=r(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=r(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=r(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const i=r(t,["fileData"]);i!=null&&l(e,["fileData"],Om(i));const a=r(t,["functionCall"]);a!=null&&l(e,["functionCall"],Km(a));const u=r(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=r(t,["inlineData"]);d!=null&&l(e,["inlineData"],jn(d));const c=r(t,["text"]);c!=null&&l(e,["text"],c);const f=r(t,["thought"]);f!=null&&l(e,["thought"],f);const m=r(t,["thoughtSignature"]);m!=null&&l(e,["thoughtSignature"],m);const p=r(t,["videoMetadata"]);return p!=null&&l(e,["videoMetadata"],p),e}function rg(t){const e={},n=r(t,["handle"]);if(n!=null&&l(e,["handle"],n),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ag(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),l(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=r(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const i=r(t,["fileSearch"]);i!=null&&l(e,["fileSearch"],i);const a=r(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=r(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],Wm(u));const d=r(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],Ym(d));const c=r(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}function lg(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Jm(p))),l(e,["functionDeclarations"],m)}const o=r(t,["retrieval"]);o!=null&&l(e,["retrieval"],o);const s=r(t,["googleSearchRetrieval"]);s!=null&&l(e,["googleSearchRetrieval"],s);const i=r(t,["computerUse"]);if(i!=null&&l(e,["computerUse"],i),r(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=r(t,["codeExecution"]);a!=null&&l(e,["codeExecution"],a);const u=r(t,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);const d=r(t,["googleMaps"]);d!=null&&l(e,["googleMaps"],d);const c=r(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],c);const f=r(t,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function ug(t){const e={},n=r(t,["promptTokenCount"]);n!=null&&l(e,["promptTokenCount"],n);const o=r(t,["cachedContentTokenCount"]);o!=null&&l(e,["cachedContentTokenCount"],o);const s=r(t,["candidatesTokenCount"]);s!=null&&l(e,["responseTokenCount"],s);const i=r(t,["toolUsePromptTokenCount"]);i!=null&&l(e,["toolUsePromptTokenCount"],i);const a=r(t,["thoughtsTokenCount"]);a!=null&&l(e,["thoughtsTokenCount"],a);const u=r(t,["totalTokenCount"]);u!=null&&l(e,["totalTokenCount"],u);const d=r(t,["promptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(x=>x)),l(e,["promptTokensDetails"],g)}const c=r(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(x=>x)),l(e,["cacheTokensDetails"],g)}const f=r(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(x=>x)),l(e,["responseTokensDetails"],g)}const m=r(t,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(x=>x)),l(e,["toolUsePromptTokensDetails"],g)}const p=r(t,["trafficType"]);return p!=null&&l(e,["trafficType"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cg(t){const e={},n=r(t,["data"]);if(n!=null&&l(e,["data"],n),r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function dg(t){const e={},n=r(t,["content"]);n!=null&&l(e,["content"],n);const o=r(t,["citationMetadata"]);o!=null&&l(e,["citationMetadata"],fg(o));const s=r(t,["tokenCount"]);s!=null&&l(e,["tokenCount"],s);const i=r(t,["finishReason"]);i!=null&&l(e,["finishReason"],i);const a=r(t,["avgLogprobs"]);a!=null&&l(e,["avgLogprobs"],a);const u=r(t,["groundingMetadata"]);u!=null&&l(e,["groundingMetadata"],u);const d=r(t,["index"]);d!=null&&l(e,["index"],d);const c=r(t,["logprobsResult"]);c!=null&&l(e,["logprobsResult"],c);const f=r(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),l(e,["safetyRatings"],p)}const m=r(t,["urlContextMetadata"]);return m!=null&&l(e,["urlContextMetadata"],m),e}function fg(t){const e={},n=r(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["citations"],o)}return e}function hg(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["contents"]);if(s!=null){let i=ve(s);Array.isArray(i)&&(i=i.map(a=>a)),l(n,["contents"],i)}return n}function pg(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["tokensInfo"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),l(e,["tokensInfo"],s)}return e}function mg(t){const e={},n=r(t,["values"]);n!=null&&l(e,["values"],n);const o=r(t,["statistics"]);return o!=null&&l(e,["statistics"],gg(o)),e}function gg(t){const e={},n=r(t,["truncated"]);n!=null&&l(e,["truncated"],n);const o=r(t,["token_count"]);return o!=null&&l(e,["tokenCount"],o),e}function wo(t){const e={},n=r(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>E0(i))),l(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&l(e,["role"],o),e}function yg(t){const e={},n=r(t,["controlType"]);n!=null&&l(e,["controlType"],n);const o=r(t,["enableControlImageComputation"]);return o!=null&&l(e,["computeControl"],o),e}function vg(t){const e={};if(r(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function xg(t,e){const n={},o=r(t,["systemInstruction"]);e!==void 0&&o!=null&&l(e,["systemInstruction"],re(o));const s=r(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>tu(u))),l(e,["tools"],a)}const i=r(t,["generationConfig"]);return e!==void 0&&i!=null&&l(e,["generationConfig"],c0(i)),n}function _g(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["contents"]);if(s!=null){let a=ve(s);Array.isArray(a)&&(a=a.map(u=>wo(u))),l(n,["contents"],a)}const i=r(e,["config"]);return i!=null&&vg(i),n}function Tg(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["contents"]);if(s!=null){let a=ve(s);Array.isArray(a)&&(a=a.map(u=>u)),l(n,["contents"],a)}const i=r(e,["config"]);return i!=null&&xg(i,n),n}function Cg(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["totalTokens"]);o!=null&&l(e,["totalTokens"],o);const s=r(t,["cachedContentTokenCount"]);return s!=null&&l(e,["cachedContentTokenCount"],s),e}function bg(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["totalTokens"]);return o!=null&&l(e,["totalTokens"],o),e}function wg(t,e){const n={},o=r(e,["model"]);return o!=null&&l(n,["_url","name"],z(t,o)),n}function Eg(t,e){const n={},o=r(e,["model"]);return o!=null&&l(n,["_url","name"],z(t,o)),n}function Sg(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Ig(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Ag(t,e){const n={},o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const s=r(t,["negativePrompt"]);e!==void 0&&s!=null&&l(e,["parameters","negativePrompt"],s);const i=r(t,["numberOfImages"]);e!==void 0&&i!=null&&l(e,["parameters","sampleCount"],i);const a=r(t,["aspectRatio"]);e!==void 0&&a!=null&&l(e,["parameters","aspectRatio"],a);const u=r(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const d=r(t,["seed"]);e!==void 0&&d!=null&&l(e,["parameters","seed"],d);const c=r(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&l(e,["parameters","safetySetting"],c);const f=r(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const m=r(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&l(e,["parameters","includeSafetyAttributes"],m);const p=r(t,["includeRaiReason"]);e!==void 0&&p!=null&&l(e,["parameters","includeRaiReason"],p);const g=r(t,["language"]);e!==void 0&&g!=null&&l(e,["parameters","language"],g);const x=r(t,["outputMimeType"]);e!==void 0&&x!=null&&l(e,["parameters","outputOptions","mimeType"],x);const y=r(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&l(e,["parameters","outputOptions","compressionQuality"],y);const v=r(t,["addWatermark"]);e!==void 0&&v!=null&&l(e,["parameters","addWatermark"],v);const _=r(t,["labels"]);e!==void 0&&_!=null&&l(e,["labels"],_);const T=r(t,["editMode"]);e!==void 0&&T!=null&&l(e,["parameters","editMode"],T);const b=r(t,["baseSteps"]);return e!==void 0&&b!=null&&l(e,["parameters","editConfig","baseSteps"],b),n}function kg(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const i=r(e,["referenceImages"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>R0(d))),l(n,["instances[0]","referenceImages"],u)}const a=r(e,["config"]);return a!=null&&Ag(a,n),n}function Ng(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>Eo(i))),l(e,["generatedImages"],s)}return e}function Rg(t,e){const n={},o=r(t,["taskType"]);e!==void 0&&o!=null&&l(e,["requests[]","taskType"],o);const s=r(t,["title"]);e!==void 0&&s!=null&&l(e,["requests[]","title"],s);const i=r(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&l(e,["requests[]","outputDimensionality"],i),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Pg(t,e){const n={},o=r(t,["taskType"]);e!==void 0&&o!=null&&l(e,["instances[]","task_type"],o);const s=r(t,["title"]);e!==void 0&&s!=null&&l(e,["instances[]","title"],s);const i=r(t,["outputDimensionality"]);e!==void 0&&i!=null&&l(e,["parameters","outputDimensionality"],i);const a=r(t,["mimeType"]);e!==void 0&&a!=null&&l(e,["instances[]","mimeType"],a);const u=r(t,["autoTruncate"]);return e!==void 0&&u!=null&&l(e,["parameters","autoTruncate"],u),n}function Mg(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["contents"]);if(s!=null){let u=js(t,s);Array.isArray(u)&&(u=u.map(d=>d)),l(n,["requests[]","content"],u)}const i=r(e,["config"]);i!=null&&Rg(i,n);const a=r(e,["model"]);return a!==void 0&&l(n,["requests[]","model"],z(t,a)),n}function Dg(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["contents"]);if(s!=null){let a=js(t,s);Array.isArray(a)&&(a=a.map(u=>u)),l(n,["instances[]","content"],a)}const i=r(e,["config"]);return i!=null&&Pg(i,n),n}function Fg(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>a)),l(e,["embeddings"],i)}const s=r(t,["metadata"]);return s!=null&&l(e,["metadata"],s),e}function Ug(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["predictions[]","embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>mg(a))),l(e,["embeddings"],i)}const s=r(t,["metadata"]);return s!=null&&l(e,["metadata"],s),e}function Lg(t){const e={},n=r(t,["endpoint"]);n!=null&&l(e,["name"],n);const o=r(t,["deployedModelId"]);return o!=null&&l(e,["deployedModelId"],o),e}function Gg(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function qg(t){const e={},n=r(t,["id"]);n!=null&&l(e,["id"],n);const o=r(t,["args"]);o!=null&&l(e,["args"],o);const s=r(t,["name"]);if(s!=null&&l(e,["name"],s),r(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Vg(t){const e={},n=r(t,["mode"]);n!=null&&l(e,["mode"],n);const o=r(t,["allowedFunctionNames"]);if(o!=null&&l(e,["allowedFunctionNames"],o),r(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Hg(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&l(e,["description"],n);const o=r(t,["name"]);o!=null&&l(e,["name"],o);const s=r(t,["parameters"]);s!=null&&l(e,["parameters"],s);const i=r(t,["parametersJsonSchema"]);i!=null&&l(e,["parametersJsonSchema"],i);const a=r(t,["response"]);a!=null&&l(e,["response"],a);const u=r(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function Bg(t,e,n){const o={},s=r(e,["systemInstruction"]);n!==void 0&&s!=null&&l(n,["systemInstruction"],wo(re(s)));const i=r(e,["temperature"]);i!=null&&l(o,["temperature"],i);const a=r(e,["topP"]);a!=null&&l(o,["topP"],a);const u=r(e,["topK"]);u!=null&&l(o,["topK"],u);const d=r(e,["candidateCount"]);d!=null&&l(o,["candidateCount"],d);const c=r(e,["maxOutputTokens"]);c!=null&&l(o,["maxOutputTokens"],c);const f=r(e,["stopSequences"]);f!=null&&l(o,["stopSequences"],f);const m=r(e,["responseLogprobs"]);m!=null&&l(o,["responseLogprobs"],m);const p=r(e,["logprobs"]);p!=null&&l(o,["logprobs"],p);const g=r(e,["presencePenalty"]);g!=null&&l(o,["presencePenalty"],g);const x=r(e,["frequencyPenalty"]);x!=null&&l(o,["frequencyPenalty"],x);const y=r(e,["seed"]);y!=null&&l(o,["seed"],y);const v=r(e,["responseMimeType"]);v!=null&&l(o,["responseMimeType"],v);const _=r(e,["responseSchema"]);_!=null&&l(o,["responseSchema"],Zs(_));const T=r(e,["responseJsonSchema"]);if(T!=null&&l(o,["responseJsonSchema"],T),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=r(e,["safetySettings"]);if(n!==void 0&&b!=null){let O=b;Array.isArray(O)&&(O=O.map(K=>P0(K))),l(n,["safetySettings"],O)}const C=r(e,["tools"]);if(n!==void 0&&C!=null){let O=Yt(C);Array.isArray(O)&&(O=O.map(K=>q0(Wt(K)))),l(n,["tools"],O)}const w=r(e,["toolConfig"]);if(n!==void 0&&w!=null&&l(n,["toolConfig"],G0(w)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=r(e,["cachedContent"]);n!==void 0&&S!=null&&l(n,["cachedContent"],$e(t,S));const E=r(e,["responseModalities"]);E!=null&&l(o,["responseModalities"],E);const N=r(e,["mediaResolution"]);N!=null&&l(o,["mediaResolution"],N);const I=r(e,["speechConfig"]);if(I!=null&&l(o,["speechConfig"],ei(I)),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=r(e,["thinkingConfig"]);P!=null&&l(o,["thinkingConfig"],P);const F=r(e,["imageConfig"]);F!=null&&l(o,["imageConfig"],m0(F));const W=r(e,["enableEnhancedCivicAnswers"]);return W!=null&&l(o,["enableEnhancedCivicAnswers"],W),o}function $g(t,e,n){const o={},s=r(e,["systemInstruction"]);n!==void 0&&s!=null&&l(n,["systemInstruction"],re(s));const i=r(e,["temperature"]);i!=null&&l(o,["temperature"],i);const a=r(e,["topP"]);a!=null&&l(o,["topP"],a);const u=r(e,["topK"]);u!=null&&l(o,["topK"],u);const d=r(e,["candidateCount"]);d!=null&&l(o,["candidateCount"],d);const c=r(e,["maxOutputTokens"]);c!=null&&l(o,["maxOutputTokens"],c);const f=r(e,["stopSequences"]);f!=null&&l(o,["stopSequences"],f);const m=r(e,["responseLogprobs"]);m!=null&&l(o,["responseLogprobs"],m);const p=r(e,["logprobs"]);p!=null&&l(o,["logprobs"],p);const g=r(e,["presencePenalty"]);g!=null&&l(o,["presencePenalty"],g);const x=r(e,["frequencyPenalty"]);x!=null&&l(o,["frequencyPenalty"],x);const y=r(e,["seed"]);y!=null&&l(o,["seed"],y);const v=r(e,["responseMimeType"]);v!=null&&l(o,["responseMimeType"],v);const _=r(e,["responseSchema"]);_!=null&&l(o,["responseSchema"],Zs(_));const T=r(e,["responseJsonSchema"]);T!=null&&l(o,["responseJsonSchema"],T);const b=r(e,["routingConfig"]);b!=null&&l(o,["routingConfig"],b);const C=r(e,["modelSelectionConfig"]);C!=null&&l(o,["modelConfig"],C);const w=r(e,["safetySettings"]);if(n!==void 0&&w!=null){let k=w;Array.isArray(k)&&(k=k.map(R=>R)),l(n,["safetySettings"],k)}const S=r(e,["tools"]);if(n!==void 0&&S!=null){let k=Yt(S);Array.isArray(k)&&(k=k.map(R=>tu(Wt(R)))),l(n,["tools"],k)}const E=r(e,["toolConfig"]);n!==void 0&&E!=null&&l(n,["toolConfig"],E);const N=r(e,["labels"]);n!==void 0&&N!=null&&l(n,["labels"],N);const I=r(e,["cachedContent"]);n!==void 0&&I!=null&&l(n,["cachedContent"],$e(t,I));const P=r(e,["responseModalities"]);P!=null&&l(o,["responseModalities"],P);const F=r(e,["mediaResolution"]);F!=null&&l(o,["mediaResolution"],F);const W=r(e,["speechConfig"]);W!=null&&l(o,["speechConfig"],ei(W));const O=r(e,["audioTimestamp"]);O!=null&&l(o,["audioTimestamp"],O);const K=r(e,["thinkingConfig"]);K!=null&&l(o,["thinkingConfig"],K);const L=r(e,["imageConfig"]);if(L!=null&&l(o,["imageConfig"],g0(L)),r(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function pa(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["contents"]);if(s!=null){let a=ve(s);Array.isArray(a)&&(a=a.map(u=>wo(u))),l(n,["contents"],a)}const i=r(e,["config"]);return i!=null&&l(n,["generationConfig"],Bg(t,i,n)),n}function ma(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["contents"]);if(s!=null){let a=ve(s);Array.isArray(a)&&(a=a.map(u=>u)),l(n,["contents"],a)}const i=r(e,["config"]);return i!=null&&l(n,["generationConfig"],$g(t,i,n)),n}function ga(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>dg(c))),l(e,["candidates"],d)}const s=r(t,["modelVersion"]);s!=null&&l(e,["modelVersion"],s);const i=r(t,["promptFeedback"]);i!=null&&l(e,["promptFeedback"],i);const a=r(t,["responseId"]);a!=null&&l(e,["responseId"],a);const u=r(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function ya(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),l(e,["candidates"],c)}const s=r(t,["createTime"]);s!=null&&l(e,["createTime"],s);const i=r(t,["modelVersion"]);i!=null&&l(e,["modelVersion"],i);const a=r(t,["promptFeedback"]);a!=null&&l(e,["promptFeedback"],a);const u=r(t,["responseId"]);u!=null&&l(e,["responseId"],u);const d=r(t,["usageMetadata"]);return d!=null&&l(e,["usageMetadata"],d),e}function Og(t,e){const n={};if(r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=r(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=r(t,["aspectRatio"]);e!==void 0&&s!=null&&l(e,["parameters","aspectRatio"],s);const i=r(t,["guidanceScale"]);if(e!==void 0&&i!=null&&l(e,["parameters","guidanceScale"],i),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=r(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&l(e,["parameters","safetySetting"],a);const u=r(t,["personGeneration"]);e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u);const d=r(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&l(e,["parameters","includeSafetyAttributes"],d);const c=r(t,["includeRaiReason"]);e!==void 0&&c!=null&&l(e,["parameters","includeRaiReason"],c);const f=r(t,["language"]);e!==void 0&&f!=null&&l(e,["parameters","language"],f);const m=r(t,["outputMimeType"]);e!==void 0&&m!=null&&l(e,["parameters","outputOptions","mimeType"],m);const p=r(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&l(e,["parameters","outputOptions","compressionQuality"],p),r(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=r(t,["imageSize"]);if(e!==void 0&&g!=null&&l(e,["parameters","sampleImageSize"],g),r(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Kg(t,e){const n={},o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const s=r(t,["negativePrompt"]);e!==void 0&&s!=null&&l(e,["parameters","negativePrompt"],s);const i=r(t,["numberOfImages"]);e!==void 0&&i!=null&&l(e,["parameters","sampleCount"],i);const a=r(t,["aspectRatio"]);e!==void 0&&a!=null&&l(e,["parameters","aspectRatio"],a);const u=r(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const d=r(t,["seed"]);e!==void 0&&d!=null&&l(e,["parameters","seed"],d);const c=r(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&l(e,["parameters","safetySetting"],c);const f=r(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const m=r(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&l(e,["parameters","includeSafetyAttributes"],m);const p=r(t,["includeRaiReason"]);e!==void 0&&p!=null&&l(e,["parameters","includeRaiReason"],p);const g=r(t,["language"]);e!==void 0&&g!=null&&l(e,["parameters","language"],g);const x=r(t,["outputMimeType"]);e!==void 0&&x!=null&&l(e,["parameters","outputOptions","mimeType"],x);const y=r(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&l(e,["parameters","outputOptions","compressionQuality"],y);const v=r(t,["addWatermark"]);e!==void 0&&v!=null&&l(e,["parameters","addWatermark"],v);const _=r(t,["labels"]);e!==void 0&&_!=null&&l(e,["labels"],_);const T=r(t,["imageSize"]);e!==void 0&&T!=null&&l(e,["parameters","sampleImageSize"],T);const b=r(t,["enhancePrompt"]);return e!==void 0&&b!=null&&l(e,["parameters","enhancePrompt"],b),n}function Jg(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const i=r(e,["config"]);return i!=null&&Og(i,n),n}function zg(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const i=r(e,["config"]);return i!=null&&Kg(i,n),n}function Wg(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>r0(a))),l(e,["generatedImages"],i)}const s=r(t,["positivePromptSafetyAttributes"]);return s!=null&&l(e,["positivePromptSafetyAttributes"],Zl(s)),e}function Yg(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>Eo(a))),l(e,["generatedImages"],i)}const s=r(t,["positivePromptSafetyAttributes"]);return s!=null&&l(e,["positivePromptSafetyAttributes"],eu(s)),e}function Qg(t,e){const n={},o=r(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o),r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=r(t,["durationSeconds"]);if(e!==void 0&&s!=null&&l(e,["parameters","durationSeconds"],s),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=r(t,["aspectRatio"]);e!==void 0&&i!=null&&l(e,["parameters","aspectRatio"],i);const a=r(t,["resolution"]);e!==void 0&&a!=null&&l(e,["parameters","resolution"],a);const u=r(t,["personGeneration"]);if(e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u),r(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=r(t,["negativePrompt"]);e!==void 0&&d!=null&&l(e,["parameters","negativePrompt"],d);const c=r(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&l(e,["parameters","enhancePrompt"],c),r(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=r(t,["lastFrame"]);e!==void 0&&f!=null&&l(e,["instances[0]","lastFrame"],So(f));const m=r(t,["referenceImages"]);if(e!==void 0&&m!=null){let p=m;Array.isArray(p)&&(p=p.map(g=>j0(g))),l(e,["instances[0]","referenceImages"],p)}if(r(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(r(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Xg(t,e){const n={},o=r(t,["numberOfVideos"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=r(t,["outputGcsUri"]);e!==void 0&&s!=null&&l(e,["parameters","storageUri"],s);const i=r(t,["fps"]);e!==void 0&&i!=null&&l(e,["parameters","fps"],i);const a=r(t,["durationSeconds"]);e!==void 0&&a!=null&&l(e,["parameters","durationSeconds"],a);const u=r(t,["seed"]);e!==void 0&&u!=null&&l(e,["parameters","seed"],u);const d=r(t,["aspectRatio"]);e!==void 0&&d!=null&&l(e,["parameters","aspectRatio"],d);const c=r(t,["resolution"]);e!==void 0&&c!=null&&l(e,["parameters","resolution"],c);const f=r(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const m=r(t,["pubsubTopic"]);e!==void 0&&m!=null&&l(e,["parameters","pubsubTopic"],m);const p=r(t,["negativePrompt"]);e!==void 0&&p!=null&&l(e,["parameters","negativePrompt"],p);const g=r(t,["enhancePrompt"]);e!==void 0&&g!=null&&l(e,["parameters","enhancePrompt"],g);const x=r(t,["generateAudio"]);e!==void 0&&x!=null&&l(e,["parameters","generateAudio"],x);const y=r(t,["lastFrame"]);e!==void 0&&y!=null&&l(e,["instances[0]","lastFrame"],Se(y));const v=r(t,["referenceImages"]);if(e!==void 0&&v!=null){let b=v;Array.isArray(b)&&(b=b.map(C=>Z0(C))),l(e,["instances[0]","referenceImages"],b)}const _=r(t,["mask"]);e!==void 0&&_!=null&&l(e,["instances[0]","mask"],X0(_));const T=r(t,["compressionQuality"]);return e!==void 0&&T!=null&&l(e,["parameters","compressionQuality"],T),n}function jg(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=r(t,["done"]);s!=null&&l(e,["done"],s);const i=r(t,["error"]);i!=null&&l(e,["error"],i);const a=r(t,["response","generateVideoResponse"]);return a!=null&&l(e,["response"],n0(a)),e}function Zg(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=r(t,["done"]);s!=null&&l(e,["done"],s);const i=r(t,["error"]);i!=null&&l(e,["error"],i);const a=r(t,["response"]);return a!=null&&l(e,["response"],o0(a)),e}function e0(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const i=r(e,["image"]);i!=null&&l(n,["instances[0]","image"],So(i));const a=r(e,["video"]);a!=null&&l(n,["instances[0]","video"],nu(a));const u=r(e,["source"]);u!=null&&s0(u,n);const d=r(e,["config"]);return d!=null&&Qg(d,n),n}function t0(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const i=r(e,["image"]);i!=null&&l(n,["instances[0]","image"],Se(i));const a=r(e,["video"]);a!=null&&l(n,["instances[0]","video"],ou(a));const u=r(e,["source"]);u!=null&&i0(u,n);const d=r(e,["config"]);return d!=null&&Xg(d,n),n}function n0(t){const e={},n=r(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>l0(a))),l(e,["generatedVideos"],i)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const s=r(t,["raiMediaFilteredReasons"]);return s!=null&&l(e,["raiMediaFilteredReasons"],s),e}function o0(t){const e={},n=r(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>u0(a))),l(e,["generatedVideos"],i)}const o=r(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const s=r(t,["raiMediaFilteredReasons"]);return s!=null&&l(e,["raiMediaFilteredReasons"],s),e}function s0(t,e){const n={},o=r(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const s=r(t,["image"]);e!==void 0&&s!=null&&l(e,["instances[0]","image"],So(s));const i=r(t,["video"]);return e!==void 0&&i!=null&&l(e,["instances[0]","video"],nu(i)),n}function i0(t,e){const n={},o=r(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const s=r(t,["image"]);e!==void 0&&s!=null&&l(e,["instances[0]","image"],Se(s));const i=r(t,["video"]);return e!==void 0&&i!=null&&l(e,["instances[0]","video"],ou(i)),n}function r0(t){const e={},n=r(t,["_self"]);n!=null&&l(e,["image"],y0(n));const o=r(t,["raiFilteredReason"]);o!=null&&l(e,["raiFilteredReason"],o);const s=r(t,["_self"]);return s!=null&&l(e,["safetyAttributes"],Zl(s)),e}function Eo(t){const e={},n=r(t,["_self"]);n!=null&&l(e,["image"],jl(n));const o=r(t,["raiFilteredReason"]);o!=null&&l(e,["raiFilteredReason"],o);const s=r(t,["_self"]);s!=null&&l(e,["safetyAttributes"],eu(s));const i=r(t,["prompt"]);return i!=null&&l(e,["enhancedPrompt"],i),e}function a0(t){const e={},n=r(t,["_self"]);n!=null&&l(e,["mask"],jl(n));const o=r(t,["labels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),l(e,["labels"],s)}return e}function l0(t){const e={},n=r(t,["video"]);return n!=null&&l(e,["video"],Y0(n)),e}function u0(t){const e={},n=r(t,["_self"]);return n!=null&&l(e,["video"],Q0(n)),e}function c0(t){const e={},n=r(t,["modelSelectionConfig"]);n!=null&&l(e,["modelConfig"],n);const o=r(t,["responseJsonSchema"]);o!=null&&l(e,["responseJsonSchema"],o);const s=r(t,["audioTimestamp"]);s!=null&&l(e,["audioTimestamp"],s);const i=r(t,["candidateCount"]);i!=null&&l(e,["candidateCount"],i);const a=r(t,["enableAffectiveDialog"]);a!=null&&l(e,["enableAffectiveDialog"],a);const u=r(t,["frequencyPenalty"]);u!=null&&l(e,["frequencyPenalty"],u);const d=r(t,["logprobs"]);d!=null&&l(e,["logprobs"],d);const c=r(t,["maxOutputTokens"]);c!=null&&l(e,["maxOutputTokens"],c);const f=r(t,["mediaResolution"]);f!=null&&l(e,["mediaResolution"],f);const m=r(t,["presencePenalty"]);m!=null&&l(e,["presencePenalty"],m);const p=r(t,["responseLogprobs"]);p!=null&&l(e,["responseLogprobs"],p);const g=r(t,["responseMimeType"]);g!=null&&l(e,["responseMimeType"],g);const x=r(t,["responseModalities"]);x!=null&&l(e,["responseModalities"],x);const y=r(t,["responseSchema"]);y!=null&&l(e,["responseSchema"],y);const v=r(t,["routingConfig"]);v!=null&&l(e,["routingConfig"],v);const _=r(t,["seed"]);_!=null&&l(e,["seed"],_);const T=r(t,["speechConfig"]);T!=null&&l(e,["speechConfig"],T);const b=r(t,["stopSequences"]);b!=null&&l(e,["stopSequences"],b);const C=r(t,["temperature"]);C!=null&&l(e,["temperature"],C);const w=r(t,["thinkingConfig"]);w!=null&&l(e,["thinkingConfig"],w);const S=r(t,["topK"]);S!=null&&l(e,["topK"],S);const E=r(t,["topP"]);if(E!=null&&l(e,["topP"],E),r(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function d0(t,e){const n={},o=r(e,["model"]);return o!=null&&l(n,["_url","name"],z(t,o)),n}function f0(t,e){const n={},o=r(e,["model"]);return o!=null&&l(n,["_url","name"],z(t,o)),n}function h0(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function p0(t){const e={};if(r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function m0(t){const e={},n=r(t,["aspectRatio"]);n!=null&&l(e,["aspectRatio"],n);const o=r(t,["imageSize"]);if(o!=null&&l(e,["imageSize"],o),r(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(r(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function g0(t){const e={},n=r(t,["aspectRatio"]);n!=null&&l(e,["aspectRatio"],n);const o=r(t,["imageSize"]);o!=null&&l(e,["imageSize"],o);const s=r(t,["outputMimeType"]);s!=null&&l(e,["imageOutputOptions","mimeType"],s);const i=r(t,["outputCompressionQuality"]);return i!=null&&l(e,["imageOutputOptions","compressionQuality"],i),e}function y0(t){const e={},n=r(t,["bytesBase64Encoded"]);n!=null&&l(e,["imageBytes"],it(n));const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function jl(t){const e={},n=r(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const o=r(t,["bytesBase64Encoded"]);o!=null&&l(e,["imageBytes"],it(o));const s=r(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}function So(t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(t,["imageBytes"]);n!=null&&l(e,["bytesBase64Encoded"],it(n));const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Se(t){const e={},n=r(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const o=r(t,["imageBytes"]);o!=null&&l(e,["bytesBase64Encoded"],it(o));const s=r(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}function v0(t,e,n){const o={},s=r(e,["pageSize"]);n!==void 0&&s!=null&&l(n,["_query","pageSize"],s);const i=r(e,["pageToken"]);n!==void 0&&i!=null&&l(n,["_query","pageToken"],i);const a=r(e,["filter"]);n!==void 0&&a!=null&&l(n,["_query","filter"],a);const u=r(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],Kl(t,u)),o}function x0(t,e,n){const o={},s=r(e,["pageSize"]);n!==void 0&&s!=null&&l(n,["_query","pageSize"],s);const i=r(e,["pageToken"]);n!==void 0&&i!=null&&l(n,["_query","pageToken"],i);const a=r(e,["filter"]);n!==void 0&&a!=null&&l(n,["_query","filter"],a);const u=r(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],Kl(t,u)),o}function _0(t,e){const n={},o=r(e,["config"]);return o!=null&&v0(t,o,n),n}function T0(t,e){const n={},o=r(e,["config"]);return o!=null&&x0(t,o,n),n}function C0(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=r(t,["_self"]);if(s!=null){let i=Jl(s);Array.isArray(i)&&(i=i.map(a=>ws(a))),l(e,["models"],i)}return e}function b0(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=r(t,["_self"]);if(s!=null){let i=Jl(s);Array.isArray(i)&&(i=i.map(a=>Es(a))),l(e,["models"],i)}return e}function w0(t){const e={},n=r(t,["maskMode"]);n!=null&&l(e,["maskMode"],n);const o=r(t,["segmentationClasses"]);o!=null&&l(e,["maskClasses"],o);const s=r(t,["maskDilation"]);return s!=null&&l(e,["dilation"],s),e}function ws(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["displayName"]);o!=null&&l(e,["displayName"],o);const s=r(t,["description"]);s!=null&&l(e,["description"],s);const i=r(t,["version"]);i!=null&&l(e,["version"],i);const a=r(t,["_self"]);a!=null&&l(e,["tunedModelInfo"],V0(a));const u=r(t,["inputTokenLimit"]);u!=null&&l(e,["inputTokenLimit"],u);const d=r(t,["outputTokenLimit"]);d!=null&&l(e,["outputTokenLimit"],d);const c=r(t,["supportedGenerationMethods"]);c!=null&&l(e,["supportedActions"],c);const f=r(t,["temperature"]);f!=null&&l(e,["temperature"],f);const m=r(t,["maxTemperature"]);m!=null&&l(e,["maxTemperature"],m);const p=r(t,["topP"]);p!=null&&l(e,["topP"],p);const g=r(t,["topK"]);g!=null&&l(e,["topK"],g);const x=r(t,["thinking"]);return x!=null&&l(e,["thinking"],x),e}function Es(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["displayName"]);o!=null&&l(e,["displayName"],o);const s=r(t,["description"]);s!=null&&l(e,["description"],s);const i=r(t,["versionId"]);i!=null&&l(e,["version"],i);const a=r(t,["deployedModels"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(p=>Lg(p))),l(e,["endpoints"],m)}const u=r(t,["labels"]);u!=null&&l(e,["labels"],u);const d=r(t,["_self"]);d!=null&&l(e,["tunedModelInfo"],H0(d));const c=r(t,["defaultCheckpointId"]);c!=null&&l(e,["defaultCheckpointId"],c);const f=r(t,["checkpoints"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(p=>p)),l(e,["checkpoints"],m)}return e}function E0(t){const e={},n=r(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=r(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=r(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const i=r(t,["fileData"]);i!=null&&l(e,["fileData"],Gg(i));const a=r(t,["functionCall"]);a!=null&&l(e,["functionCall"],qg(a));const u=r(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=r(t,["inlineData"]);d!=null&&l(e,["inlineData"],cg(d));const c=r(t,["text"]);c!=null&&l(e,["text"],c);const f=r(t,["thought"]);f!=null&&l(e,["thought"],f);const m=r(t,["thoughtSignature"]);m!=null&&l(e,["thoughtSignature"],m);const p=r(t,["videoMetadata"]);return p!=null&&l(e,["videoMetadata"],p),e}function S0(t){const e={},n=r(t,["productImage"]);return n!=null&&l(e,["image"],Se(n)),e}function I0(t,e){const n={},o=r(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=r(t,["baseSteps"]);e!==void 0&&s!=null&&l(e,["parameters","baseSteps"],s);const i=r(t,["outputGcsUri"]);e!==void 0&&i!=null&&l(e,["parameters","storageUri"],i);const a=r(t,["seed"]);e!==void 0&&a!=null&&l(e,["parameters","seed"],a);const u=r(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&l(e,["parameters","safetySetting"],u);const d=r(t,["personGeneration"]);e!==void 0&&d!=null&&l(e,["parameters","personGeneration"],d);const c=r(t,["addWatermark"]);e!==void 0&&c!=null&&l(e,["parameters","addWatermark"],c);const f=r(t,["outputMimeType"]);e!==void 0&&f!=null&&l(e,["parameters","outputOptions","mimeType"],f);const m=r(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&l(e,["parameters","outputOptions","compressionQuality"],m);const p=r(t,["enhancePrompt"]);e!==void 0&&p!=null&&l(e,["parameters","enhancePrompt"],p);const g=r(t,["labels"]);return e!==void 0&&g!=null&&l(e,["labels"],g),n}function A0(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["source"]);s!=null&&N0(s,n);const i=r(e,["config"]);return i!=null&&I0(i,n),n}function k0(t){const e={},n=r(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Eo(s))),l(e,["generatedImages"],o)}return e}function N0(t,e){const n={},o=r(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const s=r(t,["personImage"]);e!==void 0&&s!=null&&l(e,["instances[0]","personImage","image"],Se(s));const i=r(t,["productImages"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>S0(u))),l(e,["instances[0]","productImages"],a)}return n}function R0(t){const e={},n=r(t,["referenceImage"]);n!=null&&l(e,["referenceImage"],Se(n));const o=r(t,["referenceId"]);o!=null&&l(e,["referenceId"],o);const s=r(t,["referenceType"]);s!=null&&l(e,["referenceType"],s);const i=r(t,["maskImageConfig"]);i!=null&&l(e,["maskImageConfig"],w0(i));const a=r(t,["controlImageConfig"]);a!=null&&l(e,["controlImageConfig"],yg(a));const u=r(t,["styleImageConfig"]);u!=null&&l(e,["styleImageConfig"],u);const d=r(t,["subjectImageConfig"]);return d!=null&&l(e,["subjectImageConfig"],d),e}function Zl(t){const e={},n=r(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const o=r(t,["safetyAttributes","scores"]);o!=null&&l(e,["scores"],o);const s=r(t,["contentType"]);return s!=null&&l(e,["contentType"],s),e}function eu(t){const e={},n=r(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const o=r(t,["safetyAttributes","scores"]);o!=null&&l(e,["scores"],o);const s=r(t,["contentType"]);return s!=null&&l(e,["contentType"],s),e}function P0(t){const e={},n=r(t,["category"]);if(n!=null&&l(e,["category"],n),r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=r(t,["threshold"]);return o!=null&&l(e,["threshold"],o),e}function M0(t){const e={},n=r(t,["image"]);return n!=null&&l(e,["image"],Se(n)),e}function D0(t,e){const n={},o=r(t,["mode"]);e!==void 0&&o!=null&&l(e,["parameters","mode"],o);const s=r(t,["maxPredictions"]);e!==void 0&&s!=null&&l(e,["parameters","maxPredictions"],s);const i=r(t,["confidenceThreshold"]);e!==void 0&&i!=null&&l(e,["parameters","confidenceThreshold"],i);const a=r(t,["maskDilation"]);e!==void 0&&a!=null&&l(e,["parameters","maskDilation"],a);const u=r(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&l(e,["parameters","binaryColorThreshold"],u);const d=r(t,["labels"]);return e!==void 0&&d!=null&&l(e,["labels"],d),n}function F0(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["source"]);s!=null&&L0(s,n);const i=r(e,["config"]);return i!=null&&D0(i,n),n}function U0(t){const e={},n=r(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>a0(s))),l(e,["generatedMasks"],o)}return e}function L0(t,e){const n={},o=r(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const s=r(t,["image"]);e!==void 0&&s!=null&&l(e,["instances[0]","image"],Se(s));const i=r(t,["scribbleImage"]);return e!==void 0&&i!=null&&l(e,["instances[0]","scribble"],M0(i)),n}function G0(t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],Vg(n));const o=r(t,["retrievalConfig"]);return o!=null&&l(e,["retrievalConfig"],o),e}function q0(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),l(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=r(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const i=r(t,["fileSearch"]);i!=null&&l(e,["fileSearch"],i);const a=r(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=r(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],h0(u));const d=r(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],p0(d));const c=r(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}function tu(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Hg(p))),l(e,["functionDeclarations"],m)}const o=r(t,["retrieval"]);o!=null&&l(e,["retrieval"],o);const s=r(t,["googleSearchRetrieval"]);s!=null&&l(e,["googleSearchRetrieval"],s);const i=r(t,["computerUse"]);if(i!=null&&l(e,["computerUse"],i),r(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=r(t,["codeExecution"]);a!=null&&l(e,["codeExecution"],a);const u=r(t,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);const d=r(t,["googleMaps"]);d!=null&&l(e,["googleMaps"],d);const c=r(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],c);const f=r(t,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function V0(t){const e={},n=r(t,["baseModel"]);n!=null&&l(e,["baseModel"],n);const o=r(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=r(t,["updateTime"]);return s!=null&&l(e,["updateTime"],s),e}function H0(t){const e={},n=r(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&l(e,["baseModel"],n);const o=r(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=r(t,["updateTime"]);return s!=null&&l(e,["updateTime"],s),e}function B0(t,e){const n={},o=r(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=r(t,["description"]);e!==void 0&&s!=null&&l(e,["description"],s);const i=r(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&l(e,["defaultCheckpointId"],i),n}function $0(t,e){const n={},o=r(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=r(t,["description"]);e!==void 0&&s!=null&&l(e,["description"],s);const i=r(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&l(e,["defaultCheckpointId"],i),n}function O0(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","name"],z(t,o));const s=r(e,["config"]);return s!=null&&B0(s,n),n}function K0(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["config"]);return s!=null&&$0(s,n),n}function J0(t,e){const n={},o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const s=r(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&l(e,["parameters","safetySetting"],s);const i=r(t,["personGeneration"]);e!==void 0&&i!=null&&l(e,["parameters","personGeneration"],i);const a=r(t,["includeRaiReason"]);e!==void 0&&a!=null&&l(e,["parameters","includeRaiReason"],a);const u=r(t,["outputMimeType"]);e!==void 0&&u!=null&&l(e,["parameters","outputOptions","mimeType"],u);const d=r(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&l(e,["parameters","outputOptions","compressionQuality"],d);const c=r(t,["enhanceInputImage"]);e!==void 0&&c!=null&&l(e,["parameters","upscaleConfig","enhanceInputImage"],c);const f=r(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&l(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const m=r(t,["labels"]);e!==void 0&&m!=null&&l(e,["labels"],m);const p=r(t,["numberOfImages"]);e!==void 0&&p!=null&&l(e,["parameters","sampleCount"],p);const g=r(t,["mode"]);return e!==void 0&&g!=null&&l(e,["parameters","mode"],g),n}function z0(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=r(e,["image"]);s!=null&&l(n,["instances[0]","image"],Se(s));const i=r(e,["upscaleFactor"]);i!=null&&l(n,["parameters","upscaleConfig","upscaleFactor"],i);const a=r(e,["config"]);return a!=null&&J0(a,n),n}function W0(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>Eo(i))),l(e,["generatedImages"],s)}return e}function Y0(t){const e={},n=r(t,["uri"]);n!=null&&l(e,["uri"],n);const o=r(t,["encodedVideo"]);o!=null&&l(e,["videoBytes"],it(o));const s=r(t,["encoding"]);return s!=null&&l(e,["mimeType"],s),e}function Q0(t){const e={},n=r(t,["gcsUri"]);n!=null&&l(e,["uri"],n);const o=r(t,["bytesBase64Encoded"]);o!=null&&l(e,["videoBytes"],it(o));const s=r(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}function X0(t){const e={},n=r(t,["image"]);n!=null&&l(e,["_self"],Se(n));const o=r(t,["maskMode"]);return o!=null&&l(e,["maskMode"],o),e}function j0(t){const e={},n=r(t,["image"]);n!=null&&l(e,["image"],So(n));const o=r(t,["referenceType"]);return o!=null&&l(e,["referenceType"],o),e}function Z0(t){const e={},n=r(t,["image"]);n!=null&&l(e,["image"],Se(n));const o=r(t,["referenceType"]);return o!=null&&l(e,["referenceType"],o),e}function nu(t){const e={},n=r(t,["uri"]);n!=null&&l(e,["uri"],n);const o=r(t,["videoBytes"]);o!=null&&l(e,["encodedVideo"],it(o));const s=r(t,["mimeType"]);return s!=null&&l(e,["encoding"],s),e}function ou(t){const e={},n=r(t,["uri"]);n!=null&&l(e,["gcsUri"],n);const o=r(t,["videoBytes"]);o!=null&&l(e,["bytesBase64Encoded"],it(o));const s=r(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ey(t,e){const n={},o=r(t,["displayName"]);return e!==void 0&&o!=null&&l(e,["displayName"],o),n}function ty(t){const e={},n=r(t,["config"]);return n!=null&&ey(n,e),e}function ny(t,e){const n={},o=r(t,["force"]);return e!==void 0&&o!=null&&l(e,["_query","force"],o),n}function oy(t){const e={},n=r(t,["name"]);n!=null&&l(e,["_url","name"],n);const o=r(t,["config"]);return o!=null&&ny(o,e),e}function sy(t){const e={},n=r(t,["name"]);return n!=null&&l(e,["_url","name"],n),e}function iy(t,e){const n={},o=r(t,["customMetadata"]);if(e!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>a)),l(e,["customMetadata"],i)}const s=r(t,["chunkingConfig"]);return e!==void 0&&s!=null&&l(e,["chunkingConfig"],s),n}function ry(t){const e={},n=r(t,["name"]);n!=null&&l(e,["name"],n);const o=r(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=r(t,["done"]);s!=null&&l(e,["done"],s);const i=r(t,["error"]);i!=null&&l(e,["error"],i);const a=r(t,["response"]);return a!=null&&l(e,["response"],ly(a)),e}function ay(t){const e={},n=r(t,["fileSearchStoreName"]);n!=null&&l(e,["_url","file_search_store_name"],n);const o=r(t,["fileName"]);o!=null&&l(e,["fileName"],o);const s=r(t,["config"]);return s!=null&&iy(s,e),e}function ly(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["parent"]);o!=null&&l(e,["parent"],o);const s=r(t,["documentName"]);return s!=null&&l(e,["documentName"],s),e}function uy(t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function cy(t){const e={},n=r(t,["config"]);return n!=null&&uy(n,e),e}function dy(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=r(t,["fileSearchStores"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>a)),l(e,["fileSearchStores"],i)}return e}function su(t,e){const n={},o=r(t,["mimeType"]);e!==void 0&&o!=null&&l(e,["mimeType"],o);const s=r(t,["displayName"]);e!==void 0&&s!=null&&l(e,["displayName"],s);const i=r(t,["customMetadata"]);if(e!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>d)),l(e,["customMetadata"],u)}const a=r(t,["chunkingConfig"]);return e!==void 0&&a!=null&&l(e,["chunkingConfig"],a),n}function fy(t){const e={},n=r(t,["fileSearchStoreName"]);n!=null&&l(e,["_url","file_search_store_name"],n);const o=r(t,["config"]);return o!=null&&su(o,e),e}function hy(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const py="Content-Type",my="X-Server-Timeout",gy="User-Agent",Ss="x-goog-api-client",yy="1.34.0",vy=`google-genai-sdk/${yy}`,xy="v1beta1",_y="v1beta";class Ty{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:xy,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:_y,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))s.searchParams.append(a,String(u));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.unaryApiCall(s,i,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,i]of Object.entries(n))typeof i=="object"?o[s]=Object.assign(Object.assign({},o[s]),i):i!==void 0&&(o[s]=i);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.streamApiCall(s,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,s){if(n&&n.timeout||s){const i=new AbortController,a=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>i.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}s&&s.addEventListener("abort",()=>{i.abort()}),e.signal=a}return n&&n.extraBody!==null&&Cy(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await va(s),new Ts(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await va(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return we(this,arguments,function*(){var o;const s=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";const u="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:f}=yield B(s.read());if(c){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(f,{stream:!0});try{const x=JSON.parse(m);if("error"in x){const y=JSON.parse(JSON.stringify(x.error)),v=y.status,_=y.code,T=`got status: ${v}. ${JSON.stringify(x)}`;if(_>=400&&_<600)throw new bo({message:T,status:_})}}catch(x){if(x.name==="ApiError")throw x}a+=m;let p=-1,g=0;for(;;){p=-1,g=0;for(const v of d){const _=a.indexOf(v);_!==-1&&(p===-1||_<p)&&(p=_,g=v.length)}if(p===-1)break;const x=a.substring(0,p);a=a.substring(p+g);const y=x.trim();if(y.startsWith(u)){const v=y.substring(u.length).trim();try{const _=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield B(new Ts(_))}catch(_){throw new Error(`exception parsing stream chunk ${v}. ${_}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=vy+" "+this.clientOptions.userAgentExtra;return e[gy]=n,e[Ss]=n,e[py]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[s,i]of Object.entries(e.headers))o.append(s,i);e.timeout&&e.timeout>0&&o.append(my,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const i=this.clientOptions.uploader,a=await i.stat(e);s.sizeBytes=String(a.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=u;const d={file:s},c=this.getFileName(e),f=D("upload/v1beta/files",d._url),m=await this.fetchUploadUrl(f,s.sizeBytes,s.mimeType,c,d,n==null?void 0:n.httpOptions);return i.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,o){var s;const i=this.clientOptions.uploader,a=await i.stat(n),u=String(a.size),d=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),m={};o!=null&&su(o,m);const p=await this.fetchUploadUrl(c,u,d,f,m,o==null?void 0:o.httpOptions);return i.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,s,i,a){var u;let d={};a?d=a:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const c=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:d});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=c==null?void 0:c.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function va(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new bo({message:s,status:n}):new Error(s)}}function Cy(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(i,a){const u=Object.assign({},i);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const c=a[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const s=o(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const by="mcp_used/unknown";let wy=!1;function iu(t){for(const e of t)if(Ey(e)||typeof e=="object"&&"inputSchema"in e)return!0;return wy}function ru(t){var e;const n=(e=t[Ss])!==null&&e!==void 0?e:"";t[Ss]=(n+` ${by}`).trimStart()}function Ey(t){return t!==null&&typeof t=="object"&&t instanceof ni}function Sy(t){return we(this,arguments,function*(n,o=100){let s,i=0;for(;i<o;){const a=yield B(n.listTools({cursor:s}));for(const u of a.tools)yield yield B(u),i++;if(!a.nextCursor)break;s=a.nextCursor}})}class ni{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new ni(e,n)}async initialize(){var e,n,o,s;if(this.mcpTools.length>0)return;const i={},a=[];for(const f of this.mcpClients)try{for(var u=!0,d=(n=void 0,Ee(Sy(f))),c;c=await d.next(),e=c.done,!e;u=!0){s=c.value,u=!1;const m=s;a.push(m);const p=m.name;if(i[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);i[p]=f}}catch(m){n={error:m}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),sp(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const a=await s.callTool({name:o.name,arguments:o.args},void 0,i);n.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Iy(t,e,n){const o=new Qh;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(o,s),e(o)}class Ay{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),a=Ry(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(b=>{c=b}),m=e.callbacks,p=function(){c({})},g=this.apiClient,x={onopen:p,onmessage:b=>{Iy(g,m.onmessage,b)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(b){},onclose:(o=m==null?void 0:m.onclose)!==null&&o!==void 0?o:function(b){}},y=this.webSocketFactory.create(d,Ny(a),x);y.connect(),await f;const T={setup:{model:z(this.apiClient,e.model)}};return y.send(JSON.stringify(T)),new ky(y,this.apiClient)}}class ky{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=tg(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=eg(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(At.PLAY)}pause(){this.sendPlaybackControl(At.PAUSE)}stop(){this.sendPlaybackControl(At.STOP)}resetContext(){this.sendPlaybackControl(At.RESET_CONTEXT)}close(){this.conn.close()}}function Ny(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function Ry(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Py="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function My(t,e,n){const o=new Yh;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const i=JSON.parse(s);if(t.isVertexAI()){const a=sg(i);Object.assign(o,a)}else Object.assign(o,i);e(o)}class Dy{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new Ay(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,s,i,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&iu(e.config.tools)&&ru(m);const p=Gy(m);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,f);else{const I=this.apiClient.getApiKey();let P="BidiGenerateContent",F="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",F="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${P}?${F}=${I}`}let g=()=>{};const x=new Promise(I=>{g=I}),y=e.callbacks,v=function(){var I;(I=y==null?void 0:y.onopen)===null||I===void 0||I.call(y),g({})},_=this.apiClient,T={onopen:v,onmessage:I=>{My(_,y.onmessage,I)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(I){},onclose:(o=y==null?void 0:y.onclose)!==null&&o!==void 0?o:function(I){}},b=this.webSocketFactory.create(f,Ly(p),T);b.connect(),await x;let C=z(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&C.startsWith("publishers/")){const I=this.apiClient.getProject(),P=this.apiClient.getLocation();C=`projects/${I}/locations/${P}/`+C}let w={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[co.AUDIO]}:e.config.responseModalities=[co.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const S=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],E=[];for(const I of S)if(this.isCallableTool(I)){const P=I;E.push(await P.tool())}else E.push(I);E.length>0&&(e.config.tools=E);const N={model:C,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?w=Zm(this.apiClient,N):w=jm(this.apiClient,N),delete w.config,b.send(JSON.stringify(w)),new Uy(b,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Fy={turnComplete:!0};class Uy{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=ve(n.turns),e.isVertexAI()||(o=o.map(s=>wo(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const i of o){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(Py)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Fy),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:og(e)}:n={realtimeInput:ng(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Ly(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function Gy(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xa=10;function _a(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Dt(a)){s=!0;break}if(!s)return!0;const i=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Dt(t){return"callTool"in t&&typeof t.callTool=="function"}function qy(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Dt(s)))!==null&&o!==void 0?o:!1}function Ta(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,s)=>{if(Dt(o))return;const i=o;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(s)}),n}function Ca(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vy extends Be{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,s,i,a,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!qy(n)||_a(n.config))return await this.generateContentInternal(d);const c=Ta(n);if(c.length>0){const y=c.map(v=>`tools[${v}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let f,m;const p=ve(d.contents),g=(i=(s=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:xa;let x=0;for(;x<g&&(f=await this.generateContentInternal(d),!(!f.functionCalls||f.functionCalls.length===0));){const y=f.candidates[0].content,v=[];for(const _ of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(Dt(_)){const b=await _.callTool(f.functionCalls);v.push(...b)}x++,m={role:"user",parts:v},d.contents=ve(d.contents),d.contents.push(y),d.contents.push(m),Ca(d.config)&&(p.push(y),p.push(m))}return Ca(d.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{var o,s,i,a,u;if(this.maybeMoveToResponseJsonSchem(n),_a(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const d=Ta(n);if(d.length>0){const m=d.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(i=(s=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(u=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var s;let i;const a=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?i=d==null?void 0:d.safetyAttributes:a.push(d);let u;return i?u={generatedImages:a,positivePromptSafetyAttributes:i,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Tt(He.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var o,s,i,a,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(i=n.source)===null||i===void 0?void 0:i.video)===null||a===void 0)&&a.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,s;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const a=await Promise.all(i.map(async d=>Dt(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&iu(e.config.tools)){const d=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),ru(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var n,o,s;const i=new Map;for(const a of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Dt(a)){const u=a,d=await u.tool();for(const c of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,u)}}return i}async processAfcStream(e){var n,o,s;const i=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:xa;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return function(c,f,m){return we(this,arguments,function*(){for(var p,g,x,y,v,_;u<i;){a&&(u++,a=!1);const w=yield B(c.processParamsMaybeAddMcpUsage(m)),S=yield B(c.generateContentStreamInternal(w)),E=[],N=[];try{for(var T=!0,b=(g=void 0,Ee(S)),C;C=yield B(b.next()),p=C.done,!p;T=!0){y=C.value,T=!1;const I=y;if(yield yield B(I),I.candidates&&(!((v=I.candidates[0])===null||v===void 0)&&v.content)){N.push(I.candidates[0].content);for(const P of(_=I.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(u<i&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(P.functionCall.name)){const F=yield B(f.get(P.functionCall.name).callTool([P.functionCall]));E.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(I){g={error:I}}finally{try{!T&&!p&&(x=b.return)&&(yield B(x.call(b)))}finally{if(g)throw g.error}}if(E.length>0){a=!0;const I=new en;I.candidates=[{content:{role:"user",parts:E}}],yield yield B(I);const P=[];P.push(...N),P.push({role:"user",parts:E});const F=ve(m.contents).concat(P);m.contents=F}else break}})}(this,d,e)}async generateContentInternal(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ma(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=ya(f),p=new en;return Object.assign(p,m),p})}else{const c=pa(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=ga(f),p=new en;return Object.assign(p,m),p})}}async generateContentStreamInternal(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ma(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(m){return we(this,arguments,function*(){var p,g,x,y;try{for(var v=!0,_=Ee(m),T;T=yield B(_.next()),p=T.done,!p;v=!0){y=T.value,v=!1;const b=y,C=ya(yield B(b.json()));C.sdkHttpResponse={headers:b.headers};const w=new en;Object.assign(w,C),yield yield B(w)}}catch(b){g={error:b}}finally{try{!v&&!p&&(x=_.return)&&(yield B(x.call(_)))}finally{if(g)throw g.error}}})})}else{const c=pa(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(m){return we(this,arguments,function*(){var p,g,x,y;try{for(var v=!0,_=Ee(m),T;T=yield B(_.next()),p=T.done,!p;v=!0){y=T.value,v=!1;const b=y,C=ga(yield B(b.json()));C.sdkHttpResponse={headers:b.headers};const w=new en;Object.assign(w,C),yield yield B(w)}}catch(b){g={error:b}}finally{try{!v&&!p&&(x=_.return)&&(yield B(x.call(_)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Dg(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Ug(f),p=new Xr;return Object.assign(p,m),p})}else{const c=Mg(this.apiClient,e);return u=D("{model}:batchEmbedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Fg(f),p=new Xr;return Object.assign(p,m),p})}}async generateImagesInternal(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=zg(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Yg(f),p=new jr;return Object.assign(p,m),p})}else{const c=Jg(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Wg(f),p=new jr;return Object.assign(p,m),p})}}async editImageInternal(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI()){const u=kg(this.apiClient,e);return i=D("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Ng(d),f=new Gh;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI()){const u=z0(this.apiClient,e);return i=D("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=W0(d),f=new qh;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI()){const u=A0(this.apiClient,e);return i=D("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=k0(d),f=new Vh;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI()){const u=F0(this.apiClient,e);return i=D("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=U0(d),f=new Hh;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=f0(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Es(f))}else{const c=d0(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>ws(f))}}async listInternal(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=T0(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=b0(f),p=new Zr;return Object.assign(p,m),p})}else{const c=_0(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=C0(f),p=new Zr;return Object.assign(p,m),p})}}async update(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=K0(this.apiClient,e);return u=D("{model}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Es(f))}else{const c=O0(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>ws(f))}}async delete(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Eg(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Ig(f),p=new ea;return Object.assign(p,m),p})}else{const c=wg(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Sg(f),p=new ea;return Object.assign(p,m),p})}}async countTokens(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Tg(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=bg(f),p=new ta;return Object.assign(p,m),p})}else{const c=_g(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Cg(f),p=new ta;return Object.assign(p,m),p})}}async computeTokens(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI()){const u=hg(this.apiClient,e);return i=D("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=pg(d),f=new Bh;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=t0(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const m=Zg(f),p=new fo;return Object.assign(p,m),p})}else{const c=e0(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>{const m=jg(f),p=new fo;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hy extends Be{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Ph(e);return u=D("{operationName}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a}else{const c=Rh(e);return u=D("{operationName}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI()){const u=wh(e);return i=D("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function By(t){const e={},n=r(t,["data"]);if(n!=null&&l(e,["data"],n),r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function $y(t){const e={},n=r(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>jy(i))),l(e,["parts"],s)}const o=r(t,["role"]);return o!=null&&l(e,["role"],o),e}function Oy(t,e,n){const o={},s=r(e,["expireTime"]);n!==void 0&&s!=null&&l(n,["expireTime"],s);const i=r(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&l(n,["newSessionExpireTime"],i);const a=r(e,["uses"]);n!==void 0&&a!=null&&l(n,["uses"],a);const u=r(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&l(n,["bidiGenerateContentSetup"],Xy(t,u));const d=r(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&l(n,["fieldMask"],d),o}function Ky(t,e){const n={},o=r(e,["config"]);return o!=null&&l(n,["config"],Oy(t,o,n)),n}function Jy(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=r(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function zy(t){const e={},n=r(t,["id"]);n!=null&&l(e,["id"],n);const o=r(t,["args"]);o!=null&&l(e,["args"],o);const s=r(t,["name"]);if(s!=null&&l(e,["name"],s),r(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Wy(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function Yy(t){const e={};if(r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function Qy(t,e){const n={},o=r(t,["generationConfig"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig"],o);const s=r(t,["responseModalities"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","responseModalities"],s);const i=r(t,["temperature"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig","temperature"],i);const a=r(t,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);const u=r(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const d=r(t,["maxOutputTokens"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","maxOutputTokens"],d);const c=r(t,["mediaResolution"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","mediaResolution"],c);const f=r(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const m=r(t,["speechConfig"]);e!==void 0&&m!=null&&l(e,["setup","generationConfig","speechConfig"],ti(m));const p=r(t,["thinkingConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","thinkingConfig"],p);const g=r(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=r(t,["systemInstruction"]);e!==void 0&&x!=null&&l(e,["setup","systemInstruction"],$y(re(x)));const y=r(t,["tools"]);if(e!==void 0&&y!=null){let S=Yt(y);Array.isArray(S)&&(S=S.map(E=>ev(Wt(E)))),l(e,["setup","tools"],S)}const v=r(t,["sessionResumption"]);e!==void 0&&v!=null&&l(e,["setup","sessionResumption"],Zy(v));const _=r(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&l(e,["setup","inputAudioTranscription"],_);const T=r(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&l(e,["setup","outputAudioTranscription"],T);const b=r(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&l(e,["setup","realtimeInputConfig"],b);const C=r(t,["contextWindowCompression"]);e!==void 0&&C!=null&&l(e,["setup","contextWindowCompression"],C);const w=r(t,["proactivity"]);if(e!==void 0&&w!=null&&l(e,["setup","proactivity"],w),r(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Xy(t,e){const n={},o=r(e,["model"]);o!=null&&l(n,["setup","model"],z(t,o));const s=r(e,["config"]);return s!=null&&l(n,["config"],Qy(s,n)),n}function jy(t){const e={},n=r(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=r(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=r(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const i=r(t,["fileData"]);i!=null&&l(e,["fileData"],Jy(i));const a=r(t,["functionCall"]);a!=null&&l(e,["functionCall"],zy(a));const u=r(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=r(t,["inlineData"]);d!=null&&l(e,["inlineData"],By(d));const c=r(t,["text"]);c!=null&&l(e,["text"],c);const f=r(t,["thought"]);f!=null&&l(e,["thought"],f);const m=r(t,["thoughtSignature"]);m!=null&&l(e,["thoughtSignature"],m);const p=r(t,["videoMetadata"]);return p!=null&&l(e,["videoMetadata"],p),e}function Zy(t){const e={},n=r(t,["handle"]);if(n!=null&&l(e,["handle"],n),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ev(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),l(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=r(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=r(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const i=r(t,["fileSearch"]);i!=null&&l(e,["fileSearch"],i);const a=r(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=r(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],Wy(u));const d=r(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],Yy(d));const c=r(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tv(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(i=>`${n}.${i}`);e.push(...s)}else e.push(n)}return e.join(",")}function nv(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const i=o.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const i=tv(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];s.length>0&&(u=s.map(c=>a.includes(c)?`generationConfig.${c}`:c));const d=[];i&&d.push(i),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class ov extends Be{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Ky(this.apiClient,e);i=D("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=nv(u,e.config);return s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sv(t,e){const n={},o=r(t,["force"]);return e!==void 0&&o!=null&&l(e,["_query","force"],o),n}function iv(t){const e={},n=r(t,["name"]);n!=null&&l(e,["_url","name"],n);const o=r(t,["config"]);return o!=null&&sv(o,e),e}function rv(t){const e={},n=r(t,["name"]);return n!=null&&l(e,["_url","name"],n),e}function av(t,e){const n={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function lv(t){const e={},n=r(t,["parent"]);n!=null&&l(e,["_url","parent"],n);const o=r(t,["config"]);return o!=null&&av(o,e),e}function uv(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=r(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=r(t,["documents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>a)),l(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cv extends Be{constructor(e){super(),this.apiClient=e,this.list=async n=>new Tt(He.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=rv(e);return i=D("{name}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=iv(e);s=D("{name}",a._url),i=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lv(e);return i=D("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=uv(d),f=new $h;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dv extends Be{constructor(e,n=new cv(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new Tt(He.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ty(e);return i=D("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sy(e);return i=D("{name}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=oy(e);s=D("{name}",a._url),i=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=cy(e);return i=D("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=dy(d),f=new Oh;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fy(e);return i=D("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=hy(d),f=new Kh;return Object.assign(f,c),f})}}async importFile(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ay(e);return i=D("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=ry(d),f=new Qs;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let au=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return au=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const fv=()=>au();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Is(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const As=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xe extends Error{}class fe extends xe{constructor(e,n,o,s){super(`${fe.makeMessage(e,n,o)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,o){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,o,s){if(!e||!s)return new Io({message:o,cause:As(n)});const i=n;return e===400?new uu(e,i,o,s):e===401?new cu(e,i,o,s):e===403?new du(e,i,o,s):e===404?new fu(e,i,o,s):e===409?new hu(e,i,o,s):e===422?new pu(e,i,o,s):e===429?new mu(e,i,o,s):e>=500?new gu(e,i,o,s):new fe(e,i,o,s)}}class ks extends fe{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Io extends fe{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class lu extends Io{constructor({message:e}={}){super({message:e??"Request timed out."})}}class uu extends fe{}class cu extends fe{}class du extends fe{}class fu extends fe{}class hu extends fe{}class pu extends fe{}class mu extends fe{}class gu extends fe{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hv=/^[a-z][a-z0-9+.-]*:/i,pv=t=>hv.test(t);let Ns=t=>(Ns=Array.isArray,Ns(t));const mv=Ns;let gv=mv;const ba=gv;function yv(t){if(!t)return!0;for(const e in t)return!1;return!0}function vv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const xv=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new xe(`${t} must be an integer`);if(e<0)throw new xe(`${t} must be a positive integer`);return e},_v=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tv=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const It="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cv(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const bv=()=>{var t,e,n,o,s;const i=Cv();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":It,"X-Stainless-OS":Ea(Deno.build.os),"X-Stainless-Arch":wa(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":It,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":It,"X-Stainless-OS":Ea((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":wa((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const a=wv();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":It,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":It,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function wv(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const s=o[1]||0,i=o[2]||0,a=o[3]||0;return{browser:e,version:`${s}.${i}.${a}`}}}return null}const wa=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Ea=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let qn;const Ev=()=>qn??(qn=bv());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sv(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function yu(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Iv(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return yu({start(){},async pull(n){const{done:o,value:s}=await e.next();o?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function vu(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Av(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),s=o.cancel();o.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kv=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xu=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Vo(t,e,n){return xu(),new File(t,e??"unknown_file",n)}function Nv(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Rv=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _u=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Pv=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&_u(t),Mv=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Dv(t,e,n){if(xu(),t=await t,Pv(t))return t instanceof File?t:Vo([await t.arrayBuffer()],t.name);if(Mv(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Vo(await Rs(s),e,n)}const o=await Rs(t);if(e||(e=Nv(t)),!(n!=null&&n.type)){const s=o.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Vo(o,e,n)}async function Rs(t){var e,n,o,s,i;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(_u(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(Rv(t))try{for(var u=!0,d=Ee(t),c;c=await d.next(),e=c.done,!e;u=!0){s=c.value,u=!1;const f=s;a.push(...await Rs(f))}}catch(f){n={error:f}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}else{const f=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${Fv(t)}`)}return a}function Fv(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tu{constructor(e){this._client=e}}Tu._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cu(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Sa=Object.freeze(Object.create(null)),Uv=(t=Cu)=>function(n,...o){if(n.length===1)return n[0];let s=!1;const i=[],a=n.reduce((f,m,p)=>{var g,x,y;/[?#]/.test(m)&&(s=!0);const v=o[p];let _=(s?encodeURIComponent:t)(""+v);return p!==o.length&&(v==null||typeof v=="object"&&v.toString===((y=Object.getPrototypeOf((x=Object.getPrototypeOf((g=v.hasOwnProperty)!==null&&g!==void 0?g:Sa))!==null&&x!==void 0?x:Sa))===null||y===void 0?void 0:y.toString))&&(_=v+"",i.push({start:f.length+m.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(v).slice(8,-1)} is not a valid path parameter`})),f+m+(p===o.length?"":_)},""),u=a.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=d.exec(u))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((f,m)=>f.start-m.start),i.length>0){let f=0;const m=i.reduce((p,g)=>{const x=" ".repeat(g.start-f),y="^".repeat(g.length);return f=g.start+g.length,p+x+y},"");throw new xe(`Path parameters result in path with invalid segments:
${i.map(p=>p.error).join(`
`)}
${a}
${m}`)}return a},Vn=Uv(Cu);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bu extends Tu{create(e,n){var o;const{api_version:s=this._client.apiVersion}=e,i=po(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new xe("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new xe("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Vn`/${s}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(Vn`/${s}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(Vn`/${s}/interactions/${e}/cancel`,o)}get(e,n={},o){var s;const i=n??{},{api_version:a=this._client.apiVersion}=i,u=po(i,["api_version"]);return this._client.get(Vn`/${a}/interactions/${e}`,Object.assign(Object.assign({query:u},o),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}bu._key=Object.freeze(["interactions"]);class wu extends bu{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lv(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let o=0;for(const s of t)n.set(s,o),o+=s.length;return n}let Hn;function oi(t){let e;return(Hn??(e=new globalThis.TextEncoder,Hn=e.encode.bind(e)))(t)}let Bn;function Ia(t){let e;return(Bn??(e=new globalThis.TextDecoder,Bn=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ao{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?oi(e):e;this.buffer=Lv([this.buffer,n]);const o=[];let s;for(;(s=Gv(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){o.push(Ia(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,a=Ia(this.buffer.subarray(0,i));o.push(a),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Ao.NEWLINE_CHARS=new Set([`
`,"\r"]);Ao.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Gv(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function qv(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mo={off:0,error:200,warn:300,info:400,debug:500},Aa=(t,e,n)=>{if(t){if(vv(mo,t))return t;le(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(mo))}`)}};function sn(){}function $n(t,e,n){return!e||mo[t]>mo[n]?sn:e[t].bind(e)}const Vv={error:sn,warn:sn,info:sn,debug:sn};let ka=new WeakMap;function le(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return Vv;const s=ka.get(n);if(s&&s[0]===o)return s[1];const i={error:$n("error",n,o),warn:$n("warn",n,o),info:$n("info",n,o),debug:$n("debug",n,o)};return ka.set(n,[o,i]),i}const at=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kt{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let s=!1;const i=o?le(o):console;function a(){return we(this,arguments,function*(){var d,c,f,m;if(s)throw new xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let p=!1;try{try{for(var g=!0,x=Ee(Hv(e,n)),y;y=yield B(x.next()),d=y.done,!d;g=!0){m=y.value,g=!1;const v=m;if(!p)if(v.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield B(JSON.parse(v.data))}catch(_){throw i.error("Could not parse message into JSON:",v.data),i.error("From chunk:",v.raw),_}}}catch(v){c={error:v}}finally{try{!g&&!d&&(f=x.return)&&(yield B(f.call(x)))}finally{if(c)throw c.error}}p=!0}catch(v){if(Is(v))return yield B(void 0);throw v}finally{p||n.abort()}})}return new kt(a,n,o)}static fromReadableStream(e,n,o){let s=!1;function i(){return we(this,arguments,function*(){var d,c,f,m;const p=new Ao,g=vu(e);try{for(var x=!0,y=Ee(g),v;v=yield B(y.next()),d=v.done,!d;x=!0){m=v.value,x=!1;const _=m;for(const T of p.decode(_))yield yield B(T)}}catch(_){c={error:_}}finally{try{!x&&!d&&(f=y.return)&&(yield B(f.call(y)))}finally{if(c)throw c.error}}for(const _ of p.flush())yield yield B(_)})}function a(){return we(this,arguments,function*(){var d,c,f,m;if(s)throw new xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let p=!1;try{try{for(var g=!0,x=Ee(i()),y;y=yield B(x.next()),d=y.done,!d;g=!0){m=y.value,g=!1;const v=m;p||v&&(yield yield B(JSON.parse(v)))}}catch(v){c={error:v}}finally{try{!g&&!d&&(f=x.return)&&(yield B(f.call(x)))}finally{if(c)throw c.error}}p=!0}catch(v){if(Is(v))return yield B(void 0);throw v}finally{p||n.abort()}})}return new kt(a,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),s=i=>({next:()=>{if(i.length===0){const a=o.next();e.push(a),n.push(a)}return i.shift()}});return[new kt(()=>s(e),this.controller,this.client),new kt(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return yu({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:s,done:i}=await n.next();if(i)return o.close();const a=oi(JSON.stringify(s)+`
`);o.enqueue(a)}catch(s){o.error(s)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function Hv(t,e){return we(this,arguments,function*(){var o,s,i,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new xe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new xe("Attempted to iterate over a response with no body");const u=new $v,d=new Ao,c=vu(t.body);try{for(var f=!0,m=Ee(Bv(c)),p;p=yield B(m.next()),o=p.done,!o;f=!0){a=p.value,f=!1;const g=a;for(const x of d.decode(g)){const y=u.decode(x);y&&(yield yield B(y))}}}catch(g){s={error:g}}finally{try{!f&&!o&&(i=m.return)&&(yield B(i.call(m)))}finally{if(s)throw s.error}}for(const g of d.flush()){const x=u.decode(g);x&&(yield yield B(x))}})}function Bv(t){return we(this,arguments,function*(){var n,o,s,i;let a=new Uint8Array;try{for(var u=!0,d=Ee(t),c;c=yield B(d.next()),n=c.done,!n;u=!0){i=c.value,u=!1;const f=i;if(f==null)continue;const m=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?oi(f):f;let p=new Uint8Array(a.length+m.length);p.set(a),p.set(m,a.length),a=p;let g;for(;(g=qv(a))!==-1;)yield yield B(a.slice(0,g)),a=a.slice(g)}}catch(f){o={error:f}}finally{try{!u&&!n&&(s=d.return)&&(yield B(s.call(d)))}finally{if(o)throw o.error}}a.length>0&&(yield yield B(a))})}class $v{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,s]=Ov(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function Ov(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Kv(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:s,startTime:i}=e,a=await(async()=>{var u;if(e.options.stream)return le(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):kt.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const d=n.headers.get("content-type"),c=(u=d==null?void 0:d.split(";")[0])===null||u===void 0?void 0:u.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return le(t).debug(`[${o}] response parsed`,at({retryOfRequestLogID:s,url:n.url,status:n.status,body:a,durationMs:Date.now()-i})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class si extends Promise{constructor(e,n,o=Kv){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new si(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Eu=Symbol("brand.privateNullableHeaders");function*Jv(t){if(!t)return;if(Eu in t){const{values:o,nulls:s}=t;yield*o.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():ba(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const s=o[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=ba(o[1])?o[1]:[o[1]];let a=!1;for(const u of i)u!==void 0&&(e&&!a&&(a=!0,yield[s,null]),yield[s,u])}}const tn=t=>{const e=new Headers,n=new Set;for(const o of t){const s=new Set;for(const[i,a]of Jv(o)){const u=i.toLowerCase();s.has(u)||(e.delete(i),s.add(u)),a===null?(e.delete(i),n.add(u)):(e.append(i,a),n.delete(u))}}return{[Eu]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ho=t=>{var e,n,o,s,i,a;if(typeof globalThis.process<"u")return(o=(n=(e=vh)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(a=(i=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||i===void 0?void 0:i.call(s,t))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Su;class ko{constructor(e){var n,o,s,i,a,u,d,{baseURL:c=Ho("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=Ho("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,p=po(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:f,apiVersion:m},p),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(o=g.timeout)!==null&&o!==void 0?o:ko.DEFAULT_TIMEOUT,this.logger=(s=g.logger)!==null&&s!==void 0?s:console;const x="warn";this.logLevel=x,this.logLevel=(a=(i=Aa(g.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:Aa(Ho("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:x,this.fetchOptions=g.fetchOptions,this.maxRetries=(u=g.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(d=g.fetch)!==null&&d!==void 0?d:Sv(),this.encoder=kv,this._options=g,this.apiKey=f,this.apiVersion=m,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=tn([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return tn([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return tn([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new xe(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${It}`}defaultIdempotencyKey(){return`stainless-node-retry-${fv()}`}makeStatusError(e,n,o,s){return fe.generate(e,n,o,s)}buildURL(e,n,o){const s=!this.baseURLOverridden()&&o||this.baseURL,i=pv(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return yv(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new si(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var s,i,a;const u=await e,d=(s=u.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=d),await this.prepareOptions(u);const{req:c,url:f,timeout:m}=await this.buildRequest(u,{retryCount:d-n});await this.prepareRequest(c,{url:f,options:u});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=o===void 0?"":`, retryOf: ${o}`,x=Date.now();if(le(this).debug(`[${p}] sending request`,at({retryOfRequestLogID:o,method:u.method,url:f,options:u,headers:c.headers})),!((i=u.signal)===null||i===void 0)&&i.aborted)throw new ks;const y=new AbortController,v=await this.fetchWithTimeout(f,c,m,y).catch(As),_=Date.now();if(v instanceof globalThis.Error){const b=`retrying, ${n} attempts remaining`;if(!((a=u.signal)===null||a===void 0)&&a.aborted)throw new ks;const C=Is(v)||/timed? ?out/i.test(String(v)+("cause"in v?String(v.cause):""));if(n)return le(this).info(`[${p}] connection ${C?"timed out":"failed"} - ${b}`),le(this).debug(`[${p}] connection ${C?"timed out":"failed"} (${b})`,at({retryOfRequestLogID:o,url:f,durationMs:_-x,message:v.message})),this.retryRequest(u,n,o??p);throw le(this).info(`[${p}] connection ${C?"timed out":"failed"} - error; no more retries left`),le(this).debug(`[${p}] connection ${C?"timed out":"failed"} (error; no more retries left)`,at({retryOfRequestLogID:o,url:f,durationMs:_-x,message:v.message})),C?new lu:new Io({cause:v})}const T=`[${p}${g}] ${c.method} ${f} ${v.ok?"succeeded":"failed"} with status ${v.status} in ${_-x}ms`;if(!v.ok){const b=await this.shouldRetry(v);if(n&&b){const I=`retrying, ${n} attempts remaining`;return await Av(v.body),le(this).info(`${T} - ${I}`),le(this).debug(`[${p}] response error (${I})`,at({retryOfRequestLogID:o,url:v.url,status:v.status,headers:v.headers,durationMs:_-x})),this.retryRequest(u,n,o??p,v.headers)}const C=b?"error; no more retries left":"error; not retryable";le(this).info(`${T} - ${C}`);const w=await v.text().catch(I=>As(I).message),S=_v(w),E=S?void 0:w;throw le(this).debug(`[${p}] response error (${C})`,at({retryOfRequestLogID:o,url:v.url,status:v.status,headers:v.headers,message:E,durationMs:Date.now()-x})),this.makeStatusError(v.status,S,E,v.headers)}return le(this).info(T),le(this).debug(`[${p}] response start`,at({retryOfRequestLogID:o,url:v.url,status:v.status,headers:v.headers,durationMs:_-x})),{response:v,options:u,controller:y,requestLogID:p,retryOfRequestLogID:o,startTime:x}}async fetchWithTimeout(e,n,o,s){const i=n||{},{signal:a,method:u}=i,d=po(i,["signal","method"]);a&&a.addEventListener("abort",()=>s.abort());const c=setTimeout(()=>s.abort(),o),f=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},f?{duplex:"half"}:{}),{method:"GET"}),d);u&&(m.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,s){var i;let a;const u=s==null?void 0:s.get("retry-after-ms");if(u){const c=parseFloat(u);Number.isNaN(c)||(a=c)}const d=s==null?void 0:s.get("retry-after");if(d&&!a){const c=parseFloat(d);Number.isNaN(c)?a=Date.parse(d)-Date.now():a=c*1e3}if(!(a&&0<=a&&a<60*1e3)){const c=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Tv(a),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,a=Math.min(.5*Math.pow(2,i),8),u=1-Math.random()*.25;return a*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,s,i;const a=Object.assign({},e),{method:u,path:d,query:c,defaultBaseURL:f}=a,m=this.buildURL(d,c,f);"timeout"in a&&xv("timeout",a.timeout),a.timeout=(o=a.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:p,body:g}=this.buildBody({options:a}),x=await this.buildHeaders({options:e,method:u,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:x},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(i=a.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let u=tn([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Ev()),this._options.defaultHeaders,o,e.headers,a]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=tn([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Iv(e)}:this.encoder({body:e,headers:o})}}ko.DEFAULT_TIMEOUT=6e4;class ne extends ko{constructor(){super(...arguments),this.interactions=new wu(this)}}Su=ne;ne.GeminiNextGenAPIClient=Su;ne.GeminiNextGenAPIClientError=xe;ne.APIError=fe;ne.APIConnectionError=Io;ne.APIConnectionTimeoutError=lu;ne.APIUserAbortError=ks;ne.NotFoundError=fu;ne.ConflictError=hu;ne.RateLimitError=mu;ne.BadRequestError=uu;ne.AuthenticationError=cu;ne.InternalServerError=gu;ne.PermissionDeniedError=du;ne.UnprocessableEntityError=pu;ne.toFile=Dv;ne.Interactions=wu;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zv(t,e){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function Wv(t,e){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function Yv(t,e){const n={},o=r(t,["sdkHttpResponse"]);return o!=null&&l(n,["sdkHttpResponse"],o),n}function Qv(t,e){const n={},o=r(t,["sdkHttpResponse"]);return o!=null&&l(n,["sdkHttpResponse"],o),n}function Xv(t,e,n){const o={};if(r(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=r(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&l(e,["displayName"],s),r(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=r(t,["epochCount"]);e!==void 0&&i!=null&&l(e,["tuningTask","hyperparameters","epochCount"],i);const a=r(t,["learningRateMultiplier"]);if(a!=null&&l(o,["tuningTask","hyperparameters","learningRateMultiplier"],a),r(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(r(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=r(t,["batchSize"]);e!==void 0&&u!=null&&l(e,["tuningTask","hyperparameters","batchSize"],u);const d=r(t,["learningRate"]);if(e!==void 0&&d!=null&&l(e,["tuningTask","hyperparameters","learningRate"],d),r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(r(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function jv(t,e,n){const o={};let s=r(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=r(t,["validationDataset"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec"],Na(g))}else if(s==="PREFERENCE_TUNING"){const g=r(t,["validationDataset"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec"],Na(g))}const i=r(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&l(e,["tunedModelDisplayName"],i);const a=r(t,["description"]);e!==void 0&&a!=null&&l(e,["description"],a);let u=r(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=r(t,["epochCount"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){const g=r(t,["epochCount"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let d=r(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=r(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(d==="PREFERENCE_TUNING"){const g=r(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=r(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=r(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=r(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=r(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=r(t,["adapterSize"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=r(t,["adapterSize"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(r(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=r(t,["labels"]);e!==void 0&&m!=null&&l(e,["labels"],m);const p=r(t,["beta"]);return e!==void 0&&p!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),o}function Zv(t,e){const n={},o=r(t,["baseModel"]);o!=null&&l(n,["baseModel"],o);const s=r(t,["preTunedModel"]);s!=null&&l(n,["preTunedModel"],s);const i=r(t,["trainingDataset"]);i!=null&&cx(i);const a=r(t,["config"]);return a!=null&&Xv(a,n),n}function ex(t,e){const n={},o=r(t,["baseModel"]);o!=null&&l(n,["baseModel"],o);const s=r(t,["preTunedModel"]);s!=null&&l(n,["preTunedModel"],s);const i=r(t,["trainingDataset"]);i!=null&&dx(i,n,e);const a=r(t,["config"]);return a!=null&&jv(a,n,e),n}function tx(t,e){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function nx(t,e){const n={},o=r(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function ox(t,e,n){const o={},s=r(t,["pageSize"]);e!==void 0&&s!=null&&l(e,["_query","pageSize"],s);const i=r(t,["pageToken"]);e!==void 0&&i!=null&&l(e,["_query","pageToken"],i);const a=r(t,["filter"]);return e!==void 0&&a!=null&&l(e,["_query","filter"],a),o}function sx(t,e,n){const o={},s=r(t,["pageSize"]);e!==void 0&&s!=null&&l(e,["_query","pageSize"],s);const i=r(t,["pageToken"]);e!==void 0&&i!=null&&l(e,["_query","pageToken"],i);const a=r(t,["filter"]);return e!==void 0&&a!=null&&l(e,["_query","filter"],a),o}function ix(t,e){const n={},o=r(t,["config"]);return o!=null&&ox(o,n),n}function rx(t,e){const n={},o=r(t,["config"]);return o!=null&&sx(o,n),n}function ax(t,e){const n={},o=r(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=r(t,["nextPageToken"]);s!=null&&l(n,["nextPageToken"],s);const i=r(t,["tunedModels"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Iu(u))),l(n,["tuningJobs"],a)}return n}function lx(t,e){const n={},o=r(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=r(t,["nextPageToken"]);s!=null&&l(n,["nextPageToken"],s);const i=r(t,["tuningJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Ps(u))),l(n,["tuningJobs"],a)}return n}function ux(t,e){const n={},o=r(t,["name"]);o!=null&&l(n,["model"],o);const s=r(t,["name"]);return s!=null&&l(n,["endpoint"],s),n}function cx(t,e){const n={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=r(t,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),l(n,["examples","examples"],s)}return n}function dx(t,e,n){const o={};let s=r(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=r(t,["gcsUri"]);e!==void 0&&a!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=r(t,["gcsUri"]);e!==void 0&&a!=null&&l(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let i=r(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const a=r(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(i==="PREFERENCE_TUNING"){const a=r(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&l(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(r(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Iu(t,e){const n={},o=r(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=r(t,["name"]);s!=null&&l(n,["name"],s);const i=r(t,["state"]);i!=null&&l(n,["state"],$l(i));const a=r(t,["createTime"]);a!=null&&l(n,["createTime"],a);const u=r(t,["tuningTask","startTime"]);u!=null&&l(n,["startTime"],u);const d=r(t,["tuningTask","completeTime"]);d!=null&&l(n,["endTime"],d);const c=r(t,["updateTime"]);c!=null&&l(n,["updateTime"],c);const f=r(t,["description"]);f!=null&&l(n,["description"],f);const m=r(t,["baseModel"]);m!=null&&l(n,["baseModel"],m);const p=r(t,["_self"]);return p!=null&&l(n,["tunedModel"],ux(p)),n}function Ps(t,e){const n={},o=r(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=r(t,["name"]);s!=null&&l(n,["name"],s);const i=r(t,["state"]);i!=null&&l(n,["state"],$l(i));const a=r(t,["createTime"]);a!=null&&l(n,["createTime"],a);const u=r(t,["startTime"]);u!=null&&l(n,["startTime"],u);const d=r(t,["endTime"]);d!=null&&l(n,["endTime"],d);const c=r(t,["updateTime"]);c!=null&&l(n,["updateTime"],c);const f=r(t,["error"]);f!=null&&l(n,["error"],f);const m=r(t,["description"]);m!=null&&l(n,["description"],m);const p=r(t,["baseModel"]);p!=null&&l(n,["baseModel"],p);const g=r(t,["tunedModel"]);g!=null&&l(n,["tunedModel"],g);const x=r(t,["preTunedModel"]);x!=null&&l(n,["preTunedModel"],x);const y=r(t,["supervisedTuningSpec"]);y!=null&&l(n,["supervisedTuningSpec"],y);const v=r(t,["preferenceOptimizationSpec"]);v!=null&&l(n,["preferenceOptimizationSpec"],v);const _=r(t,["tuningDataStats"]);_!=null&&l(n,["tuningDataStats"],_);const T=r(t,["encryptionSpec"]);T!=null&&l(n,["encryptionSpec"],T);const b=r(t,["partnerModelTuningSpec"]);b!=null&&l(n,["partnerModelTuningSpec"],b);const C=r(t,["customBaseModel"]);C!=null&&l(n,["customBaseModel"],C);const w=r(t,["experiment"]);w!=null&&l(n,["experiment"],w);const S=r(t,["labels"]);S!=null&&l(n,["labels"],S);const E=r(t,["outputUri"]);E!=null&&l(n,["outputUri"],E);const N=r(t,["pipelineJob"]);N!=null&&l(n,["pipelineJob"],N);const I=r(t,["serviceAccount"]);I!=null&&l(n,["serviceAccount"],I);const P=r(t,["tunedModelDisplayName"]);P!=null&&l(n,["tunedModelDisplayName"],P);const F=r(t,["veoTuningSpec"]);return F!=null&&l(n,["veoTuningSpec"],F),n}function fx(t,e){const n={},o=r(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=r(t,["name"]);s!=null&&l(n,["name"],s);const i=r(t,["metadata"]);i!=null&&l(n,["metadata"],i);const a=r(t,["done"]);a!=null&&l(n,["done"],a);const u=r(t,["error"]);return u!=null&&l(n,["error"],u),n}function Na(t,e){const n={},o=r(t,["gcsUri"]);o!=null&&l(n,["validationDatasetUri"],o);const s=r(t,["vertexDatasetResource"]);return s!=null&&l(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hx extends Be{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Tt(He.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:s});return i.baseModel=void 0,await this.tuneInternal(i)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),i=await this.tuneMldevInternal(s);let a="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?a=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(a=i.name.split("/operations/")[0]),{name:a,state:_s.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=nx(e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>Ps(f))}else{const c=tx(e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>Iu(f))}}async listInternal(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=rx(e);return u=D("tuningJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=lx(f),p=new na;return Object.assign(p,m),p})}else{const c=ix(e);return u=D("tunedModels",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=ax(f),p=new na;return Object.assign(p,m),p})}}async cancel(e){var n,o,s,i;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Wv(e);return u=D("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Qv(f),p=new oa;return Object.assign(p,m),p})}else{const c=zv(e);return u=D("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Yv(f),p=new oa;return Object.assign(p,m),p})}}async tuneInternal(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI()){const u=ex(e,e);return i=D("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>Ps(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let s,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Zv(e);return i=D("tunedModels",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>fx(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class px{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const mx=1024*1024*8,gx=3,yx=1e3,vx=2,go="x-goog-upload-status";async function xx(t,e,n){var o;const s=await Au(t,e,n),i=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[go])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function _x(t,e,n){var o;const s=await Au(t,e,n),i=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[go])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=Ll(i),u=new Xs;return Object.assign(u,a),u}async function Au(t,e,n){var o,s;let i=0,a=0,u=new Ts(new Response),d="upload";for(i=t.size;a<i;){const c=Math.min(mx,i-a),f=t.slice(a,a+c);a+c>=i&&(d+=", finalize");let m=0,p=yx;for(;m<gx&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(a),"Content-Length":String(c)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[go]));)m++,await Cx(p),p=p*vx;if(a+=c,((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[go])!=="active")break;if(i<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function Tx(t){return{size:t.size,type:t.type}}function Cx(t){return new Promise(e=>setTimeout(e,t))}class bx{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xx(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _x(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Tx(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wx{create(e,n,o){return new Ex(e,n,o)}}class Ex{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ra="x-goog-api-key";class Sx{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Ra)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ra,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ix="gl-node/";class Ax{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new ne({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=Ch(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new Sx(this.apiKey);this.apiClient=new Ty({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Ix+"web",uploader:new bx,downloader:new px}),this.models=new Vy(this.apiClient),this.live=new Dy(this.apiClient,s,new wx),this.batches=new Xp(this.apiClient),this.chats=new Pm(this.models,this.apiClient),this.caches=new km(this.apiClient),this.files=new Bm(this.apiClient),this.operations=new Hy(this.apiClient),this.authTokens=new ov(this.apiClient),this.tunings=new hx(this.apiClient),this.fileSearchStores=new dv(this.apiClient)}}const ii=t=>{const e=t||void 0;return e?new Ax({apiKey:e}):null},kx=async(t,e)=>{const n=ii(e);if(!n)throw new Error("API Key missing. Please configure it in Admin Settings.");const i=`
    You are an assistant for an FTC Robotics team. 
    Based on the following completed tasks for the season, write a professional, 
    bulleted Engineering Portfolio summary in Markdown format. 
    Highlight technical achievements, problem-solving, and team progression.
    
    Tasks:
    ${t.filter(a=>a.status==="Done").map(a=>`- ${a.title} (${a.type}): ${a.description}. Tags: ${a.tags.join(", ")}`).join(`
`)}
  `;try{return(await n.models.generateContent({model:"gemini-2.0-flash-exp",contents:i})).text||"Could not generate summary."}catch{try{return(await n.models.generateContent({model:"gemini-1.5-flash",contents:i})).text||"Could not generate summary."}catch{throw new Error("AI Generation failed. Check API Key or limit.")}}},Nx=async(t,e,n)=>{const o=ii(n);if(!o)throw new Error("API Key missing. Please configure it in Admin Settings.");const s=`
    Create 5 potential judge interview questions and answers for an FTC Robotics team.
    Base the questions on the provided context about the team's season and robot.
    
    Context from Portfolio:
    ${t}

    Additional Study Guide Info:
    ${e||"None provided."}

    Return the response as a JSON object with a list of "question" and "answer" pairs.
  `,i=await o.models.generateContent({model:"gemini-1.5-flash",contents:s,config:{responseMimeType:"application/json",responseSchema:{type:pe.OBJECT,properties:{questions:{type:pe.ARRAY,items:{type:pe.OBJECT,properties:{question:{type:pe.STRING},answer:{type:pe.STRING}}}}}}}});try{return JSON.parse(i.text||"{}").questions||[]}catch(a){return console.error("Failed to parse AI response",a),[]}},Rx=async(t,e)=>{const n=ii(e);if(!n)throw new Error("API Key missing. Please configure it in Admin Settings.");return(await n.models.generateContent({model:"gemini-1.5-flash",contents:`Summarize these robotics team meeting notes into concise minutes with action items:

${t}`})).text||""},Px=({tasks:t,setTasks:e,members:n,teams:o})=>{const[s,i]=M.useState(null),[a,u]=M.useState(!1),[d,c]=M.useState(!1),[f,m]=M.useState("board"),[p,g]=M.useState(""),[x,y]=M.useState({}),[v,_]=M.useState(!1),{geminiApiKey:T}=An(),b=k=>{const R=n.find(V=>V.id===k);return R?`${R.firstName} ${R.lastNameInitial}.`:"Unassigned"},C=k=>{const R=o.find(V=>V.id===k);return R?R.name:"General"},w=k=>{const R=n.find(V=>V.id===k);return R?`${R.firstName[0]}${R.lastNameInitial}`:"?"},S=k=>{i(k),c(!1),u(!0)},E=()=>{var R,V;const k={id:Date.now().toString(),title:"New Task",description:"",status:St.Backlog,type:Zt.Feature,assignedTo:((R=n[0])==null?void 0:R.id)||"",department:((V=o[0])==null?void 0:V.id)||"",tags:[],checklist:[],timeline:[],createdAt:Date.now()};i(k),c(!0),u(!0)},N=()=>{if(!s)return;const k=t.find(V=>V.id===s.id);let R={...s};if(!d&&k&&k.status!==s.status){const V={id:Date.now().toString(),type:"history",authorId:"System",content:`moved to ${s.status}`,timestamp:Date.now()};R.timeline=[V,...R.timeline]}e(d?[...t,R]:t.map(V=>V.id===R.id?R:V)),u(!1)},I=()=>{var R;if(!p.trim()||!s)return;const k={id:Date.now().toString(),type:"comment",authorId:((R=n[0])==null?void 0:R.id)||"user",content:p,timestamp:Date.now()};i({...s,timeline:[k,...s.timeline]}),g("")},P=k=>{s&&i({...s,timeline:s.timeline.filter(R=>R.id!==k)})},F=async()=>{if(s!=null&&s.description){_(!0);try{const k=await Rx(s.description,T||void 0);i({...s,description:s.description+`

**AI Summary:**
`+k})}catch{alert("AI Error. Check API Key in Admin Settings.")}finally{_(!1)}}},W=k=>{y(R=>({...R,[k]:!R[k]}))},O=()=>h.jsx("div",{className:"flex flex-col md:flex-row gap-4 h-full md:pb-4 overflow-y-auto md:overflow-x-auto",children:ji.map(k=>{const R=x[k];return h.jsxs("div",{className:`bg-slate-100 dark:bg-slate-800 rounded-xl flex flex-col flex-shrink-0 transition-all ${R?"md:w-12 h-auto":"md:w-[280px] md:h-full"}`,children:[h.jsxs("div",{className:"p-3 font-semibold text-slate-600 dark:text-slate-300 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center cursor-pointer md:cursor-default",onClick:()=>{window.innerWidth<768&&W(k)},children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"md:hidden",children:R?h.jsx(Uc,{size:16}):h.jsx(Dc,{size:16})}),h.jsx("span",{className:R?"md:hidden":"",children:k})]}),h.jsx("span",{className:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs px-2 py-1 rounded-full",children:t.filter(V=>V.status===k).length})]}),h.jsx("div",{className:`flex-1 overflow-y-auto p-2 space-y-2 transition-all ${R?"hidden":"block"} min-h-[50px] md:min-h-0`,children:t.filter(V=>V.status===k).map(V=>h.jsxs("div",{onClick:()=>S(V),className:"bg-white dark:bg-slate-700 p-3 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 cursor-pointer hover:shadow-md transition group relative",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded ${V.type===Zt.Bug?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:V.type}),h.jsx("div",{className:"text-xs text-slate-400 dark:text-slate-500",children:new Date(V.createdAt).toLocaleDateString()})]}),h.jsx("h4",{className:"font-medium text-slate-800 dark:text-slate-200 mb-1",children:V.title||"Untitled"}),h.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs text-slate-500 dark:text-slate-400",children:[h.jsx("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:C(V.department)}),V.dueDate&&h.jsxs("span",{className:"flex items-center gap-1 text-orange-600 dark:text-orange-400",children:[h.jsx(Hc,{size:10}),new Date(V.dueDate).toLocaleDateString()]}),h.jsx("div",{className:"flex-1"}),V.assignedTo&&h.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400 flex items-center justify-center font-bold text-[10px] border border-orange-200 dark:border-orange-800",children:w(V.assignedTo)})]})]},V.id))})]},k)})}),K=()=>h.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left text-sm text-slate-600 dark:text-slate-300 min-w-[600px]",children:[h.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 text-xs uppercase font-bold text-slate-500 dark:text-slate-400",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-4",children:"Title"}),h.jsx("th",{className:"p-4",children:"Type"}),h.jsx("th",{className:"p-4",children:"Status"}),h.jsx("th",{className:"p-4",children:"Assigned"}),h.jsx("th",{className:"p-4",children:"Due Date"}),h.jsx("th",{className:"p-4",children:"Created"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:t.map(k=>h.jsxs("tr",{onClick:()=>S(k),className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition",children:[h.jsx("td",{className:"p-4 font-medium text-slate-900 dark:text-white",children:k.title||"Untitled"}),h.jsx("td",{className:"p-4",children:h.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded ${k.type===Zt.Bug?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:k.type})}),h.jsx("td",{className:"p-4",children:k.status}),h.jsx("td",{className:"p-4",children:b(k.assignedTo)}),h.jsx("td",{className:"p-4",children:k.dueDate?new Date(k.dueDate).toLocaleDateString():"-"}),h.jsx("td",{className:"p-4 text-slate-400",children:new Date(k.createdAt).toLocaleDateString()})]},k.id))})]})}),L=()=>{const k=t.filter(R=>R.dueDate).sort((R,V)=>(R.dueDate||0)-(V.dueDate||0));return h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 overflow-y-auto",children:[h.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"Upcoming Deadlines"}),k.length===0?h.jsx("div",{className:"text-center text-slate-400 py-10",children:"No tasks with due dates found."}):h.jsx("div",{className:"space-y-6",children:k.map(R=>h.jsxs("div",{onClick:()=>S(R),className:"flex items-center gap-4 p-4 border border-slate-100 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition",children:[h.jsxs("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg flex flex-col items-center min-w-[60px]",children:[h.jsx("span",{className:"text-xs uppercase font-bold",children:new Date(R.dueDate).toLocaleString("default",{month:"short"})}),h.jsx("span",{className:"text-xl font-bold",children:new Date(R.dueDate).getDate()})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:R.title}),h.jsxs("div",{className:"flex gap-2 text-xs text-slate-500 dark:text-slate-400 mt-1",children:[h.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:R.status}),h.jsx("span",{children:""}),h.jsx("span",{children:b(R.assignedTo)})]})]})]},R.id))})]})};return h.jsxs("div",{className:"h-full flex flex-col",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 px-4 gap-4",children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white self-start md:self-auto",children:"Sprint Planning"}),h.jsxs("div",{className:"flex flex-row items-center gap-3 w-full md:w-auto",children:[h.jsxs("div",{className:"flex items-center gap-1 bg-slate-200 dark:bg-slate-700 p-1 rounded-lg",children:[h.jsx("button",{onClick:()=>m("board"),className:`p-2 rounded-md transition flex items-center justify-center ${f==="board"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:h.jsx(fd,{size:18})}),h.jsx("button",{onClick:()=>m("list"),className:`p-2 rounded-md transition flex items-center justify-center ${f==="list"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:h.jsx(jc,{size:18})}),h.jsx("button",{onClick:()=>m("calendar"),className:`p-2 rounded-md transition flex items-center justify-center ${f==="calendar"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:h.jsx(Nc,{size:18})})]}),h.jsxs("button",{onClick:E,className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition",children:[h.jsx(rn,{size:20})," ",h.jsx("span",{className:"hidden md:inline",children:"New Item"})]})]})]}),h.jsxs("div",{className:"flex-1 overflow-hidden px-4",children:[f==="board"&&h.jsx(O,{}),f==="list"&&h.jsx(K,{}),f==="calendar"&&h.jsx(L,{})]}),a&&s&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[h.jsxs("div",{className:"flex-1 mr-4",children:[h.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-1 block",children:"Task Title"}),h.jsx("input",{value:s.title,onChange:k=>i({...s,title:k.target.value}),placeholder:"Task Title",className:"text-xl font-bold bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-600 rounded-lg p-2 focus:ring-2 focus:ring-orange-500 w-full placeholder-slate-400 dark:placeholder-slate-500 text-slate-900 dark:text-white"})]}),h.jsxs("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 bg-slate-100 dark:bg-slate-700 p-2 rounded-full",children:[h.jsx("span",{className:"sr-only",children:"Close"}),""]})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Status"}),h.jsx("select",{value:s.status,onChange:k=>i({...s,status:k.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:ji.map(k=>h.jsx("option",{value:k,children:k},k))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Assigned To"}),h.jsxs("select",{value:s.assignedTo,onChange:k=>i({...s,assignedTo:k.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:[h.jsx("option",{value:"",children:"Unassigned"}),n.map(k=>h.jsxs("option",{value:k.id,children:[k.firstName," ",k.lastNameInitial,"."]},k.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Type"}),h.jsxs("select",{value:s.type,onChange:k=>i({...s,type:k.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:[h.jsx("option",{value:Zt.Feature,children:"Feature"}),h.jsx("option",{value:Zt.Bug,children:"Bug"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Team"}),h.jsx("select",{value:s.department,onChange:k=>i({...s,department:k.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:o.map(k=>h.jsx("option",{value:k.id,children:k.name},k.id))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Due Date"}),h.jsx("input",{type:"date",value:s.dueDate?new Date(s.dueDate).toISOString().substr(0,10):"",onChange:k=>i({...s,dueDate:k.target.valueAsNumber}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Description / Notes"}),h.jsxs("button",{onClick:F,disabled:v,className:"text-xs flex items-center gap-1 text-orange-600 dark:text-orange-400 hover:text-orange-700 font-medium",children:[v?h.jsx(eo,{className:"animate-spin",size:14}):h.jsx(ld,{size:14}),"AI Summarize"]})]}),h.jsx("textarea",{value:s.description,onChange:k=>i({...s,description:k.target.value}),className:"w-full h-32 p-3 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Describe the task, paste meeting minutes, or log bug details..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Checklist"}),h.jsxs("div",{className:"space-y-2",children:[s.checklist.map((k,R)=>h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",checked:k.completed,onChange:V=>{const ge=[...s.checklist];ge[R].completed=V.target.checked,i({...s,checklist:ge})},className:"rounded text-orange-600 focus:ring-orange-500"}),h.jsx("input",{type:"text",value:k.text,onChange:V=>{const ge=[...s.checklist];ge[R].text=V.target.value,i({...s,checklist:ge})},className:"flex-1 text-sm border-none bg-transparent focus:ring-0 text-slate-900 dark:text-white"}),h.jsx("button",{onClick:()=>{const V=s.checklist.filter((ge,Xt)=>Xt!==R);i({...s,checklist:V})},className:"text-slate-400 hover:text-red-500",children:""})]},R)),h.jsx("button",{onClick:()=>i({...s,checklist:[...s.checklist,{id:Date.now().toString(),text:"New Item",completed:!1}]}),className:"text-sm text-blue-600 dark:text-blue-400 font-medium hover:underline",children:"+ Add Checklist Item"})]})]}),h.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-6",children:[h.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Activity & Comments"}),h.jsxs("div",{className:"flex gap-2 mb-6",children:[h.jsx("input",{type:"text",value:p,onChange:k=>g(k.target.value),placeholder:"Add a comment...",className:"flex-1 border rounded-lg px-3 py-2 text-sm bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white",onKeyDown:k=>k.key==="Enter"&&I()}),h.jsx("button",{onClick:I,className:"bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700",children:h.jsx(_d,{size:18})})]}),h.jsx("div",{className:"space-y-4 max-h-48 overflow-y-auto",children:s.timeline.map(k=>h.jsxs("div",{className:"flex gap-3 text-sm",children:[h.jsx("div",{className:"mt-1 w-6 h-6 rounded-full bg-slate-200 dark:bg-slate-600 flex items-center justify-center text-xs font-bold text-slate-600 dark:text-slate-300 flex-shrink-0",children:k.authorId==="System"?"S":w(k.authorId)}),h.jsxs("div",{className:"flex-1 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-r-lg rounded-bl-lg",children:[h.jsxs("div",{className:"flex justify-between items-start mb-1",children:[h.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:k.authorId==="System"?"System":b(k.authorId)}),h.jsx("span",{className:"text-xs text-slate-400",children:new Date(k.timestamp).toLocaleDateString()})]}),h.jsx("div",{className:k.type==="history"?"italic text-slate-500":"text-slate-800 dark:text-slate-300",children:k.content}),k.type==="comment"&&h.jsx("div",{className:"flex justify-end mt-1",children:h.jsxs("button",{onClick:()=>P(k.id),className:"text-xs text-red-400 hover:text-red-600 flex items-center gap-1",children:[h.jsx($t,{size:10})," Delete"]})})]})]},k.id))})]})]}),h.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 flex justify-end gap-3 bg-slate-50 dark:bg-slate-900/50",children:[h.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 font-medium",children:"Cancel"}),h.jsx("button",{onClick:N,className:"px-6 py-2 rounded-lg bg-orange-600 text-white font-medium hover:bg-orange-700 shadow-sm",children:"Save Task"})]})]})})]})},Mx=()=>{const[t,e]=M.useState([]),[n,o]=M.useState(!1),[s,i]=M.useState({hasAutonomous:!1,autoScore:0,intakeType:"No Intake",autoAim:!1,farShooting:!1,shotsTaken:0,shotsMissed:0,parking:"No Park",rating:3,endGameNotes:""}),a=()=>{if(!s.teamNumber)return;const c={id:Date.now().toString(),teamNumber:s.teamNumber||"",matchNumber:s.matchNumber||0,hasAutonomous:s.hasAutonomous||!1,autoScore:s.autoScore||0,intakeType:s.intakeType||"No Intake",autoAim:s.autoAim||!1,farShooting:s.farShooting||!1,shotsTaken:s.shotsTaken||0,shotsMissed:s.shotsMissed||0,parking:s.parking||"No Park",endGameNotes:s.endGameNotes||"",rating:s.rating||3};e([c,...t]),o(!1),u()},u=()=>{i({hasAutonomous:!1,autoScore:0,intakeType:"No Intake",autoAim:!1,farShooting:!1,shotsTaken:0,shotsMissed:0,parking:"No Park",rating:3,endGameNotes:""})},d=(c,f)=>{i(m=>({...m,[c]:Math.max(0,(m[c]||0)+f)}))};return h.jsxs("div",{className:"h-full flex flex-col max-w-5xl mx-auto w-full p-4 md:p-6",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Scouting Reports"}),h.jsxs("button",{onClick:()=>o(!0),className:"bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-orange-700 transition shadow-sm",children:[h.jsx(rn,{size:20})," Scout Match"]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.map(c=>h.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsx("div",{children:h.jsxs("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:["#",c.teamNumber]})}),h.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-bold text-slate-600 dark:text-slate-300",children:["Match ",c.matchNumber]})]}),h.jsxs("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-300 mb-4",children:[h.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[h.jsx("span",{children:"Autonomous"}),h.jsx("span",{className:c.hasAutonomous?"text-green-600 dark:text-green-400 font-bold":"text-slate-400",children:c.hasAutonomous?`${c.autoScore} pts`:"No"})]}),h.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[h.jsx("span",{children:"Intake"}),h.jsx("span",{className:"font-medium",children:c.intakeType})]}),h.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[h.jsx("span",{children:"Shooting"}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{children:[c.shotsTaken," / ",c.shotsTaken+c.shotsMissed," Hits"]}),h.jsxs("div",{className:"text-xs text-slate-400",children:[c.farShooting&&"Far ",c.autoAim&&"Auto-Aim"]})]})]}),h.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[h.jsx("span",{children:"Parking"}),h.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:c.parking})]})]}),h.jsx("div",{className:"flex items-center gap-1 text-yellow-500 mb-2",children:[...Array(5)].map((f,m)=>h.jsx(kd,{size:14,fill:m<c.rating?"currentColor":"none",className:m<c.rating?"":"text-slate-300 dark:text-slate-600"},m))}),c.endGameNotes&&h.jsxs("p",{className:"text-xs bg-slate-50 dark:bg-slate-700 p-2 rounded text-slate-500 dark:text-slate-300 italic",children:['"',c.endGameNotes,'"']})]},c.id)),t.length===0&&h.jsx("div",{className:"col-span-full text-center py-12 text-slate-400 bg-slate-50 dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:'No scouting data yet. Click "Scout Match" to begin.'})]})]}),n&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh] shadow-2xl",children:[h.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 font-bold text-lg text-slate-900 dark:text-white",children:"New Scouting Report"}),h.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Team #"}),h.jsx("input",{type:"text",className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.teamNumber||"",onChange:c=>i({...s,teamNumber:c.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Match #"}),h.jsx("input",{type:"number",className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.matchNumber||"",onChange:c=>i({...s,matchNumber:parseInt(c.target.value)})})]})]}),h.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-3",children:[h.jsx("h4",{className:"font-bold text-slate-700 dark:text-white text-sm",children:"Autonomous"}),h.jsxs("label",{className:"flex items-center gap-3 text-slate-800 dark:text-white",children:[h.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded text-orange-600",checked:s.hasAutonomous,onChange:c=>i({...s,hasAutonomous:c.target.checked})}),h.jsx("span",{className:"font-medium",children:"Has Autonomous"})]}),s.hasAutonomous&&h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Auto Score"}),h.jsx("input",{type:"number",className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.autoScore,onChange:c=>i({...s,autoScore:parseInt(c.target.value)})})]})]}),h.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-3",children:[h.jsx("h4",{className:"font-bold text-slate-700 dark:text-white text-sm",children:"TeleOp"}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1 block",children:"Intake Type"}),h.jsxs("select",{className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.intakeType,onChange:c=>i({...s,intakeType:c.target.value}),children:[h.jsx("option",{children:"No Intake"}),h.jsx("option",{children:"Human Player"}),h.jsx("option",{children:"Automatic"})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("label",{className:"flex items-center gap-2 text-slate-800 dark:text-white text-sm",children:[h.jsx("input",{type:"checkbox",checked:s.autoAim,onChange:c=>i({...s,autoAim:c.target.checked})}),"Auto Aim"]}),h.jsxs("label",{className:"flex items-center gap-2 text-slate-800 dark:text-white text-sm",children:[h.jsx("input",{type:"checkbox",checked:s.farShooting,onChange:c=>i({...s,farShooting:c.target.checked})}),"Far Shooting"]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:"Shots Taken"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>d("shotsTaken",-1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:h.jsx(Ii,{size:14})}),h.jsx("span",{className:"flex-1 text-center font-mono font-bold text-lg dark:text-white",children:s.shotsTaken}),h.jsx("button",{onClick:()=>d("shotsTaken",1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:h.jsx(rn,{size:14})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:"Shots Missed"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>d("shotsMissed",-1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:h.jsx(Ii,{size:14})}),h.jsx("span",{className:"flex-1 text-center font-mono font-bold text-lg dark:text-white",children:s.shotsMissed}),h.jsx("button",{onClick:()=>d("shotsMissed",1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:h.jsx(rn,{size:14})})]})]})]})]}),h.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-3",children:[h.jsx("h4",{className:"font-bold text-slate-700 dark:text-white text-sm",children:"End Game"}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:"Parking"}),h.jsxs("select",{className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.parking,onChange:c=>i({...s,parking:c.target.value}),children:[h.jsx("option",{children:"No Park"}),h.jsx("option",{children:"Partial Park"}),h.jsx("option",{children:"Full Park"})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Driver Rating (1-5)"}),h.jsx("input",{type:"range",min:"1",max:"5",className:"w-full accent-orange-600",value:s.rating||3,onChange:c=>i({...s,rating:parseInt(c.target.value)})}),h.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[h.jsx("span",{children:"Novice"}),h.jsx("span",{children:"Expert"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Notes"}),h.jsx("textarea",{className:"w-full border dark:border-slate-600 rounded p-2 h-20 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.endGameNotes||"",onChange:c=>i({...s,endGameNotes:c.target.value})})]})]}),h.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[h.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded",children:"Cancel"}),h.jsx("button",{onClick:a,className:"px-6 py-2 bg-orange-600 text-white rounded font-medium hover:bg-orange-700",children:"Save Report"})]})]})})]})},Dx=()=>{const[t,e]=M.useState(gh),[n,o]=M.useState(!1),[s,i]=M.useState(""),a=m=>{n||e(t.map(p=>p.id===m?{...p,checked:!p.checked}:p))},u=()=>{e(t.map(m=>({...m,checked:!1})))},d=()=>{s.trim()&&(e([...t,{id:Date.now().toString(),text:s.trim(),checked:!1}]),i(""))},c=m=>{e(t.filter(p=>p.id!==m))},f=(m,p)=>{e(t.map(g=>g.id===m?{...g,assignedTo:p}:g))};return h.jsx("div",{className:"h-full flex flex-col max-w-3xl mx-auto w-full p-2 md:p-6",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[h.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-100 dark:border-slate-700 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 bg-slate-50 dark:bg-slate-900/50",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Pre-Match Checklist"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Reset this list before every match."})]}),h.jsxs("div",{className:"flex gap-2 self-end sm:self-auto",children:[h.jsx("button",{onClick:()=>o(!n),className:`p-2 rounded-full transition ${n?"bg-orange-100 text-orange-600":"text-slate-500 hover:text-slate-900 hover:bg-slate-200 dark:text-slate-400 dark:hover:bg-slate-700"}`,title:"Edit Checklist",children:h.jsx(Ed,{size:20})}),h.jsx("button",{onClick:u,className:"text-slate-500 hover:text-orange-600 p-2 rounded-full hover:bg-orange-50 dark:text-slate-400 dark:hover:bg-slate-700 transition",title:"Reset Checklist",children:h.jsx(yd,{size:20})})]})]}),h.jsxs("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 overflow-y-auto flex-1 pr-1 custom-scrollbar",children:[t.map(m=>h.jsxs("div",{className:`p-4 flex items-center gap-4 transition ${m.checked?"bg-green-50/50 dark:bg-green-900/20":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[h.jsx("div",{className:"cursor-pointer flex-shrink-0",onClick:()=>a(m.id),children:!n&&h.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition ${m.checked?"bg-green-500 border-green-500 text-white":"border-slate-300 dark:border-slate-500 text-transparent"}`,children:h.jsx(Gc,{size:16,fill:"currentColor",className:m.checked?"text-white":""})})}),h.jsx("span",{onClick:()=>a(m.id),className:`text-lg font-medium flex-1 cursor-pointer transition ${m.checked?"text-slate-400 line-through dark:text-slate-500":"text-slate-700 dark:text-slate-200"}`,children:m.text}),n&&h.jsx("div",{className:"relative",children:h.jsxs("select",{className:"text-xs border border-slate-200 dark:border-slate-600 rounded p-1 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 max-w-[120px]",value:m.assignedTo||"",onChange:p=>f(m.id,p.target.value),children:[h.jsx("option",{value:"",children:"Anyone"}),h.jsx("optgroup",{label:"Teams",children:mh.map(p=>h.jsx("option",{value:p.name,children:p.name},p.id))}),h.jsx("optgroup",{label:"Members",children:ph.map(p=>h.jsxs("option",{value:p.firstName,children:[p.firstName," ",p.lastNameInitial,"."]},p.id))})]})}),!n&&m.assignedTo&&h.jsx("span",{className:"text-xs bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 px-2 py-1 rounded flex-shrink-0",children:m.assignedTo}),n&&h.jsx("button",{onClick:p=>{p.stopPropagation(),c(m.id)},className:"text-red-500 hover:text-red-700 p-2",children:h.jsx($t,{size:18})})]},m.id)),n&&h.jsxs("div",{className:"p-4 flex gap-2 bg-slate-50 dark:bg-slate-700/50",children:[h.jsx("input",{type:"text",value:s,onChange:m=>i(m.target.value),onKeyDown:m=>m.key==="Enter"&&d(),placeholder:"Add new item...",className:"flex-1 border rounded px-3 py-2 bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white"}),h.jsx("button",{onClick:d,className:"bg-orange-600 text-white px-4 py-2 rounded font-bold",children:"Add"})]})]})]})})},Fx=()=>{const t=M.useRef(null),[e,n]=M.useState("#ef4444"),[o,s]=M.useState("draw"),{matchPlans:i,addMatchPlan:a,deleteMatchPlan:u}=An(),[d,c]=M.useState([]),[f,m]=M.useState(""),[p,g]=M.useState(""),[x,y]=M.useState(""),[v,_]=M.useState(!1),[T,b]=M.useState(!1),[C,w]=M.useState(!1),[S,E]=M.useState(!1),[N,I]=M.useState(""),P=()=>{a({title:N||`Match Plan ${new Date().toLocaleString()}`,drawingData:d,notes:x,allianceTeam:p,partnerAutonomous:v,partnerPark:T}),w(!1),I(""),alert("Plan saved!")},F=L=>{c(L.drawingData),g(L.allianceTeam),y(L.notes),_(L.partnerAutonomous),b(L.partnerPark),E(!1)};M.useEffect(()=>{if(!t.current)return;const L=Nn(t.current),k=Lu().on("start",function(R){Nn(this).raise().attr("stroke","white").attr("stroke-width",3)}).on("drag",function(R){o==="drag"&&Nn(this).attr("cx",R.x).attr("cy",R.y)}).on("end",function(R){Nn(this).attr("stroke","white").attr("stroke-width",2)});L.selectAll(".draggable-robot").call(k)},[o]);const W=L=>{if(o!=="draw")return;const k=t.current;if(!k)return;const R=k.createSVGPoint();R.x=L.nativeEvent.offsetX,R.y=L.nativeEvent.offsetY,m(`M ${R.x} ${R.y}`),k.setPointerCapture(L.pointerId)},O=L=>{o!=="draw"||!f||m(k=>`${k} L ${L.nativeEvent.offsetX} ${L.nativeEvent.offsetY}`)},K=L=>{o!=="draw"||!f||(c([...d,{d:f,stroke:e,width:3}]),m(""),t.current&&t.current.releasePointerCapture(L.pointerId))};return h.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:h-full h-auto lg:overflow-hidden overflow-visible",children:[h.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col overflow-hidden relative min-h-[500px] lg:min-h-0",children:[h.jsxs("div",{className:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-700 p-2 flex items-center justify-between border-b border-slate-200 dark:border-slate-600 shadow-sm",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>s("draw"),className:`p-2 rounded ${o==="draw"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:h.jsx(pd,{size:18})}),h.jsx("div",{className:"h-8 w-px bg-slate-300 dark:bg-slate-600 mx-1"}),h.jsx("button",{onClick:()=>n("#ef4444"),className:`w-6 h-6 rounded-full bg-red-500 border-2 ${e==="#ef4444"?"border-slate-800 dark:border-white":"border-transparent"}`}),h.jsx("button",{onClick:()=>n("#3b82f6"),className:`w-6 h-6 rounded-full bg-blue-500 border-2 ${e==="#3b82f6"?"border-slate-800 dark:border-white":"border-transparent"}`}),h.jsx("button",{onClick:()=>n("#22c55e"),className:`w-6 h-6 rounded-full bg-green-500 border-2 ${e==="#22c55e"?"border-slate-800 dark:border-white":"border-transparent"}`}),h.jsx("button",{onClick:()=>n("#facc15"),className:`w-6 h-6 rounded-full bg-yellow-400 border-2 ${e==="#facc15"?"border-slate-800 dark:border-white":"border-transparent"}`})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>{const L=[...d];L.pop(),c(L)},className:"p-2 text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white hover:bg-slate-200 dark:hover:bg-slate-600 rounded",title:"Undo",children:h.jsx(Rd,{size:18})}),h.jsx("button",{onClick:()=>c([]),className:"p-2 text-slate-500 dark:text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",title:"Clear",children:h.jsx($t,{size:18})}),h.jsx("div",{className:"h-8 w-px bg-slate-300 dark:bg-slate-600 mx-1"}),h.jsx("button",{onClick:()=>E(!0),className:"p-2 text-slate-500 dark:text-slate-400 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/30 rounded",title:"Load Plans",children:h.jsx(Ti,{size:18})}),h.jsx("button",{onClick:()=>w(!0),className:"p-2 text-slate-500 dark:text-slate-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/30 rounded",title:"Save Plan",children:h.jsx(ki,{size:18})})]})]}),h.jsxs("div",{className:"relative flex-1 bg-slate-900 overflow-hidden cursor-crosshair",children:[h.jsx("img",{src:yh,className:"absolute inset-0 w-full h-full object-contain opacity-50 pointer-events-none select-none",alt:"Field"}),h.jsxs("svg",{ref:t,className:"absolute inset-0 w-full h-full z-10 touch-none",onPointerDown:W,onPointerMove:O,onPointerUp:K,onPointerCancel:K,onPointerLeave:K,children:[d.map((L,k)=>h.jsx("path",{d:L.d,stroke:L.stroke,strokeWidth:L.width,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},k)),f&&h.jsx("path",{d:f,stroke:e,strokeWidth:3,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("circle",{className:"draggable-robot cursor-move",cx:"50",cy:"50",r:"15",fill:"#ef4444",stroke:"white",strokeWidth:"2"}),h.jsx("circle",{className:"draggable-robot cursor-move",cx:"90",cy:"50",r:"15",fill:"#3b82f6",stroke:"white",strokeWidth:"2"})]})]})]}),h.jsxs("div",{className:"w-full lg:w-80 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-4 flex flex-col",children:[h.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Match Notes"}),h.jsxs("div",{className:"space-y-4 flex-1",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Alliance Partner"}),h.jsx("input",{type:"text",value:p,onChange:L=>g(L.target.value),placeholder:"Team # / Name",className:"w-full p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Our Strategy"}),h.jsx("textarea",{value:x,onChange:L=>y(L.target.value),className:"w-full h-32 p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm resize-none text-slate-900 dark:text-white",placeholder:`1. Autonomous path...
2. TeleOp focus...`})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Partner Capabilities"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("label",{className:"flex items-center gap-2 p-2 border border-slate-200 dark:border-slate-600 rounded bg-slate-50 dark:bg-slate-700 text-xs text-slate-800 dark:text-slate-200",children:[h.jsx("input",{type:"checkbox",checked:v,onChange:L=>_(L.target.checked)})," Autonomous"]}),h.jsxs("label",{className:"flex items-center gap-2 p-2 border border-slate-200 dark:border-slate-600 rounded bg-slate-50 dark:bg-slate-700 text-xs text-slate-800 dark:text-slate-200",children:[h.jsx("input",{type:"checkbox",checked:T,onChange:L=>b(L.target.checked)})," Lifted Park"]})]})]})]}),h.jsxs("div",{className:"flex gap-3 mt-4 lg:hidden",children:[h.jsxs("button",{onClick:()=>E(!0),className:"flex-1 flex items-center justify-center gap-2 p-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-lg font-bold",children:[h.jsx(Ti,{size:20})," Load"]}),h.jsxs("button",{onClick:()=>w(!0),className:"flex-1 flex items-center justify-center gap-2 p-3 bg-green-600 text-white rounded-lg font-bold shadow-md",children:[h.jsx(ki,{size:20})," Save"]})]})]}),C&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 w-full max-w-sm",children:[h.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900 dark:text-white",children:"Save Match Plan"}),h.jsx("input",{autoFocus:!0,type:"text",placeholder:"Plan Name (e.g. Match 1)",value:N,onChange:L=>I(L.target.value),onKeyDown:L=>L.key==="Enter"&&P(),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded mb-4 bg-white dark:bg-slate-700 text-slate-900 dark:text-white"}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300",children:"Cancel"}),h.jsx("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Save"})]})]})}),S&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 w-full max-w-md max-h-[80vh] flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Saved Plans"}),h.jsx("button",{onClick:()=>E(!1),children:h.jsx(el,{})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:i.length===0?h.jsx("div",{className:"text-center text-slate-500 py-8",children:"No saved plans found."}):i.map(L=>h.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[h.jsxs("div",{className:"cursor-pointer flex-1",onClick:()=>F(L),children:[h.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:L.title}),h.jsxs("div",{className:"text-xs text-slate-500",children:[new Date(L.updatedAt).toLocaleDateString(),"  ",L.allianceTeam||"No Team"]})]}),h.jsx("button",{onClick:()=>{u(L.id)},className:"p-2 text-red-400 hover:text-red-600",children:h.jsx($t,{size:16})})]},L.id))})]})})]})},Pa=({tasks:t,view:e})=>{const n=An(C=>C.geminiApiKey),[o,s]=M.useState(""),[i,a]=M.useState([]),[u,d]=M.useState(!1),[c,f]=M.useState(null),[m,p]=M.useState("done"),[g,x]=M.useState(""),[y,v]=M.useState(""),_=async()=>{d(!0);const C=m==="done"?t.filter(w=>w.status==="Done"):t;try{const w=await kx(C,n||void 0);s(w)}catch{alert("Error generating portfolio. Please check your API Key configuration in Admin Settings.")}finally{d(!1)}},T=async()=>{d(!0);try{const w=await Nx(o||"We built a great robot that has a high scoring autonomous and durable drivetrain.",g,n||void 0);w&&w.length>0?a(w):a([{question:"Describe your robot's drivetrain.",answer:"We use a mecanum drivetrain for omnidirectional movement."},{question:"What was your biggest challenge?",answer:"Our biggest challenge was consistent intake, which we solved with a compliant wheel system."},{question:"How did you use sensors?",answer:"We use odometry pods for precise localization during autonomous."}])}catch{alert("Error generating questions. Showing demo questions instead."),a([{question:"Describe your robot's drivetrain.",answer:"We use a mecanum drivetrain for omnidirectional movement."},{question:"What was your biggest challenge?",answer:"Our biggest challenge was consistent intake, which we solved with a compliant wheel system."}])}finally{d(!1)}},b=C=>{var S;const w=(S=C.target.files)==null?void 0:S[0];if(w){v(w.name);const E=new FileReader;E.onload=N=>{var I;(I=N.target)!=null&&I.result&&x(N.target.result)},E.readAsText(w)}};return h.jsx("div",{className:"h-full flex flex-col p-4 md:p-6 max-w-5xl mx-auto w-full",children:h.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e==="portfolio"&&h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 h-full",children:[h.jsx("div",{className:"md:col-span-1 space-y-4",children:h.jsxs("div",{className:"bg-orange-50 dark:bg-slate-800 p-4 rounded-xl border border-orange-100 dark:border-slate-700",children:[h.jsx("h3",{className:"font-bold text-orange-900 dark:text-orange-400 mb-2",children:"Portfolio Helper"}),h.jsx("p",{className:"text-sm text-orange-800/80 dark:text-slate-300 mb-4",children:"The AI analyzes your tasks to create a summary of your season's technical achievements."}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-2",children:"Include Tasks"}),h.jsxs("div",{className:"flex bg-white dark:bg-slate-900 rounded-lg p-1 border border-orange-100 dark:border-slate-600",children:[h.jsx("button",{onClick:()=>p("done"),className:`flex-1 py-1 text-xs font-medium rounded transition ${m==="done"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:"Completed Only"}),h.jsx("button",{onClick:()=>p("all"),className:`flex-1 py-1 text-xs font-medium rounded transition ${m==="all"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:"All Tasks"})]})]}),h.jsxs("div",{className:"text-xs text-orange-800/60 dark:text-slate-400 font-mono bg-white/50 dark:bg-slate-900/50 p-2 rounded mb-4",children:["Tasks Analyzed: ",m==="done"?t.filter(C=>C.status==="Done").length:t.length]}),h.jsxs("button",{onClick:_,disabled:u,className:"w-full bg-orange-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-orange-700 transition flex justify-center items-center gap-2",children:[u?h.jsx(eo,{className:"animate-spin",size:18}):h.jsx(Ri,{size:18}),"Generate Summary"]})]})}),h.jsxs("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 h-full flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Generated Content"}),o&&h.jsxs("button",{className:"text-xs flex items-center gap-1 text-slate-500 dark:text-slate-400 hover:text-slate-900",children:[h.jsx(Kc,{size:14})," Copy MD"]})]}),h.jsx("div",{className:"flex-1 bg-slate-50 dark:bg-slate-900 rounded-lg p-4 font-mono text-sm text-slate-700 dark:text-slate-300 overflow-y-auto whitespace-pre-wrap leading-relaxed border border-slate-100 dark:border-slate-700",children:o||h.jsx("span",{className:"text-slate-400 italic",children:"Content will appear here..."})})]})]}),e==="judging"&&h.jsx("div",{className:"h-full flex flex-col",children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2",children:"Study Guide & Context"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-4",children:"Upload a text file/PDF or paste content to help the AI ask better questions."}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[h.jsx("div",{className:"flex-1 relative",children:h.jsx("textarea",{className:"w-full h-24 p-3 text-sm border rounded-lg bg-slate-50 dark:bg-slate-900 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white resize-none",placeholder:"Paste technical info, robot specs, or outreach details here...",value:g,onChange:C=>x(C.target.value)})}),h.jsxs("div",{className:"w-full md:w-48 flex flex-col justify-center items-center border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-900 hover:bg-slate-100 dark:hover:bg-slate-800 transition cursor-pointer relative py-4 md:py-0",children:[h.jsx("input",{type:"file",onChange:b,className:"absolute inset-0 opacity-0 cursor-pointer",accept:".txt,.md,.json"}),h.jsx($c,{className:"text-slate-400 mb-2"}),h.jsx("span",{className:"text-xs text-slate-500 font-medium text-center px-2",children:y||"Upload .txt"})]})]}),h.jsx("div",{className:"flex justify-center",children:h.jsxs("button",{onClick:T,disabled:u,className:"bg-orange-600 text-white py-2 px-6 rounded-lg text-sm font-medium hover:bg-orange-700 transition flex items-center gap-2 shadow-sm",children:[u?h.jsx(eo,{className:"animate-spin",size:16}):h.jsx(Ri,{size:16}),"Generate Questions"]})})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 pb-6",children:[i.length===0&&!u&&h.jsx("div",{className:"col-span-full text-center py-10 text-slate-400 italic",children:"No flashcards yet. Add context and click Generate."}),i.map((C,w)=>h.jsx("div",{className:"h-64 perspective-1000 cursor-pointer group",onClick:()=>f(c===w?null:w),children:h.jsxs("div",{className:`relative w-full h-full transition-all duration-500 transform-style-3d ${c===w?"rotate-y-180":""}`,children:[h.jsxs("div",{className:"absolute w-full h-full bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-700 p-6 flex flex-col items-center justify-center text-center backface-hidden shadow-sm group-hover:border-orange-200 dark:group-hover:border-slate-500",children:[h.jsxs("span",{className:"text-xs uppercase font-bold text-orange-600 dark:text-orange-400 mb-2",children:["Question ",w+1]}),h.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-100 select-none",children:C.question}),h.jsxs("div",{className:"mt-4 text-xs text-slate-400 flex items-center gap-1",children:["Click to reveal answer ",h.jsx(zo,{size:12})]})]}),h.jsxs("div",{className:"absolute w-full h-full bg-slate-800 dark:bg-slate-900 rounded-xl p-6 flex flex-col items-center justify-center text-center backface-hidden rotate-y-180 shadow-xl border border-slate-700",children:[h.jsx("span",{className:"text-xs uppercase font-bold text-slate-400 mb-2",children:"Suggested Answer"}),h.jsx("p",{className:"text-slate-200 dark:text-slate-300 text-sm leading-relaxed select-none",children:C.answer})]})]})},w))]})]})})]})})},Ux=({members:t,setMembers:e,teams:n,setTeams:o,geminiApiKey:s,setGeminiApiKey:i})=>{const a={members:t,setMembers:e,teams:n,setTeams:o,geminiApiKey:s,setGeminiApiKey:i},[u,d]=M.useState(""),[c,f]=M.useState(""),[m,p]=M.useState(""),[g,x]=M.useState(null),y=()=>{if(u.trim()&&c.trim().length===1){const C={id:Date.now().toString(),firstName:u.trim(),lastNameInitial:c.trim().toUpperCase()};e([...t,C]),d(""),f("")}else alert("Please provide a First Name and a single letter Last Initial.")},v=C=>{e(t.filter(w=>w.id!==C)),o(n.map(w=>({...w,memberIds:w.memberIds.filter(S=>S!==C)})))},_=()=>{if(m.trim()){const C={id:Date.now().toString(),name:m.trim(),memberIds:[]};o([...n,C]),p("")}},T=C=>{o(n.filter(w=>w.id!==C))},b=(C,w)=>{o(n.map(S=>{if(S.id!==C)return S;const E=S.memberIds.includes(w);return{...S,memberIds:E?S.memberIds.filter(N=>N!==w):[...S.memberIds,w]}}))};return h.jsxs("div",{className:"p-6 max-w-6xl mx-auto w-full h-full overflow-y-auto",children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6",children:"Admin Settings"}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-slate-100 dark:border-slate-700 pb-2",children:[h.jsx(Ud,{className:"text-orange-600",size:24}),h.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Team Roster"})]}),h.jsxs("div",{className:"flex gap-2 mb-4 items-end",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"First Name"}),h.jsx("input",{type:"text",value:u,onChange:C=>d(C.target.value),placeholder:"e.g. Abby",className:"w-full p-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white"})]}),h.jsxs("div",{className:"w-20",children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"Last Init."}),h.jsx("input",{type:"text",value:c,maxLength:1,onChange:C=>f(C.target.value),placeholder:"B",className:"w-full p-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white text-center",onKeyDown:C=>C.key==="Enter"&&y()})]}),h.jsx("button",{onClick:y,className:"bg-orange-600 text-white p-2.5 rounded-lg hover:bg-orange-700 transition mb-[1px]",children:h.jsx(Md,{size:20})})]}),h.jsx("ul",{className:"space-y-2 max-h-96 overflow-y-auto pr-1 custom-scrollbar",children:t.map(C=>h.jsxs("li",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg group hover:bg-slate-100 dark:hover:bg-slate-700 transition",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-600 flex items-center justify-center font-bold text-slate-600 dark:text-slate-300 text-xs",children:[C.firstName[0],C.lastNameInitial]}),h.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:[C.firstName," ",C.lastNameInitial,"."]})]}),h.jsx("button",{onClick:()=>v(C.id),className:"text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition",children:h.jsx($t,{size:18})})]},C.id))})]}),h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-slate-100 dark:border-slate-700 pb-2",children:[h.jsx(wi,{className:"text-orange-600",size:24}),h.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Sub-Teams & Assignments"})]}),h.jsxs("div",{className:"flex gap-2 mb-4",children:[h.jsx("input",{type:"text",value:m,onChange:C=>p(C.target.value),placeholder:"New Team Name (e.g. Pit Crew)",className:"flex-1 p-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white",onKeyDown:C=>C.key==="Enter"&&_()}),h.jsx("button",{onClick:_,className:"bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700 transition",children:h.jsx(rn,{size:20})})]}),h.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:n.map(C=>h.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-lg overflow-hidden",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 p-3 bg-slate-50 dark:bg-slate-700/50",children:[h.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-200",children:C.name}),h.jsxs("div",{className:"flex gap-2 self-end sm:self-auto",children:[h.jsx("button",{onClick:()=>x(g===C.id?null:C.id),className:`text-xs px-3 py-1 rounded-full transition ${g===C.id?"bg-orange-100 text-orange-700":"bg-white dark:bg-slate-600 text-slate-600 dark:text-slate-300"}`,children:g===C.id?"Done":"Manage Members"}),h.jsx("button",{onClick:()=>T(C.id),className:"text-slate-400 hover:text-red-500",children:h.jsx($t,{size:18})})]})]}),h.jsx("div",{className:"p-3 bg-white dark:bg-slate-800",children:g===C.id?h.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.map(w=>h.jsxs("div",{onClick:()=>b(C.id,w.id),className:`cursor-pointer p-2 rounded border flex items-center justify-between text-sm ${C.memberIds.includes(w.id)?"border-orange-500 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300":"border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-400"}`,children:[h.jsxs("span",{children:[w.firstName," ",w.lastNameInitial,"."]}),C.memberIds.includes(w.id)&&h.jsx(Pc,{size:14})]},w.id))}):h.jsxs("div",{className:"flex flex-wrap gap-2",children:[C.memberIds.length===0&&h.jsx("span",{className:"text-xs text-slate-400 italic",children:"No members assigned."}),C.memberIds.map(w=>{const S=t.find(E=>E.id===w);return S?h.jsxs("span",{className:"text-xs bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 px-2 py-1 rounded-full border border-slate-200 dark:border-slate-600",children:[S.firstName," ",S.lastNameInitial,"."]},w):null})]})})]},C.id))})]})]}),h.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-slate-100 dark:border-slate-700 pb-2",children:[h.jsx(wi,{className:"text-orange-600",size:24}),h.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"API Configuration"})]}),h.jsxs("div",{className:"max-w-xl",children:[h.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 block mb-2",children:"Google Gemini API Key"}),h.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Required for AI features (Portfolio generation, Meeting summaries)."}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"password",value:a.geminiApiKey||"",onChange:C=>a.setGeminiApiKey(C.target.value),placeholder:"AIza...",className:"flex-1 p-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white"}),h.jsx("button",{onClick:()=>{},className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium opacity-50 cursor-default",children:"Saved"})]})]})]})]})};function Lx(){var S;const[t,e]=M.useState("kanban"),[n,o]=M.useState(!1),{user:s,signOut:i,isConfigured:a}=Us(),{tasks:u,members:d,teams:c,theme:f,setTheme:m,addTask:p,updateTask:g,setMembers:x,setTeams:y,geminiApiKey:v,setGeminiApiKey:_}=An(),T=Fu(),b=u.map(E=>({...E,timeline:E.timeline.map(N=>({...N,type:N.type}))})),C=async()=>{await i(),T("/login")},w=({id:E,label:N,icon:I})=>h.jsxs("button",{onClick:()=>{e(E),o(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 mb-1
        ${t===E?"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 font-bold shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-slate-200 font-medium"}`,children:[h.jsx(I,{size:20}),h.jsx("span",{children:N})]});return h.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-slate-900 font-sans overflow-hidden transition-colors duration-200",children:[h.jsxs("aside",{className:"hidden lg:flex w-64 flex-col bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 h-full",children:[h.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3",children:[h.jsx("img",{src:"/ftc-team-manager/logo.png",className:"w-12 h-12 object-contain rounded-lg",alt:"Logo"}),h.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white tracking-tight",children:"FTC Manager"})]}),h.jsxs("nav",{className:"flex-1 p-4 overflow-y-auto",children:[h.jsx(w,{id:"kanban",label:"Sprint Planning",icon:Ei}),h.jsx(w,{id:"checklist",label:"Pre-Match Checklist",icon:Pi}),h.jsx(w,{id:"scouting",label:"Scouting Reports",icon:_i}),h.jsx(w,{id:"planner",label:"Match Planner",icon:Ci}),h.jsx("div",{className:"my-4 border-t border-slate-100 dark:border-slate-700"}),h.jsx(w,{id:"portfolio",label:"Portfolio Helper",icon:vi}),h.jsx(w,{id:"judging",label:"Judging Prep",icon:bi}),h.jsx("div",{className:"my-4 border-t border-slate-100 dark:border-slate-700"}),h.jsx(w,{id:"admin",label:"Admin Settings",icon:Ni})]}),h.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700",children:[h.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 rounded-xl p-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("p",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Appearance"}),h.jsx("button",{onClick:()=>m(f==="light"?"dark":"light"),className:"text-slate-500 dark:text-slate-400 hover:text-orange-600 dark:hover:text-orange-400",children:f==="light"?h.jsx(Ai,{size:16}):h.jsx(Mi,{size:16})})]}),h.jsxs("div",{className:"flex justify-between text-sm mb-1 text-slate-600 dark:text-slate-300",children:[h.jsx("span",{children:"Tasks Done"}),h.jsx("span",{className:"font-bold",children:u.filter(E=>E.status==="Done").length})]}),h.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-600 rounded-full h-1.5 mt-2",children:h.jsx("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:`${u.length>0?u.filter(E=>E.status==="Done").length/u.length*100:0}%`}})})]}),a&&s&&h.jsxs("div",{className:"mt-4 flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-xl",children:[h.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900/50 rounded-full flex items-center justify-center",children:h.jsx(Za,{size:16,className:"text-orange-600 dark:text-orange-400"})}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:((S=s.user_metadata)==null?void 0:S.full_name)||s.email})}),h.jsx("button",{onClick:C,className:"p-2 text-slate-400 hover:text-red-500 transition-colors",title:"Sign out",children:h.jsx(Si,{size:16})})]})]})]}),h.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 h-16 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between px-4 z-20 safe-area-top",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("img",{src:"/ftc-team-manager/logo.png",className:"w-12 h-12 object-contain rounded-lg",alt:"Logo"}),h.jsx("span",{className:"font-bold text-lg text-slate-900 dark:text-white",children:"FTC Manager"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Xi,{}),h.jsx("button",{onClick:()=>m(f==="light"?"dark":"light"),className:"text-slate-600 dark:text-slate-300",children:f==="light"?h.jsx(Ai,{size:20}):h.jsx(Mi,{size:20})}),h.jsx("button",{onClick:()=>o(!n),className:"p-2 text-slate-600 dark:text-slate-300",children:n?h.jsx(el,{}):h.jsx(rd,{})})]})]}),n&&h.jsxs("div",{className:"lg:hidden fixed inset-0 bg-white dark:bg-slate-800 z-50 pt-20 px-4 safe-area-top",children:[h.jsxs("nav",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-6 px-2",children:[h.jsx("img",{src:"/ftc-team-manager/logo.png",className:"w-10 h-10 object-contain rounded-lg",alt:"Logo"}),h.jsx("span",{className:"font-bold text-xl text-slate-900 dark:text-white",children:"FTC Manager"})]}),h.jsx(w,{id:"kanban",label:"Sprint Planning",icon:Ei}),h.jsx(w,{id:"checklist",label:"Pre-Match Checklist",icon:Pi}),h.jsx(w,{id:"scouting",label:"Scouting Reports",icon:_i}),h.jsx(w,{id:"planner",label:"Match Planner",icon:Ci}),h.jsx(w,{id:"portfolio",label:"Portfolio Helper",icon:vi}),h.jsx(w,{id:"judging",label:"Judging Prep",icon:bi}),h.jsx(w,{id:"admin",label:"Admin Settings",icon:Ni})]}),a&&s&&h.jsx("div",{className:"mt-8 pt-4 border-t border-slate-200 dark:border-slate-700",children:h.jsxs("button",{onClick:C,className:"w-full flex items-center gap-3 px-4 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-all",children:[h.jsx(Si,{size:20}),h.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),h.jsxs("main",{className:"flex-1 h-full overflow-hidden relative pt-16 lg:pt-0",children:[h.jsx("div",{className:"hidden lg:block absolute top-4 right-4 z-10",children:h.jsx(Xi,{})}),h.jsxs("div",{className:"h-full w-full overflow-y-auto bg-slate-50 dark:bg-slate-900 p-4 lg:p-6",children:[t==="kanban"&&h.jsx(Px,{tasks:b,setTasks:E=>{let N=[];typeof E=="function"?N=E(b):N=E,N.forEach(I=>{u.find(F=>F.id===I.id)?g(I.id,I):p(I)})},members:d,teams:c}),t==="checklist"&&h.jsx(Dx,{}),t==="scouting"&&h.jsx(Mx,{}),t==="planner"&&h.jsx(Fx,{}),t==="portfolio"&&h.jsx(Pa,{tasks:b,view:"portfolio"}),t==="judging"&&h.jsx(Pa,{tasks:b,view:"judging"}),t==="admin"&&h.jsx(Ux,{members:d,setMembers:x,teams:c,setTeams:y,geminiApiKey:v,setGeminiApiKey:_})]})]})]})}function Gx(){const{user:t,isLoading:e,isConfigured:n}=Us(),{theme:o,initializeStore:s}=An();return M.useEffect(()=>{s()},[s]),M.useEffect(()=>{o==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[o]),e?h.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4 animate-pulse",children:"B"}),h.jsx("p",{className:"text-slate-400",children:"Loading..."})]})}):h.jsxs(Du,{children:[h.jsx(Ro,{path:"/login",element:!n||t?h.jsx(ai,{to:"/",replace:!0}):h.jsx(fh,{})}),h.jsx(Ro,{path:"/auth/callback",element:h.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4 animate-pulse",children:"B"}),h.jsx("p",{className:"text-slate-400",children:"Completing sign in..."})]})})}),h.jsx(Ro,{path:"/*",element:!n||t?h.jsx(Lx,{}):h.jsx(ai,{to:"/login",replace:!0})})]})}const qx=new gc({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}}),ku=document.getElementById("root");if(!ku)throw new Error("Could not find root element to mount to");const Vx=Bo.createRoot(ku);Vx.render(h.jsx(Ba.StrictMode,{children:h.jsx(vc,{client:qx,children:h.jsx(Uu,{children:h.jsx(_c,{children:h.jsx(Gx,{})})})})}));
//# sourceMappingURL=index-DvDrE6Wf.js.map
