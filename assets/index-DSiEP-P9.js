var Uu=Object.defineProperty;var cr=t=>{throw TypeError(t)};var Lu=(t,e,n)=>e in t?Uu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Oe=(t,e,n)=>Lu(t,typeof e!="symbol"?e+"":e,n),Mo=(t,e,n)=>e.has(t)||cr("Cannot "+n);var A=(t,e,n)=>(Mo(t,e,"read from private field"),n?n.call(t):e.get(t)),J=(t,e,n)=>e.has(t)?cr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),B=(t,e,n,o)=>(Mo(t,e,"write to private field"),o?o.call(t,n):e.set(t,n),n),se=(t,e,n)=>(Mo(t,e,"access private method"),n);var Rn=(t,e,n,o)=>({set _(s){B(t,e,s,n)},get _(){return A(t,e,o)}});import{r as R,a as Gu,g as qu,R as za,b as Vu,c as Do,N as dr,u as Hu,H as Bu}from"./vendor-B0Cn478z.js";import{c as $u}from"./supabase-CRHRt2Ih.js";import{s as Mn,d as Ou}from"./charts-CeMqgyHT.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var Wa={exports:{}},xo={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ku=R,Ju=Symbol.for("react.element"),zu=Symbol.for("react.fragment"),Wu=Object.prototype.hasOwnProperty,Yu=Ku.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qu={key:!0,ref:!0,__self:!0,__source:!0};function Ya(t,e,n){var o,s={},r=null,a=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(o in e)Wu.call(e,o)&&!Qu.hasOwnProperty(o)&&(s[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)s[o]===void 0&&(s[o]=e[o]);return{$$typeof:Ju,type:t,key:r,ref:a,props:s,_owner:Yu.current}}xo.Fragment=zu;xo.jsx=Ya;xo.jsxs=Ya;Wa.exports=xo;var m=Wa.exports,Ko={},fr=Gu;Ko.createRoot=fr.createRoot,Ko.hydrateRoot=fr.hydrateRoot;var _o=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Xu={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Qe,Us,Ga,ju=(Ga=class{constructor(){J(this,Qe,Xu);J(this,Us,!1)}setTimeoutProvider(t){B(this,Qe,t)}setTimeout(t,e){return A(this,Qe).setTimeout(t,e)}clearTimeout(t){A(this,Qe).clearTimeout(t)}setInterval(t,e){return A(this,Qe).setInterval(t,e)}clearInterval(t){A(this,Qe).clearInterval(t)}},Qe=new WeakMap,Us=new WeakMap,Ga),Jo=new ju;function Zu(t){setTimeout(t,0)}var wo=typeof window>"u"||"Deno"in globalThis;function _e(){}function ec(t,e){return typeof t=="function"?t(e):t}function tc(t){return typeof t=="number"&&t>=0&&t!==1/0}function nc(t,e){return Math.max(t+(e||0)-Date.now(),0)}function zo(t,e){return typeof t=="function"?t(e):t}function oc(t,e){return typeof t=="function"?t(e):t}function hr(t,e){const{type:n="all",exact:o,fetchStatus:s,predicate:r,queryKey:a,stale:u}=t;if(a){if(o){if(e.queryHash!==Ls(a,e.options))return!1}else if(!gn(e.queryKey,a))return!1}if(n!=="all"){const d=e.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||r&&!r(e))}function pr(t,e){const{exact:n,status:o,predicate:s,mutationKey:r}=t;if(r){if(!e.options.mutationKey)return!1;if(n){if(mn(e.options.mutationKey)!==mn(r))return!1}else if(!gn(e.options.mutationKey,r))return!1}return!(o&&e.state.status!==o||s&&!s(e))}function Ls(t,e){return((e==null?void 0:e.queryKeyHashFn)||mn)(t)}function mn(t){return JSON.stringify(t,(e,n)=>Wo(n)?Object.keys(n).sort().reduce((o,s)=>(o[s]=n[s],o),{}):n)}function gn(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>gn(t[n],e[n])):!1}var sc=Object.prototype.hasOwnProperty;function Qa(t,e){if(t===e)return t;const n=mr(t)&&mr(e);if(!n&&!(Wo(t)&&Wo(e)))return e;const s=(n?t:Object.keys(t)).length,r=n?e:Object.keys(e),a=r.length,u=n?new Array(a):{};let d=0;for(let c=0;c<a;c++){const f=n?c:r[c],p=t[f],h=e[f];if(p===h){u[f]=p,(n?c<s:sc.call(t,f))&&d++;continue}if(p===null||h===null||typeof p!="object"||typeof h!="object"){u[f]=h;continue}const g=Qa(p,h);u[f]=g,g===p&&d++}return s===a&&d===s?t:u}function mr(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Wo(t){if(!gr(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!gr(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function gr(t){return Object.prototype.toString.call(t)==="[object Object]"}function rc(t){return new Promise(e=>{Jo.setTimeout(e,t)})}function ic(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Qa(t,e):e}function ac(t,e,n=0){const o=[...t,e];return n&&o.length>n?o.slice(1):o}function lc(t,e,n=0){const o=[e,...t];return n&&o.length>n?o.slice(0,-1):o}var Gs=Symbol();function Xa(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Gs?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function uc(t,e,n){let o=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),o||(o=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var dt,Xe,Gt,qa,cc=(qa=class extends _o{constructor(){super();J(this,dt);J(this,Xe);J(this,Gt);B(this,Gt,e=>{if(!wo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){A(this,Xe)||this.setEventListener(A(this,Gt))}onUnsubscribe(){var e;this.hasListeners()||((e=A(this,Xe))==null||e.call(this),B(this,Xe,void 0))}setEventListener(e){var n;B(this,Gt,e),(n=A(this,Xe))==null||n.call(this),B(this,Xe,e(o=>{typeof o=="boolean"?this.setFocused(o):this.onFocus()}))}setFocused(e){A(this,dt)!==e&&(B(this,dt,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof A(this,dt)=="boolean"?A(this,dt):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},dt=new WeakMap,Xe=new WeakMap,Gt=new WeakMap,qa),ja=new cc;function dc(){let t,e;const n=new Promise((s,r)=>{t=s,e=r});n.status="pending",n.catch(()=>{});function o(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{o({status:"fulfilled",value:s}),t(s)},n.reject=s=>{o({status:"rejected",reason:s}),e(s)},n}var fc=Zu;function hc(){let t=[],e=0,n=u=>{u()},o=u=>{u()},s=fc;const r=u=>{e?t.push(u):s(()=>{n(u)})},a=()=>{const u=t;t=[],u.length&&s(()=>{o(()=>{u.forEach(d=>{n(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||a()}return d},batchCalls:u=>(...d)=>{r(()=>{u(...d)})},schedule:r,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{o=u},setScheduler:u=>{s=u}}}var ce=hc(),qt,je,Vt,Va,pc=(Va=class extends _o{constructor(){super();J(this,qt,!0);J(this,je);J(this,Vt);B(this,Vt,e=>{if(!wo&&window.addEventListener){const n=()=>e(!0),o=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",o,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",o)}}})}onSubscribe(){A(this,je)||this.setEventListener(A(this,Vt))}onUnsubscribe(){var e;this.hasListeners()||((e=A(this,je))==null||e.call(this),B(this,je,void 0))}setEventListener(e){var n;B(this,Vt,e),(n=A(this,je))==null||n.call(this),B(this,je,e(this.setOnline.bind(this)))}setOnline(e){A(this,qt)!==e&&(B(this,qt,e),this.listeners.forEach(o=>{o(e)}))}isOnline(){return A(this,qt)}},qt=new WeakMap,je=new WeakMap,Vt=new WeakMap,Va),no=new pc;function mc(t){return Math.min(1e3*2**t,3e4)}function Za(t){return(t??"online")==="online"?no.isOnline():!0}var Yo=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function el(t){let e=!1,n=0,o;const s=dc(),r=()=>s.status!=="pending",a=v=>{var x;if(!r()){const y=new Yo(v);h(y),(x=t.onCancel)==null||x.call(t,y)}},u=()=>{e=!0},d=()=>{e=!1},c=()=>ja.isFocused()&&(t.networkMode==="always"||no.isOnline())&&t.canRun(),f=()=>Za(t.networkMode)&&t.canRun(),p=v=>{r()||(o==null||o(),s.resolve(v))},h=v=>{r()||(o==null||o(),s.reject(v))},g=()=>new Promise(v=>{var x;o=y=>{(r()||c())&&v(y)},(x=t.onPause)==null||x.call(t)}).then(()=>{var v;o=void 0,r()||(v=t.onContinue)==null||v.call(t)}),_=()=>{if(r())return;let v;const x=n===0?t.initialPromise:void 0;try{v=x??t.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(p).catch(y=>{var S;if(r())return;const w=t.retry??(wo?0:3),T=t.retryDelay??mc,b=typeof T=="function"?T(n,y):T,C=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(e||!C){h(y);return}n++,(S=t.onFail)==null||S.call(t,n,y),rc(b).then(()=>c()?void 0:g()).then(()=>{e?h(y):_()})})};return{promise:s,status:()=>s.status,cancel:a,continue:()=>(o==null||o(),s),cancelRetry:u,continueRetry:d,canStart:f,start:()=>(f()?_():g().then(_),s)}}var ft,Ha,tl=(Ha=class{constructor(){J(this,ft)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),tc(this.gcTime)&&B(this,ft,Jo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(wo?1/0:5*60*1e3))}clearGcTimeout(){A(this,ft)&&(Jo.clearTimeout(A(this,ft)),B(this,ft,void 0))}},ft=new WeakMap,Ha),ht,Ht,ye,pt,ne,En,mt,we,Me,Ba,gc=(Ba=class extends tl{constructor(e){super();J(this,we);J(this,ht);J(this,Ht);J(this,ye);J(this,pt);J(this,ne);J(this,En);J(this,mt);B(this,mt,!1),B(this,En,e.defaultOptions),this.setOptions(e.options),this.observers=[],B(this,pt,e.client),B(this,ye,A(this,pt).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,B(this,ht,vr(this.options)),this.state=e.state??A(this,ht),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=A(this,ne))==null?void 0:e.promise}setOptions(e){if(this.options={...A(this,En),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=vr(this.options);n.data!==void 0&&(this.setState(yr(n.data,n.dataUpdatedAt)),B(this,ht,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&A(this,ye).remove(this)}setData(e,n){const o=ic(this.state.data,e,this.options);return se(this,we,Me).call(this,{data:o,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),o}setState(e,n){se(this,we,Me).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var o,s;const n=(o=A(this,ne))==null?void 0:o.promise;return(s=A(this,ne))==null||s.cancel(e),n?n.then(_e).catch(_e):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(A(this,ht))}isActive(){return this.observers.some(e=>oc(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>zo(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!nc(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(o=>o.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=A(this,ne))==null||n.continue()}onOnline(){var n;const e=this.observers.find(o=>o.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=A(this,ne))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),A(this,ye).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(A(this,ne)&&(A(this,mt)?A(this,ne).cancel({revert:!0}):A(this,ne).cancelRetry()),this.scheduleGc()),A(this,ye).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||se(this,we,Me).call(this,{type:"invalidate"})}async fetch(e,n){var d,c,f,p,h,g,_,v,x,y,w,T;if(this.state.fetchStatus!=="idle"&&((d=A(this,ne))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(A(this,ne))return A(this,ne).continueRetry(),A(this,ne).promise}if(e&&this.setOptions(e),!this.options.queryFn){const b=this.observers.find(C=>C.options.queryFn);b&&this.setOptions(b.options)}const o=new AbortController,s=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(B(this,mt,!0),o.signal)})},r=()=>{const b=Xa(this.options,n),S=(()=>{const E={client:A(this,pt),queryKey:this.queryKey,meta:this.meta};return s(E),E})();return B(this,mt,!1),this.options.persister?this.options.persister(b,S,this):b(S)},u=(()=>{const b={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:A(this,pt),state:this.state,fetchFn:r};return s(b),b})();(c=this.options.behavior)==null||c.onFetch(u,this),B(this,Ht,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=u.fetchOptions)==null?void 0:f.meta))&&se(this,we,Me).call(this,{type:"fetch",meta:(p=u.fetchOptions)==null?void 0:p.meta}),B(this,ne,el({initialPromise:n==null?void 0:n.initialPromise,fn:u.fetchFn,onCancel:b=>{b instanceof Yo&&b.revert&&this.setState({...A(this,Ht),fetchStatus:"idle"}),o.abort()},onFail:(b,C)=>{se(this,we,Me).call(this,{type:"failed",failureCount:b,error:C})},onPause:()=>{se(this,we,Me).call(this,{type:"pause"})},onContinue:()=>{se(this,we,Me).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0}));try{const b=await A(this,ne).start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),(g=(h=A(this,ye).config).onSuccess)==null||g.call(h,b,this),(v=(_=A(this,ye).config).onSettled)==null||v.call(_,b,this.state.error,this),b}catch(b){if(b instanceof Yo){if(b.silent)return A(this,ne).promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw se(this,we,Me).call(this,{type:"error",error:b}),(y=(x=A(this,ye).config).onError)==null||y.call(x,b,this),(T=(w=A(this,ye).config).onSettled)==null||T.call(w,this.state.data,b,this),b}finally{this.scheduleGc()}}},ht=new WeakMap,Ht=new WeakMap,ye=new WeakMap,pt=new WeakMap,ne=new WeakMap,En=new WeakMap,mt=new WeakMap,we=new WeakSet,Me=function(e){const n=o=>{switch(e.type){case"failed":return{...o,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...o,fetchStatus:"paused"};case"continue":return{...o,fetchStatus:"fetching"};case"fetch":return{...o,...yc(o.data,this.options),fetchMeta:e.meta??null};case"success":const s={...o,...yr(e.data,e.dataUpdatedAt),dataUpdateCount:o.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return B(this,Ht,e.manual?s:void 0),s;case"error":const r=e.error;return{...o,error:r,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...o,isInvalidated:!0};case"setState":return{...o,...e.state}}};this.state=n(this.state),ce.batch(()=>{this.observers.forEach(o=>{o.onQueryUpdate()}),A(this,ye).notify({query:this,type:"updated",action:e})})},Ba);function yc(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Za(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function yr(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function vr(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,o=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function xr(t){return{onFetch:(e,n)=>{var f,p,h,g,_;const o=e.options,s=(h=(p=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:h.direction,r=((g=e.state.data)==null?void 0:g.pages)||[],a=((_=e.state.data)==null?void 0:_.pageParams)||[];let u={pages:[],pageParams:[]},d=0;const c=async()=>{let v=!1;const x=T=>{uc(T,()=>e.signal,()=>v=!0)},y=Xa(e.options,e.fetchOptions),w=async(T,b,C)=>{if(v)return Promise.reject();if(b==null&&T.pages.length)return Promise.resolve(T);const E=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:b,direction:C?"backward":"forward",meta:e.options.meta};return x(F),F})(),N=await y(E),{maxPages:I}=e.options,M=C?lc:ac;return{pages:M(T.pages,N,I),pageParams:M(T.pageParams,b,I)}};if(s&&r.length){const T=s==="backward",b=T?vc:_r,C={pages:r,pageParams:a},S=b(o,C);u=await w(C,S,T)}else{const T=t??r.length;do{const b=d===0?a[0]??o.initialPageParam:_r(o,u);if(d>0&&b==null)break;u=await w(u,b),d++}while(d<T)}return u};e.options.persister?e.fetchFn=()=>{var v,x;return(x=(v=e.options).persister)==null?void 0:x.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function _r(t,{pages:e,pageParams:n}){const o=e.length-1;return e.length>0?t.getNextPageParam(e[o],e,n[o],n):void 0}function vc(t,{pages:e,pageParams:n}){var o;return e.length>0?(o=t.getPreviousPageParam)==null?void 0:o.call(t,e[0],e,n[0],n):void 0}var Sn,Ae,le,gt,ke,Ke,$a,xc=($a=class extends tl{constructor(e){super();J(this,ke);J(this,Sn);J(this,Ae);J(this,le);J(this,gt);B(this,Sn,e.client),this.mutationId=e.mutationId,B(this,le,e.mutationCache),B(this,Ae,[]),this.state=e.state||_c(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){A(this,Ae).includes(e)||(A(this,Ae).push(e),this.clearGcTimeout(),A(this,le).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){B(this,Ae,A(this,Ae).filter(n=>n!==e)),this.scheduleGc(),A(this,le).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){A(this,Ae).length||(this.state.status==="pending"?this.scheduleGc():A(this,le).remove(this))}continue(){var e;return((e=A(this,gt))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,u,d,c,f,p,h,g,_,v,x,y,w,T,b,C,S,E,N,I;const n=()=>{se(this,ke,Ke).call(this,{type:"continue"})},o={client:A(this,Sn),meta:this.options.meta,mutationKey:this.options.mutationKey};B(this,gt,el({fn:()=>this.options.mutationFn?this.options.mutationFn(e,o):Promise.reject(new Error("No mutationFn found")),onFail:(M,F)=>{se(this,ke,Ke).call(this,{type:"failed",failureCount:M,error:F})},onPause:()=>{se(this,ke,Ke).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>A(this,le).canRun(this)}));const s=this.state.status==="pending",r=!A(this,gt).canStart();try{if(s)n();else{se(this,ke,Ke).call(this,{type:"pending",variables:e,isPaused:r}),await((u=(a=A(this,le).config).onMutate)==null?void 0:u.call(a,e,this,o));const F=await((c=(d=this.options).onMutate)==null?void 0:c.call(d,e,o));F!==this.state.context&&se(this,ke,Ke).call(this,{type:"pending",context:F,variables:e,isPaused:r})}const M=await A(this,gt).start();return await((p=(f=A(this,le).config).onSuccess)==null?void 0:p.call(f,M,e,this.state.context,this,o)),await((g=(h=this.options).onSuccess)==null?void 0:g.call(h,M,e,this.state.context,o)),await((v=(_=A(this,le).config).onSettled)==null?void 0:v.call(_,M,null,this.state.variables,this.state.context,this,o)),await((y=(x=this.options).onSettled)==null?void 0:y.call(x,M,null,e,this.state.context,o)),se(this,ke,Ke).call(this,{type:"success",data:M}),M}catch(M){try{await((T=(w=A(this,le).config).onError)==null?void 0:T.call(w,M,e,this.state.context,this,o))}catch(F){Promise.reject(F)}try{await((C=(b=this.options).onError)==null?void 0:C.call(b,M,e,this.state.context,o))}catch(F){Promise.reject(F)}try{await((E=(S=A(this,le).config).onSettled)==null?void 0:E.call(S,void 0,M,this.state.variables,this.state.context,this,o))}catch(F){Promise.reject(F)}try{await((I=(N=this.options).onSettled)==null?void 0:I.call(N,void 0,M,e,this.state.context,o))}catch(F){Promise.reject(F)}throw se(this,ke,Ke).call(this,{type:"error",error:M}),M}finally{A(this,le).runNext(this)}}},Sn=new WeakMap,Ae=new WeakMap,le=new WeakMap,gt=new WeakMap,ke=new WeakSet,Ke=function(e){const n=o=>{switch(e.type){case"failed":return{...o,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...o,isPaused:!0};case"continue":return{...o,isPaused:!1};case"pending":return{...o,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...o,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...o,data:void 0,error:e.error,failureCount:o.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ce.batch(()=>{A(this,Ae).forEach(o=>{o.onMutationUpdate(e)}),A(this,le).notify({mutation:this,type:"updated",action:e})})},$a);function _c(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fe,Te,In,Oa,wc=(Oa=class extends _o{constructor(e={}){super();J(this,Fe);J(this,Te);J(this,In);this.config=e,B(this,Fe,new Set),B(this,Te,new Map),B(this,In,0)}build(e,n,o){const s=new xc({client:e,mutationCache:this,mutationId:++Rn(this,In)._,options:e.defaultMutationOptions(n),state:o});return this.add(s),s}add(e){A(this,Fe).add(e);const n=Dn(e);if(typeof n=="string"){const o=A(this,Te).get(n);o?o.push(e):A(this,Te).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(A(this,Fe).delete(e)){const n=Dn(e);if(typeof n=="string"){const o=A(this,Te).get(n);if(o)if(o.length>1){const s=o.indexOf(e);s!==-1&&o.splice(s,1)}else o[0]===e&&A(this,Te).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Dn(e);if(typeof n=="string"){const o=A(this,Te).get(n),s=o==null?void 0:o.find(r=>r.state.status==="pending");return!s||s===e}else return!0}runNext(e){var o;const n=Dn(e);if(typeof n=="string"){const s=(o=A(this,Te).get(n))==null?void 0:o.find(r=>r!==e&&r.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ce.batch(()=>{A(this,Fe).forEach(e=>{this.notify({type:"removed",mutation:e})}),A(this,Fe).clear(),A(this,Te).clear()})}getAll(){return Array.from(A(this,Fe))}find(e){const n={exact:!0,...e};return this.getAll().find(o=>pr(n,o))}findAll(e={}){return this.getAll().filter(n=>pr(e,n))}notify(e){ce.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ce.batch(()=>Promise.all(e.map(n=>n.continue().catch(_e))))}},Fe=new WeakMap,Te=new WeakMap,In=new WeakMap,Oa);function Dn(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Ne,Ka,Tc=(Ka=class extends _o{constructor(e={}){super();J(this,Ne);this.config=e,B(this,Ne,new Map)}build(e,n,o){const s=n.queryKey,r=n.queryHash??Ls(s,n);let a=this.get(r);return a||(a=new gc({client:e,queryKey:s,queryHash:r,options:e.defaultQueryOptions(n),state:o,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){A(this,Ne).has(e.queryHash)||(A(this,Ne).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=A(this,Ne).get(e.queryHash);n&&(e.destroy(),n===e&&A(this,Ne).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ce.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return A(this,Ne).get(e)}getAll(){return[...A(this,Ne).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(o=>hr(n,o))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(o=>hr(e,o)):n}notify(e){ce.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ce.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ce.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ne=new WeakMap,Ka),Z,Ze,et,Bt,$t,tt,Ot,Kt,Ja,bc=(Ja=class{constructor(t={}){J(this,Z);J(this,Ze);J(this,et);J(this,Bt);J(this,$t);J(this,tt);J(this,Ot);J(this,Kt);B(this,Z,t.queryCache||new Tc),B(this,Ze,t.mutationCache||new wc),B(this,et,t.defaultOptions||{}),B(this,Bt,new Map),B(this,$t,new Map),B(this,tt,0)}mount(){Rn(this,tt)._++,A(this,tt)===1&&(B(this,Ot,ja.subscribe(async t=>{t&&(await this.resumePausedMutations(),A(this,Z).onFocus())})),B(this,Kt,no.subscribe(async t=>{t&&(await this.resumePausedMutations(),A(this,Z).onOnline())})))}unmount(){var t,e;Rn(this,tt)._--,A(this,tt)===0&&((t=A(this,Ot))==null||t.call(this),B(this,Ot,void 0),(e=A(this,Kt))==null||e.call(this),B(this,Kt,void 0))}isFetching(t){return A(this,Z).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return A(this,Ze).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=A(this,Z).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=A(this,Z).build(this,e),o=n.state.data;return o===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(zo(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(o))}getQueriesData(t){return A(this,Z).findAll(t).map(({queryKey:e,state:n})=>{const o=n.data;return[e,o]})}setQueryData(t,e,n){const o=this.defaultQueryOptions({queryKey:t}),s=A(this,Z).get(o.queryHash),r=s==null?void 0:s.state.data,a=ec(e,r);if(a!==void 0)return A(this,Z).build(this,o).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return ce.batch(()=>A(this,Z).findAll(t).map(({queryKey:o})=>[o,this.setQueryData(o,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=A(this,Z).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=A(this,Z);ce.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=A(this,Z);return ce.batch(()=>(n.findAll(t).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},o=ce.batch(()=>A(this,Z).findAll(t).map(s=>s.cancel(n)));return Promise.all(o).then(_e).catch(_e)}invalidateQueries(t,e={}){return ce.batch(()=>(A(this,Z).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},o=ce.batch(()=>A(this,Z).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let r=s.fetch(void 0,n);return n.throwOnError||(r=r.catch(_e)),s.state.fetchStatus==="paused"?Promise.resolve():r}));return Promise.all(o).then(_e)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=A(this,Z).build(this,e);return n.isStaleByTime(zo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(_e).catch(_e)}fetchInfiniteQuery(t){return t.behavior=xr(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(_e).catch(_e)}ensureInfiniteQueryData(t){return t.behavior=xr(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return no.isOnline()?A(this,Ze).resumePausedMutations():Promise.resolve()}getQueryCache(){return A(this,Z)}getMutationCache(){return A(this,Ze)}getDefaultOptions(){return A(this,et)}setDefaultOptions(t){B(this,et,t)}setQueryDefaults(t,e){A(this,Bt).set(mn(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...A(this,Bt).values()],n={};return e.forEach(o=>{gn(t,o.queryKey)&&Object.assign(n,o.defaultOptions)}),n}setMutationDefaults(t,e){A(this,$t).set(mn(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...A(this,$t).values()],n={};return e.forEach(o=>{gn(t,o.mutationKey)&&Object.assign(n,o.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...A(this,et).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ls(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Gs&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...A(this,et).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){A(this,Z).clear(),A(this,Ze).clear()}},Z=new WeakMap,Ze=new WeakMap,et=new WeakMap,Bt=new WeakMap,$t=new WeakMap,tt=new WeakMap,Ot=new WeakMap,Kt=new WeakMap,Ja),Cc=R.createContext(void 0),Ec=({client:t,children:e})=>(R.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(Cc.Provider,{value:t,children:e}));const To="https://cvnonrjzshaawzxcjwmn.supabase.co",_t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN2bm9ucmp6c2hhYXd6eGNqd21uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczODM0MjQsImV4cCI6MjA4Mjk1OTQyNH0._Qx-efsymzv9R2WpvqcuuxDbz0GeugueEgSPIEM7Cn0",W=$u(To,_t,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),qs=()=>!!W,nl=R.createContext(void 0);function Sc({children:t}){const[e,n]=R.useState({user:null,session:null,isLoading:!0,isConfigured:qs()});R.useEffect(()=>{if(!W){n(h=>({...h,isLoading:!1}));return}W.auth.getSession().then(({data:{session:h}})=>{n(g=>({...g,session:h,user:(h==null?void 0:h.user)??null,isLoading:!1}))});const{data:{subscription:p}}=W.auth.onAuthStateChange(async(h,g)=>{n(_=>({..._,session:g,user:(g==null?void 0:g.user)??null,isLoading:!1})),h==="SIGNED_IN"&&(g!=null&&g.user)&&await o(g.user)});return()=>{p.unsubscribe()}},[]);const o=async p=>{if(!W)return;const{data:h}=await W.from("users").select("id").eq("id",p.id).single();h||await W.from("users").insert({id:p.id,email:p.email,full_name:p.user_metadata.full_name||p.user_metadata.name||null,avatar_url:p.user_metadata.avatar_url||null})},s=R.useCallback(async(p,h)=>{if(!W)return{error:{message:"Supabase not configured"}};const{error:g}=await W.auth.signInWithPassword({email:p,password:h});return{error:g}},[]),r=R.useCallback(async(p,h,g)=>{if(!W)return{error:{message:"Supabase not configured"}};const{error:_}=await W.auth.signUp({email:p,password:h,options:{data:{full_name:g}}});return{error:_}},[]),a=R.useCallback(async()=>{if(!W)return{error:{message:"Supabase not configured"}};const{error:p}=await W.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});return{error:p}},[]),u=R.useCallback(async()=>{if(!W)return{error:{message:"Supabase not configured"}};const{error:p}=await W.auth.signInWithOAuth({provider:"azure",options:{redirectTo:`${window.location.origin}/auth/callback`,scopes:"email profile openid"}});return{error:p}},[]),d=R.useCallback(async()=>{W&&await W.auth.signOut()},[]),c=R.useCallback(async p=>{if(!W)return{error:{message:"Supabase not configured"}};const{error:h}=await W.auth.resetPasswordForEmail(p,{redirectTo:`${window.location.origin}/auth/reset-password`});return{error:h}},[]),f={...e,signInWithEmail:s,signUpWithEmail:r,signInWithGoogle:a,signInWithMicrosoft:u,signOut:d,resetPassword:c};return m.jsx(nl.Provider,{value:f,children:t})}function Vs(){const t=R.useContext(nl);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ac=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,o)=>o?o.toUpperCase():n.toLowerCase()),wr=t=>{const e=Ac(t);return e.charAt(0).toUpperCase()+e.slice(1)},ol=(...t)=>t.filter((e,n,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===n).join(" ").trim(),kc=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=R.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:s="",children:r,iconNode:a,...u},d)=>R.createElement("svg",{ref:d,...Nc,width:e,height:e,stroke:t,strokeWidth:o?Number(n)*24/Number(e):n,className:ol("lucide",s),...!r&&!kc(u)&&{"aria-hidden":"true"},...u},[...a.map(([c,f])=>R.createElement(c,f)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=(t,e)=>{const n=R.forwardRef(({className:o,...s},r)=>R.createElement(Pc,{ref:r,iconNode:e,className:ol(`lucide-${Ic(wr(t))}`,`lucide-${t}`,o),...s}));return n.displayName=wr(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Qo=V("arrow-right",Rc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Tr=V("book-open",Mc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],br=V("bot",Dc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Uc=V("calendar",Fc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],sl=V("check",Lc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],qc=V("chevron-down",Gc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Hc=V("chevron-right",Vc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$c=V("circle-alert",Bc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Kc=V("circle-check",Oc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Cr=V("clipboard-check",Jc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Wc=V("clock",zc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],Er=V("cloud-off",Yc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Xc=V("cloud-upload",Qc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Zc=V("cloud",jc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],td=V("download",ed);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Sr=V("folder-open",nd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],Ir=V("gamepad-2",od);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Ar=V("graduation-cap",sd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],id=V("layers",rd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],kr=V("layout-dashboard",ad);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],ud=V("list",ld);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],oo=V("loader-circle",cd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fd=V("lock",dd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Nr=V("log-out",hd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],md=V("mail",pd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],yd=V("menu",gd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],xd=V("mic",vd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=[["path",{d:"M5 12h14",key:"1ays0h"}]],Pr=V("minus",_d);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Rr=V("moon",wd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],bd=V("panels-top-left",Td);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ed=V("pen",Cd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],un=V("plus",Sd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ad=V("refresh-cw",Id);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Nd=V("rotate-ccw",kd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Mr=V("save",Pd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Md=V("send",Rd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dr=V("settings",Dd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Fr=V("sparkles",Fd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ur=V("square-check-big",Ud);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Gd=V("square-pen",Ld);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Lr=V("sun",qd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Jt=V("trash-2",Vd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Bd=V("trophy",Hd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Od=V("undo",$d);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Jd=V("user-plus",Kd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],rl=V("user",zd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Yd=V("users",Wd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],il=V("x",Qd),Xd={},Gr=t=>{let e;const n=new Set,o=(f,p)=>{const h=typeof f=="function"?f(e):f;if(!Object.is(h,e)){const g=e;e=p??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(_=>_(e,g))}},s=()=>e,d={setState:o,getState:s,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Xd?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(o,s,d);return d},jd=t=>t?Gr(t):Gr;var al={exports:{}},ll={},ul={exports:{}},cl={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zt=R;function Zd(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ef=typeof Object.is=="function"?Object.is:Zd,tf=zt.useState,nf=zt.useEffect,of=zt.useLayoutEffect,sf=zt.useDebugValue;function rf(t,e){var n=e(),o=tf({inst:{value:n,getSnapshot:e}}),s=o[0].inst,r=o[1];return of(function(){s.value=n,s.getSnapshot=e,Fo(s)&&r({inst:s})},[t,n,e]),nf(function(){return Fo(s)&&r({inst:s}),t(function(){Fo(s)&&r({inst:s})})},[t]),sf(n),n}function Fo(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ef(t,n)}catch{return!0}}function af(t,e){return e()}var lf=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?af:rf;cl.useSyncExternalStore=zt.useSyncExternalStore!==void 0?zt.useSyncExternalStore:lf;ul.exports=cl;var uf=ul.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bo=R,cf=uf;function df(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ff=typeof Object.is=="function"?Object.is:df,hf=cf.useSyncExternalStore,pf=bo.useRef,mf=bo.useEffect,gf=bo.useMemo,yf=bo.useDebugValue;ll.useSyncExternalStoreWithSelector=function(t,e,n,o,s){var r=pf(null);if(r.current===null){var a={hasValue:!1,value:null};r.current=a}else a=r.current;r=gf(function(){function d(g){if(!c){if(c=!0,f=g,g=o(g),s!==void 0&&a.hasValue){var _=a.value;if(s(_,g))return p=_}return p=g}if(_=p,ff(f,g))return _;var v=o(g);return s!==void 0&&s(_,v)?(f=g,_):(f=g,p=v)}var c=!1,f,p,h=n===void 0?null:n;return[function(){return d(e())},h===null?void 0:function(){return d(h())}]},[e,n,o,s]);var u=hf(t,r[0],r[1]);return mf(function(){a.hasValue=!0,a.value=u},[u]),yf(u),u};al.exports=ll;var vf=al.exports;const xf=qu(vf),dl={},{useDebugValue:_f}=za,{useSyncExternalStoreWithSelector:wf}=xf;let qr=!1;const Tf=t=>t;function bf(t,e=Tf,n){(dl?"production":void 0)!=="production"&&n&&!qr&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),qr=!0);const o=wf(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return _f(o),o}const Cf=t=>{(dl?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?jd(t):t,n=(o,s)=>bf(e,o,s);return Object.assign(n,e),n},Ef=t=>Cf,Sf={};function If(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var r;const a=d=>d===null?null:JSON.parse(d,void 0),u=(r=n.getItem(s))!=null?r:null;return u instanceof Promise?u.then(a):a(u)},setItem:(s,r)=>n.setItem(s,JSON.stringify(r,void 0)),removeItem:s=>n.removeItem(s)}}const yn=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(o){return yn(o)(n)},catch(o){return this}}}catch(n){return{then(o){return this},catch(o){return yn(o)(n)}}}},Af=(t,e)=>(n,o,s)=>{let r={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:x=>x,version:0,merge:(x,y)=>({...y,...x}),...e},a=!1;const u=new Set,d=new Set;let c;try{c=r.getStorage()}catch{}if(!c)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),n(...x)},o,s);const f=yn(r.serialize),p=()=>{const x=r.partialize({...o()});let y;const w=f({state:x,version:r.version}).then(T=>c.setItem(r.name,T)).catch(T=>{y=T});if(y)throw y;return w},h=s.setState;s.setState=(x,y)=>{h(x,y),p()};const g=t((...x)=>{n(...x),p()},o,s);let _;const v=()=>{var x;if(!c)return;a=!1,u.forEach(w=>w(o()));const y=((x=r.onRehydrateStorage)==null?void 0:x.call(r,o()))||void 0;return yn(c.getItem.bind(c))(r.name).then(w=>{if(w)return r.deserialize(w)}).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==r.version){if(r.migrate)return r.migrate(w.state,w.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return w.state}).then(w=>{var T;return _=r.merge(w,(T=o())!=null?T:g),n(_,!0),p()}).then(()=>{y==null||y(_,void 0),a=!0,d.forEach(w=>w(_))}).catch(w=>{y==null||y(void 0,w)})};return s.persist={setOptions:x=>{r={...r,...x},x.getStorage&&(c=x.getStorage())},clearStorage:()=>{c==null||c.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:x=>(u.add(x),()=>{u.delete(x)}),onFinishHydration:x=>(d.add(x),()=>{d.delete(x)})},v(),_||g},kf=(t,e)=>(n,o,s)=>{let r={storage:If(()=>localStorage),partialize:v=>v,version:0,merge:(v,x)=>({...x,...v}),...e},a=!1;const u=new Set,d=new Set;let c=r.storage;if(!c)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),n(...v)},o,s);const f=()=>{const v=r.partialize({...o()});return c.setItem(r.name,{state:v,version:r.version})},p=s.setState;s.setState=(v,x)=>{p(v,x),f()};const h=t((...v)=>{n(...v),f()},o,s);s.getInitialState=()=>h;let g;const _=()=>{var v,x;if(!c)return;a=!1,u.forEach(w=>{var T;return w((T=o())!=null?T:h)});const y=((x=r.onRehydrateStorage)==null?void 0:x.call(r,(v=o())!=null?v:h))||void 0;return yn(c.getItem.bind(c))(r.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==r.version){if(r.migrate)return[!0,r.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var T;const[b,C]=w;if(g=r.merge(C,(T=o())!=null?T:h),n(g,!0),b)return f()}).then(()=>{y==null||y(g,void 0),g=o(),a=!0,d.forEach(w=>w(g))}).catch(w=>{y==null||y(void 0,w)})};return s.persist={setOptions:v=>{r={...r,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c==null||c.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>_(),hasHydrated:()=>a,onHydrate:v=>(u.add(v),()=>{u.delete(v)}),onFinishHydration:v=>(d.add(v),()=>{d.delete(v)})},r.skipHydration||_(),g||h},Nf=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Sf?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Af(t,e)):kf(t,e),Pf=Nf,X=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ee=Object.keys,ie=Array.isArray;function fe(t,e){return typeof e!="object"||ee(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||X.Promise||(X.Promise=Promise);const vn=Object.getPrototypeOf,Rf={}.hasOwnProperty;function me(t,e){return Rf.call(t,e)}function Wt(t,e){typeof e=="function"&&(e=e(vn(t))),(typeof Reflect>"u"?ee:Reflect.ownKeys)(e).forEach(n=>{Ge(t,n,e[n])})}const fl=Object.defineProperty;function Ge(t,e,n,o){fl(t,e,fe(n&&me(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},o))}function Mt(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Ge(t.prototype,"constructor",t),{extend:Wt.bind(null,t.prototype)}}}}const Mf=Object.getOwnPropertyDescriptor;function Hs(t,e){let n;return Mf(t,e)||(n=vn(t))&&Hs(n,e)}const Df=[].slice;function so(t,e,n){return Df.call(t,e,n)}function hl(t,e){return e(t)}function rn(t){if(!t)throw new Error("Assertion Failed")}function pl(t){X.setImmediate?setImmediate(t):setTimeout(t,0)}function ml(t,e){return t.reduce((n,o,s)=>{var r=e(o,s);return r&&(n[r[0]]=r[1]),n},{})}function qe(t,e){if(typeof e=="string"&&me(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],o=0,s=e.length;o<s;++o){var r=qe(t,e[o]);n.push(r)}return n}var a=e.indexOf(".");if(a!==-1){var u=t[e.substr(0,a)];return u==null?void 0:qe(u,e.substr(a+1))}}function be(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){rn(typeof n!="string"&&"length"in n);for(var o=0,s=e.length;o<s;++o)be(t,e[o],n[o])}else{var r=e.indexOf(".");if(r!==-1){var a=e.substr(0,r),u=e.substr(r+1);if(u==="")n===void 0?ie(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var d=t[a];d&&me(t,a)||(d=t[a]={}),be(d,u,n)}}else n===void 0?ie(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function gl(t){var e={};for(var n in t)me(t,n)&&(e[n]=t[n]);return e}const Ff=[].concat;function yl(t){return Ff.apply([],t)}const vl="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(yl([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>X[t]),Uf=vl.map(t=>X[t]);ml(vl,t=>[t,!0]);let We=null;function An(t){We=typeof WeakMap<"u"&&new WeakMap;const e=Xo(t);return We=null,e}function Xo(t){if(!t||typeof t!="object")return t;let e=We&&We.get(t);if(e)return e;if(ie(t)){e=[],We&&We.set(t,e);for(var n=0,o=t.length;n<o;++n)e.push(Xo(t[n]))}else if(Uf.indexOf(t.constructor)>=0)e=t;else{const r=vn(t);for(var s in e=r===Object.prototype?{}:Object.create(r),We&&We.set(t,e),t)me(t,s)&&(e[s]=Xo(t[s]))}return e}const{toString:Lf}={};function jo(t){return Lf.call(t).slice(8,-1)}const Zo=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Gf=typeof Zo=="symbol"?function(t){var e;return t!=null&&(e=t[Zo])&&e.apply(t)}:function(){return null},At={};function Ue(t){var e,n,o,s;if(arguments.length===1){if(ie(t))return t.slice();if(this===At&&typeof t=="string")return[t];if(s=Gf(t)){for(n=[];!(o=s.next()).done;)n.push(o.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const Bs=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Pe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function xl(t,e){Pe=t,_l=e}var _l=()=>!0;const qf=!new Error("").stack;function bt(){if(qf)try{throw bt.arguments,new Error}catch(t){return t}return new Error}function es(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(_l).map(o=>`
`+o).join("")):""}var wl=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$s=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(wl),Vf={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Dt(t,e){this._e=bt(),this.name=t,this.message=e}function Tl(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,o,s)=>s.indexOf(n)===o).join(`
`)}function ro(t,e,n,o){this._e=bt(),this.failures=e,this.failedKeys=o,this.successCount=n,this.message=Tl(t,e)}function cn(t,e){this._e=bt(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=Tl(t,e)}Mt(Dt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+es(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Mt(ro).from(Dt),Mt(cn).from(Dt);var Os=$s.reduce((t,e)=>(t[e]=e+"Error",t),{});const Hf=Dt;var q=$s.reduce((t,e)=>{var n=e+"Error";function o(s,r){this._e=bt(),this.name=n,s?typeof s=="string"?(this.message=`${s}${r?`
 `+r:""}`,this.inner=r||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=Vf[e]||n,this.inner=null)}return Mt(o).from(Hf),t[e]=o,t},{});q.Syntax=SyntaxError,q.Type=TypeError,q.Range=RangeError;var Vr=wl.reduce((t,e)=>(t[e+"Error"]=q[e],t),{}),zn=$s.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=q[e]),t),{});function Q(){}function xn(t){return t}function Bf(t,e){return t==null||t===xn?e:function(n){return e(t(n))}}function wt(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function $f(t,e){return t===Q?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var r=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?wt(o,this.onsuccess):o),s&&(this.onerror=this.onerror?wt(s,this.onerror):s),r!==void 0?r:n}}function Of(t,e){return t===Q?e:function(){t.apply(this,arguments);var n=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?wt(n,this.onsuccess):n),o&&(this.onerror=this.onerror?wt(o,this.onerror):o)}}function Kf(t,e){return t===Q?e:function(n){var o=t.apply(this,arguments);fe(n,o);var s=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?wt(s,this.onsuccess):s),r&&(this.onerror=this.onerror?wt(r,this.onerror):r),o===void 0?a===void 0?void 0:a:fe(o,a)}}function Jf(t,e){return t===Q?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Ks(t,e){return t===Q?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var o=this,s=arguments.length,r=new Array(s);s--;)r[s]=arguments[s];return n.then(function(){return e.apply(o,r)})}return e.apply(this,arguments)}}zn.ModifyError=ro,zn.DexieError=Dt,zn.BulkError=cn;var _n={};const bl=100,[ts,io,ns]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,vn(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,vn(e),t]})(),Cl=io&&io.then,Wn=ts&&ts.constructor,Js=!!ns;var os=!1,zf=ns?()=>{ns.then(Fn)}:X.setImmediate?setImmediate.bind(null,Fn):X.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Fn(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Fn,0)},dn=function(t,e){an.push([t,e]),ao&&(zf(),ao=!1)},ss=!0,ao=!0,yt=[],Yn=[],rs=null,is=xn,Ft={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:$r,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{$r(t[0],t[1])}catch{}})}},G=Ft,an=[],vt=0,Qn=[];function U(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Q,this._lib=!1;var e=this._PSD=G;if(Pe&&(this._stackHolder=bt(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==_n)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ls(this,this._value))}this._state=null,this._value=null,++e.ref,Sl(this,t)}const as={get:function(){var t=G,e=lo;function n(o,s){var r=!t.global&&(t!==G||e!==lo);const a=r&&!Ve();var u=new U((d,c)=>{zs(this,new El(uo(o,t,r,a),uo(s,t,r,a),d,c,t))});return Pe&&kl(u,this),u}return n.prototype=_n,n},set:function(t){Ge(this,"then",t&&t.prototype===_n?as:{get:function(){return t},set:as.set})}};function El(t,e,n,o,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=o,this.psd=s}function Sl(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&kn();n&&typeof n.then=="function"?Sl(t,(s,r)=>{n instanceof U?n._then(s,r):n.then(s,r)}):(t._state=!0,t._value=n,Il(t)),o&&Nn()}},ls.bind(null,t))}catch(n){ls(t,n)}}function ls(t,e){if(Yn.push(e),t._state===null){var n=t._lib&&kn();e=is(e),t._state=!1,t._value=e,Pe&&e!==null&&typeof e=="object"&&!e._promise&&function(o,s,r){try{o.apply(null,r)}catch{}}(()=>{var o=Hs(e,"stack");e._promise=t,Ge(e,"stack",{get:()=>os?o&&(o.get?o.get.apply(e):o.value):t.stack})}),function(o){yt.some(s=>s._value===o._value)||yt.push(o)}(t),Il(t),n&&Nn()}}function Il(t){var e=t._listeners;t._listeners=[];for(var n=0,o=e.length;n<o;++n)zs(t,e[n]);var s=t._PSD;--s.ref||s.finalize(),vt===0&&(++vt,dn(()=>{--vt==0&&Ws()},[]))}function zs(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++vt,dn(Wf,[n,t,e])}else t._listeners.push(e)}function Wf(t,e,n){try{rs=e;var o,s=e._value;e._state?o=t(s):(Yn.length&&(Yn=[]),o=t(s),Yn.indexOf(s)===-1&&function(r){for(var a=yt.length;a;)if(yt[--a]._value===r._value)return void yt.splice(a,1)}(e)),n.resolve(o)}catch(r){n.reject(r)}finally{rs=null,--vt==0&&Ws(),--n.psd.ref||n.psd.finalize()}}function Al(t,e,n){if(e.length===n)return e;var o="";if(t._state===!1){var s,r,a=t._value;a!=null?(s=a.name||"Error",r=a.message||a,o=es(a,0)):(s=a,r=""),e.push(s+(r?": "+r:"")+o)}return Pe&&((o=es(t._stackHolder,2))&&e.indexOf(o)===-1&&e.push(o),t._prev&&Al(t._prev,e,n)),e}function kl(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Fn(){kn()&&Nn()}function kn(){var t=ss;return ss=!1,ao=!1,t}function Nn(){var t,e,n;do for(;an.length>0;)for(t=an,an=[],n=t.length,e=0;e<n;++e){var o=t[e];o[0].apply(null,o[1])}while(an.length>0);ss=!0,ao=!0}function Ws(){var t=yt;yt=[],t.forEach(o=>{o._PSD.onunhandled.call(null,o._value,o)});for(var e=Qn.slice(0),n=e.length;n;)e[--n]()}function Un(t){return new U(_n,!1,t)}function j(t,e){var n=G;return function(){var o=kn(),s=G;try{return rt(n,!0),t.apply(this,arguments)}catch(r){e&&e(r)}finally{rt(s,!1),o&&Nn()}}}Wt(U.prototype,{then:as,_then:function(t,e){zs(this,new El(null,null,t,e,G))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,o=>o instanceof e?n(o):Un(o)):this.then(null,o=>o&&o.name===e?n(o):Un(o))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Un(e)))},stack:{get:function(){if(this._stack)return this._stack;try{os=!0;var t=Al(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{os=!1}}},timeout:function(t,e){return t<1/0?new U((n,o)=>{var s=setTimeout(()=>o(new q.Timeout(e)),t);this.then(n,o).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Ge(U.prototype,Symbol.toStringTag,"Dexie.Promise"),Ft.env=Nl(),Wt(U,{all:function(){var t=Ue.apply(null,arguments).map(Ln);return new U(function(e,n){t.length===0&&e([]);var o=t.length;t.forEach((s,r)=>U.resolve(s).then(a=>{t[r]=a,--o||e(t)},n))})},resolve:t=>{if(t instanceof U)return t;if(t&&typeof t.then=="function")return new U((n,o)=>{t.then(n,o)});var e=new U(_n,!0,t);return kl(e,rs),e},reject:Un,race:function(){var t=Ue.apply(null,arguments).map(Ln);return new U((e,n)=>{t.map(o=>U.resolve(o).then(e,n))})},PSD:{get:()=>G,set:t=>G=t},totalEchoes:{get:()=>lo},newPSD:st,usePSD:Qt,scheduler:{get:()=>dn,set:t=>{dn=t}},rejectionMapper:{get:()=>is,set:t=>{is=t}},follow:(t,e)=>new U((n,o)=>st((s,r)=>{var a=G;a.unhandleds=[],a.onunhandled=r,a.finalize=wt(function(){(function(u){function d(){u(),Qn.splice(Qn.indexOf(d),1)}Qn.push(d),++vt,dn(()=>{--vt==0&&Ws()},[])})(()=>{this.unhandleds.length===0?s():r(this.unhandleds[0])})},a.finalize),t()},e,n,o))}),Wn&&(Wn.allSettled&&Ge(U,"allSettled",function(){const t=Ue.apply(null,arguments).map(Ln);return new U(e=>{t.length===0&&e([]);let n=t.length;const o=new Array(n);t.forEach((s,r)=>U.resolve(s).then(a=>o[r]={status:"fulfilled",value:a},a=>o[r]={status:"rejected",reason:a}).then(()=>--n||e(o)))})}),Wn.any&&typeof AggregateError<"u"&&Ge(U,"any",function(){const t=Ue.apply(null,arguments).map(Ln);return new U((e,n)=>{t.length===0&&n(new AggregateError([]));let o=t.length;const s=new Array(o);t.forEach((r,a)=>U.resolve(r).then(u=>e(u),u=>{s[a]=u,--o||n(new AggregateError(s))}))})}));const re={awaits:0,echoes:0,id:0};var Yf=0,Xn=[],Uo=0,lo=0,Qf=0;function st(t,e,n,o){var s=G,r=Object.create(s);r.parent=s,r.ref=0,r.global=!1,r.id=++Qf;var a=Ft.env;r.env=Js?{Promise:U,PromiseProp:{value:U,configurable:!0,writable:!0},all:U.all,race:U.race,allSettled:U.allSettled,any:U.any,resolve:U.resolve,reject:U.reject,nthen:Hr(a.nthen,r),gthen:Hr(a.gthen,r)}:{},e&&fe(r,e),++s.ref,r.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=Qt(r,t,n,o);return r.ref===0&&r.finalize(),u}function Yt(){return re.id||(re.id=++Yf),++re.awaits,re.echoes+=bl,re.id}function Ve(){return!!re.awaits&&(--re.awaits==0&&(re.id=0),re.echoes=re.awaits*bl,!0)}function Ln(t){return re.echoes&&t&&t.constructor===Wn?(Yt(),t.then(e=>(Ve(),e),e=>(Ve(),te(e)))):t}function Xf(t){++lo,re.echoes&&--re.echoes!=0||(re.echoes=re.id=0),Xn.push(G),rt(t,!0)}function jf(){var t=Xn[Xn.length-1];Xn.pop(),rt(t,!1)}function rt(t,e){var n=G;if((e?!re.echoes||Uo++&&t===G:!Uo||--Uo&&t===G)||Pl(e?Xf.bind(null,t):jf),t!==G&&(G=t,n===Ft&&(Ft.env=Nl()),Js)){var o=Ft.env.Promise,s=t.env;io.then=s.nthen,o.prototype.then=s.gthen,(n.global||t.global)&&(Object.defineProperty(X,"Promise",s.PromiseProp),o.all=s.all,o.race=s.race,o.resolve=s.resolve,o.reject=s.reject,s.allSettled&&(o.allSettled=s.allSettled),s.any&&(o.any=s.any))}}function Nl(){var t=X.Promise;return Js?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(X,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:io.then,gthen:t.prototype.then}:{}}function Qt(t,e,n,o,s){var r=G;try{return rt(t,!0),e(n,o,s)}finally{rt(r,!1)}}function Pl(t){Cl.call(ts,t)}function uo(t,e,n,o){return typeof t!="function"?t:function(){var s=G;n&&Yt(),rt(e,!0);try{return t.apply(this,arguments)}finally{rt(s,!1),o&&Pl(Ve)}}}function Hr(t,e){return function(n,o){return t.call(this,uo(n,e),uo(o,e))}}(""+Cl).indexOf("[native code]")===-1&&(Yt=Ve=Q);const Br="unhandledrejection";function $r(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var o,s={promise:e,reason:t};if(X.document&&document.createEvent?((o=document.createEvent("Event")).initEvent(Br,!0,!0),fe(o,s)):X.CustomEvent&&fe(o=new CustomEvent(Br,{detail:s}),s),o&&X.dispatchEvent&&(dispatchEvent(o),!X.PromiseRejectionEvent&&X.onunhandledrejection))try{X.onunhandledrejection(o)}catch{}Pe&&o&&!o.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var te=U.reject;function us(t,e,n,o){if(t.idbdb&&(t._state.openComplete||G.letThrough||t._vip)){var s=t._createTransaction(e,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(r){return r.name===Os.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>us(t,e,n,o))):te(r)}return s._promise(e,(r,a)=>st(()=>(G.trans=s,o(r,a,s)))).then(r=>s._completion.then(()=>r))}if(t._state.openComplete)return te(new q.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return te(new q.DatabaseClosed);t.open().catch(Q)}return t._state.dbReadyPromise.then(()=>us(t,e,n,o))}const Or="3.2.7",ct="",cs=-1/0,Re="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Rl="String expected.",fn=[],Co=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Zf=Co,eh=Co,Ml=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Eo="__dbnames",Lo="readonly",Go="readwrite";function Tt(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Dl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Gn(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=An(e))[t],e)}class th{_trans(e,n,o){const s=this._tx||G.trans,r=this.name;function a(d,c,f){if(!f.schema[r])throw new q.NotFound("Table "+r+" not part of transaction");return n(f.idbtrans,f)}const u=kn();try{return s&&s.db===this.db?s===G.trans?s._promise(e,a,o):st(()=>s._promise(e,a,o),{trans:s,transless:G.transless||G}):us(this.db,e,[this.name],a)}finally{u&&Nn()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",o=>this.core.get({trans:o,key:e}).then(s=>this.hook.reading.fire(s))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(ie(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=ee(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const o=this.schema.indexes.concat(this.schema.primKey).filter(c=>{if(c.compound&&n.every(f=>c.keyPath.indexOf(f)>=0)){for(let f=0;f<n.length;++f)if(n.indexOf(c.keyPath[f])===-1)return!1;return!0}return!1}).sort((c,f)=>c.keyPath.length-f.keyPath.length)[0];if(o&&this.db._maxKey!==ct){const c=o.keyPath.slice(0,n.length);return this.where(c).equals(c.map(f=>e[f]))}!o&&Pe&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,r=this.db._deps.indexedDB;function a(c,f){try{return r.cmp(c,f)===0}catch{return!1}}const[u,d]=n.reduce(([c,f],p)=>{const h=s[p],g=e[p];return[c||h,c||!h?Tt(f,h&&h.multi?_=>{const v=qe(_,p);return ie(v)&&v.some(x=>a(g,x))}:_=>a(g,qe(_,p))):f]},[null,null]);return u?this.where(u.name).equals(e[u.keyPath]).filter(d):o?this.filter(d):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,ie(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=o=>{if(!o)return o;const s=Object.create(e.prototype);for(var r in o)if(me(o,r))try{s[r]=o[r]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){fe(this,e)})}add(e,n){const{auto:o,keyPath:s}=this.schema.primKey;let r=e;return s&&o&&(r=Gn(s)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:n!=null?[n]:null,values:[r]})).then(a=>a.numFailures?U.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{be(e,s,a)}catch{}return a})}update(e,n){if(typeof e!="object"||ie(e))return this.where(":id").equals(e).modify(n);{const o=qe(e,this.schema.primKey.keyPath);if(o===void 0)return te(new q.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?ee(n).forEach(s=>{be(e,s,n[s])}):n(e,{value:e,primKey:o})}catch{}return this.where(":id").equals(o).modify(n)}}put(e,n){const{auto:o,keyPath:s}=this.schema.primKey;let r=e;return s&&o&&(r=Gn(s)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[r],keys:n!=null?[n]:null})).then(a=>a.numFailures?U.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{be(e,s,a)}catch{}return a})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?U.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Dl})).then(e=>e.numFailures?U.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(o=>o.map(s=>this.hook.reading.fire(s))))}bulkAdd(e,n,o){const s=Array.isArray(n)?n:void 0,r=(o=o||(s?void 0:n))?o.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:u,keyPath:d}=this.schema.primKey;if(d&&s)throw new q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let f=d&&u?e.map(Gn(d)):e;return this.core.mutate({trans:a,type:"add",keys:s,values:f,wantResults:r}).then(({numFailures:p,results:h,lastResult:g,failures:_})=>{if(p===0)return r?h:g;throw new cn(`${this.name}.bulkAdd(): ${p} of ${c} operations failed`,_)})})}bulkPut(e,n,o){const s=Array.isArray(n)?n:void 0,r=(o=o||(s?void 0:n))?o.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:u,keyPath:d}=this.schema.primKey;if(d&&s)throw new q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let f=d&&u?e.map(Gn(d)):e;return this.core.mutate({trans:a,type:"put",keys:s,values:f,wantResults:r}).then(({numFailures:p,results:h,lastResult:g,failures:_})=>{if(p===0)return r?h:g;throw new cn(`${this.name}.bulkPut(): ${p} of ${c} operations failed`,_)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",o=>this.core.mutate({trans:o,type:"delete",keys:e})).then(({numFailures:o,lastResult:s,failures:r})=>{if(o===0)return s;throw new cn(`${this.name}.bulkDelete(): ${o} of ${n} operations failed`,r)})}}function hn(t){var e={},n=function(a,u){if(u){for(var d=arguments.length,c=new Array(d-1);--d;)c[d-1]=arguments[d];return e[a].subscribe.apply(null,c),t}if(typeof a=="string")return e[a]};n.addEventType=r;for(var o=1,s=arguments.length;o<s;++o)r(arguments[o]);return n;function r(a,u,d){if(typeof a!="object"){var c;u||(u=Jf),d||(d=Q);var f={subscribers:[],fire:d,subscribe:function(p){f.subscribers.indexOf(p)===-1&&(f.subscribers.push(p),f.fire=u(f.fire,p))},unsubscribe:function(p){f.subscribers=f.subscribers.filter(function(h){return h!==p}),f.fire=f.subscribers.reduce(u,d)}};return e[a]=n[a]=f,f}ee(c=a).forEach(function(p){var h=c[p];if(ie(h))r(p,c[p][0],c[p][1]);else{if(h!=="asap")throw new q.InvalidArgument("Invalid event config");var g=r(p,xn,function(){for(var _=arguments.length,v=new Array(_);_--;)v[_]=arguments[_];g.subscribers.forEach(function(x){pl(function(){x.apply(null,v)})})})}})}}function tn(t,e){return Mt(e).from({prototype:t}),e}function Et(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function qo(t,e){t.filter=Tt(t.filter,e)}function Vo(t,e,n){var o=t.replayFilter;t.replayFilter=o?()=>Tt(o(),e()):e,t.justLimit=n&&!o}function jn(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new q.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Kr(t,e,n){const o=jn(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function qn(t,e,n,o){const s=t.replayFilter?Tt(t.filter,t.replayFilter()):t.filter;if(t.or){const r={},a=(u,d,c)=>{if(!s||s(d,c,h=>d.stop(h),h=>d.fail(h))){var f=d.primaryKey,p=""+f;p==="[object ArrayBuffer]"&&(p=""+new Uint8Array(f)),me(r,p)||(r[p]=!0,e(u,d,c))}};return Promise.all([t.or._iterate(a,n),Jr(Kr(t,o,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}return Jr(Kr(t,o,n),Tt(t.algorithm,s),e,!t.keysOnly&&t.valueMapper)}function Jr(t,e,n,o){var s=j(o?(r,a,u)=>n(o(r),a,u):n);return t.then(r=>{if(r)return r.start(()=>{var a=()=>r.continue();e&&!e(r,u=>a=u,u=>{r.stop(u),a=Q},u=>{r.fail(u),a=Q})||s(r.value,r,u=>a=u),a()})})}function de(t,e){try{const n=zr(t),o=zr(e);if(n!==o)return n==="Array"?1:o==="Array"?-1:n==="binary"?1:o==="binary"?-1:n==="string"?1:o==="string"?-1:n==="Date"?1:o!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(s,r){const a=s.length,u=r.length,d=a<u?a:u;for(let c=0;c<d;++c)if(s[c]!==r[c])return s[c]<r[c]?-1:1;return a===u?0:a<u?-1:1}(Wr(t),Wr(e));case"Array":return function(s,r){const a=s.length,u=r.length,d=a<u?a:u;for(let c=0;c<d;++c){const f=de(s[c],r[c]);if(f!==0)return f}return a===u?0:a<u?-1:1}(t,e)}}catch{}return NaN}function zr(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=jo(t);return n==="ArrayBuffer"?"binary":n}function Wr(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class nh{_read(e,n){var o=this._ctx;return o.error?o.table._trans(null,te.bind(null,o.error)):o.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,te.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Tt(n.algorithm,e)}_iterate(e,n){return qn(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return e&&fe(o,e),n._ctx=o,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(o=>qn(n,e,o,n.table.core))}count(e){return this._read(n=>{const o=this._ctx,s=o.table.core;if(Et(o,!0))return s.count({trans:n,query:{index:jn(o,s.schema),range:o.range}}).then(a=>Math.min(a,o.limit));var r=0;return qn(o,()=>(++r,!1),n,s).then(()=>r)}).then(e)}sortBy(e,n){const o=e.split(".").reverse(),s=o[0],r=o.length-1;function a(c,f){return f?a(c[o[f]],f-1):c[s]}var u=this._ctx.dir==="next"?1:-1;function d(c,f){var p=a(c,r),h=a(f,r);return p<h?-u:p>h?u:0}return this.toArray(function(c){return c.sort(d)}).then(n)}toArray(e){return this._read(n=>{var o=this._ctx;if(o.dir==="next"&&Et(o,!0)&&o.limit>0){const{valueMapper:s}=o,r=jn(o,o.table.core.schema);return o.table.core.query({trans:n,limit:o.limit,values:!0,query:{index:r,range:o.range}}).then(({result:a})=>s?a.map(s):a)}{const s=[];return qn(o,r=>s.push(r),n,o.table.core).then(()=>s)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,Et(n)?Vo(n,()=>{var o=e;return(s,r)=>o===0||(o===1?(--o,!1):(r(()=>{s.advance(o),o=0}),!1))}):Vo(n,()=>{var o=e;return()=>--o<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Vo(this._ctx,()=>{var n=e;return function(o,s,r){return--n<=0&&s(r),n>=0}},!0),this}until(e,n){return qo(this._ctx,function(o,s,r){return!e(o.value)||(s(r),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,o;return qo(this._ctx,function(s){return e(s.value)}),n=this._ctx,o=e,n.isMatch=Tt(n.isMatch,o),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(o,s){e(s.key,s)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(o,s){e(s.primaryKey,s)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var o=[];return this.each(function(s,r){o.push(r.key)}).then(function(){return o}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&Et(n,!0)&&n.limit>0)return this._read(s=>{var r=jn(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:r,range:n.range}})}).then(({result:s})=>s).then(e);n.keysOnly=!n.isMatch;var o=[];return this.each(function(s,r){o.push(r.primaryKey)}).then(function(){return o}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var o={};return qo(this._ctx,function(s){var r=s.primaryKey.toString(),a=me(o,r);return o[r]=!0,!a}),this}modify(e){var n=this._ctx;return this._write(o=>{var s;if(typeof e=="function")s=e;else{var r=ee(e),a=r.length;s=function(v){for(var x=!1,y=0;y<a;++y){var w=r[y],T=e[w];qe(v,w)!==T&&(be(v,w,T),x=!0)}return x}}const u=n.table.core,{outbound:d,extractKey:c}=u.schema.primaryKey,f=this.db._options.modifyChunkSize||200,p=[];let h=0;const g=[],_=(v,x)=>{const{failures:y,numFailures:w}=x;h+=v-w;for(let T of ee(y))p.push(y[T])};return this.clone().primaryKeys().then(v=>{const x=y=>{const w=Math.min(f,v.length-y);return u.getMany({trans:o,keys:v.slice(y,y+w),cache:"immutable"}).then(T=>{const b=[],C=[],S=d?[]:null,E=[];for(let I=0;I<w;++I){const M=T[I],F={value:An(M),primKey:v[y+I]};s.call(F,F.value,F)!==!1&&(F.value==null?E.push(v[y+I]):d||de(c(M),c(F.value))===0?(C.push(F.value),d&&S.push(v[y+I])):(E.push(v[y+I]),b.push(F.value)))}const N=Et(n)&&n.limit===1/0&&(typeof e!="function"||e===Ho)&&{index:n.index,range:n.range};return Promise.resolve(b.length>0&&u.mutate({trans:o,type:"add",values:b}).then(I=>{for(let M in I.failures)E.splice(parseInt(M),1);_(b.length,I)})).then(()=>(C.length>0||N&&typeof e=="object")&&u.mutate({trans:o,type:"put",keys:S,values:C,criteria:N,changeSpec:typeof e!="function"&&e}).then(I=>_(C.length,I))).then(()=>(E.length>0||N&&e===Ho)&&u.mutate({trans:o,type:"delete",keys:E,criteria:N}).then(I=>_(E.length,I))).then(()=>v.length>y+w&&x(y+f))})};return x(0).then(()=>{if(p.length>0)throw new ro("Error modifying one or more objects",p,h,g);return v.length})})})}delete(){var e=this._ctx,n=e.range;return Et(e)&&(e.isPrimKey&&!eh||n.type===3)?this._write(o=>{const{primaryKey:s}=e.table.core.schema,r=n;return e.table.core.count({trans:o,query:{index:s,range:r}}).then(a=>e.table.core.mutate({trans:o,type:"deleteRange",range:r}).then(({failures:u,lastResult:d,results:c,numFailures:f})=>{if(f)throw new ro("Could not delete some values",Object.keys(u).map(p=>u[p]),a-f);return a-f}))}):this.modify(Ho)}}const Ho=(t,e)=>e.value=null;function oh(t,e){return t<e?-1:t===e?0:1}function sh(t,e){return t>e?-1:t===e?0:1}function pe(t,e,n){var o=t instanceof Ul?new t.Collection(t):t;return o._ctx.error=n?new n(e):new TypeError(e),o}function St(t){return new t.Collection(t,()=>Fl("")).limit(0)}function rh(t,e,n,o,s,r){for(var a=Math.min(t.length,o.length),u=-1,d=0;d<a;++d){var c=e[d];if(c!==o[d])return s(t[d],n[d])<0?t.substr(0,d)+n[d]+n.substr(d+1):s(t[d],o[d])<0?t.substr(0,d)+o[d]+n.substr(d+1):u>=0?t.substr(0,u)+e[u]+n.substr(u+1):null;s(t[d],c)<0&&(u=d)}return a<o.length&&r==="next"?t+n.substr(t.length):a<t.length&&r==="prev"?t.substr(0,n.length):u<0?null:t.substr(0,u)+o[u]+n.substr(u+1)}function Vn(t,e,n,o){var s,r,a,u,d,c,f,p=n.length;if(!n.every(v=>typeof v=="string"))return pe(t,Rl);function h(v){s=function(y){return y==="next"?w=>w.toUpperCase():w=>w.toLowerCase()}(v),r=function(y){return y==="next"?w=>w.toLowerCase():w=>w.toUpperCase()}(v),a=v==="next"?oh:sh;var x=n.map(function(y){return{lower:r(y),upper:s(y)}}).sort(function(y,w){return a(y.lower,w.lower)});u=x.map(function(y){return y.upper}),d=x.map(function(y){return y.lower}),c=v,f=v==="next"?"":o}h("next");var g=new t.Collection(t,()=>Je(u[0],d[p-1]+o));g._ondirectionchange=function(v){h(v)};var _=0;return g._addAlgorithm(function(v,x,y){var w=v.key;if(typeof w!="string")return!1;var T=r(w);if(e(T,d,_))return!0;for(var b=null,C=_;C<p;++C){var S=rh(w,T,u[C],d[C],a,c);S===null&&b===null?_=C+1:(b===null||a(b,S)>0)&&(b=S)}return x(b!==null?function(){v.continue(b+f)}:y),!1}),g}function Je(t,e,n,o){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:o}}function Fl(t){return{type:1,lower:t,upper:t}}class Ul{get Collection(){return this._ctx.table.db.Collection}between(e,n,o,s){o=o!==!1,s=s===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(o||s)&&(!o||!s)?St(this):new this.Collection(this,()=>Je(e,n,!o,!s))}catch{return pe(this,Re)}}equals(e){return e==null?pe(this,Re):new this.Collection(this,()=>Fl(e))}above(e){return e==null?pe(this,Re):new this.Collection(this,()=>Je(e,void 0,!0))}aboveOrEqual(e){return e==null?pe(this,Re):new this.Collection(this,()=>Je(e,void 0,!1))}below(e){return e==null?pe(this,Re):new this.Collection(this,()=>Je(void 0,e,!1,!0))}belowOrEqual(e){return e==null?pe(this,Re):new this.Collection(this,()=>Je(void 0,e))}startsWith(e){return typeof e!="string"?pe(this,Rl):this.between(e,e+ct,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Vn(this,(n,o)=>n.indexOf(o[0])===0,[e],ct)}equalsIgnoreCase(e){return Vn(this,(n,o)=>n===o[0],[e],"")}anyOfIgnoreCase(){var e=Ue.apply(At,arguments);return e.length===0?St(this):Vn(this,(n,o)=>o.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Ue.apply(At,arguments);return e.length===0?St(this):Vn(this,(n,o)=>o.some(s=>n.indexOf(s)===0),e,ct)}anyOf(){const e=Ue.apply(At,arguments);let n=this._cmp;try{e.sort(n)}catch{return pe(this,Re)}if(e.length===0)return St(this);const o=new this.Collection(this,()=>Je(e[0],e[e.length-1]));o._ondirectionchange=r=>{n=r==="next"?this._ascending:this._descending,e.sort(n)};let s=0;return o._addAlgorithm((r,a,u)=>{const d=r.key;for(;n(d,e[s])>0;)if(++s,s===e.length)return a(u),!1;return n(d,e[s])===0||(a(()=>{r.continue(e[s])}),!1)}),o}notEqual(e){return this.inAnyRange([[cs,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Ue.apply(At,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return pe(this,Re)}const n=e.reduce((o,s)=>o?o.concat([[o[o.length-1][1],s]]):[[cs,s]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const o=this._cmp,s=this._ascending,r=this._descending,a=this._min,u=this._max;if(e.length===0)return St(this);if(!e.every(w=>w[0]!==void 0&&w[1]!==void 0&&s(w[0],w[1])<=0))return pe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",q.InvalidArgument);const d=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let f,p=s;function h(w,T){return p(w[0],T[0])}try{f=e.reduce(function(w,T){let b=0,C=w.length;for(;b<C;++b){const S=w[b];if(o(T[0],S[1])<0&&o(T[1],S[0])>0){S[0]=a(S[0],T[0]),S[1]=u(S[1],T[1]);break}}return b===C&&w.push(T),w},[]),f.sort(h)}catch{return pe(this,Re)}let g=0;const _=c?w=>s(w,f[g][1])>0:w=>s(w,f[g][1])>=0,v=d?w=>r(w,f[g][0])>0:w=>r(w,f[g][0])>=0;let x=_;const y=new this.Collection(this,()=>Je(f[0][0],f[f.length-1][1],!d,!c));return y._ondirectionchange=w=>{w==="next"?(x=_,p=s):(x=v,p=r),f.sort(h)},y._addAlgorithm((w,T,b)=>{for(var C=w.key;x(C);)if(++g,g===f.length)return T(b),!1;return!!function(S){return!_(S)&&!v(S)}(C)||(this._cmp(C,f[g][1])===0||this._cmp(C,f[g][0])===0||T(()=>{p===s?w.continue(f[g][0]):w.continue(f[g][1])}),!1)}),y}startsWithAnyOf(){const e=Ue.apply(At,arguments);return e.every(n=>typeof n=="string")?e.length===0?St(this):this.inAnyRange(e.map(n=>[n,n+ct])):pe(this,"startsWithAnyOf() only works with strings")}}function Ie(t){return j(function(e){return wn(e),t(e.target.error),!1})}function wn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Tn="storagemutated",Ye="x-storagemutated-1",it=hn(null,Tn);class ih{_lock(){return rn(!G.global),++this._reculock,this._reculock!==1||G.global||(G.lockOwnerFor=this),this}_unlock(){if(rn(!G.global),--this._reculock==0)for(G.global||(G.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Qt(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&G.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,o=this.db._state.dbOpenError;if(rn(!this.idbtrans),!e&&!n)switch(o&&o.name){case"DatabaseClosedError":throw new q.DatabaseClosed(o);case"MissingAPIError":throw new q.MissingAPI(o.message,o);default:throw new q.OpenFailed(o)}if(!this.active)throw new q.TransactionInactive;return rn(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=j(s=>{wn(s),this._reject(e.error)}),e.onabort=j(s=>{wn(s),this.active&&this._reject(new q.Abort(e.error)),this.active=!1,this.on("abort").fire(s)}),e.oncomplete=j(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&it.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,o){if(e==="readwrite"&&this.mode!=="readwrite")return te(new q.ReadOnly("Transaction is readonly"));if(!this.active)return te(new q.TransactionInactive);if(this._locked())return new U((r,a)=>{this._blockedFuncs.push([()=>{this._promise(e,n,o).then(r,a)},G])});if(o)return st(()=>{var r=new U((a,u)=>{this._lock();const d=n(a,u,this);d&&d.then&&d.then(a,u)});return r.finally(()=>this._unlock()),r._lib=!0,r});var s=new U((r,a)=>{var u=n(r,a,this);u&&u.then&&u.then(r,a)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const o=U.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>o);else{n._waitingFor=o,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=a)})()}var r=n._waitingFor;return new U((a,u)=>{o.then(d=>n._waitingQueue.push(j(a.bind(null,d))),d=>n._waitingQueue.push(j(u.bind(null,d)))).finally(()=>{n._waitingFor===r&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new q.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(me(n,e))return n[e];const o=this.schema[e];if(!o)throw new q.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,o,this);return s.core=this.db.core.table(e),n[e]=s,s}}function ds(t,e,n,o,s,r,a){return{name:t,keyPath:e,unique:n,multi:o,auto:s,compound:r,src:(n&&!a?"&":"")+(o?"*":"")+(s?"++":"")+Ll(e)}}function Ll(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Gl(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:ml(n,o=>[o.name,o])}}let bn=t=>{try{return t.only([[]]),bn=()=>[[]],[[]]}catch{return bn=()=>ct,ct}};function fs(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?o=>o[e]:o=>qe(o,e)}(t):e=>qe(e,t)}function Yr(t){return[].slice.call(t)}let ah=0;function pn(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function lh(t,e,n){function o(d){if(d.type===3)return null;if(d.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:f,lowerOpen:p,upperOpen:h}=d;return c===void 0?f===void 0?null:e.upperBound(f,!!h):f===void 0?e.lowerBound(c,!!p):e.bound(c,f,!!p,!!h)}const{schema:s,hasGetAll:r}=function(d,c){const f=Yr(d.objectStoreNames);return{schema:{name:d.name,tables:f.map(p=>c.objectStore(p)).map(p=>{const{keyPath:h,autoIncrement:g}=p,_=ie(h),v=h==null,x={},y={name:p.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:v,compound:_,keyPath:h,autoIncrement:g,unique:!0,extractKey:fs(h)},indexes:Yr(p.indexNames).map(w=>p.index(w)).map(w=>{const{name:T,unique:b,multiEntry:C,keyPath:S}=w,E={name:T,compound:ie(S),keyPath:S,unique:b,multiEntry:C,extractKey:fs(S)};return x[pn(S)]=E,E}),getIndexByKeyPath:w=>x[pn(w)]};return x[":id"]=y.primaryKey,h!=null&&(x[pn(h)]=y.primaryKey),y})},hasGetAll:f.length>0&&"getAll"in c.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),a=s.tables.map(d=>function(c){const f=c.name;return{name:f,schema:c,mutate:function({trans:p,type:h,keys:g,values:_,range:v}){return new Promise((x,y)=>{x=j(x);const w=p.objectStore(f),T=w.keyPath==null,b=h==="put"||h==="add";if(!b&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:C}=g||_||{length:1};if(g&&_&&g.length!==_.length)throw new Error("Given keys array must have same length as given values array.");if(C===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});let S;const E=[],N=[];let I=0;const M=Y=>{++I,wn(Y)};if(h==="deleteRange"){if(v.type===4)return x({numFailures:I,failures:N,results:[],lastResult:void 0});v.type===3?E.push(S=w.clear()):E.push(S=w.delete(o(v)))}else{const[Y,O]=b?T?[_,g]:[_,null]:[g,null];if(b)for(let K=0;K<C;++K)E.push(S=O&&O[K]!==void 0?w[h](Y[K],O[K]):w[h](Y[K])),S.onerror=M;else for(let K=0;K<C;++K)E.push(S=w[h](Y[K])),S.onerror=M}const F=Y=>{const O=Y.target.result;E.forEach((K,L)=>K.error!=null&&(N[L]=K.error)),x({numFailures:I,failures:N,results:h==="delete"?g:E.map(K=>K.result),lastResult:O})};S.onerror=Y=>{M(Y),F(Y)},S.onsuccess=F})},getMany:({trans:p,keys:h})=>new Promise((g,_)=>{g=j(g);const v=p.objectStore(f),x=h.length,y=new Array(x);let w,T=0,b=0;const C=E=>{const N=E.target;y[N._pos]=N.result,++b===T&&g(y)},S=Ie(_);for(let E=0;E<x;++E)h[E]!=null&&(w=v.get(h[E]),w._pos=E,w.onsuccess=C,w.onerror=S,++T);T===0&&g(y)}),get:({trans:p,key:h})=>new Promise((g,_)=>{g=j(g);const v=p.objectStore(f).get(h);v.onsuccess=x=>g(x.target.result),v.onerror=Ie(_)}),query:function(p){return h=>new Promise((g,_)=>{g=j(g);const{trans:v,values:x,limit:y,query:w}=h,T=y===1/0?void 0:y,{index:b,range:C}=w,S=v.objectStore(f),E=b.isPrimaryKey?S:S.index(b.name),N=o(C);if(y===0)return g({result:[]});if(p){const I=x?E.getAll(N,T):E.getAllKeys(N,T);I.onsuccess=M=>g({result:M.target.result}),I.onerror=Ie(_)}else{let I=0;const M=x||!("openKeyCursor"in E)?E.openCursor(N):E.openKeyCursor(N),F=[];M.onsuccess=Y=>{const O=M.result;return O?(F.push(x?O.value:O.primaryKey),++I===y?g({result:F}):void O.continue()):g({result:F})},M.onerror=Ie(_)}})}(r),openCursor:function({trans:p,values:h,query:g,reverse:_,unique:v}){return new Promise((x,y)=>{x=j(x);const{index:w,range:T}=g,b=p.objectStore(f),C=w.isPrimaryKey?b:b.index(w.name),S=_?v?"prevunique":"prev":v?"nextunique":"next",E=h||!("openKeyCursor"in C)?C.openCursor(o(T),S):C.openKeyCursor(o(T),S);E.onerror=Ie(y),E.onsuccess=j(N=>{const I=E.result;if(!I)return void x(null);I.___id=++ah,I.done=!1;const M=I.continue.bind(I);let F=I.continuePrimaryKey;F&&(F=F.bind(I));const Y=I.advance.bind(I),O=()=>{throw new Error("Cursor not stopped")};I.trans=p,I.stop=I.continue=I.continuePrimaryKey=I.advance=()=>{throw new Error("Cursor not started")},I.fail=j(y),I.next=function(){let K=1;return this.start(()=>K--?this.continue():this.stop()).then(()=>this)},I.start=K=>{const L=new Promise((P,H)=>{P=j(P),E.onerror=Ie(H),I.fail=H,I.stop=ge=>{I.stop=I.continue=I.continuePrimaryKey=I.advance=O,P(ge)}}),k=()=>{if(E.result)try{K()}catch(P){I.fail(P)}else I.done=!0,I.start=()=>{throw new Error("Cursor behind last entry")},I.stop()};return E.onsuccess=j(P=>{E.onsuccess=k,k()}),I.continue=M,I.continuePrimaryKey=F,I.advance=Y,k(),L},x(I)},y)})},count({query:p,trans:h}){const{index:g,range:_}=p;return new Promise((v,x)=>{const y=h.objectStore(f),w=g.isPrimaryKey?y:y.index(g.name),T=o(_),b=T?w.count(T):w.count();b.onsuccess=j(C=>v(C.target.result)),b.onerror=Ie(x)})}}}(d)),u={};return a.forEach(d=>u[d.name]=d),{stack:"dbcore",transaction:t.transaction.bind(t),table(d){if(!u[d])throw new Error(`Table '${d}' not found`);return u[d]},MIN_KEY:-1/0,MAX_KEY:bn(e),schema:s}}function hs({_novip:t},e){const n=e.db,o=function(s,r,{IDBKeyRange:a,indexedDB:u},d){return{dbcore:function(f,p){return p.reduce((h,{create:g})=>({...h,...g(h)}),f)}(lh(r,a,d),s.dbcore)}}(t._middlewares,n,t._deps,e);t.core=o.dbcore,t.tables.forEach(s=>{const r=s.name;t.core.schema.tables.some(a=>a.name===r)&&(s.core=t.core.table(r),t[r]instanceof t.Table&&(t[r].core=s.core))})}function co({_novip:t},e,n,o){n.forEach(s=>{const r=o[s];e.forEach(a=>{const u=Hs(a,s);(!u||"value"in u&&u.value===void 0)&&(a===t.Transaction.prototype||a instanceof t.Transaction?Ge(a,s,{get(){return this.table(s)},set(d){fl(this,s,{value:d,writable:!0,configurable:!0,enumerable:!0})}}):a[s]=new t.Table(s,r))})})}function ps({_novip:t},e){e.forEach(n=>{for(let o in n)n[o]instanceof t.Table&&delete n[o]})}function uh(t,e){return t._cfg.version-e._cfg.version}function ch(t,e,n,o){const s=t._dbSchema,r=t._createTransaction("readwrite",t._storeNames,s);r.create(n),r._completion.catch(o);const a=r._reject.bind(r),u=G.transless||G;st(()=>{G.trans=r,G.transless=u,e===0?(ee(s).forEach(d=>{Bo(n,d,s[d].primKey,s[d].indexes)}),hs(t,n),U.follow(()=>t.on.populate.fire(r)).catch(a)):function({_novip:d},c,f,p){const h=[],g=d._versions;let _=d._dbSchema=gs(d,d.idbdb,p),v=!1;const x=g.filter(w=>w._cfg.version>=c);function y(){return h.length?U.resolve(h.shift()(f.idbtrans)).then(y):U.resolve()}return x.forEach(w=>{h.push(()=>{const T=_,b=w._cfg.dbschema;ys(d,T,p),ys(d,b,p),_=d._dbSchema=b;const C=ql(T,b);C.add.forEach(E=>{Bo(p,E[0],E[1].primKey,E[1].indexes)}),C.change.forEach(E=>{if(E.recreate)throw new q.Upgrade("Not yet support for changing primary key");{const N=p.objectStore(E.name);E.add.forEach(I=>ms(N,I)),E.change.forEach(I=>{N.deleteIndex(I.name),ms(N,I)}),E.del.forEach(I=>N.deleteIndex(I))}});const S=w._cfg.contentUpgrade;if(S&&w._cfg.version>c){hs(d,p),f._memoizedTables={},v=!0;let E=gl(b);C.del.forEach(F=>{E[F]=T[F]}),ps(d,[d.Transaction.prototype]),co(d,[d.Transaction.prototype],ee(E),E),f.schema=E;const N=Bs(S);let I;N&&Yt();const M=U.follow(()=>{if(I=S(f),I&&N){var F=Ve.bind(null,null);I.then(F,F)}});return I&&typeof I.then=="function"?U.resolve(I):M.then(()=>I)}}),h.push(T=>{(!v||!Zf)&&function(b,C){[].slice.call(C.db.objectStoreNames).forEach(S=>b[S]==null&&C.db.deleteObjectStore(S))}(w._cfg.dbschema,T),ps(d,[d.Transaction.prototype]),co(d,[d.Transaction.prototype],d._storeNames,d._dbSchema),f.schema=d._dbSchema})}),y().then(()=>{var w,T;T=p,ee(w=_).forEach(b=>{T.db.objectStoreNames.contains(b)||Bo(T,b,w[b].primKey,w[b].indexes)})})}(t,e,r,n).catch(a)})}function ql(t,e){const n={del:[],add:[],change:[]};let o;for(o in t)e[o]||n.del.push(o);for(o in e){const s=t[o],r=e[o];if(s){const a={name:o,def:r,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(r.primKey.keyPath||"")||s.primKey.auto!==r.primKey.auto&&!Co)a.recreate=!0,n.change.push(a);else{const u=s.idxByName,d=r.idxByName;let c;for(c in u)d[c]||a.del.push(c);for(c in d){const f=u[c],p=d[c];f?f.src!==p.src&&a.change.push(p):a.add.push(p)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([o,r])}return n}function Bo(t,e,n,o){const s=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return o.forEach(r=>ms(s,r)),s}function ms(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function gs(t,e,n){const o={};return so(e.objectStoreNames,0).forEach(s=>{const r=n.objectStore(s);let a=r.keyPath;const u=ds(Ll(a),a||"",!1,!1,!!r.autoIncrement,a&&typeof a!="string",!0),d=[];for(let f=0;f<r.indexNames.length;++f){const p=r.index(r.indexNames[f]);a=p.keyPath;var c=ds(p.name,a,!!p.unique,!!p.multiEntry,!1,a&&typeof a!="string",!1);d.push(c)}o[s]=Gl(s,u,d)}),o}function ys({_novip:t},e,n){const o=n.db.objectStoreNames;for(let s=0;s<o.length;++s){const r=o[s],a=n.objectStore(r);t._hasGetAll="getAll"in a;for(let u=0;u<a.indexNames.length;++u){const d=a.indexNames[u],c=a.index(d).keyPath,f=typeof c=="string"?c:"["+so(c).join("+")+"]";if(e[r]){const p=e[r].idxByName[f];p&&(p.name=d,delete e[r].idxByName[f],e[r].idxByName[d]=p)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&X.WorkerGlobalScope&&X instanceof X.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class dh{_parseStoresSpec(e,n){ee(e).forEach(o=>{if(e[o]!==null){var s=e[o].split(",").map((a,u)=>{const d=(a=a.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return ds(d,c||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),ie(c),u===0)}),r=s.shift();if(r.multi)throw new q.Schema("Primary key cannot be multi-valued");s.forEach(a=>{if(a.auto)throw new q.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new q.Schema("Index must have a name and cannot be an empty string")}),n[o]=Gl(o,r,s)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?fe(this._cfg.storesSource,e):e;const o=n._versions,s={};let r={};return o.forEach(a=>{fe(s,a._cfg.storesSource),r=a._cfg.dbschema={},a._parseStoresSpec(s,r)}),n._dbSchema=r,ps(n,[n._allTables,n,n.Transaction.prototype]),co(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ee(r),r),n._storeNames=ee(r),this}upgrade(e){return this._cfg.contentUpgrade=Ks(this._cfg.contentUpgrade||Q,e),this}}function Ys(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new xt(Eo,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Qs(t){return t&&typeof t.databases=="function"}function vs(t){return st(function(){return G.letThrough=!0,t()})}function fh(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function hh(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?te(e.dbOpenError):t);Pe&&(e.openCanceller._stackHolder=bt()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const o=e.openCanceller;function s(){if(e.openCanceller!==o)throw new q.DatabaseClosed("db.open() was cancelled")}let r=e.dbReadyResolve,a=null,u=!1;const d=()=>new U((c,f)=>{if(s(),!n)throw new q.MissingAPI;const p=t.name,h=e.autoSchema?n.open(p):n.open(p,Math.round(10*t.verno));if(!h)throw new q.MissingAPI;h.onerror=Ie(f),h.onblocked=j(t._fireOnBlocked),h.onupgradeneeded=j(g=>{if(a=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=wn,a.abort(),h.result.close();const v=n.deleteDatabase(p);v.onsuccess=v.onerror=j(()=>{f(new q.NoSuchDatabase(`Database ${p} doesnt exist`))})}else{a.onerror=Ie(f);var _=g.oldVersion>Math.pow(2,62)?0:g.oldVersion;u=_<1,t._novip.idbdb=h.result,ch(t,_/10,a,f)}},f),h.onsuccess=j(()=>{a=null;const g=t._novip.idbdb=h.result,_=so(g.objectStoreNames);if(_.length>0)try{const x=g.transaction((v=_).length===1?v[0]:v,"readonly");e.autoSchema?function({_novip:y},w,T){y.verno=w.version/10;const b=y._dbSchema=gs(0,w,T);y._storeNames=so(w.objectStoreNames,0),co(y,[y._allTables],ee(b),b)}(t,g,x):(ys(t,t._dbSchema,x),function(y,w){const T=ql(gs(0,y.idbdb,w),y._dbSchema);return!(T.add.length||T.change.some(b=>b.add.length||b.change.length))}(t,x)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),hs(t,x)}catch{}var v;fn.push(t),g.onversionchange=j(x=>{e.vcFired=!0,t.on("versionchange").fire(x)}),g.onclose=j(x=>{t.on("close").fire(x)}),u&&function({indexedDB:x,IDBKeyRange:y},w){!Qs(x)&&w!==Eo&&Ys(x,y).put({name:w}).catch(Q)}(t._deps,p),c()},f)}).catch(c=>c&&c.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d()):U.reject(c));return U.race([o,(typeof navigator>"u"?U.resolve():fh()).then(d)]).then(()=>(s(),e.onReadyBeingFired=[],U.resolve(vs(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let f=e.onReadyBeingFired.reduce(Ks,Q);return e.onReadyBeingFired=[],U.resolve(vs(()=>f(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{a&&a.abort()}catch{}return o===e.openCanceller&&t._close(),te(c)}).finally(()=>{e.openComplete=!0,r()})}function xs(t){var e=r=>t.next(r),n=s(e),o=s(r=>t.throw(r));function s(r){return a=>{var u=r(a),d=u.value;return u.done?d:d&&typeof d.then=="function"?d.then(n,o):ie(d)?Promise.all(d).then(n,o):n(d)}}return s(e)()}function ph(t,e,n){var o=arguments.length;if(o<2)throw new q.InvalidArgument("Too few arguments");for(var s=new Array(o-1);--o;)s[o-1]=arguments[o];return n=s.pop(),[t,yl(s),n]}function Vl(t,e,n,o,s){return U.resolve().then(()=>{const r=G.transless||G,a=t._createTransaction(e,n,t._dbSchema,o),u={trans:a,transless:r};if(o)a.idbtrans=o.idbtrans;else try{a.create(),t._state.PR1398_maxLoop=3}catch(p){return p.name===Os.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Vl(t,e,n,null,s))):te(p)}const d=Bs(s);let c;d&&Yt();const f=U.follow(()=>{if(c=s.call(a,a),c)if(d){var p=Ve.bind(null,null);c.then(p,p)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=xs(c))},u);return(c&&typeof c.then=="function"?U.resolve(c).then(p=>a.active?p:te(new q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):f.then(()=>c)).then(p=>(o&&a._resolve(),a._completion.then(()=>p))).catch(p=>(a._reject(p),te(p)))})}function Hn(t,e,n){const o=ie(t)?t.slice():[t];for(let s=0;s<n;++s)o.push(e);return o}const mh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:o}=n,s={},r=[];function a(f,p,h){const g=pn(f),_=s[g]=s[g]||[],v=f==null?0:typeof f=="string"?1:f.length,x=p>0,y={...h,isVirtual:x,keyTail:p,keyLength:v,extractKey:fs(f),unique:!x&&h.unique};return _.push(y),y.isPrimaryKey||r.push(y),v>1&&a(v===2?f[0]:f.slice(0,v-1),p+1,h),_.sort((w,T)=>w.keyTail-T.keyTail),y}const u=a(o.primaryKey.keyPath,0,o.primaryKey);s[":id"]=[u];for(const f of o.indexes)a(f.keyPath,0,f);function d(f){const p=f.query.index;return p.isVirtual?{...f,query:{index:p,range:(h=f.query.range,g=p.keyTail,{type:h.type===1?2:h.type,lower:Hn(h.lower,h.lowerOpen?t.MAX_KEY:t.MIN_KEY,g),lowerOpen:!0,upper:Hn(h.upper,h.upperOpen?t.MIN_KEY:t.MAX_KEY,g),upperOpen:!0})}}:f;var h,g}return{...n,schema:{...o,primaryKey:u,indexes:r,getIndexByKeyPath:function(f){const p=s[pn(f)];return p&&p[0]}},count:f=>n.count(d(f)),query:f=>n.query(d(f)),openCursor(f){const{keyTail:p,isVirtual:h,keyLength:g}=f.query.index;return h?n.openCursor(d(f)).then(_=>_&&function(v){return Object.create(v,{continue:{value:function(y){y!=null?v.continue(Hn(y,f.reverse?t.MAX_KEY:t.MIN_KEY,p)):f.unique?v.continue(v.key.slice(0,g).concat(f.reverse?t.MIN_KEY:t.MAX_KEY,p)):v.continue()}},continuePrimaryKey:{value(y,w){v.continuePrimaryKey(Hn(y,t.MAX_KEY,p),w)}},primaryKey:{get:()=>v.primaryKey},key:{get(){const y=v.key;return g===1?y[0]:y.slice(0,g)}},value:{get:()=>v.value}})}(_)):n.openCursor(f)}}}}}};function Xs(t,e,n,o){return n=n||{},o=o||"",ee(t).forEach(s=>{if(me(e,s)){var r=t[s],a=e[s];if(typeof r=="object"&&typeof a=="object"&&r&&a){const u=jo(r);u!==jo(a)?n[o+s]=e[s]:u==="Object"?Xs(r,a,n,o+s+"."):r!==a&&(n[o+s]=e[s])}else r!==a&&(n[o+s]=e[s])}else n[o+s]=void 0}),ee(e).forEach(s=>{me(t,s)||(n[o+s]=e[s])}),n}const gh={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:o}=n.schema;return{...n,mutate(r){const a=G.trans,{deleting:u,creating:d,updating:c}=a.table(e).hook;switch(r.type){case"add":if(d.fire===Q)break;return a._promise("readwrite",()=>f(r),!0);case"put":if(d.fire===Q&&c.fire===Q)break;return a._promise("readwrite",()=>f(r),!0);case"delete":if(u.fire===Q)break;return a._promise("readwrite",()=>f(r),!0);case"deleteRange":if(u.fire===Q)break;return a._promise("readwrite",()=>function(h){return p(h.trans,h.range,1e4)}(r),!0)}return n.mutate(r);function f(h){const g=G.trans,_=h.keys||function(v,x){return x.type==="delete"?x.keys:x.keys||x.values.map(v.extractKey)}(o,h);if(!_)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:_}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(v,x,y){return x.type==="add"?Promise.resolve([]):v.getMany({trans:x.trans,keys:y,cache:"immutable"})}(n,h,_).then(v=>{const x=_.map((y,w)=>{const T=v[w],b={onerror:null,onsuccess:null};if(h.type==="delete")u.fire.call(b,y,T,g);else if(h.type==="add"||T===void 0){const C=d.fire.call(b,y,h.values[w],g);y==null&&C!=null&&(y=C,h.keys[w]=y,o.outbound||be(h.values[w],o.keyPath,y))}else{const C=Xs(T,h.values[w]),S=c.fire.call(b,C,y,T,g);if(S){const E=h.values[w];Object.keys(S).forEach(N=>{me(E,N)?E[N]=S[N]:be(E,N,S[N])})}}return b});return n.mutate(h).then(({failures:y,results:w,numFailures:T,lastResult:b})=>{for(let C=0;C<_.length;++C){const S=w?w[C]:_[C],E=x[C];S==null?E.onerror&&E.onerror(y[C]):E.onsuccess&&E.onsuccess(h.type==="put"&&v[C]?h.values[C]:S)}return{failures:y,results:w,numFailures:T,lastResult:b}}).catch(y=>(x.forEach(w=>w.onerror&&w.onerror(y)),Promise.reject(y)))})}function p(h,g,_){return n.query({trans:h,values:!1,query:{index:o,range:g},limit:_}).then(({result:v})=>f({type:"delete",keys:v,trans:h}).then(x=>x.numFailures>0?Promise.reject(x.failures[0]):v.length<_?{failures:[],numFailures:0,lastResult:void 0}:p(h,{...g,lower:v[v.length-1],lowerOpen:!0},_)))}}}}})};function Hl(t,e,n){try{if(!e||e.keys.length<t.length)return null;const o=[];for(let s=0,r=0;s<e.keys.length&&r<t.length;++s)de(e.keys[s],t[r])===0&&(o.push(n?An(e.values[s]):e.values[s]),++r);return o.length===t.length?o:null}catch{return null}}const yh={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:o=>{if(!o.cache)return n.getMany(o);const s=Hl(o.keys,o.trans._cache,o.cache==="clone");return s?U.resolve(s):n.getMany(o).then(r=>(o.trans._cache={keys:o.keys,values:o.cache==="clone"?An(r):r},r))},mutate:o=>(o.type!=="add"&&(o.trans._cache=null),n.mutate(o))}}})};function js(t){return!("from"in t)}const De=function(t,e){if(!this){const n=new De;return t&&"d"in t&&fe(n,t),n}fe(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Cn(t,e,n){const o=de(e,n);if(isNaN(o))return;if(o>0)throw RangeError();if(js(t))return fe(t,{from:e,to:n,d:1});const s=t.l,r=t.r;if(de(n,t.from)<0)return s?Cn(s,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Qr(t);if(de(e,t.to)>0)return r?Cn(r,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Qr(t);de(e,t.from)<0&&(t.from=e,t.l=null,t.d=r?r.d+1:1),de(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const a=!t.r;s&&!t.l&&fo(t,s),r&&a&&fo(t,r)}function fo(t,e){js(e)||function n(o,{from:s,to:r,l:a,r:u}){Cn(o,s,r),a&&n(o,a),u&&n(o,u)}(t,e)}function vh(t,e){const n=_s(e);let o=n.next();if(o.done)return!1;let s=o.value;const r=_s(t);let a=r.next(s.from),u=a.value;for(;!o.done&&!a.done;){if(de(u.from,s.to)<=0&&de(u.to,s.from)>=0)return!0;de(s.from,u.from)<0?s=(o=n.next(u.from)).value:u=(a=r.next(s.from)).value}return!1}function _s(t){let e=js(t)?null:{s:0,n:t};return{next(n){const o=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,o)for(;e.n.l&&de(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!o||de(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Qr(t){var e,n;const o=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),s=o>1?"r":o<-1?"l":"";if(s){const r=s==="r"?"l":"r",a={...t},u=t[s];t.from=u.from,t.to=u.to,t[s]=u[s],a[s]=u[r],t[r]=a,a.d=Xr(a)}t.d=Xr(t)}function Xr({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}Wt(De.prototype,{add(t){return fo(this,t),this},addKey(t){return Cn(this,t,t),this},addKeys(t){return t.forEach(e=>Cn(this,e,e)),this},[Zo](){return _s(this)}});const xh={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new De(t.MIN_KEY,t.MAX_KEY);return{...t,table:o=>{const s=t.table(o),{schema:r}=s,{primaryKey:a}=r,{extractKey:u,outbound:d}=a,c={...s,mutate:h=>{const g=h.trans,_=g.mutatedParts||(g.mutatedParts={}),v=S=>{const E=`idb://${e}/${o}/${S}`;return _[E]||(_[E]=new De)},x=v(""),y=v(":dels"),{type:w}=h;let[T,b]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const C=h.trans._cache;return s.mutate(h).then(S=>{if(ie(T)){w!=="delete"&&(T=S.results),x.addKeys(T);const E=Hl(T,C);E||w==="add"||y.addKeys(T),(E||b)&&function(N,I,M,F){function Y(O){const K=N(O.name||"");function L(P){return P!=null?O.extractKey(P):null}const k=P=>O.multiEntry&&ie(P)?P.forEach(H=>K.addKey(H)):K.addKey(P);(M||F).forEach((P,H)=>{const ge=M&&L(M[H]),en=F&&L(F[H]);de(ge,en)!==0&&(ge!=null&&k(ge),en!=null&&k(en))})}I.indexes.forEach(Y)}(v,r,E,b)}else if(T){const E={from:T.lower,to:T.upper};y.add(E),x.add(E)}else x.add(n),y.add(n),r.indexes.forEach(E=>v(E.name).add(n));return S})}},f=({query:{index:h,range:g}})=>{var _,v;return[h,new De((_=g.lower)!==null&&_!==void 0?_:t.MIN_KEY,(v=g.upper)!==null&&v!==void 0?v:t.MAX_KEY)]},p={get:h=>[a,new De(h.key)],getMany:h=>[a,new De().addKeys(h.keys)],count:f,query:f,openCursor:f};return ee(p).forEach(h=>{c[h]=function(g){const{subscr:_}=G;if(_){const v=b=>{const C=`idb://${e}/${o}/${b}`;return _[C]||(_[C]=new De)},x=v(""),y=v(":dels"),[w,T]=p[h](g);if(v(w.name||"").add(T),!w.isPrimaryKey){if(h!=="count"){const b=h==="query"&&d&&g.values&&s.query({...g,values:!1});return s[h].apply(this,arguments).then(C=>{if(h==="query"){if(d&&g.values)return b.then(({result:E})=>(x.addKeys(E),C));const S=g.values?C.result.map(u):C.result;g.values?x.addKeys(S):y.addKeys(S)}else if(h==="openCursor"){const S=C,E=g.values;return S&&Object.create(S,{key:{get:()=>(y.addKey(S.primaryKey),S.key)},primaryKey:{get(){const N=S.primaryKey;return y.addKey(N),N}},value:{get:()=>(E&&x.addKey(S.primaryKey),S.value)}})}return C})}y.add(n)}}return s[h].apply(this,arguments)}}),c}}}};class xt{constructor(e,n){this._middlewares={},this.verno=0;const o=xt.dependencies;this._options=n={addons:xt.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const r={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Q,dbReadyPromise:null,cancelOpen:Q,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;r.dbReadyPromise=new U(u=>{r.dbReadyResolve=u}),r.openCanceller=new U((u,d)=>{r.cancelOpen=d}),this._state=r,this.name=e,this.on=hn(this,"populate","blocked","versionchange","close",{ready:[Ks,Q]}),this.on.ready.subscribe=hl(this.on.ready.subscribe,u=>(d,c)=>{xt.vip(()=>{const f=this._state;if(f.openComplete)f.dbOpenError||U.resolve().then(d),c&&u(d);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(d),c&&u(d);else{u(d);const p=this;c||u(function h(){p.on.ready.unsubscribe(d),p.on.ready.unsubscribe(h)})}})}),this.Collection=(a=this,tn(nh.prototype,function(u,d){this.db=a;let c=Dl,f=null;if(d)try{c=d()}catch(_){f=_}const p=u._ctx,h=p.table,g=h.hook.reading.fire;this._ctx={table:h,index:p.index,isPrimKey:!p.index||h.schema.primKey.keyPath&&p.index===h.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:p.or,valueMapper:g!==xn?g:null}})),this.Table=function(u){return tn(th.prototype,function(d,c,f){this.db=u,this._tx=f,this.name=d,this.schema=c,this.hook=u._allTables[d]?u._allTables[d].hook:hn(null,{creating:[$f,Q],reading:[Bf,xn],updating:[Kf,Q],deleting:[Of,Q]})})}(this),this.Transaction=function(u){return tn(ih.prototype,function(d,c,f,p,h){this.db=u,this.mode=d,this.storeNames=c,this.schema=f,this.chromeTransactionDurability=p,this.idbtrans=null,this.on=hn(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new U((g,_)=>{this._resolve=g,this._reject=_}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},g=>{var _=this.active;return this.active=!1,this.on.error.fire(g),this.parent?this.parent._reject(g):_&&this.idbtrans&&this.idbtrans.abort(),te(g)})})}(this),this.Version=function(u){return tn(dh.prototype,function(d){this.db=u,this._cfg={version:d,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(u){return tn(Ul.prototype,function(d,c,f){this.db=u,this._ctx={table:d,index:c===":id"?null:c,or:f};const p=u._deps.indexedDB;if(!p)throw new q.MissingAPI;this._cmp=this._ascending=p.cmp.bind(p),this._descending=(h,g)=>p.cmp(g,h),this._max=(h,g)=>p.cmp(h,g)>0?h:g,this._min=(h,g)=>p.cmp(h,g)<0?h:g,this._IDBKeyRange=u._deps.IDBKeyRange})}(this),this.on("versionchange",u=>{u.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",u=>{!u.newVersion||u.newVersion<u.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${u.oldVersion/10}`)}),this._maxKey=bn(n.IDBKeyRange),this._createTransaction=(u,d,c,f)=>new this.Transaction(u,d,c,this._options.chromeTransactionDurability,f),this._fireOnBlocked=u=>{this.on("blocked").fire(u),fn.filter(d=>d.name===this.name&&d!==this&&!d._state.vcFired).map(d=>d.on("versionchange").fire(u))},this.use(mh),this.use(gh),this.use(xh),this.use(yh),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(u=>u(this))}version(e){if(isNaN(e)||e<.1)throw new q.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var o=n.filter(s=>s._cfg.version===e)[0];return o||(o=new this.Version(e),n.push(o),n.sort(uh),o.stores({}),this._state.autoSchema=!1,o)}_whenReady(e){return this.idbdb&&(this._state.openComplete||G.letThrough||this._vip)?e():new U((n,o)=>{if(this._state.openComplete)return o(new q.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void o(new q.DatabaseClosed);this.open().catch(Q)}this._state.dbReadyPromise.then(n,o)}).then(e)}use({stack:e,create:n,level:o,name:s}){s&&this.unuse({stack:e,name:s});const r=this._middlewares[e]||(this._middlewares[e]=[]);return r.push({stack:e,create:n,level:o??10,name:s}),r.sort((a,u)=>a.level-u.level),this}unuse({stack:e,name:n,create:o}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(s=>o?s.create!==o:!!n&&s.name!==n)),this}open(){return hh(this)}_close(){const e=this._state,n=fn.indexOf(this);if(n>=0&&fn.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new U(o=>{e.dbReadyResolve=o}),e.openCanceller=new U((o,s)=>{e.cancelOpen=s})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new q.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new U((o,s)=>{const r=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=j(()=>{(function({indexedDB:u,IDBKeyRange:d},c){!Qs(u)&&c!==Eo&&Ys(u,d).delete(c).catch(Q)})(this._deps,this.name),o()}),a.onerror=Ie(s),a.onblocked=this._fireOnBlocked};if(e)throw new q.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(r):r()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ee(this._allTables).map(e=>this._allTables[e])}transaction(){const e=ph.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,o){let s=G.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const r=e.indexOf("?")!==-1;let a,u;e=e.replace("!","").replace("?","");try{if(u=n.map(c=>{var f=c instanceof this.Table?c.name:c;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),e=="r"||e===Lo)a=Lo;else{if(e!="rw"&&e!=Go)throw new q.InvalidArgument("Invalid transaction mode: "+e);a=Go}if(s){if(s.mode===Lo&&a===Go){if(!r)throw new q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&u.forEach(c=>{if(s&&s.storeNames.indexOf(c)===-1){if(!r)throw new q.SubTransaction("Table "+c+" not included in parent transaction.");s=null}}),r&&s&&!s.active&&(s=null)}}catch(c){return s?s._promise(null,(f,p)=>{p(c)}):te(c)}const d=Vl.bind(null,this,a,u,s,o);return s?s._promise(a,d,"lock"):G.trans?Qt(G.transless,()=>this._whenReady(d)):this._whenReady(d)}table(e){if(!me(this._allTables,e))throw new q.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const _h=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class wh{constructor(e){this._subscribe=e}subscribe(e,n,o){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:o})}[_h](){return this}}function Bl(t,e){return ee(e).forEach(n=>{fo(t[n]||(t[n]=new De),e[n])}),t}function Th(t){let e,n=!1;const o=new wh(s=>{const r=Bs(t);let a=!1,u={},d={};const c={get closed(){return a},unsubscribe:()=>{a=!0,it.storagemutated.unsubscribe(g)}};s.start&&s.start(c);let f=!1,p=!1;function h(){return ee(d).some(v=>u[v]&&vh(u[v],d[v]))}const g=v=>{Bl(u,v),h()&&_()},_=()=>{if(f||a)return;u={};const v={},x=function(y){r&&Yt();const w=()=>st(t,{subscr:y,trans:null}),T=G.trans?Qt(G.transless,w):w();return r&&T.then(Ve,Ve),T}(v);p||(it(Tn,g),p=!0),f=!0,Promise.resolve(x).then(y=>{n=!0,e=y,f=!1,a||(h()?_():(u={},d=v,s.next&&s.next(y)))},y=>{f=!1,n=!1,s.error&&s.error(y),c.unsubscribe()})};return _(),c});return o.hasValue=()=>n,o.getValue=()=>e,o}let ws;try{ws={indexedDB:X.indexedDB||X.mozIndexedDB||X.webkitIndexedDB||X.msIndexedDB,IDBKeyRange:X.IDBKeyRange||X.webkitIDBKeyRange}}catch{ws={indexedDB:null,IDBKeyRange:null}}const lt=xt;function Zn(t){let e=Le;try{Le=!0,it.storagemutated.fire(t)}finally{Le=e}}Wt(lt,{...zn,delete:t=>new lt(t,{addons:[]}).delete(),exists:t=>new lt(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Qs(e)?Promise.resolve(e.databases()).then(o=>o.map(s=>s.name).filter(s=>s!==Eo)):Ys(e,n).toCollection().primaryKeys()}(lt.dependencies).then(t)}catch{return te(new q.MissingAPI)}},defineClass:()=>function(t){fe(this,t)},ignoreTransaction:t=>G.trans?Qt(G.transless,t):t(),vip:vs,async:function(t){return function(){try{var e=xs(t.apply(this,arguments));return e&&typeof e.then=="function"?e:U.resolve(e)}catch(n){return te(n)}}},spawn:function(t,e,n){try{var o=xs(t.apply(n,e||[]));return o&&typeof o.then=="function"?o:U.resolve(o)}catch(s){return te(s)}},currentTransaction:{get:()=>G.trans||null},waitFor:function(t,e){const n=U.resolve(typeof t=="function"?lt.ignoreTransaction(t):t).timeout(e||6e4);return G.trans?G.trans.waitFor(n):n},Promise:U,debug:{get:()=>Pe,set:t=>{xl(t,t==="dexie"?()=>!0:Ml)}},derive:Mt,extend:fe,props:Wt,override:hl,Events:hn,on:it,liveQuery:Th,extendObservabilitySet:Bl,getByKeyPath:qe,setByKeyPath:be,delByKeyPath:function(t,e){typeof e=="string"?be(t,e,void 0):"length"in e&&[].map.call(e,function(n){be(t,n,void 0)})},shallowClone:gl,deepClone:An,getObjectDiff:Xs,cmp:de,asap:pl,minKey:cs,addons:[],connections:fn,errnames:Os,dependencies:ws,semVer:Or,version:Or.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),lt.maxKey=bn(lt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(it(Tn,t=>{if(!Le){let e;Co?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Ye,!0,!0,t)):e=new CustomEvent(Ye,{detail:t}),Le=!0,dispatchEvent(e),Le=!1}}),addEventListener(Ye,({detail:t})=>{Le||Zn(t)}));let Le=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Ye);typeof t.unref=="function"&&t.unref(),it(Tn,e=>{Le||t.postMessage(e)}),t.onmessage=e=>{e.data&&Zn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){it(Tn,e=>{try{Le||(typeof localStorage<"u"&&localStorage.setItem(Ye,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Ye,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Ye){const n=JSON.parse(e.newValue);n&&Zn(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Ye&&Zn(e.changedParts)})}U.rejectionMapper=function(t,e){if(!t||t instanceof Dt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Vr[t.name])return t;var n=new Vr[t.name](e||t.message,t);return"stack"in t&&Ge(n,"stack",{get:function(){return this.inner.stack}}),n},xl(Pe,Ml);class bh extends xt{constructor(){super("FTCManagerDB");Oe(this,"tasks");Oe(this,"checklists");Oe(this,"scoutingReports");Oe(this,"matchPlans");Oe(this,"syncQueue");Oe(this,"members");Oe(this,"teams");this.version(1).stores({tasks:"id, organizationId, teamId, status, syncStatus, updatedAt",checklists:"id, organizationId, syncStatus",scoutingReports:"id, organizationId, opponentTeamNumber, matchNumber, syncStatus",matchPlans:"id, organizationId, syncStatus",syncQueue:"id, tableName, timestamp, retryCount",members:"id, organizationId, syncStatus",teams:"id, organizationId, syncStatus"})}}const nt=new bh;function ze(){return crypto.randomUUID()}async function It(t,e,n,o){await nt.syncQueue.add({id:ze(),tableName:t,recordId:e,operation:n,data:o,timestamp:Date.now(),retryCount:0})}async function jr(){return await nt.syncQueue.count()}const Zr=[{id:"m1",firstName:"Abby",lastNameInitial:"B"},{id:"m2",firstName:"Ben",lastNameInitial:"C"},{id:"m3",firstName:"Charlie",lastNameInitial:"D"},{id:"m4",firstName:"Dana",lastNameInitial:"E"},{id:"m5",firstName:"Evan",lastNameInitial:"F"}],ei=[{id:"t1",name:"Programming",memberIds:["m1"]},{id:"t2",name:"Build",memberIds:["m2"]},{id:"t3",name:"Drive",memberIds:["m3"]},{id:"t4",name:"Scouting",memberIds:["m5"]},{id:"t5",name:"Outreach",memberIds:["m4"]}],ti=[{id:"1",text:"Turn off robot",checked:!1},{id:"2",text:"Swap main battery",checked:!1},{id:"3",text:"Charge old battery",checked:!1},{id:"4",text:"Charge Driver Hub",checked:!1},{id:"5",text:"Tighten chassis screws",checked:!1},{id:"6",text:"Check wiring connections",checked:!1},{id:"7",text:"Clean wheels",checked:!1},{id:"8",text:"Reset servo positions",checked:!1}],Pn=Ef()(Pf((t,e)=>({currentOrganizationId:null,isDemoMode:!qs(),tasks:[],members:Zr,teams:ei,scoutingReports:[],checklist:ti,matchPlans:[],theme:"light",geminiApiKey:null,setTheme:n=>{t({theme:n}),n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},setGeminiApiKey:n=>t({geminiApiKey:n}),addTask:n=>{const o={...n,id:ze(),createdAt:Date.now(),timeline:[{id:ze(),type:"history",authorId:"System",content:"Task created",timestamp:Date.now()}]};t(s=>({tasks:[...s.tasks,o]})),e().isDemoMode||It("tasks",o.id,"create",o)},updateTask:(n,o)=>{if(t(s=>({tasks:s.tasks.map(r=>r.id===n?{...r,...o}:r)})),!e().isDemoMode){const s=e().tasks.find(r=>r.id===n);s&&It("tasks",n,"update",{...s,...o})}},deleteTask:n=>{t(o=>({tasks:o.tasks.filter(s=>s.id!==n)})),e().isDemoMode||It("tasks",n,"delete",null)},addMember:(n,o)=>{const s={id:ze(),firstName:n,lastNameInitial:o};t(r=>({members:[...r.members,s]}))},removeMember:n=>{t(o=>({members:o.members.filter(s=>s.id!==n),teams:o.teams.map(s=>({...s,memberIds:s.memberIds.filter(r=>r!==n)}))}))},setMembers:n=>t({members:n}),addTeam:n=>{const o={id:ze(),name:n,memberIds:[]};t(s=>({teams:[...s.teams,o]}))},removeTeam:n=>{t(o=>({teams:o.teams.filter(s=>s.id!==n)}))},toggleMemberInTeam:(n,o)=>{t(s=>({teams:s.teams.map(r=>{if(r.id!==n)return r;const a=r.memberIds.includes(o)?r.memberIds.filter(u=>u!==o):[...r.memberIds,o];return{...r,memberIds:a}})}))},setTeams:n=>t({teams:n}),addScoutingReport:n=>{const o={...n,id:ze()};t(s=>({scoutingReports:[...s.scoutingReports,o]}))},toggleChecklistItem:n=>{t(o=>({checklist:o.checklist.map(s=>s.id===n?{...s,checked:!s.checked}:s)}))},resetChecklist:()=>{t(n=>({checklist:n.checklist.map(o=>({...o,checked:!1}))}))},addChecklistItem:n=>{const o={id:ze(),text:n,checked:!1};t(s=>({checklist:[...s.checklist,o]}))},deleteChecklistItem:n=>{t(o=>({checklist:o.checklist.filter(s=>s.id!==n)}))},updateChecklistAssignment:(n,o)=>{t(s=>({checklist:s.checklist.map(r=>r.id===n?{...r,assignedTo:o}:r)}))},addMatchPlan:n=>{const o={...n,id:ze(),updatedAt:Date.now()};t(s=>({matchPlans:[...s.matchPlans,o]})),e().isDemoMode||It("matchPlans",o.id,"create",o)},deleteMatchPlan:n=>{t(o=>({matchPlans:o.matchPlans.filter(s=>s.id!==n)})),e().isDemoMode||It("matchPlans",n,"delete",null)},updateMatchPlan:(n,o)=>{if(t(s=>({matchPlans:s.matchPlans.map(r=>r.id===n?{...r,...o,updatedAt:Date.now()}:r)})),!e().isDemoMode){const s=e().matchPlans.find(r=>r.id===n);s&&It("matchPlans",n,"update",{...s,...o})}},initializeStore:async()=>{try{const n=await nt.tasks.toArray();n.length>0&&t({tasks:n.map(s=>({id:s.id,title:s.title,description:s.description||"",status:s.status,type:s.type,assignedTo:s.assignedTo||"",department:s.teamId||"",tags:s.tags,checklist:s.checklist,timeline:Array.isArray(s.timeline)?s.timeline.map(r=>({...r,type:r.type})):[],createdAt:s.createdAt,dueDate:s.dueDate}))});const o=await nt.matchPlans.toArray();o.length>0&&t({matchPlans:o.map(s=>({id:s.id,title:s.title||`Match ${s.matchNumber||"?"}`,drawingData:s.drawingData,notes:s.notes||"",allianceTeam:s.allianceTeam||"",partnerAutonomous:s.partnerAutonomous||!1,partnerPark:s.partnerPark||!1,updatedAt:s.updatedAt}))})}catch(n){console.warn("Failed to load from IndexedDB:",n)}},resetToDefaults:()=>{t({tasks:[],members:Zr,teams:ei,scoutingReports:[],checklist:ti,matchPlans:[]})}}),{name:"ftc-team-manager-storage",partialize:t=>({tasks:t.tasks,members:t.members,teams:t.teams,scoutingReports:t.scoutingReports,checklist:t.checklist,matchPlans:t.matchPlans,theme:t.theme,geminiApiKey:t.geminiApiKey})}));if(typeof window<"u"){const t=localStorage.getItem("ftc-team-manager-storage");if(t)try{const{state:e}=JSON.parse(t);(e==null?void 0:e.theme)==="dark"&&document.documentElement.classList.add("dark")}catch{}}function Ch(){const{signInWithEmail:t,signUpWithEmail:e,signInWithGoogle:n,signInWithMicrosoft:o,resetPassword:s,isConfigured:r}=Vs(),[a,u]=R.useState("login"),[d,c]=R.useState(""),[f,p]=R.useState(""),[h,g]=R.useState(""),[_,v]=R.useState(!1),[x,y]=R.useState(null),[w,T]=R.useState(null),b=async E=>{E.preventDefault(),v(!0),y(null),T(null);try{if(a==="login"){const{error:N}=await t(d,f);N&&y(N.message)}else if(a==="signup"){const{error:N}=await e(d,f,h);N?y(N.message):T("Check your email for a confirmation link!")}else if(a==="forgot"){const{error:N}=await s(d);N?y(N.message):T("Password reset email sent!")}}catch{y("An unexpected error occurred")}finally{v(!1)}},C=async()=>{v(!0),y(null);const{error:E}=await n();E&&(y(E.message),v(!1))},S=async()=>{v(!0),y(null);const{error:E}=await o();E&&(y(E.message),v(!1))};return r?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:m.jsxs("div",{className:"max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl shadow-lg shadow-orange-500/25 mb-4",children:m.jsx(br,{className:"w-8 h-8 text-white"})}),m.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"FTC Team Manager"}),m.jsxs("p",{className:"text-slate-400",children:[a==="login"&&"Sign in to your account",a==="signup"&&"Create your account",a==="forgot"&&"Reset your password"]})]}),m.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700 rounded-2xl p-6 shadow-xl",children:[x&&m.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 mb-4",children:m.jsx("p",{className:"text-red-400 text-sm",children:x})}),w&&m.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-3 mb-4",children:m.jsx("p",{className:"text-green-400 text-sm",children:w})}),a!=="forgot"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-3 mb-6",children:[m.jsxs("button",{onClick:C,disabled:_,className:"w-full flex items-center justify-center gap-3 bg-white text-slate-900 font-medium py-3 px-4 rounded-xl hover:bg-slate-100 transition-all disabled:opacity-50",children:[m.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[m.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),m.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),m.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),m.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),m.jsxs("button",{onClick:S,disabled:_,className:"w-full flex items-center justify-center gap-3 bg-slate-700 text-white font-medium py-3 px-4 rounded-xl hover:bg-slate-600 transition-all disabled:opacity-50",children:[m.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[m.jsx("path",{fill:"#F25022",d:"M1 1h10v10H1z"}),m.jsx("path",{fill:"#00A4EF",d:"M1 13h10v10H1z"}),m.jsx("path",{fill:"#7FBA00",d:"M13 1h10v10H13z"}),m.jsx("path",{fill:"#FFB900",d:"M13 13h10v10H13z"})]}),"Continue with Microsoft"]})]}),m.jsxs("div",{className:"relative mb-6",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-slate-600"})}),m.jsx("div",{className:"relative flex justify-center text-sm",children:m.jsx("span",{className:"px-4 bg-slate-800/50 text-slate-400",children:"or continue with email"})})]})]}),m.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a==="signup"&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Full Name"}),m.jsxs("div",{className:"relative",children:[m.jsx(rl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),m.jsx("input",{type:"text",value:h,onChange:E=>g(E.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"John Smith",required:!0})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Email"}),m.jsxs("div",{className:"relative",children:[m.jsx(md,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),m.jsx("input",{type:"email",value:d,onChange:E=>c(E.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"you@team12345.org",required:!0})]})]}),a!=="forgot"&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Password"}),m.jsxs("div",{className:"relative",children:[m.jsx(fd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),m.jsx("input",{type:"password",value:f,onChange:E=>p(E.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"",required:!0,minLength:6})]})]}),m.jsx("button",{type:"submit",disabled:_,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold py-3 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg shadow-orange-500/25 disabled:opacity-50",children:_?m.jsx(oo,{className:"w-5 h-5 animate-spin"}):m.jsxs(m.Fragment,{children:[a==="login"&&"Sign In",a==="signup"&&"Create Account",a==="forgot"&&"Send Reset Link",m.jsx(Qo,{className:"w-4 h-4"})]})})]}),m.jsxs("div",{className:"mt-6 text-center text-sm",children:[a==="login"&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>u("forgot"),className:"text-slate-400 hover:text-orange-400 transition-colors",children:"Forgot password?"}),m.jsxs("p",{className:"mt-4 text-slate-400",children:["Don't have an account?"," ",m.jsx("button",{onClick:()=>u("signup"),className:"text-orange-400 hover:text-orange-300 font-medium",children:"Sign up"})]})]}),a==="signup"&&m.jsxs("p",{className:"text-slate-400",children:["Already have an account?"," ",m.jsx("button",{onClick:()=>u("login"),className:"text-orange-400 hover:text-orange-300 font-medium",children:"Sign in"})]}),a==="forgot"&&m.jsx("button",{onClick:()=>u("login"),className:"text-orange-400 hover:text-orange-300 font-medium",children:"Back to sign in"})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:m.jsxs("div",{className:"max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl shadow-lg shadow-orange-500/25 mb-4",children:m.jsx(br,{className:"w-8 h-8 text-white"})}),m.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"FTC Team Manager"}),m.jsx("p",{className:"text-slate-400",children:"Running in Demo Mode"})]}),m.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700 rounded-2xl p-6 shadow-xl",children:[m.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 mb-6",children:m.jsxs("p",{className:"text-amber-200 text-sm",children:[m.jsx("strong",{children:"Demo Mode:"})," Cloud sync is disabled. Your data will be saved locally in this browser. To enable authentication and cloud sync, configure your Supabase credentials in ",m.jsx("code",{className:"bg-slate-700 px-1 rounded",children:".env.local"})]})}),m.jsxs("a",{href:"/",className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold py-3 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg shadow-orange-500/25",children:["Continue to App",m.jsx(Qo,{className:"w-4 h-4"})]})]})]})})}function Eh(){const[t,e]=R.useState(navigator.onLine),[n,o]=R.useState("idle"),[s,r]=R.useState(0),[a,u]=R.useState(null),[d,c]=R.useState(null),f=R.useRef(!1);R.useEffect(()=>{const h=()=>{e(!0),o("idle")},g=()=>{e(!1),o("offline"),f.current=!1};return window.addEventListener("online",h),window.addEventListener("offline",g),()=>{window.removeEventListener("online",h),window.removeEventListener("offline",g)}},[]),R.useEffect(()=>{const h=async()=>{const _=await jr();r(_)};h();const g=setInterval(h,5e3);return()=>clearInterval(g)},[]),R.useEffect(()=>{t&&s>0&&n==="idle"&&!f.current&&p()},[t,s,n]);const p=R.useCallback(async()=>{if(!f.current){if(!t||!W){o("offline");return}f.current=!0,o("syncing"),c(null);try{const h=await nt.syncQueue.toArray();for(const _ of h)try{await Sh(_),await nt.syncQueue.delete(_.id)}catch(v){const x=(_.retryCount||0)+1;x>=5?(console.error(`Sync item ${_.id} failed after 5 retries. Removing from queue.`,v),await nt.syncQueue.delete(_.id)):await nt.syncQueue.update(_.id,{retryCount:x,lastError:v instanceof Error?v.message:"Unknown error"})}await Ih(),u(new Date),o("idle");const g=await jr();r(g)}catch(h){console.error("Sync failed:",h),c(h instanceof Error?h.message:"Sync failed"),o("error")}finally{f.current=!1}}},[t]);return{isOnline:t,syncStatus:n,pendingChanges:s,lastSyncTime:a,sync:p,error:d}}async function Sh(t){if(!W)throw new Error("Supabase not configured");const{tableName:e,operation:n,data:o,recordId:s}=t;switch(n){case"create":const{error:r}=await W.from(e).insert(o);if(r)throw r;break;case"update":const{error:a}=await W.from(e).update(o).eq("id",s);if(a)throw a;break;case"delete":const{error:u}=await W.from(e).delete().eq("id",s);if(u)throw u;break}}async function Ih(){W&&console.log("Pull from server completed")}function ni({variant:t="full"}){const{isOnline:e,syncStatus:n,pendingChanges:o,lastSyncTime:s,sync:r,error:a}=Eh();if(!qs())return null;const d=()=>{if(!e)return m.jsx(Er,{className:"w-4 h-4 text-slate-400"});switch(n){case"syncing":return m.jsx(Ad,{className:"w-4 h-4 text-blue-400 animate-spin"});case"error":return m.jsx($c,{className:"w-4 h-4 text-red-400"});case"idle":return o>0?m.jsx(Zc,{className:"w-4 h-4 text-amber-400"}):m.jsx(sl,{className:"w-4 h-4 text-green-400"});default:return m.jsx(Er,{className:"w-4 h-4 text-slate-400"})}},c=()=>{if(!e)return"Offline";switch(n){case"syncing":return"Syncing...";case"error":return"Sync Error";case"idle":return o>0?`${o} pending`:"Synced";default:return"Offline"}},f=()=>{if(!e)return"bg-slate-500/10 border-slate-500/20";switch(n){case"syncing":return"bg-blue-500/10 border-blue-500/20";case"error":return"bg-red-500/10 border-red-500/20";case"idle":return o>0?"bg-amber-500/10 border-amber-500/20":"bg-green-500/10 border-green-500/20";default:return"bg-slate-500/10 border-slate-500/20"}};return m.jsxs("button",{onClick:()=>r(),disabled:n==="syncing"||!e,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${f()} ${t==="icon"?"aspect-square justify-center":""}`,title:a||(s?`Last synced: ${s.toLocaleTimeString()}`:"Click to sync"),children:[m.jsx("span",{className:n==="syncing"?"animate-spin":"",children:d()}),t==="full"&&m.jsx("span",{children:c()})]})}const kt={Backlog:"Backlog",ToDo:"To Do",InProgress:"In Progress",Validation:"Validation",Done:"Done"},nn={Feature:"Feature",Bug:"Bug"},oi=[kt.Backlog,kt.ToDo,kt.InProgress,kt.Validation,kt.Done],Ah=[{id:"m1",firstName:"Abby",lastNameInitial:"B"},{id:"m2",firstName:"Ben",lastNameInitial:"C"},{id:"m3",firstName:"Charlie",lastNameInitial:"D"},{id:"m4",firstName:"Dana",lastNameInitial:"E"},{id:"m5",firstName:"Evan",lastNameInitial:"F"}],kh=[{id:"t1",name:"Programming",memberIds:["m1"]},{id:"t2",name:"Build",memberIds:["m2"]},{id:"t3",name:"Drive",memberIds:["m3"]},{id:"t4",name:"Scouting",memberIds:["m5"]},{id:"t5",name:"Outreach",memberIds:["m4"]}],Nh=[{id:"1",text:"Turn off robot",checked:!1},{id:"2",text:"Swap main battery",checked:!1},{id:"3",text:"Charge old battery",checked:!1},{id:"4",text:"Charge Driver Hub",checked:!1},{id:"5",text:"Tighten chassis screws",checked:!1},{id:"6",text:"Check wiring connections",checked:!1},{id:"7",text:"Clean wheels",checked:!1},{id:"8",text:"Reset servo positions",checked:!1}],Ph="DecodeField.png";var Rh={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Mh,Dh;function Fh(){return{geminiUrl:Mh,vertexUrl:Dh}}function Uh(t,e,n,o){var s,r;if(!(t!=null&&t.baseUrl)){const a=Fh();return e?(s=a.vertexUrl)!==null&&s!==void 0?s:n:(r=a.geminiUrl)!==null&&r!==void 0?r:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Be{}function D(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const r=e[s];return r!=null?String(r):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function l(t,e,n){for(let r=0;r<e.length-1;r++){const a=e[r];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];l(f,e.slice(r+1),n[c])}else for(const c of d)l(c,e.slice(r+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];l(d[0],e.slice(r+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function i(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const s=e[o];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in t){const a=t[r];return Array.isArray(a)?a.map(u=>i(u,e.slice(o+1),n)):n}else return n}else t=t[s]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function Lh(t,e){for(const[n,o]of Object.entries(e)){const s=n.split("."),r=o.split("."),a=new Set;let u=-1;for(let d=0;d<s.length;d++)if(s[d]==="*"){u=d;break}if(u!==-1&&r.length>u)for(let d=u;d<r.length;d++){const c=r[d];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&a.add(c)}Ts(t,s,r,0,a)}}function Ts(t,e,n,o,s){if(o>=e.length||typeof t!="object"||t===null)return;const r=e[o];if(r.endsWith("[]")){const a=r.slice(0,-2),u=t;if(a in u&&Array.isArray(u[a]))for(const d of u[a])Ts(d,e,n,o+1,s)}else if(r==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,u=Object.keys(a).filter(c=>!c.startsWith("_")&&!s.has(c)),d={};for(const c of u)d[c]=a[c];for(const[c,f]of Object.entries(d)){const p=[];for(const h of n.slice(o))h==="*"?p.push(c):p.push(h);l(a,p,f)}for(const c of u)delete a[c]}}else{const a=t;r in a&&Ts(a[r],e,n,o+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zs(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gh(t){const e={},n=i(t,["operationName"]);n!=null&&l(e,["operationName"],n);const o=i(t,["resourceName"]);return o!=null&&l(e,["_url","resourceName"],o),e}function qh(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response","generateVideoResponse"]);return a!=null&&l(e,["response"],Hh(a)),e}function Vh(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response"]);return a!=null&&l(e,["response"],Bh(a)),e}function Hh(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>$h(a))),l(e,["generatedVideos"],r)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&l(e,["raiMediaFilteredReasons"],s),e}function Bh(t){const e={},n=i(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Oh(a))),l(e,["generatedVideos"],r)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&l(e,["raiMediaFilteredReasons"],s),e}function $h(t){const e={},n=i(t,["video"]);return n!=null&&l(e,["video"],Qh(n)),e}function Oh(t){const e={},n=i(t,["_self"]);return n!=null&&l(e,["video"],Xh(n)),e}function Kh(t){const e={},n=i(t,["operationName"]);return n!=null&&l(e,["_url","operationName"],n),e}function Jh(t){const e={},n=i(t,["operationName"]);return n!=null&&l(e,["_url","operationName"],n),e}function zh(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response"]);return a!=null&&l(e,["response"],Wh(a)),e}function Wh(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&l(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&l(e,["documentName"],s),e}function $l(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response"]);return a!=null&&l(e,["response"],Yh(a)),e}function Yh(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&l(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&l(e,["documentName"],s),e}function Qh(t){const e={},n=i(t,["uri"]);n!=null&&l(e,["uri"],n);const o=i(t,["encodedVideo"]);o!=null&&l(e,["videoBytes"],Zs(o));const s=i(t,["encoding"]);return s!=null&&l(e,["mimeType"],s),e}function Xh(t){const e={},n=i(t,["gcsUri"]);n!=null&&l(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&l(e,["videoBytes"],Zs(o));const s=i(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var si;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(si||(si={}));var ri;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ri||(ri={}));var ii;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(ii||(ii={}));var ot;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ot||(ot={}));var ai;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ai||(ai={}));var li;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(li||(li={}));var ui;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ui||(ui={}));var ci;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ci||(ci={}));var di;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(di||(di={}));var fi;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(fi||(fi={}));var hi;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(hi||(hi={}));var pi;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(pi||(pi={}));var mi;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(mi||(mi={}));var gi;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(gi||(gi={}));var yi;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(yi||(yi={}));var vi;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(vi||(vi={}));var xi;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(xi||(xi={}));var _i;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(_i||(_i={}));var wi;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(wi||(wi={}));var ho;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ho||(ho={}));var Ti;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ti||(Ti={}));var bi;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(bi||(bi={}));var Ci;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ci||(Ci={}));var bs;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(bs||(bs={}));var Ei;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Ei||(Ei={}));var Si;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Si||(Si={}));var Ii;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Ii||(Ii={}));var Ai;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ai||(Ai={}));var ki;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ki||(ki={}));var Ni;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ni||(Ni={}));var Pi;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Pi||(Pi={}));var Ri;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ri||(Ri={}));var Mi;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Mi||(Mi={}));var Di;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Di||(Di={}));var Fi;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Fi||(Fi={}));var Ui;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ui||(Ui={}));var Li;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Li||(Li={}));var Gi;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Gi||(Gi={}));var qi;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(qi||(qi={}));var Vi;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Vi||(Vi={}));var Hi;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Hi||(Hi={}));var Bi;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Bi||(Bi={}));var $i;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})($i||($i={}));var Oi;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Oi||(Oi={}));var Ki;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Ki||(Ki={}));var Ji;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Ji||(Ji={}));var zi;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(zi||(zi={}));var Wi;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Wi||(Wi={}));var Yi;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Yi||(Yi={}));var Qi;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Qi||(Qi={}));var Xi;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Xi||(Xi={}));var ji;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ji||(ji={}));var Zi;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Zi||(Zi={}));var ea;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ea||(ea={}));var ta;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(ta||(ta={}));var Pt;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Pt||(Pt={}));class Cs{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class on{get text(){var e,n,o,s,r,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const h of(d=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[g,_]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(_!==null||_!==void 0)&&p.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,c+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,o,s,r,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,g]of Object.entries(p))h!=="inlineData"&&(g!==null||g!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,o,s,r,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,o,s,r,a,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,o,s,r,a,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class na{}class oa{}class jh{}class Zh{}class ep{}class tp{}class sa{}class ra{}class ia{}class np{}class po{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new po;let s;const r=e;return n?s=Vh(r):s=qh(r),Object.assign(o,s),o}}class aa{}class la{}class ua{}class ca{}class op{}class sp{}class rp{}class er{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new er,r=zh(e);return Object.assign(o,r),o}}class ip{}class ap{}class lp{}class da{}class up{get text(){var e,n,o;let s="",r=!1;const a=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;r=!0,s+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?s:void 0}get data(){var e,n,o;let s="";const r=[];for(const a of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&r.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class cp{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class tr{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new tr,r=$l(e);return Object.assign(o,r),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Ol(t,e){const n=z(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Kl(t){return Array.isArray(t)?t.map(e=>mo(e)):[mo(t)]}function mo(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Jl(t){const e=mo(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function zl(t){const e=mo(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fa(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Wl(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>fa(e)):[fa(t)]}function Es(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function ha(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function pa(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ae(t){if(t==null)throw new Error("ContentUnion is required");return Es(t)?t:{role:"user",parts:Wl(t)}}function nr(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=ae(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=ae(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ae(n)):[ae(e)]}function ve(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(ha(t)||pa(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ae(t)]}const e=[],n=[],o=Es(t[0]);for(const s of t){const r=Es(s);if(r!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(s);else{if(ha(s)||pa(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:Wl(n)}),e}function dp(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(ot).includes(n[0].toUpperCase())?n[0].toUpperCase():ot.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(ot).includes(o.toUpperCase())?o.toUpperCase():ot.TYPE_UNSPECIFIED})}}function Ut(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=t.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,t=r[1]):r[1].type==="null"&&(e.nullable=!0,t=r[0])),t.type instanceof Array&&dp(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(ot).includes(u.toUpperCase())?u.toUpperCase():ot.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Ut(u);else if(o.includes(a)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(Ut(c))}e[a]=d}else if(s.includes(a)){const d={};for(const[c,f]of Object.entries(u))d[c]=Ut(f);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function or(t){return Ut(t)}function sr(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function rr(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Xt(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ut(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ut(e.response));return t}function jt(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function fp(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function $e(t,e){if(typeof e!="string")throw new Error("name must be a string");return fp(t,e,"cachedContents")}function Yl(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function at(t){return Zs(t)}function hp(t){return t!=null&&typeof t=="object"&&"name"in t}function pp(t){return t!=null&&typeof t=="object"&&"video"in t}function mp(t){return t!=null&&typeof t=="object"&&"uri"in t}function Ql(t){var e;let n;if(hp(t)&&(n=t.name),!(mp(t)&&(n=t.uri,n===void 0))&&!(pp(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Xl(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function jl(t){for(const e of["models","tunedModels","publisherModels"])if(gp(t,e))return t[e];return[]}function gp(t,e){return t!==null&&typeof t=="object"&&e in t}function yp(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function vp(t,e={}){const n=[],o=new Set;for(const s of t){const r=s.name;if(o.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);o.add(r);const a=yp(s,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function Zl(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function xp(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function eu(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let r=!1;for(const a of s){if(typeof a!="object"||a===null)continue;const d=a.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Zt(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function tu(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _p(t){const e={},n=i(t,["responsesFile"]);n!=null&&l(e,["fileName"],n);const o=i(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>em(a))),l(e,["inlinedResponses"],r)}const s=i(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["inlinedEmbedContentResponses"],r)}return e}function wp(t){const e={},n=i(t,["predictionsFormat"]);n!=null&&l(e,["format"],n);const o=i(t,["gcsDestination","outputUriPrefix"]);o!=null&&l(e,["gcsUri"],o);const s=i(t,["bigqueryDestination","outputUri"]);return s!=null&&l(e,["bigqueryUri"],s),e}function Tp(t){const e={},n=i(t,["format"]);n!=null&&l(e,["predictionsFormat"],n);const o=i(t,["gcsUri"]);o!=null&&l(e,["gcsDestination","outputUriPrefix"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&l(e,["bigqueryDestination","outputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(i(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function eo(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata","displayName"]);o!=null&&l(e,["displayName"],o);const s=i(t,["metadata","state"]);s!=null&&l(e,["state"],tu(s));const r=i(t,["metadata","createTime"]);r!=null&&l(e,["createTime"],r);const a=i(t,["metadata","endTime"]);a!=null&&l(e,["endTime"],a);const u=i(t,["metadata","updateTime"]);u!=null&&l(e,["updateTime"],u);const d=i(t,["metadata","model"]);d!=null&&l(e,["model"],d);const c=i(t,["metadata","output"]);return c!=null&&l(e,["dest"],_p(eu(c))),e}function Ss(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["displayName"]);o!=null&&l(e,["displayName"],o);const s=i(t,["state"]);s!=null&&l(e,["state"],tu(s));const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["createTime"]);a!=null&&l(e,["createTime"],a);const u=i(t,["startTime"]);u!=null&&l(e,["startTime"],u);const d=i(t,["endTime"]);d!=null&&l(e,["endTime"],d);const c=i(t,["updateTime"]);c!=null&&l(e,["updateTime"],c);const f=i(t,["model"]);f!=null&&l(e,["model"],f);const p=i(t,["inputConfig"]);p!=null&&l(e,["src"],bp(p));const h=i(t,["outputConfig"]);h!=null&&l(e,["dest"],wp(eu(h)));const g=i(t,["completionStats"]);return g!=null&&l(e,["completionStats"],g),e}function bp(t){const e={},n=i(t,["instancesFormat"]);n!=null&&l(e,["format"],n);const o=i(t,["gcsSource","uris"]);o!=null&&l(e,["gcsUri"],o);const s=i(t,["bigquerySource","inputUri"]);return s!=null&&l(e,["bigqueryUri"],s),e}function Cp(t,e){const n={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&l(n,["fileName"],o);const s=i(e,["inlinedRequests"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>Zp(t,a))),l(n,["requests","requests"],r)}return n}function Ep(t){const e={},n=i(t,["format"]);n!=null&&l(e,["instancesFormat"],n);const o=i(t,["gcsUri"]);o!=null&&l(e,["gcsSource","uris"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&l(e,["bigquerySource","inputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Sp(t){const e={},n=i(t,["data"]);if(n!=null&&l(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Ip(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],Zt(t,o)),n}function Ap(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],Zt(t,o)),n}function kp(t){const e={},n=i(t,["content"]);n!=null&&l(e,["content"],n);const o=i(t,["citationMetadata"]);o!=null&&l(e,["citationMetadata"],Np(o));const s=i(t,["tokenCount"]);s!=null&&l(e,["tokenCount"],s);const r=i(t,["finishReason"]);r!=null&&l(e,["finishReason"],r);const a=i(t,["avgLogprobs"]);a!=null&&l(e,["avgLogprobs"],a);const u=i(t,["groundingMetadata"]);u!=null&&l(e,["groundingMetadata"],u);const d=i(t,["index"]);d!=null&&l(e,["index"],d);const c=i(t,["logprobsResult"]);c!=null&&l(e,["logprobsResult"],c);const f=i(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),l(e,["safetyRatings"],h)}const p=i(t,["urlContextMetadata"]);return p!=null&&l(e,["urlContextMetadata"],p),e}function Np(t){const e={},n=i(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["citations"],o)}return e}function nu(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>am(r))),l(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&l(e,["role"],o),e}function Pp(t,e){const n={},o=i(t,["displayName"]);if(e!==void 0&&o!=null&&l(e,["batch","displayName"],o),i(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Rp(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=i(t,["dest"]);return e!==void 0&&s!=null&&l(e,["outputConfig"],Tp(xp(s))),n}function ma(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["src"]);s!=null&&l(n,["batch","inputConfig"],Cp(t,Zl(t,s)));const r=i(e,["config"]);return r!=null&&Pp(r,n),n}function Mp(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["model"],z(t,o));const s=i(e,["src"]);s!=null&&l(n,["inputConfig"],Ep(Zl(t,s)));const r=i(e,["config"]);return r!=null&&Rp(r,n),n}function Dp(t,e){const n={},o=i(t,["displayName"]);return e!==void 0&&o!=null&&l(e,["batch","displayName"],o),n}function Fp(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["src"]);s!=null&&l(n,["batch","inputConfig"],Bp(t,s));const r=i(e,["config"]);return r!=null&&Dp(r,n),n}function Up(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],Zt(t,o)),n}function Lp(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],Zt(t,o)),n}function Gp(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&l(e,["name"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);return r!=null&&l(e,["error"],r),e}function qp(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&l(e,["name"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);return r!=null&&l(e,["error"],r),e}function Vp(t,e){const n={},o=i(e,["contents"]);if(o!=null){let r=nr(t,o);Array.isArray(r)&&(r=r.map(a=>a)),l(n,["requests[]","request","content"],r)}const s=i(e,["config"]);return s!=null&&(l(n,["_self"],Hp(s,n)),Lh(n,{"requests[].*":"requests[].request.*"})),n}function Hp(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&l(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&l(e,["requests[]","title"],s);const r=i(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&l(e,["requests[]","outputDimensionality"],r),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Bp(t,e){const n={},o=i(e,["fileName"]);o!=null&&l(n,["file_name"],o);const s=i(e,["inlinedRequests"]);return s!=null&&l(n,["requests"],Vp(t,s)),n}function $p(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Op(t){const e={},n=i(t,["id"]);n!=null&&l(e,["id"],n);const o=i(t,["args"]);o!=null&&l(e,["args"],o);const s=i(t,["name"]);if(s!=null&&l(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Kp(t){const e={},n=i(t,["mode"]);n!=null&&l(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);if(o!=null&&l(e,["allowedFunctionNames"],o),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Jp(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&l(n,["systemInstruction"],nu(ae(s)));const r=i(e,["temperature"]);r!=null&&l(o,["temperature"],r);const a=i(e,["topP"]);a!=null&&l(o,["topP"],a);const u=i(e,["topK"]);u!=null&&l(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&l(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&l(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&l(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&l(o,["responseLogprobs"],p);const h=i(e,["logprobs"]);h!=null&&l(o,["logprobs"],h);const g=i(e,["presencePenalty"]);g!=null&&l(o,["presencePenalty"],g);const _=i(e,["frequencyPenalty"]);_!=null&&l(o,["frequencyPenalty"],_);const v=i(e,["seed"]);v!=null&&l(o,["seed"],v);const x=i(e,["responseMimeType"]);x!=null&&l(o,["responseMimeType"],x);const y=i(e,["responseSchema"]);y!=null&&l(o,["responseSchema"],or(y));const w=i(e,["responseJsonSchema"]);if(w!=null&&l(o,["responseJsonSchema"],w),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=i(e,["safetySettings"]);if(n!==void 0&&T!=null){let O=T;Array.isArray(O)&&(O=O.map(K=>lm(K))),l(n,["safetySettings"],O)}const b=i(e,["tools"]);if(n!==void 0&&b!=null){let O=jt(b);Array.isArray(O)&&(O=O.map(K=>cm(Xt(K)))),l(n,["tools"],O)}const C=i(e,["toolConfig"]);if(n!==void 0&&C!=null&&l(n,["toolConfig"],um(C)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=i(e,["cachedContent"]);n!==void 0&&S!=null&&l(n,["cachedContent"],$e(t,S));const E=i(e,["responseModalities"]);E!=null&&l(o,["responseModalities"],E);const N=i(e,["mediaResolution"]);N!=null&&l(o,["mediaResolution"],N);const I=i(e,["speechConfig"]);if(I!=null&&l(o,["speechConfig"],sr(I)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=i(e,["thinkingConfig"]);M!=null&&l(o,["thinkingConfig"],M);const F=i(e,["imageConfig"]);F!=null&&l(o,["imageConfig"],jp(F));const Y=i(e,["enableEnhancedCivicAnswers"]);return Y!=null&&l(o,["enableEnhancedCivicAnswers"],Y),o}function zp(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>kp(c))),l(e,["candidates"],d)}const s=i(t,["modelVersion"]);s!=null&&l(e,["modelVersion"],s);const r=i(t,["promptFeedback"]);r!=null&&l(e,["promptFeedback"],r);const a=i(t,["responseId"]);a!=null&&l(e,["responseId"],a);const u=i(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function Wp(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],Zt(t,o)),n}function Yp(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],Zt(t,o)),n}function Qp(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function Xp(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function jp(t){const e={},n=i(t,["aspectRatio"]);n!=null&&l(e,["aspectRatio"],n);const o=i(t,["imageSize"]);if(o!=null&&l(e,["imageSize"],o),i(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Zp(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["request","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let u=ve(s);Array.isArray(u)&&(u=u.map(d=>nu(d))),l(n,["request","contents"],u)}const r=i(e,["metadata"]);r!=null&&l(n,["metadata"],r);const a=i(e,["config"]);return a!=null&&l(n,["request","generationConfig"],Jp(t,a,i(n,["request"],{}))),n}function em(t){const e={},n=i(t,["response"]);n!=null&&l(e,["response"],zp(n));const o=i(t,["error"]);return o!=null&&l(e,["error"],o),e}function tm(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);if(e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),i(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function nm(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&l(e,["_query","pageToken"],s);const r=i(t,["filter"]);return e!==void 0&&r!=null&&l(e,["_query","filter"],r),n}function om(t){const e={},n=i(t,["config"]);return n!=null&&tm(n,e),e}function sm(t){const e={},n=i(t,["config"]);return n!=null&&nm(n,e),e}function rm(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>eo(a))),l(e,["batchJobs"],r)}return e}function im(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>Ss(a))),l(e,["batchJobs"],r)}return e}function am(t){const e={},n=i(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&l(e,["fileData"],$p(r));const a=i(t,["functionCall"]);a!=null&&l(e,["functionCall"],Op(a));const u=i(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&l(e,["inlineData"],Sp(d));const c=i(t,["text"]);c!=null&&l(e,["text"],c);const f=i(t,["thought"]);f!=null&&l(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&l(e,["thoughtSignature"],p);const h=i(t,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function lm(t){const e={},n=i(t,["category"]);if(n!=null&&l(e,["category"],n),i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(t,["threshold"]);return o!=null&&l(e,["threshold"],o),e}function um(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],Kp(n));const o=i(t,["retrievalConfig"]);return o!=null&&l(e,["retrievalConfig"],o),e}function cm(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),l(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);const a=i(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],Qp(u));const d=i(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],Xp(d));const c=i(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var He;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(He||(He={}));class Ct{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,r;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(r=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dm extends Be{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ct(He.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=ma(this.apiClient,e),o=n._url,s=D("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,d=u.requests,c=[];for(const f of d){const p=Object.assign({},f);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const g=p.request;g.systemInstruction=h,p.request=g}c.push(p)}return u.requests=c,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const r=this.getGcsUri(e),a=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?o.dest=`${r.slice(0,-6)}/dest`:o.dest=`${r}_dest_${s}`;else if(a)o.dest=`${a}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Mp(this.apiClient,e);return u=D("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ss(f))}else{const c=ma(this.apiClient,e);return u=D("{model}:batchGenerateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>eo(f))}}async createEmbeddingsInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Fp(this.apiClient,e);return r=D("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>eo(d))}}async get(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Yp(this.apiClient,e);return u=D("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ss(f))}else{const c=Wp(this.apiClient,e);return u=D("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>eo(f))}}async cancel(e){var n,o,s,r;let a="",u={};if(this.apiClient.isVertexAI()){const d=Ap(this.apiClient,e);a=D("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=Ip(this.apiClient,e);a=D("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=sm(e);return u=D("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=im(f),h=new da;return Object.assign(h,p),h})}else{const c=om(e);return u=D("batches",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=rm(f),h=new da;return Object.assign(h,p),h})}}async delete(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Lp(this.apiClient,e);return u=D("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>qp(f))}else{const c=Up(this.apiClient,e);return u=D("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>Gp(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fm(t){const e={},n=i(t,["data"]);if(n!=null&&l(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function ga(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Fm(r))),l(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&l(e,["role"],o),e}function hm(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&l(e,["expireTime"],s);const r=i(t,["displayName"]);e!==void 0&&r!=null&&l(e,["displayName"],r);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let f=ve(a);Array.isArray(f)&&(f=f.map(p=>ga(p))),l(e,["contents"],f)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],ga(ae(u)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(p=>Lm(p))),l(e,["tools"],f)}const c=i(t,["toolConfig"]);if(e!==void 0&&c!=null&&l(e,["toolConfig"],Um(c)),i(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function pm(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&l(e,["expireTime"],s);const r=i(t,["displayName"]);e!==void 0&&r!=null&&l(e,["displayName"],r);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let p=ve(a);Array.isArray(p)&&(p=p.map(h=>h)),l(e,["contents"],p)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],ae(u));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(h=>Gm(h))),l(e,["tools"],p)}const c=i(t,["toolConfig"]);e!==void 0&&c!=null&&l(e,["toolConfig"],c);const f=i(t,["kmsKeyName"]);return e!==void 0&&f!=null&&l(e,["encryption_spec","kmsKeyName"],f),n}function mm(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["model"],Ol(t,o));const s=i(e,["config"]);return s!=null&&hm(s,n),n}function gm(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["model"],Ol(t,o));const s=i(e,["config"]);return s!=null&&pm(s,n),n}function ym(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],$e(t,o)),n}function vm(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],$e(t,o)),n}function xm(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function _m(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function wm(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Tm(t){const e={},n=i(t,["id"]);n!=null&&l(e,["id"],n);const o=i(t,["args"]);o!=null&&l(e,["args"],o);const s=i(t,["name"]);if(s!=null&&l(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bm(t){const e={},n=i(t,["mode"]);n!=null&&l(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);if(o!=null&&l(e,["allowedFunctionNames"],o),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Cm(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&l(e,["description"],n);const o=i(t,["name"]);o!=null&&l(e,["name"],o);const s=i(t,["parameters"]);s!=null&&l(e,["parameters"],s);const r=i(t,["parametersJsonSchema"]);r!=null&&l(e,["parametersJsonSchema"],r);const a=i(t,["response"]);a!=null&&l(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function Em(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],$e(t,o)),n}function Sm(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],$e(t,o)),n}function Im(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function Am(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function km(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function Nm(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function Pm(t){const e={},n=i(t,["config"]);return n!=null&&km(n,e),e}function Rm(t){const e={},n=i(t,["config"]);return n!=null&&Nm(n,e),e}function Mm(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["cachedContents"],r)}return e}function Dm(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["cachedContents"],r)}return e}function Fm(t){const e={},n=i(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&l(e,["fileData"],wm(r));const a=i(t,["functionCall"]);a!=null&&l(e,["functionCall"],Tm(a));const u=i(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&l(e,["inlineData"],fm(d));const c=i(t,["text"]);c!=null&&l(e,["text"],c);const f=i(t,["thought"]);f!=null&&l(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&l(e,["thoughtSignature"],p);const h=i(t,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function Um(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],bm(n));const o=i(t,["retrievalConfig"]);return o!=null&&l(e,["retrievalConfig"],o),e}function Lm(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),l(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);const a=i(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],Im(u));const d=i(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],Am(d));const c=i(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}function Gm(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>Cm(h))),l(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&l(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&l(e,["googleSearchRetrieval"],s);const r=i(t,["computerUse"]);if(r!=null&&l(e,["computerUse"],r),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(t,["codeExecution"]);a!=null&&l(e,["codeExecution"],a);const u=i(t,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);const d=i(t,["googleMaps"]);d!=null&&l(e,["googleMaps"],d);const c=i(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],c);const f=i(t,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function qm(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&l(e,["expireTime"],s),n}function Vm(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&l(e,["expireTime"],s),n}function Hm(t,e){const n={},o=i(e,["name"]);o!=null&&l(n,["_url","name"],$e(t,o));const s=i(e,["config"]);return s!=null&&qm(s,n),n}function Bm(t,e){const n={},o=i(e,["name"]);o!=null&&l(n,["_url","name"],$e(t,o));const s=i(e,["config"]);return s!=null&&Vm(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $m extends Be{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ct(He.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=gm(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const c=mm(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async get(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Sm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const c=Em(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async delete(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=vm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=_m(f),h=new ua;return Object.assign(h,p),h})}else{const c=ym(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=xm(f),h=new ua;return Object.assign(h,p),h})}}async update(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Bm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const c=Hm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async listInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Rm(e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Dm(f),h=new ca;return Object.assign(h,p),h})}else{const c=Pm(e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Mm(f),h=new ca;return Object.assign(h,p),h})}}}function go(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n}function ya(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $(t){return this instanceof $?(this.v=t,this):new $(t)}function Ce(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(g){return function(_){return Promise.resolve(_).then(g,p)}}function u(g,_){o[g]&&(s[g]=function(v){return new Promise(function(x,y){r.push([g,v,x,y])>1||d(g,v)})},_&&(s[g]=_(s[g])))}function d(g,_){try{c(o[g](_))}catch(v){h(r[0][3],v)}}function c(g){g.value instanceof $?Promise.resolve(g.value.v).then(f,p):h(r[0][2],g)}function f(g){d("next",g)}function p(g){d("throw",g)}function h(g,_){g(_),r.shift(),r.length&&d(r[0][0],r[0][1])}}function Ee(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ya=="function"?ya(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(r){n[r]=t[r]&&function(a){return new Promise(function(u,d){a=t[r](a),s(u,d,a.done,a.value)})}}function s(r,a,u,d){Promise.resolve(d).then(function(c){r({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Om(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:ou(n)}function ou(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Km(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function va(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let r=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),r&&!ou(t[o])&&(r=!1),o++;r?e.push(...s):e.pop()}return e}class Jm{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new zm(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class zm{constructor(e,n,o,s={},r=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=r,this.sendPromise=Promise.resolve(),Km(r)}async sendMessage(e){var n;await this.sendPromise;const o=ae(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,a,u;const d=await s,c=(a=(r=d.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];f!=null&&(h=(u=f.slice(p))!==null&&u!==void 0?u:[]);const g=c?[c]:[];this.recordHistory(o,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const o=ae(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const r=await s;return this.processStreamResponse(r,o)}getHistory(e=!1){const n=e?va(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Ce(this,arguments,function*(){var s,r,a,u,d,c;const f=[];try{for(var p=!0,h=Ee(e),g;g=yield $(h.next()),s=g.done,!s;p=!0){u=g.value,p=!1;const _=u;if(Om(_)){const v=(c=(d=_.candidates)===null||d===void 0?void 0:d[0])===null||c===void 0?void 0:c.content;v!==void 0&&f.push(v)}yield yield $(_)}}catch(_){r={error:_}}finally{try{!p&&!s&&(a=h.return)&&(yield $(a.call(h)))}finally{if(r)throw r.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(r=>r.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...va(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class So extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,So.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wm(t){const e={},n=i(t,["file"]);return n!=null&&l(e,["file"],n),e}function Ym(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Qm(t){const e={},n=i(t,["name"]);return n!=null&&l(e,["_url","file"],Ql(n)),e}function Xm(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function jm(t){const e={},n=i(t,["name"]);return n!=null&&l(e,["_url","file"],Ql(n)),e}function Zm(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function eg(t){const e={},n=i(t,["config"]);return n!=null&&Zm(n,e),e}function tg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ng extends Be{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ct(He.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=eg(e);return r=D("files",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=tg(d),f=new ip;return Object.assign(f,c),f})}}async createInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wm(e);return r=D("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Ym(d),f=new ap;return Object.assign(f,c),f})}}async get(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=jm(e);return r=D("files/{file}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Qm(e);return r=D("files/{file}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Xm(d),f=new lp;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function to(t){const e={},n=i(t,["data"]);if(n!=null&&l(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function og(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>xg(r))),l(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&l(e,["role"],o),e}function sg(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function rg(t){const e={},n=i(t,["id"]);n!=null&&l(e,["id"],n);const o=i(t,["args"]);o!=null&&l(e,["args"],o);const s=i(t,["name"]);if(s!=null&&l(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ig(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&l(e,["description"],n);const o=i(t,["name"]);o!=null&&l(e,["name"],o);const s=i(t,["parameters"]);s!=null&&l(e,["parameters"],s);const r=i(t,["parametersJsonSchema"]);r!=null&&l(e,["parametersJsonSchema"],r);const a=i(t,["response"]);a!=null&&l(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function ag(t){const e={},n=i(t,["modelSelectionConfig"]);n!=null&&l(e,["modelConfig"],n);const o=i(t,["responseJsonSchema"]);o!=null&&l(e,["responseJsonSchema"],o);const s=i(t,["audioTimestamp"]);s!=null&&l(e,["audioTimestamp"],s);const r=i(t,["candidateCount"]);r!=null&&l(e,["candidateCount"],r);const a=i(t,["enableAffectiveDialog"]);a!=null&&l(e,["enableAffectiveDialog"],a);const u=i(t,["frequencyPenalty"]);u!=null&&l(e,["frequencyPenalty"],u);const d=i(t,["logprobs"]);d!=null&&l(e,["logprobs"],d);const c=i(t,["maxOutputTokens"]);c!=null&&l(e,["maxOutputTokens"],c);const f=i(t,["mediaResolution"]);f!=null&&l(e,["mediaResolution"],f);const p=i(t,["presencePenalty"]);p!=null&&l(e,["presencePenalty"],p);const h=i(t,["responseLogprobs"]);h!=null&&l(e,["responseLogprobs"],h);const g=i(t,["responseMimeType"]);g!=null&&l(e,["responseMimeType"],g);const _=i(t,["responseModalities"]);_!=null&&l(e,["responseModalities"],_);const v=i(t,["responseSchema"]);v!=null&&l(e,["responseSchema"],v);const x=i(t,["routingConfig"]);x!=null&&l(e,["routingConfig"],x);const y=i(t,["seed"]);y!=null&&l(e,["seed"],y);const w=i(t,["speechConfig"]);w!=null&&l(e,["speechConfig"],w);const T=i(t,["stopSequences"]);T!=null&&l(e,["stopSequences"],T);const b=i(t,["temperature"]);b!=null&&l(e,["temperature"],b);const C=i(t,["thinkingConfig"]);C!=null&&l(e,["thinkingConfig"],C);const S=i(t,["topK"]);S!=null&&l(e,["topK"],S);const E=i(t,["topP"]);if(E!=null&&l(e,["topP"],E),i(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function lg(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function ug(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function cg(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","responseModalities"],s);const r=i(t,["temperature"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig","temperature"],r);const a=i(t,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","speechConfig"],rr(p));const h=i(t,["thinkingConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","thinkingConfig"],h);const g=i(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=i(t,["systemInstruction"]);e!==void 0&&_!=null&&l(e,["setup","systemInstruction"],og(ae(_)));const v=i(t,["tools"]);if(e!==void 0&&v!=null){let S=jt(v);Array.isArray(S)&&(S=S.map(E=>wg(Xt(E)))),l(e,["setup","tools"],S)}const x=i(t,["sessionResumption"]);e!==void 0&&x!=null&&l(e,["setup","sessionResumption"],_g(x));const y=i(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&l(e,["setup","inputAudioTranscription"],y);const w=i(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&l(e,["setup","outputAudioTranscription"],w);const T=i(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&l(e,["setup","realtimeInputConfig"],T);const b=i(t,["contextWindowCompression"]);e!==void 0&&b!=null&&l(e,["setup","contextWindowCompression"],b);const C=i(t,["proactivity"]);if(e!==void 0&&C!=null&&l(e,["setup","proactivity"],C),i(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function dg(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig"],ag(o));const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","responseModalities"],s);const r=i(t,["temperature"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig","temperature"],r);const a=i(t,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","speechConfig"],rr(p));const h=i(t,["thinkingConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","thinkingConfig"],h);const g=i(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=i(t,["systemInstruction"]);e!==void 0&&_!=null&&l(e,["setup","systemInstruction"],ae(_));const v=i(t,["tools"]);if(e!==void 0&&v!=null){let E=jt(v);Array.isArray(E)&&(E=E.map(N=>Tg(Xt(N)))),l(e,["setup","tools"],E)}const x=i(t,["sessionResumption"]);e!==void 0&&x!=null&&l(e,["setup","sessionResumption"],x);const y=i(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&l(e,["setup","inputAudioTranscription"],y);const w=i(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&l(e,["setup","outputAudioTranscription"],w);const T=i(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&l(e,["setup","realtimeInputConfig"],T);const b=i(t,["contextWindowCompression"]);e!==void 0&&b!=null&&l(e,["setup","contextWindowCompression"],b);const C=i(t,["proactivity"]);e!==void 0&&C!=null&&l(e,["setup","proactivity"],C);const S=i(t,["explicitVadSignal"]);return e!==void 0&&S!=null&&l(e,["setup","explicitVadSignal"],S),n}function fg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["setup","model"],z(t,o));const s=i(e,["config"]);return s!=null&&l(n,["config"],cg(s,n)),n}function hg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["setup","model"],z(t,o));const s=i(e,["config"]);return s!=null&&l(n,["config"],dg(s,n)),n}function pg(t){const e={},n=i(t,["musicGenerationConfig"]);return n!=null&&l(e,["musicGenerationConfig"],n),e}function mg(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["weightedPrompts"],o)}return e}function gg(t){const e={},n=i(t,["media"]);if(n!=null){let c=Kl(n);Array.isArray(c)&&(c=c.map(f=>to(f))),l(e,["mediaChunks"],c)}const o=i(t,["audio"]);o!=null&&l(e,["audio"],to(zl(o)));const s=i(t,["audioStreamEnd"]);s!=null&&l(e,["audioStreamEnd"],s);const r=i(t,["video"]);r!=null&&l(e,["video"],to(Jl(r)));const a=i(t,["text"]);a!=null&&l(e,["text"],a);const u=i(t,["activityStart"]);u!=null&&l(e,["activityStart"],u);const d=i(t,["activityEnd"]);return d!=null&&l(e,["activityEnd"],d),e}function yg(t){const e={},n=i(t,["media"]);if(n!=null){let c=Kl(n);Array.isArray(c)&&(c=c.map(f=>f)),l(e,["mediaChunks"],c)}const o=i(t,["audio"]);o!=null&&l(e,["audio"],zl(o));const s=i(t,["audioStreamEnd"]);s!=null&&l(e,["audioStreamEnd"],s);const r=i(t,["video"]);r!=null&&l(e,["video"],Jl(r));const a=i(t,["text"]);a!=null&&l(e,["text"],a);const u=i(t,["activityStart"]);u!=null&&l(e,["activityStart"],u);const d=i(t,["activityEnd"]);return d!=null&&l(e,["activityEnd"],d),e}function vg(t){const e={},n=i(t,["setupComplete"]);n!=null&&l(e,["setupComplete"],n);const o=i(t,["serverContent"]);o!=null&&l(e,["serverContent"],o);const s=i(t,["toolCall"]);s!=null&&l(e,["toolCall"],s);const r=i(t,["toolCallCancellation"]);r!=null&&l(e,["toolCallCancellation"],r);const a=i(t,["usageMetadata"]);a!=null&&l(e,["usageMetadata"],bg(a));const u=i(t,["goAway"]);u!=null&&l(e,["goAway"],u);const d=i(t,["sessionResumptionUpdate"]);d!=null&&l(e,["sessionResumptionUpdate"],d);const c=i(t,["voiceActivityDetectionSignal"]);return c!=null&&l(e,["voiceActivityDetectionSignal"],c),e}function xg(t){const e={},n=i(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&l(e,["fileData"],sg(r));const a=i(t,["functionCall"]);a!=null&&l(e,["functionCall"],rg(a));const u=i(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&l(e,["inlineData"],to(d));const c=i(t,["text"]);c!=null&&l(e,["text"],c);const f=i(t,["thought"]);f!=null&&l(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&l(e,["thoughtSignature"],p);const h=i(t,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function _g(t){const e={},n=i(t,["handle"]);if(n!=null&&l(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function wg(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),l(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);const a=i(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],lg(u));const d=i(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],ug(d));const c=i(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}function Tg(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>ig(h))),l(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&l(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&l(e,["googleSearchRetrieval"],s);const r=i(t,["computerUse"]);if(r!=null&&l(e,["computerUse"],r),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(t,["codeExecution"]);a!=null&&l(e,["codeExecution"],a);const u=i(t,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);const d=i(t,["googleMaps"]);d!=null&&l(e,["googleMaps"],d);const c=i(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],c);const f=i(t,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function bg(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&l(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&l(e,["cachedContentTokenCount"],o);const s=i(t,["candidatesTokenCount"]);s!=null&&l(e,["responseTokenCount"],s);const r=i(t,["toolUsePromptTokenCount"]);r!=null&&l(e,["toolUsePromptTokenCount"],r);const a=i(t,["thoughtsTokenCount"]);a!=null&&l(e,["thoughtsTokenCount"],a);const u=i(t,["totalTokenCount"]);u!=null&&l(e,["totalTokenCount"],u);const d=i(t,["promptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(_=>_)),l(e,["promptTokensDetails"],g)}const c=i(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(_=>_)),l(e,["cacheTokensDetails"],g)}const f=i(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(_=>_)),l(e,["responseTokensDetails"],g)}const p=i(t,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(_=>_)),l(e,["toolUsePromptTokensDetails"],g)}const h=i(t,["trafficType"]);return h!=null&&l(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cg(t){const e={},n=i(t,["data"]);if(n!=null&&l(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Eg(t){const e={},n=i(t,["content"]);n!=null&&l(e,["content"],n);const o=i(t,["citationMetadata"]);o!=null&&l(e,["citationMetadata"],Sg(o));const s=i(t,["tokenCount"]);s!=null&&l(e,["tokenCount"],s);const r=i(t,["finishReason"]);r!=null&&l(e,["finishReason"],r);const a=i(t,["avgLogprobs"]);a!=null&&l(e,["avgLogprobs"],a);const u=i(t,["groundingMetadata"]);u!=null&&l(e,["groundingMetadata"],u);const d=i(t,["index"]);d!=null&&l(e,["index"],d);const c=i(t,["logprobsResult"]);c!=null&&l(e,["logprobsResult"],c);const f=i(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),l(e,["safetyRatings"],h)}const p=i(t,["urlContextMetadata"]);return p!=null&&l(e,["urlContextMetadata"],p),e}function Sg(t){const e={},n=i(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["citations"],o)}return e}function Ig(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let r=ve(s);Array.isArray(r)&&(r=r.map(a=>a)),l(n,["contents"],r)}return n}function Ag(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["tokensInfo"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),l(e,["tokensInfo"],s)}return e}function kg(t){const e={},n=i(t,["values"]);n!=null&&l(e,["values"],n);const o=i(t,["statistics"]);return o!=null&&l(e,["statistics"],Ng(o)),e}function Ng(t){const e={},n=i(t,["truncated"]);n!=null&&l(e,["truncated"],n);const o=i(t,["token_count"]);return o!=null&&l(e,["tokenCount"],o),e}function Io(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>q0(r))),l(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&l(e,["role"],o),e}function Pg(t){const e={},n=i(t,["controlType"]);n!=null&&l(e,["controlType"],n);const o=i(t,["enableControlImageComputation"]);return o!=null&&l(e,["computeControl"],o),e}function Rg(t){const e={};if(i(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Mg(t,e){const n={},o=i(t,["systemInstruction"]);e!==void 0&&o!=null&&l(e,["systemInstruction"],ae(o));const s=i(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>au(u))),l(e,["tools"],a)}const r=i(t,["generationConfig"]);return e!==void 0&&r!=null&&l(e,["generationConfig"],C0(r)),n}function Dg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let a=ve(s);Array.isArray(a)&&(a=a.map(u=>Io(u))),l(n,["contents"],a)}const r=i(e,["config"]);return r!=null&&Rg(r),n}function Fg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let a=ve(s);Array.isArray(a)&&(a=a.map(u=>u)),l(n,["contents"],a)}const r=i(e,["config"]);return r!=null&&Mg(r,n),n}function Ug(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);o!=null&&l(e,["totalTokens"],o);const s=i(t,["cachedContentTokenCount"]);return s!=null&&l(e,["cachedContentTokenCount"],s),e}function Lg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);return o!=null&&l(e,["totalTokens"],o),e}function Gg(t,e){const n={},o=i(e,["model"]);return o!=null&&l(n,["_url","name"],z(t,o)),n}function qg(t,e){const n={},o=i(e,["model"]);return o!=null&&l(n,["_url","name"],z(t,o)),n}function Vg(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Hg(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Bg(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&l(e,["parameters","negativePrompt"],s);const r=i(t,["numberOfImages"]);e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&l(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&l(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&l(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&l(e,["parameters","includeSafetyAttributes"],p);const h=i(t,["includeRaiReason"]);e!==void 0&&h!=null&&l(e,["parameters","includeRaiReason"],h);const g=i(t,["language"]);e!==void 0&&g!=null&&l(e,["parameters","language"],g);const _=i(t,["outputMimeType"]);e!==void 0&&_!=null&&l(e,["parameters","outputOptions","mimeType"],_);const v=i(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&l(e,["parameters","outputOptions","compressionQuality"],v);const x=i(t,["addWatermark"]);e!==void 0&&x!=null&&l(e,["parameters","addWatermark"],x);const y=i(t,["labels"]);e!==void 0&&y!=null&&l(e,["labels"],y);const w=i(t,["editMode"]);e!==void 0&&w!=null&&l(e,["parameters","editMode"],w);const T=i(t,["baseSteps"]);return e!==void 0&&T!=null&&l(e,["parameters","editConfig","baseSteps"],T),n}function $g(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const r=i(e,["referenceImages"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>K0(d))),l(n,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&Bg(a,n),n}function Og(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Ao(r))),l(e,["generatedImages"],s)}return e}function Kg(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&l(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&l(e,["requests[]","title"],s);const r=i(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&l(e,["requests[]","outputDimensionality"],r),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Jg(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&l(e,["instances[]","task_type"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&l(e,["instances[]","title"],s);const r=i(t,["outputDimensionality"]);e!==void 0&&r!=null&&l(e,["parameters","outputDimensionality"],r);const a=i(t,["mimeType"]);e!==void 0&&a!=null&&l(e,["instances[]","mimeType"],a);const u=i(t,["autoTruncate"]);return e!==void 0&&u!=null&&l(e,["parameters","autoTruncate"],u),n}function zg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let u=nr(t,s);Array.isArray(u)&&(u=u.map(d=>d)),l(n,["requests[]","content"],u)}const r=i(e,["config"]);r!=null&&Kg(r,n);const a=i(e,["model"]);return a!==void 0&&l(n,["requests[]","model"],z(t,a)),n}function Wg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let a=nr(t,s);Array.isArray(a)&&(a=a.map(u=>u)),l(n,["instances[]","content"],a)}const r=i(e,["config"]);return r!=null&&Jg(r,n),n}function Yg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["embeddings"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["embeddings"],r)}const s=i(t,["metadata"]);return s!=null&&l(e,["metadata"],s),e}function Qg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["predictions[]","embeddings"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>kg(a))),l(e,["embeddings"],r)}const s=i(t,["metadata"]);return s!=null&&l(e,["metadata"],s),e}function Xg(t){const e={},n=i(t,["endpoint"]);n!=null&&l(e,["name"],n);const o=i(t,["deployedModelId"]);return o!=null&&l(e,["deployedModelId"],o),e}function jg(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Zg(t){const e={},n=i(t,["id"]);n!=null&&l(e,["id"],n);const o=i(t,["args"]);o!=null&&l(e,["args"],o);const s=i(t,["name"]);if(s!=null&&l(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function e0(t){const e={},n=i(t,["mode"]);n!=null&&l(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);if(o!=null&&l(e,["allowedFunctionNames"],o),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function t0(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&l(e,["description"],n);const o=i(t,["name"]);o!=null&&l(e,["name"],o);const s=i(t,["parameters"]);s!=null&&l(e,["parameters"],s);const r=i(t,["parametersJsonSchema"]);r!=null&&l(e,["parametersJsonSchema"],r);const a=i(t,["response"]);a!=null&&l(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function n0(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&l(n,["systemInstruction"],Io(ae(s)));const r=i(e,["temperature"]);r!=null&&l(o,["temperature"],r);const a=i(e,["topP"]);a!=null&&l(o,["topP"],a);const u=i(e,["topK"]);u!=null&&l(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&l(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&l(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&l(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&l(o,["responseLogprobs"],p);const h=i(e,["logprobs"]);h!=null&&l(o,["logprobs"],h);const g=i(e,["presencePenalty"]);g!=null&&l(o,["presencePenalty"],g);const _=i(e,["frequencyPenalty"]);_!=null&&l(o,["frequencyPenalty"],_);const v=i(e,["seed"]);v!=null&&l(o,["seed"],v);const x=i(e,["responseMimeType"]);x!=null&&l(o,["responseMimeType"],x);const y=i(e,["responseSchema"]);y!=null&&l(o,["responseSchema"],or(y));const w=i(e,["responseJsonSchema"]);if(w!=null&&l(o,["responseJsonSchema"],w),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=i(e,["safetySettings"]);if(n!==void 0&&T!=null){let O=T;Array.isArray(O)&&(O=O.map(K=>J0(K))),l(n,["safetySettings"],O)}const b=i(e,["tools"]);if(n!==void 0&&b!=null){let O=jt(b);Array.isArray(O)&&(O=O.map(K=>Z0(Xt(K)))),l(n,["tools"],O)}const C=i(e,["toolConfig"]);if(n!==void 0&&C!=null&&l(n,["toolConfig"],j0(C)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=i(e,["cachedContent"]);n!==void 0&&S!=null&&l(n,["cachedContent"],$e(t,S));const E=i(e,["responseModalities"]);E!=null&&l(o,["responseModalities"],E);const N=i(e,["mediaResolution"]);N!=null&&l(o,["mediaResolution"],N);const I=i(e,["speechConfig"]);if(I!=null&&l(o,["speechConfig"],sr(I)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=i(e,["thinkingConfig"]);M!=null&&l(o,["thinkingConfig"],M);const F=i(e,["imageConfig"]);F!=null&&l(o,["imageConfig"],k0(F));const Y=i(e,["enableEnhancedCivicAnswers"]);return Y!=null&&l(o,["enableEnhancedCivicAnswers"],Y),o}function o0(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&l(n,["systemInstruction"],ae(s));const r=i(e,["temperature"]);r!=null&&l(o,["temperature"],r);const a=i(e,["topP"]);a!=null&&l(o,["topP"],a);const u=i(e,["topK"]);u!=null&&l(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&l(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&l(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&l(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&l(o,["responseLogprobs"],p);const h=i(e,["logprobs"]);h!=null&&l(o,["logprobs"],h);const g=i(e,["presencePenalty"]);g!=null&&l(o,["presencePenalty"],g);const _=i(e,["frequencyPenalty"]);_!=null&&l(o,["frequencyPenalty"],_);const v=i(e,["seed"]);v!=null&&l(o,["seed"],v);const x=i(e,["responseMimeType"]);x!=null&&l(o,["responseMimeType"],x);const y=i(e,["responseSchema"]);y!=null&&l(o,["responseSchema"],or(y));const w=i(e,["responseJsonSchema"]);w!=null&&l(o,["responseJsonSchema"],w);const T=i(e,["routingConfig"]);T!=null&&l(o,["routingConfig"],T);const b=i(e,["modelSelectionConfig"]);b!=null&&l(o,["modelConfig"],b);const C=i(e,["safetySettings"]);if(n!==void 0&&C!=null){let k=C;Array.isArray(k)&&(k=k.map(P=>P)),l(n,["safetySettings"],k)}const S=i(e,["tools"]);if(n!==void 0&&S!=null){let k=jt(S);Array.isArray(k)&&(k=k.map(P=>au(Xt(P)))),l(n,["tools"],k)}const E=i(e,["toolConfig"]);n!==void 0&&E!=null&&l(n,["toolConfig"],E);const N=i(e,["labels"]);n!==void 0&&N!=null&&l(n,["labels"],N);const I=i(e,["cachedContent"]);n!==void 0&&I!=null&&l(n,["cachedContent"],$e(t,I));const M=i(e,["responseModalities"]);M!=null&&l(o,["responseModalities"],M);const F=i(e,["mediaResolution"]);F!=null&&l(o,["mediaResolution"],F);const Y=i(e,["speechConfig"]);Y!=null&&l(o,["speechConfig"],sr(Y));const O=i(e,["audioTimestamp"]);O!=null&&l(o,["audioTimestamp"],O);const K=i(e,["thinkingConfig"]);K!=null&&l(o,["thinkingConfig"],K);const L=i(e,["imageConfig"]);if(L!=null&&l(o,["imageConfig"],N0(L)),i(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function xa(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let a=ve(s);Array.isArray(a)&&(a=a.map(u=>Io(u))),l(n,["contents"],a)}const r=i(e,["config"]);return r!=null&&l(n,["generationConfig"],n0(t,r,n)),n}function _a(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let a=ve(s);Array.isArray(a)&&(a=a.map(u=>u)),l(n,["contents"],a)}const r=i(e,["config"]);return r!=null&&l(n,["generationConfig"],o0(t,r,n)),n}function wa(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>Eg(c))),l(e,["candidates"],d)}const s=i(t,["modelVersion"]);s!=null&&l(e,["modelVersion"],s);const r=i(t,["promptFeedback"]);r!=null&&l(e,["promptFeedback"],r);const a=i(t,["responseId"]);a!=null&&l(e,["responseId"],a);const u=i(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function Ta(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),l(e,["candidates"],c)}const s=i(t,["createTime"]);s!=null&&l(e,["createTime"],s);const r=i(t,["modelVersion"]);r!=null&&l(e,["modelVersion"],r);const a=i(t,["promptFeedback"]);a!=null&&l(e,["promptFeedback"],a);const u=i(t,["responseId"]);u!=null&&l(e,["responseId"],u);const d=i(t,["usageMetadata"]);return d!=null&&l(e,["usageMetadata"],d),e}function s0(t,e){const n={};if(i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=i(t,["aspectRatio"]);e!==void 0&&s!=null&&l(e,["parameters","aspectRatio"],s);const r=i(t,["guidanceScale"]);if(e!==void 0&&r!=null&&l(e,["parameters","guidanceScale"],r),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&l(e,["parameters","safetySetting"],a);const u=i(t,["personGeneration"]);e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u);const d=i(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&l(e,["parameters","includeSafetyAttributes"],d);const c=i(t,["includeRaiReason"]);e!==void 0&&c!=null&&l(e,["parameters","includeRaiReason"],c);const f=i(t,["language"]);e!==void 0&&f!=null&&l(e,["parameters","language"],f);const p=i(t,["outputMimeType"]);e!==void 0&&p!=null&&l(e,["parameters","outputOptions","mimeType"],p);const h=i(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&l(e,["parameters","outputOptions","compressionQuality"],h),i(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=i(t,["imageSize"]);if(e!==void 0&&g!=null&&l(e,["parameters","sampleImageSize"],g),i(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function r0(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&l(e,["parameters","negativePrompt"],s);const r=i(t,["numberOfImages"]);e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&l(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&l(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&l(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&l(e,["parameters","includeSafetyAttributes"],p);const h=i(t,["includeRaiReason"]);e!==void 0&&h!=null&&l(e,["parameters","includeRaiReason"],h);const g=i(t,["language"]);e!==void 0&&g!=null&&l(e,["parameters","language"],g);const _=i(t,["outputMimeType"]);e!==void 0&&_!=null&&l(e,["parameters","outputOptions","mimeType"],_);const v=i(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&l(e,["parameters","outputOptions","compressionQuality"],v);const x=i(t,["addWatermark"]);e!==void 0&&x!=null&&l(e,["parameters","addWatermark"],x);const y=i(t,["labels"]);e!==void 0&&y!=null&&l(e,["labels"],y);const w=i(t,["imageSize"]);e!==void 0&&w!=null&&l(e,["parameters","sampleImageSize"],w);const T=i(t,["enhancePrompt"]);return e!==void 0&&T!=null&&l(e,["parameters","enhancePrompt"],T),n}function i0(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const r=i(e,["config"]);return r!=null&&s0(r,n),n}function a0(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const r=i(e,["config"]);return r!=null&&r0(r,n),n}function l0(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>_0(a))),l(e,["generatedImages"],r)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&l(e,["positivePromptSafetyAttributes"],ru(s)),e}function u0(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>Ao(a))),l(e,["generatedImages"],r)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&l(e,["positivePromptSafetyAttributes"],iu(s)),e}function c0(t,e){const n={},o=i(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o),i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=i(t,["durationSeconds"]);if(e!==void 0&&s!=null&&l(e,["parameters","durationSeconds"],s),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=i(t,["aspectRatio"]);e!==void 0&&r!=null&&l(e,["parameters","aspectRatio"],r);const a=i(t,["resolution"]);e!==void 0&&a!=null&&l(e,["parameters","resolution"],a);const u=i(t,["personGeneration"]);if(e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u),i(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=i(t,["negativePrompt"]);e!==void 0&&d!=null&&l(e,["parameters","negativePrompt"],d);const c=i(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&l(e,["parameters","enhancePrompt"],c),i(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=i(t,["lastFrame"]);e!==void 0&&f!=null&&l(e,["instances[0]","lastFrame"],ko(f));const p=i(t,["referenceImages"]);if(e!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>fy(g))),l(e,["instances[0]","referenceImages"],h)}if(i(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(i(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function d0(t,e){const n={},o=i(t,["numberOfVideos"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=i(t,["outputGcsUri"]);e!==void 0&&s!=null&&l(e,["parameters","storageUri"],s);const r=i(t,["fps"]);e!==void 0&&r!=null&&l(e,["parameters","fps"],r);const a=i(t,["durationSeconds"]);e!==void 0&&a!=null&&l(e,["parameters","durationSeconds"],a);const u=i(t,["seed"]);e!==void 0&&u!=null&&l(e,["parameters","seed"],u);const d=i(t,["aspectRatio"]);e!==void 0&&d!=null&&l(e,["parameters","aspectRatio"],d);const c=i(t,["resolution"]);e!==void 0&&c!=null&&l(e,["parameters","resolution"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const p=i(t,["pubsubTopic"]);e!==void 0&&p!=null&&l(e,["parameters","pubsubTopic"],p);const h=i(t,["negativePrompt"]);e!==void 0&&h!=null&&l(e,["parameters","negativePrompt"],h);const g=i(t,["enhancePrompt"]);e!==void 0&&g!=null&&l(e,["parameters","enhancePrompt"],g);const _=i(t,["generateAudio"]);e!==void 0&&_!=null&&l(e,["parameters","generateAudio"],_);const v=i(t,["lastFrame"]);e!==void 0&&v!=null&&l(e,["instances[0]","lastFrame"],Se(v));const x=i(t,["referenceImages"]);if(e!==void 0&&x!=null){let T=x;Array.isArray(T)&&(T=T.map(b=>hy(b))),l(e,["instances[0]","referenceImages"],T)}const y=i(t,["mask"]);e!==void 0&&y!=null&&l(e,["instances[0]","mask"],dy(y));const w=i(t,["compressionQuality"]);return e!==void 0&&w!=null&&l(e,["parameters","compressionQuality"],w),n}function f0(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response","generateVideoResponse"]);return a!=null&&l(e,["response"],g0(a)),e}function h0(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response"]);return a!=null&&l(e,["response"],y0(a)),e}function p0(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const r=i(e,["image"]);r!=null&&l(n,["instances[0]","image"],ko(r));const a=i(e,["video"]);a!=null&&l(n,["instances[0]","video"],lu(a));const u=i(e,["source"]);u!=null&&v0(u,n);const d=i(e,["config"]);return d!=null&&c0(d,n),n}function m0(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const r=i(e,["image"]);r!=null&&l(n,["instances[0]","image"],Se(r));const a=i(e,["video"]);a!=null&&l(n,["instances[0]","video"],uu(a));const u=i(e,["source"]);u!=null&&x0(u,n);const d=i(e,["config"]);return d!=null&&d0(d,n),n}function g0(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>T0(a))),l(e,["generatedVideos"],r)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&l(e,["raiMediaFilteredReasons"],s),e}function y0(t){const e={},n=i(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>b0(a))),l(e,["generatedVideos"],r)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&l(e,["raiMediaFilteredReasons"],s),e}function v0(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&l(e,["instances[0]","image"],ko(s));const r=i(t,["video"]);return e!==void 0&&r!=null&&l(e,["instances[0]","video"],lu(r)),n}function x0(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&l(e,["instances[0]","image"],Se(s));const r=i(t,["video"]);return e!==void 0&&r!=null&&l(e,["instances[0]","video"],uu(r)),n}function _0(t){const e={},n=i(t,["_self"]);n!=null&&l(e,["image"],P0(n));const o=i(t,["raiFilteredReason"]);o!=null&&l(e,["raiFilteredReason"],o);const s=i(t,["_self"]);return s!=null&&l(e,["safetyAttributes"],ru(s)),e}function Ao(t){const e={},n=i(t,["_self"]);n!=null&&l(e,["image"],su(n));const o=i(t,["raiFilteredReason"]);o!=null&&l(e,["raiFilteredReason"],o);const s=i(t,["_self"]);s!=null&&l(e,["safetyAttributes"],iu(s));const r=i(t,["prompt"]);return r!=null&&l(e,["enhancedPrompt"],r),e}function w0(t){const e={},n=i(t,["_self"]);n!=null&&l(e,["mask"],su(n));const o=i(t,["labels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),l(e,["labels"],s)}return e}function T0(t){const e={},n=i(t,["video"]);return n!=null&&l(e,["video"],uy(n)),e}function b0(t){const e={},n=i(t,["_self"]);return n!=null&&l(e,["video"],cy(n)),e}function C0(t){const e={},n=i(t,["modelSelectionConfig"]);n!=null&&l(e,["modelConfig"],n);const o=i(t,["responseJsonSchema"]);o!=null&&l(e,["responseJsonSchema"],o);const s=i(t,["audioTimestamp"]);s!=null&&l(e,["audioTimestamp"],s);const r=i(t,["candidateCount"]);r!=null&&l(e,["candidateCount"],r);const a=i(t,["enableAffectiveDialog"]);a!=null&&l(e,["enableAffectiveDialog"],a);const u=i(t,["frequencyPenalty"]);u!=null&&l(e,["frequencyPenalty"],u);const d=i(t,["logprobs"]);d!=null&&l(e,["logprobs"],d);const c=i(t,["maxOutputTokens"]);c!=null&&l(e,["maxOutputTokens"],c);const f=i(t,["mediaResolution"]);f!=null&&l(e,["mediaResolution"],f);const p=i(t,["presencePenalty"]);p!=null&&l(e,["presencePenalty"],p);const h=i(t,["responseLogprobs"]);h!=null&&l(e,["responseLogprobs"],h);const g=i(t,["responseMimeType"]);g!=null&&l(e,["responseMimeType"],g);const _=i(t,["responseModalities"]);_!=null&&l(e,["responseModalities"],_);const v=i(t,["responseSchema"]);v!=null&&l(e,["responseSchema"],v);const x=i(t,["routingConfig"]);x!=null&&l(e,["routingConfig"],x);const y=i(t,["seed"]);y!=null&&l(e,["seed"],y);const w=i(t,["speechConfig"]);w!=null&&l(e,["speechConfig"],w);const T=i(t,["stopSequences"]);T!=null&&l(e,["stopSequences"],T);const b=i(t,["temperature"]);b!=null&&l(e,["temperature"],b);const C=i(t,["thinkingConfig"]);C!=null&&l(e,["thinkingConfig"],C);const S=i(t,["topK"]);S!=null&&l(e,["topK"],S);const E=i(t,["topP"]);if(E!=null&&l(e,["topP"],E),i(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function E0(t,e){const n={},o=i(e,["model"]);return o!=null&&l(n,["_url","name"],z(t,o)),n}function S0(t,e){const n={},o=i(e,["model"]);return o!=null&&l(n,["_url","name"],z(t,o)),n}function I0(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function A0(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function k0(t){const e={},n=i(t,["aspectRatio"]);n!=null&&l(e,["aspectRatio"],n);const o=i(t,["imageSize"]);if(o!=null&&l(e,["imageSize"],o),i(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function N0(t){const e={},n=i(t,["aspectRatio"]);n!=null&&l(e,["aspectRatio"],n);const o=i(t,["imageSize"]);o!=null&&l(e,["imageSize"],o);const s=i(t,["outputMimeType"]);s!=null&&l(e,["imageOutputOptions","mimeType"],s);const r=i(t,["outputCompressionQuality"]);return r!=null&&l(e,["imageOutputOptions","compressionQuality"],r),e}function P0(t){const e={},n=i(t,["bytesBase64Encoded"]);n!=null&&l(e,["imageBytes"],at(n));const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function su(t){const e={},n=i(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&l(e,["imageBytes"],at(o));const s=i(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}function ko(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=i(t,["imageBytes"]);n!=null&&l(e,["bytesBase64Encoded"],at(n));const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Se(t){const e={},n=i(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const o=i(t,["imageBytes"]);o!=null&&l(e,["bytesBase64Encoded"],at(o));const s=i(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}function R0(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&l(n,["_query","pageSize"],s);const r=i(e,["pageToken"]);n!==void 0&&r!=null&&l(n,["_query","pageToken"],r);const a=i(e,["filter"]);n!==void 0&&a!=null&&l(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],Xl(t,u)),o}function M0(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&l(n,["_query","pageSize"],s);const r=i(e,["pageToken"]);n!==void 0&&r!=null&&l(n,["_query","pageToken"],r);const a=i(e,["filter"]);n!==void 0&&a!=null&&l(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],Xl(t,u)),o}function D0(t,e){const n={},o=i(e,["config"]);return o!=null&&R0(t,o,n),n}function F0(t,e){const n={},o=i(e,["config"]);return o!=null&&M0(t,o,n),n}function U0(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let r=jl(s);Array.isArray(r)&&(r=r.map(a=>Is(a))),l(e,["models"],r)}return e}function L0(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let r=jl(s);Array.isArray(r)&&(r=r.map(a=>As(a))),l(e,["models"],r)}return e}function G0(t){const e={},n=i(t,["maskMode"]);n!=null&&l(e,["maskMode"],n);const o=i(t,["segmentationClasses"]);o!=null&&l(e,["maskClasses"],o);const s=i(t,["maskDilation"]);return s!=null&&l(e,["dilation"],s),e}function Is(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["displayName"]);o!=null&&l(e,["displayName"],o);const s=i(t,["description"]);s!=null&&l(e,["description"],s);const r=i(t,["version"]);r!=null&&l(e,["version"],r);const a=i(t,["_self"]);a!=null&&l(e,["tunedModelInfo"],ey(a));const u=i(t,["inputTokenLimit"]);u!=null&&l(e,["inputTokenLimit"],u);const d=i(t,["outputTokenLimit"]);d!=null&&l(e,["outputTokenLimit"],d);const c=i(t,["supportedGenerationMethods"]);c!=null&&l(e,["supportedActions"],c);const f=i(t,["temperature"]);f!=null&&l(e,["temperature"],f);const p=i(t,["maxTemperature"]);p!=null&&l(e,["maxTemperature"],p);const h=i(t,["topP"]);h!=null&&l(e,["topP"],h);const g=i(t,["topK"]);g!=null&&l(e,["topK"],g);const _=i(t,["thinking"]);return _!=null&&l(e,["thinking"],_),e}function As(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["displayName"]);o!=null&&l(e,["displayName"],o);const s=i(t,["description"]);s!=null&&l(e,["description"],s);const r=i(t,["versionId"]);r!=null&&l(e,["version"],r);const a=i(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(h=>Xg(h))),l(e,["endpoints"],p)}const u=i(t,["labels"]);u!=null&&l(e,["labels"],u);const d=i(t,["_self"]);d!=null&&l(e,["tunedModelInfo"],ty(d));const c=i(t,["defaultCheckpointId"]);c!=null&&l(e,["defaultCheckpointId"],c);const f=i(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>h)),l(e,["checkpoints"],p)}return e}function q0(t){const e={},n=i(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&l(e,["fileData"],jg(r));const a=i(t,["functionCall"]);a!=null&&l(e,["functionCall"],Zg(a));const u=i(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&l(e,["inlineData"],Cg(d));const c=i(t,["text"]);c!=null&&l(e,["text"],c);const f=i(t,["thought"]);f!=null&&l(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&l(e,["thoughtSignature"],p);const h=i(t,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function V0(t){const e={},n=i(t,["productImage"]);return n!=null&&l(e,["image"],Se(n)),e}function H0(t,e){const n={},o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=i(t,["baseSteps"]);e!==void 0&&s!=null&&l(e,["parameters","baseSteps"],s);const r=i(t,["outputGcsUri"]);e!==void 0&&r!=null&&l(e,["parameters","storageUri"],r);const a=i(t,["seed"]);e!==void 0&&a!=null&&l(e,["parameters","seed"],a);const u=i(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&l(e,["parameters","safetySetting"],u);const d=i(t,["personGeneration"]);e!==void 0&&d!=null&&l(e,["parameters","personGeneration"],d);const c=i(t,["addWatermark"]);e!==void 0&&c!=null&&l(e,["parameters","addWatermark"],c);const f=i(t,["outputMimeType"]);e!==void 0&&f!=null&&l(e,["parameters","outputOptions","mimeType"],f);const p=i(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&l(e,["parameters","outputOptions","compressionQuality"],p);const h=i(t,["enhancePrompt"]);e!==void 0&&h!=null&&l(e,["parameters","enhancePrompt"],h);const g=i(t,["labels"]);return e!==void 0&&g!=null&&l(e,["labels"],g),n}function B0(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["source"]);s!=null&&O0(s,n);const r=i(e,["config"]);return r!=null&&H0(r,n),n}function $0(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ao(s))),l(e,["generatedImages"],o)}return e}function O0(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const s=i(t,["personImage"]);e!==void 0&&s!=null&&l(e,["instances[0]","personImage","image"],Se(s));const r=i(t,["productImages"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>V0(u))),l(e,["instances[0]","productImages"],a)}return n}function K0(t){const e={},n=i(t,["referenceImage"]);n!=null&&l(e,["referenceImage"],Se(n));const o=i(t,["referenceId"]);o!=null&&l(e,["referenceId"],o);const s=i(t,["referenceType"]);s!=null&&l(e,["referenceType"],s);const r=i(t,["maskImageConfig"]);r!=null&&l(e,["maskImageConfig"],G0(r));const a=i(t,["controlImageConfig"]);a!=null&&l(e,["controlImageConfig"],Pg(a));const u=i(t,["styleImageConfig"]);u!=null&&l(e,["styleImageConfig"],u);const d=i(t,["subjectImageConfig"]);return d!=null&&l(e,["subjectImageConfig"],d),e}function ru(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&l(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&l(e,["contentType"],s),e}function iu(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&l(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&l(e,["contentType"],s),e}function J0(t){const e={},n=i(t,["category"]);if(n!=null&&l(e,["category"],n),i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(t,["threshold"]);return o!=null&&l(e,["threshold"],o),e}function z0(t){const e={},n=i(t,["image"]);return n!=null&&l(e,["image"],Se(n)),e}function W0(t,e){const n={},o=i(t,["mode"]);e!==void 0&&o!=null&&l(e,["parameters","mode"],o);const s=i(t,["maxPredictions"]);e!==void 0&&s!=null&&l(e,["parameters","maxPredictions"],s);const r=i(t,["confidenceThreshold"]);e!==void 0&&r!=null&&l(e,["parameters","confidenceThreshold"],r);const a=i(t,["maskDilation"]);e!==void 0&&a!=null&&l(e,["parameters","maskDilation"],a);const u=i(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&l(e,["parameters","binaryColorThreshold"],u);const d=i(t,["labels"]);return e!==void 0&&d!=null&&l(e,["labels"],d),n}function Y0(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["source"]);s!=null&&X0(s,n);const r=i(e,["config"]);return r!=null&&W0(r,n),n}function Q0(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>w0(s))),l(e,["generatedMasks"],o)}return e}function X0(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&l(e,["instances[0]","image"],Se(s));const r=i(t,["scribbleImage"]);return e!==void 0&&r!=null&&l(e,["instances[0]","scribble"],z0(r)),n}function j0(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],e0(n));const o=i(t,["retrievalConfig"]);return o!=null&&l(e,["retrievalConfig"],o),e}function Z0(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),l(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);const a=i(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],I0(u));const d=i(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],A0(d));const c=i(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}function au(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>t0(h))),l(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&l(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&l(e,["googleSearchRetrieval"],s);const r=i(t,["computerUse"]);if(r!=null&&l(e,["computerUse"],r),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(t,["codeExecution"]);a!=null&&l(e,["codeExecution"],a);const u=i(t,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);const d=i(t,["googleMaps"]);d!=null&&l(e,["googleMaps"],d);const c=i(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],c);const f=i(t,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function ey(t){const e={},n=i(t,["baseModel"]);n!=null&&l(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&l(e,["updateTime"],s),e}function ty(t){const e={},n=i(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&l(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&l(e,["updateTime"],s),e}function ny(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&l(e,["description"],s);const r=i(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&l(e,["defaultCheckpointId"],r),n}function oy(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&l(e,["description"],s);const r=i(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&l(e,["defaultCheckpointId"],r),n}function sy(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","name"],z(t,o));const s=i(e,["config"]);return s!=null&&ny(s,n),n}function ry(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["config"]);return s!=null&&oy(s,n),n}function iy(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const s=i(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&l(e,["parameters","safetySetting"],s);const r=i(t,["personGeneration"]);e!==void 0&&r!=null&&l(e,["parameters","personGeneration"],r);const a=i(t,["includeRaiReason"]);e!==void 0&&a!=null&&l(e,["parameters","includeRaiReason"],a);const u=i(t,["outputMimeType"]);e!==void 0&&u!=null&&l(e,["parameters","outputOptions","mimeType"],u);const d=i(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&l(e,["parameters","outputOptions","compressionQuality"],d);const c=i(t,["enhanceInputImage"]);e!==void 0&&c!=null&&l(e,["parameters","upscaleConfig","enhanceInputImage"],c);const f=i(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&l(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=i(t,["labels"]);e!==void 0&&p!=null&&l(e,["labels"],p);const h=i(t,["numberOfImages"]);e!==void 0&&h!=null&&l(e,["parameters","sampleCount"],h);const g=i(t,["mode"]);return e!==void 0&&g!=null&&l(e,["parameters","mode"],g),n}function ay(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["image"]);s!=null&&l(n,["instances[0]","image"],Se(s));const r=i(e,["upscaleFactor"]);r!=null&&l(n,["parameters","upscaleConfig","upscaleFactor"],r);const a=i(e,["config"]);return a!=null&&iy(a,n),n}function ly(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Ao(r))),l(e,["generatedImages"],s)}return e}function uy(t){const e={},n=i(t,["uri"]);n!=null&&l(e,["uri"],n);const o=i(t,["encodedVideo"]);o!=null&&l(e,["videoBytes"],at(o));const s=i(t,["encoding"]);return s!=null&&l(e,["mimeType"],s),e}function cy(t){const e={},n=i(t,["gcsUri"]);n!=null&&l(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&l(e,["videoBytes"],at(o));const s=i(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}function dy(t){const e={},n=i(t,["image"]);n!=null&&l(e,["_self"],Se(n));const o=i(t,["maskMode"]);return o!=null&&l(e,["maskMode"],o),e}function fy(t){const e={},n=i(t,["image"]);n!=null&&l(e,["image"],ko(n));const o=i(t,["referenceType"]);return o!=null&&l(e,["referenceType"],o),e}function hy(t){const e={},n=i(t,["image"]);n!=null&&l(e,["image"],Se(n));const o=i(t,["referenceType"]);return o!=null&&l(e,["referenceType"],o),e}function lu(t){const e={},n=i(t,["uri"]);n!=null&&l(e,["uri"],n);const o=i(t,["videoBytes"]);o!=null&&l(e,["encodedVideo"],at(o));const s=i(t,["mimeType"]);return s!=null&&l(e,["encoding"],s),e}function uu(t){const e={},n=i(t,["uri"]);n!=null&&l(e,["gcsUri"],n);const o=i(t,["videoBytes"]);o!=null&&l(e,["bytesBase64Encoded"],at(o));const s=i(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function py(t,e){const n={},o=i(t,["displayName"]);return e!==void 0&&o!=null&&l(e,["displayName"],o),n}function my(t){const e={},n=i(t,["config"]);return n!=null&&py(n,e),e}function gy(t,e){const n={},o=i(t,["force"]);return e!==void 0&&o!=null&&l(e,["_query","force"],o),n}function yy(t){const e={},n=i(t,["name"]);n!=null&&l(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&gy(o,e),e}function vy(t){const e={},n=i(t,["name"]);return n!=null&&l(e,["_url","name"],n),e}function xy(t,e){const n={},o=i(t,["customMetadata"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["customMetadata"],r)}const s=i(t,["chunkingConfig"]);return e!==void 0&&s!=null&&l(e,["chunkingConfig"],s),n}function _y(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response"]);return a!=null&&l(e,["response"],Ty(a)),e}function wy(t){const e={},n=i(t,["fileSearchStoreName"]);n!=null&&l(e,["_url","file_search_store_name"],n);const o=i(t,["fileName"]);o!=null&&l(e,["fileName"],o);const s=i(t,["config"]);return s!=null&&xy(s,e),e}function Ty(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&l(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&l(e,["documentName"],s),e}function by(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function Cy(t){const e={},n=i(t,["config"]);return n!=null&&by(n,e),e}function Ey(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["fileSearchStores"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["fileSearchStores"],r)}return e}function cu(t,e){const n={},o=i(t,["mimeType"]);e!==void 0&&o!=null&&l(e,["mimeType"],o);const s=i(t,["displayName"]);e!==void 0&&s!=null&&l(e,["displayName"],s);const r=i(t,["customMetadata"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),l(e,["customMetadata"],u)}const a=i(t,["chunkingConfig"]);return e!==void 0&&a!=null&&l(e,["chunkingConfig"],a),n}function Sy(t){const e={},n=i(t,["fileSearchStoreName"]);n!=null&&l(e,["_url","file_search_store_name"],n);const o=i(t,["config"]);return o!=null&&cu(o,e),e}function Iy(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ay="Content-Type",ky="X-Server-Timeout",Ny="User-Agent",ks="x-goog-api-client",Py="1.34.0",Ry=`google-genai-sdk/${Py}`,My="v1beta1",Dy="v1beta";class Fy{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:My,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Dy,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))s.searchParams.append(a,String(u));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,s.toString(),e.abortSignal),this.unaryApiCall(s,r,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,r]of Object.entries(n))typeof r=="object"?o[s]=Object.assign(Object.assign({},o[s]),r):r!==void 0&&(o[s]=r);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,s.toString(),e.abortSignal),this.streamApiCall(s,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,s){if(n&&n.timeout||s){const r=new AbortController,a=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>r.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=a}return n&&n.extraBody!==null&&Uy(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await ba(s),new Cs(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await ba(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Ce(this,arguments,function*(){var o;const s=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),r=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";const u="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:f}=yield $(s.read());if(c){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=r.decode(f,{stream:!0});try{const _=JSON.parse(p);if("error"in _){const v=JSON.parse(JSON.stringify(_.error)),x=v.status,y=v.code,w=`got status: ${x}. ${JSON.stringify(_)}`;if(y>=400&&y<600)throw new So({message:w,status:y})}}catch(_){if(_.name==="ApiError")throw _}a+=p;let h=-1,g=0;for(;;){h=-1,g=0;for(const x of d){const y=a.indexOf(x);y!==-1&&(h===-1||y<h)&&(h=y,g=x.length)}if(h===-1)break;const _=a.substring(0,h);a=a.substring(h+g);const v=_.trim();if(v.startsWith(u)){const x=v.substring(u.length).trim();try{const y=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield $(new Cs(y))}catch(y){throw new Error(`exception parsing stream chunk ${x}. ${y}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=Ry+" "+this.clientOptions.userAgentExtra;return e[Ny]=n,e[ks]=n,e[Ay]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))o.append(s,r);e.timeout&&e.timeout>0&&o.append(ky,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const r=this.clientOptions.uploader,a=await r.stat(e);s.sizeBytes=String(a.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=u;const d={file:s},c=this.getFileName(e),f=D("upload/v1beta/files",d._url),p=await this.fetchUploadUrl(f,s.sizeBytes,s.mimeType,c,d,n==null?void 0:n.httpOptions);return r.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,o){var s;const r=this.clientOptions.uploader,a=await r.stat(n),u=String(a.size),d=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};o!=null&&cu(o,p);const h=await this.fetchUploadUrl(c,u,d,f,p,o==null?void 0:o.httpOptions);return r.uploadToFileSearchStore(n,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,s,r,a){var u;let d={};a?d=a:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const c=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:d});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=c==null?void 0:c.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function ba(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new So({message:s,status:n}):new Error(s)}}function Uy(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const r=JSON.parse(t.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(r,a){const u=Object.assign({},r);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const c=a[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const s=o(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ly="mcp_used/unknown";let Gy=!1;function du(t){for(const e of t)if(qy(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Gy}function fu(t){var e;const n=(e=t[ks])!==null&&e!==void 0?e:"";t[ks]=(n+` ${Ly}`).trimStart()}function qy(t){return t!==null&&typeof t=="object"&&t instanceof ir}function Vy(t){return Ce(this,arguments,function*(n,o=100){let s,r=0;for(;r<o;){const a=yield $(n.listTools({cursor:s}));for(const u of a.tools)yield yield $(u),r++;if(!a.nextCursor)break;s=a.nextCursor}})}class ir{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new ir(e,n)}async initialize(){var e,n,o,s;if(this.mcpTools.length>0)return;const r={},a=[];for(const f of this.mcpClients)try{for(var u=!0,d=(n=void 0,Ee(Vy(f))),c;c=await d.next(),e=c.done,!e;u=!0){s=c.value,u=!1;const p=s;a.push(p);const h=p.name;if(r[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);r[h]=f}}catch(p){n={error:p}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),vp(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const a=await s.callTool({name:o.name,arguments:o.args},void 0,r);n.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Hy(t,e,n){const o=new cp;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(o,s),e(o)}class By{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),a=Ky(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(T=>{c=T}),p=e.callbacks,h=function(){c({})},g=this.apiClient,_={onopen:h,onmessage:T=>{Hy(g,p.onmessage,T)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(T){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(T){}},v=this.webSocketFactory.create(d,Oy(a),_);v.connect(),await f;const w={setup:{model:z(this.apiClient,e.model)}};return v.send(JSON.stringify(w)),new $y(v,this.apiClient)}}class $y{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=mg(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=pg(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Pt.PLAY)}pause(){this.sendPlaybackControl(Pt.PAUSE)}stop(){this.sendPlaybackControl(Pt.STOP)}resetContext(){this.sendPlaybackControl(Pt.RESET_CONTEXT)}close(){this.conn.close()}}function Oy(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function Ky(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jy="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function zy(t,e,n){const o=new up;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const r=JSON.parse(s);if(t.isVertexAI()){const a=vg(r);Object.assign(o,a)}else Object.assign(o,r);e(o)}class Wy{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new By(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,s,r,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&du(e.config.tools)&&fu(p);const h=jy(p);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f);else{const I=this.apiClient.getApiKey();let M="BidiGenerateContent",F="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",F="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${M}?${F}=${I}`}let g=()=>{};const _=new Promise(I=>{g=I}),v=e.callbacks,x=function(){var I;(I=v==null?void 0:v.onopen)===null||I===void 0||I.call(v),g({})},y=this.apiClient,w={onopen:x,onmessage:I=>{zy(y,v.onmessage,I)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(I){},onclose:(o=v==null?void 0:v.onclose)!==null&&o!==void 0?o:function(I){}},T=this.webSocketFactory.create(f,Xy(h),w);T.connect(),await _;let b=z(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&b.startsWith("publishers/")){const I=this.apiClient.getProject(),M=this.apiClient.getLocation();b=`projects/${I}/locations/${M}/`+b}let C={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ho.AUDIO]}:e.config.responseModalities=[ho.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const S=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],E=[];for(const I of S)if(this.isCallableTool(I)){const M=I;E.push(await M.tool())}else E.push(I);E.length>0&&(e.config.tools=E);const N={model:b,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?C=hg(this.apiClient,N):C=fg(this.apiClient,N),delete C.config,T.send(JSON.stringify(C)),new Qy(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Yy={turnComplete:!0};class Qy{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=ve(n.turns),e.isVertexAI()||(o=o.map(s=>Io(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const r of o){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(Jy)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Yy),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:yg(e)}:n={realtimeInput:gg(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Xy(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function jy(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ca=10;function Ea(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Lt(a)){s=!0;break}if(!s)return!0;const r=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Lt(t){return"callTool"in t&&typeof t.callTool=="function"}function Zy(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Lt(s)))!==null&&o!==void 0?o:!1}function Sa(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,s)=>{if(Lt(o))return;const r=o;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(s)}),n}function Ia(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ev extends Be{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,s,r,a,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Zy(n)||Ea(n.config))return await this.generateContentInternal(d);const c=Sa(n);if(c.length>0){const v=c.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let f,p;const h=ve(d.contents),g=(r=(s=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:Ca;let _=0;for(;_<g&&(f=await this.generateContentInternal(d),!(!f.functionCalls||f.functionCalls.length===0));){const v=f.candidates[0].content,x=[];for(const y of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(Lt(y)){const T=await y.callTool(f.functionCalls);x.push(...T)}_++,p={role:"user",parts:x},d.contents=ve(d.contents),d.contents.push(v),d.contents.push(p),Ia(d.config)&&(h.push(v),h.push(p))}return Ia(d.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var o,s,r,a,u;if(this.maybeMoveToResponseJsonSchem(n),Ea(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const d=Sa(n);if(d.length>0){const p=d.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(r=(s=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,f=(u=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var s;let r;const a=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?r=d==null?void 0:d.safetyAttributes:a.push(d);let u;return r?u={generatedImages:a,positivePromptSafetyAttributes:r,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Ct(He.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var o,s,r,a,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(r=n.source)===null||r===void 0?void 0:r.video)===null||a===void 0)&&a.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,s;const r=(n=e.config)===null||n===void 0?void 0:n.tools;if(!r)return e;const a=await Promise.all(r.map(async d=>Lt(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&du(e.config.tools)){const d=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),fu(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var n,o,s;const r=new Map;for(const a of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Lt(a)){const u=a,d=await u.tool();for(const c of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(r.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);r.set(c.name,u)}}return r}async processAfcStream(e){var n,o,s;const r=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Ca;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return function(c,f,p){return Ce(this,arguments,function*(){for(var h,g,_,v,x,y;u<r;){a&&(u++,a=!1);const C=yield $(c.processParamsMaybeAddMcpUsage(p)),S=yield $(c.generateContentStreamInternal(C)),E=[],N=[];try{for(var w=!0,T=(g=void 0,Ee(S)),b;b=yield $(T.next()),h=b.done,!h;w=!0){v=b.value,w=!1;const I=v;if(yield yield $(I),I.candidates&&(!((x=I.candidates[0])===null||x===void 0)&&x.content)){N.push(I.candidates[0].content);for(const M of(y=I.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(u<r&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(M.functionCall.name)){const F=yield $(f.get(M.functionCall.name).callTool([M.functionCall]));E.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(I){g={error:I}}finally{try{!w&&!h&&(_=T.return)&&(yield $(_.call(T)))}finally{if(g)throw g.error}}if(E.length>0){a=!0;const I=new on;I.candidates=[{content:{role:"user",parts:E}}],yield yield $(I);const M=[];M.push(...N),M.push({role:"user",parts:E});const F=ve(p.contents).concat(M);p.contents=F}else break}})}(this,d,e)}async generateContentInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=_a(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Ta(f),h=new on;return Object.assign(h,p),h})}else{const c=xa(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=wa(f),h=new on;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=_a(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return Ce(this,arguments,function*(){var h,g,_,v;try{for(var x=!0,y=Ee(p),w;w=yield $(y.next()),h=w.done,!h;x=!0){v=w.value,x=!1;const T=v,b=Ta(yield $(T.json()));b.sdkHttpResponse={headers:T.headers};const C=new on;Object.assign(C,b),yield yield $(C)}}catch(T){g={error:T}}finally{try{!x&&!h&&(_=y.return)&&(yield $(_.call(y)))}finally{if(g)throw g.error}}})})}else{const c=xa(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(p){return Ce(this,arguments,function*(){var h,g,_,v;try{for(var x=!0,y=Ee(p),w;w=yield $(y.next()),h=w.done,!h;x=!0){v=w.value,x=!1;const T=v,b=wa(yield $(T.json()));b.sdkHttpResponse={headers:T.headers};const C=new on;Object.assign(C,b),yield yield $(C)}}catch(T){g={error:T}}finally{try{!x&&!h&&(_=y.return)&&(yield $(_.call(y)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Wg(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Qg(f),h=new na;return Object.assign(h,p),h})}else{const c=zg(this.apiClient,e);return u=D("{model}:batchEmbedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Yg(f),h=new na;return Object.assign(h,p),h})}}async generateImagesInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=a0(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=u0(f),h=new oa;return Object.assign(h,p),h})}else{const c=i0(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=l0(f),h=new oa;return Object.assign(h,p),h})}}async editImageInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=$g(this.apiClient,e);return r=D("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Og(d),f=new jh;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=ay(this.apiClient,e);return r=D("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=ly(d),f=new Zh;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=B0(this.apiClient,e);return r=D("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=$0(d),f=new ep;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=Y0(this.apiClient,e);return r=D("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Q0(d),f=new tp;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=S0(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>As(f))}else{const c=E0(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>Is(f))}}async listInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=F0(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=L0(f),h=new sa;return Object.assign(h,p),h})}else{const c=D0(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=U0(f),h=new sa;return Object.assign(h,p),h})}}async update(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ry(this.apiClient,e);return u=D("{model}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>As(f))}else{const c=sy(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>Is(f))}}async delete(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=qg(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Hg(f),h=new ra;return Object.assign(h,p),h})}else{const c=Gg(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Vg(f),h=new ra;return Object.assign(h,p),h})}}async countTokens(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Fg(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Lg(f),h=new ia;return Object.assign(h,p),h})}else{const c=Dg(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Ug(f),h=new ia;return Object.assign(h,p),h})}}async computeTokens(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=Ig(this.apiClient,e);return r=D("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Ag(d),f=new np;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=m0(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=h0(f),h=new po;return Object.assign(h,p),h})}else{const c=p0(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>{const p=f0(f),h=new po;return Object.assign(h,p),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tv extends Be{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Jh(e);return u=D("{operationName}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a}else{const c=Kh(e);return u=D("{operationName}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=Gh(e);return r=D("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nv(t){const e={},n=i(t,["data"]);if(n!=null&&l(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function ov(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>fv(r))),l(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&l(e,["role"],o),e}function sv(t,e,n){const o={},s=i(e,["expireTime"]);n!==void 0&&s!=null&&l(n,["expireTime"],s);const r=i(e,["newSessionExpireTime"]);n!==void 0&&r!=null&&l(n,["newSessionExpireTime"],r);const a=i(e,["uses"]);n!==void 0&&a!=null&&l(n,["uses"],a);const u=i(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&l(n,["bidiGenerateContentSetup"],dv(t,u));const d=i(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&l(n,["fieldMask"],d),o}function rv(t,e){const n={},o=i(e,["config"]);return o!=null&&l(n,["config"],sv(t,o,n)),n}function iv(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function av(t){const e={},n=i(t,["id"]);n!=null&&l(e,["id"],n);const o=i(t,["args"]);o!=null&&l(e,["args"],o);const s=i(t,["name"]);if(s!=null&&l(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function lv(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function uv(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function cv(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","responseModalities"],s);const r=i(t,["temperature"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig","temperature"],r);const a=i(t,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","speechConfig"],rr(p));const h=i(t,["thinkingConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","thinkingConfig"],h);const g=i(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=i(t,["systemInstruction"]);e!==void 0&&_!=null&&l(e,["setup","systemInstruction"],ov(ae(_)));const v=i(t,["tools"]);if(e!==void 0&&v!=null){let S=jt(v);Array.isArray(S)&&(S=S.map(E=>pv(Xt(E)))),l(e,["setup","tools"],S)}const x=i(t,["sessionResumption"]);e!==void 0&&x!=null&&l(e,["setup","sessionResumption"],hv(x));const y=i(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&l(e,["setup","inputAudioTranscription"],y);const w=i(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&l(e,["setup","outputAudioTranscription"],w);const T=i(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&l(e,["setup","realtimeInputConfig"],T);const b=i(t,["contextWindowCompression"]);e!==void 0&&b!=null&&l(e,["setup","contextWindowCompression"],b);const C=i(t,["proactivity"]);if(e!==void 0&&C!=null&&l(e,["setup","proactivity"],C),i(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function dv(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["setup","model"],z(t,o));const s=i(e,["config"]);return s!=null&&l(n,["config"],cv(s,n)),n}function fv(t){const e={},n=i(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&l(e,["fileData"],iv(r));const a=i(t,["functionCall"]);a!=null&&l(e,["functionCall"],av(a));const u=i(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&l(e,["inlineData"],nv(d));const c=i(t,["text"]);c!=null&&l(e,["text"],c);const f=i(t,["thought"]);f!=null&&l(e,["thought"],f);const p=i(t,["thoughtSignature"]);p!=null&&l(e,["thoughtSignature"],p);const h=i(t,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function hv(t){const e={},n=i(t,["handle"]);if(n!=null&&l(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function pv(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),l(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);const a=i(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],lv(u));const d=i(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],uv(d));const c=i(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mv(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(r=>`${n}.${r}`);e.push(...s)}else e.push(n)}return e.join(",")}function gv(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const r=o.setup;typeof r=="object"&&r!==null?(t.bidiGenerateContentSetup=r,n=r):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const r=mv(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?t.fieldMask=r:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];s.length>0&&(u=s.map(c=>a.includes(c)?`generationConfig.${c}`:c));const d=[];r&&d.push(r),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class yv extends Be{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=rv(this.apiClient,e);r=D("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=gv(u,e.config);return s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vv(t,e){const n={},o=i(t,["force"]);return e!==void 0&&o!=null&&l(e,["_query","force"],o),n}function xv(t){const e={},n=i(t,["name"]);n!=null&&l(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&vv(o,e),e}function _v(t){const e={},n=i(t,["name"]);return n!=null&&l(e,["_url","name"],n),e}function wv(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function Tv(t){const e={},n=i(t,["parent"]);n!=null&&l(e,["_url","parent"],n);const o=i(t,["config"]);return o!=null&&wv(o,e),e}function bv(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["documents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["documents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cv extends Be{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ct(He.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_v(e);return r=D("{name}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xv(e);s=D("{name}",a._url),r=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Tv(e);return r=D("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=bv(d),f=new op;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ev extends Be{constructor(e,n=new Cv(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new Ct(He.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=my(e);return r=D("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vy(e);return r=D("{name}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=yy(e);s=D("{name}",a._url),r=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Cy(e);return r=D("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Ey(d),f=new sp;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Sy(e);return r=D("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Iy(d),f=new rp;return Object.assign(f,c),f})}}async importFile(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=wy(e);return r=D("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=_y(d),f=new er;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hu=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return hu=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const Sv=()=>hu();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ns(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Ps=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xe extends Error{}class he extends xe{constructor(e,n,o,s){super(`${he.makeMessage(e,n,o)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,o){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,o,s){if(!e||!s)return new No({message:o,cause:Ps(n)});const r=n;return e===400?new mu(e,r,o,s):e===401?new gu(e,r,o,s):e===403?new yu(e,r,o,s):e===404?new vu(e,r,o,s):e===409?new xu(e,r,o,s):e===422?new _u(e,r,o,s):e===429?new wu(e,r,o,s):e>=500?new Tu(e,r,o,s):new he(e,r,o,s)}}class Rs extends he{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class No extends he{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class pu extends No{constructor({message:e}={}){super({message:e??"Request timed out."})}}class mu extends he{}class gu extends he{}class yu extends he{}class vu extends he{}class xu extends he{}class _u extends he{}class wu extends he{}class Tu extends he{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Iv=/^[a-z][a-z0-9+.-]*:/i,Av=t=>Iv.test(t);let Ms=t=>(Ms=Array.isArray,Ms(t));const kv=Ms;let Nv=kv;const Aa=Nv;function Pv(t){if(!t)return!0;for(const e in t)return!1;return!0}function Rv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Mv=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new xe(`${t} must be an integer`);if(e<0)throw new xe(`${t} must be a positive integer`);return e},Dv=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fv=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nt="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uv(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Lv=()=>{var t,e,n,o,s;const r=Uv();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nt,"X-Stainless-OS":Na(Deno.build.os),"X-Stainless-Arch":ka(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nt,"X-Stainless-OS":Na((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":ka((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const a=Gv();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Gv(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const s=o[1]||0,r=o[2]||0,a=o[3]||0;return{browser:e,version:`${s}.${r}.${a}`}}}return null}const ka=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Na=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Bn;const qv=()=>Bn??(Bn=Lv());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vv(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function bu(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Hv(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return bu({start(){},async pull(n){const{done:o,value:s}=await e.next();o?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Cu(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Bv(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),s=o.cancel();o.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $v=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Eu=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function $o(t,e,n){return Eu(),new File(t,e??"unknown_file",n)}function Ov(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Kv=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Su=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Jv=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Su(t),zv=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Wv(t,e,n){if(Eu(),t=await t,Jv(t))return t instanceof File?t:$o([await t.arrayBuffer()],t.name);if(zv(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),$o(await Ds(s),e,n)}const o=await Ds(t);if(e||(e=Ov(t)),!(n!=null&&n.type)){const s=o.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return $o(o,e,n)}async function Ds(t){var e,n,o,s,r;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(Su(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(Kv(t))try{for(var u=!0,d=Ee(t),c;c=await d.next(),e=c.done,!e;u=!0){s=c.value,u=!1;const f=s;a.push(...await Ds(f))}}catch(f){n={error:f}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}else{const f=(r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${Yv(t)}`)}return a}function Yv(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iu{constructor(e){this._client=e}}Iu._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Au(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Pa=Object.freeze(Object.create(null)),Qv=(t=Au)=>function(n,...o){if(n.length===1)return n[0];let s=!1;const r=[],a=n.reduce((f,p,h)=>{var g,_,v;/[?#]/.test(p)&&(s=!0);const x=o[h];let y=(s?encodeURIComponent:t)(""+x);return h!==o.length&&(x==null||typeof x=="object"&&x.toString===((v=Object.getPrototypeOf((_=Object.getPrototypeOf((g=x.hasOwnProperty)!==null&&g!==void 0?g:Pa))!==null&&_!==void 0?_:Pa))===null||v===void 0?void 0:v.toString))&&(y=x+"",r.push({start:f.length+p.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),f+p+(h===o.length?"":y)},""),u=a.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=d.exec(u))!==null;)r.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(r.sort((f,p)=>f.start-p.start),r.length>0){let f=0;const p=r.reduce((h,g)=>{const _=" ".repeat(g.start-f),v="^".repeat(g.length);return f=g.start+g.length,h+_+v},"");throw new xe(`Path parameters result in path with invalid segments:
${r.map(h=>h.error).join(`
`)}
${a}
${p}`)}return a},$n=Qv(Au);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ku extends Iu{create(e,n){var o;const{api_version:s=this._client.apiVersion}=e,r=go(e,["api_version"]);if("model"in r&&"agent_config"in r)throw new xe("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new xe("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post($n`/${s}/interactions`,Object.assign(Object.assign({body:r},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete($n`/${s}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post($n`/${s}/interactions/${e}/cancel`,o)}get(e,n={},o){var s;const r=n??{},{api_version:a=this._client.apiVersion}=r,u=go(r,["api_version"]);return this._client.get($n`/${a}/interactions/${e}`,Object.assign(Object.assign({query:u},o),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}ku._key=Object.freeze(["interactions"]);class Nu extends ku{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xv(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let o=0;for(const s of t)n.set(s,o),o+=s.length;return n}let On;function ar(t){let e;return(On??(e=new globalThis.TextEncoder,On=e.encode.bind(e)))(t)}let Kn;function Ra(t){let e;return(Kn??(e=new globalThis.TextDecoder,Kn=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Po{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ar(e):e;this.buffer=Xv([this.buffer,n]);const o=[];let s;for(;(s=jv(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){o.push(Ra(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const r=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,a=Ra(this.buffer.subarray(0,r));o.push(a),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Po.NEWLINE_CHARS=new Set([`
`,"\r"]);Po.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function jv(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function Zv(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yo={off:0,error:200,warn:300,info:400,debug:500},Ma=(t,e,n)=>{if(t){if(Rv(yo,t))return t;ue(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(yo))}`)}};function ln(){}function Jn(t,e,n){return!e||yo[t]>yo[n]?ln:e[t].bind(e)}const ex={error:ln,warn:ln,info:ln,debug:ln};let Da=new WeakMap;function ue(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return ex;const s=Da.get(n);if(s&&s[0]===o)return s[1];const r={error:Jn("error",n,o),warn:Jn("warn",n,o),info:Jn("info",n,o),debug:Jn("debug",n,o)};return Da.set(n,[o,r]),r}const ut=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rt{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let s=!1;const r=o?ue(o):console;function a(){return Ce(this,arguments,function*(){var d,c,f,p;if(s)throw new xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let h=!1;try{try{for(var g=!0,_=Ee(tx(e,n)),v;v=yield $(_.next()),d=v.done,!d;g=!0){p=v.value,g=!1;const x=p;if(!h)if(x.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield $(JSON.parse(x.data))}catch(y){throw r.error("Could not parse message into JSON:",x.data),r.error("From chunk:",x.raw),y}}}catch(x){c={error:x}}finally{try{!g&&!d&&(f=_.return)&&(yield $(f.call(_)))}finally{if(c)throw c.error}}h=!0}catch(x){if(Ns(x))return yield $(void 0);throw x}finally{h||n.abort()}})}return new Rt(a,n,o)}static fromReadableStream(e,n,o){let s=!1;function r(){return Ce(this,arguments,function*(){var d,c,f,p;const h=new Po,g=Cu(e);try{for(var _=!0,v=Ee(g),x;x=yield $(v.next()),d=x.done,!d;_=!0){p=x.value,_=!1;const y=p;for(const w of h.decode(y))yield yield $(w)}}catch(y){c={error:y}}finally{try{!_&&!d&&(f=v.return)&&(yield $(f.call(v)))}finally{if(c)throw c.error}}for(const y of h.flush())yield yield $(y)})}function a(){return Ce(this,arguments,function*(){var d,c,f,p;if(s)throw new xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let h=!1;try{try{for(var g=!0,_=Ee(r()),v;v=yield $(_.next()),d=v.done,!d;g=!0){p=v.value,g=!1;const x=p;h||x&&(yield yield $(JSON.parse(x)))}}catch(x){c={error:x}}finally{try{!g&&!d&&(f=_.return)&&(yield $(f.call(_)))}finally{if(c)throw c.error}}h=!0}catch(x){if(Ns(x))return yield $(void 0);throw x}finally{h||n.abort()}})}return new Rt(a,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),s=r=>({next:()=>{if(r.length===0){const a=o.next();e.push(a),n.push(a)}return r.shift()}});return[new Rt(()=>s(e),this.controller,this.client),new Rt(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return bu({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:s,done:r}=await n.next();if(r)return o.close();const a=ar(JSON.stringify(s)+`
`);o.enqueue(a)}catch(s){o.error(s)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function tx(t,e){return Ce(this,arguments,function*(){var o,s,r,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new xe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new xe("Attempted to iterate over a response with no body");const u=new ox,d=new Po,c=Cu(t.body);try{for(var f=!0,p=Ee(nx(c)),h;h=yield $(p.next()),o=h.done,!o;f=!0){a=h.value,f=!1;const g=a;for(const _ of d.decode(g)){const v=u.decode(_);v&&(yield yield $(v))}}}catch(g){s={error:g}}finally{try{!f&&!o&&(r=p.return)&&(yield $(r.call(p)))}finally{if(s)throw s.error}}for(const g of d.flush()){const _=u.decode(g);_&&(yield yield $(_))}})}function nx(t){return Ce(this,arguments,function*(){var n,o,s,r;let a=new Uint8Array;try{for(var u=!0,d=Ee(t),c;c=yield $(d.next()),n=c.done,!n;u=!0){r=c.value,u=!1;const f=r;if(f==null)continue;const p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?ar(f):f;let h=new Uint8Array(a.length+p.length);h.set(a),h.set(p,a.length),a=h;let g;for(;(g=Zv(a))!==-1;)yield yield $(a.slice(0,g)),a=a.slice(g)}}catch(f){o={error:f}}finally{try{!u&&!n&&(s=d.return)&&(yield $(s.call(d)))}finally{if(o)throw o.error}}a.length>0&&(yield yield $(a))})}class ox{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,s]=sx(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function sx(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function rx(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:s,startTime:r}=e,a=await(async()=>{var u;if(e.options.stream)return ue(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Rt.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const d=n.headers.get("content-type"),c=(u=d==null?void 0:d.split(";")[0])===null||u===void 0?void 0:u.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return ue(t).debug(`[${o}] response parsed`,ut({retryOfRequestLogID:s,url:n.url,status:n.status,body:a,durationMs:Date.now()-r})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lr extends Promise{constructor(e,n,o=rx){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new lr(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pu=Symbol("brand.privateNullableHeaders");function*ix(t){if(!t)return;if(Pu in t){const{values:o,nulls:s}=t;yield*o.entries();for(const r of s)yield[r,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Aa(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const s=o[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const r=Aa(o[1])?o[1]:[o[1]];let a=!1;for(const u of r)u!==void 0&&(e&&!a&&(a=!0,yield[s,null]),yield[s,u])}}const sn=t=>{const e=new Headers,n=new Set;for(const o of t){const s=new Set;for(const[r,a]of ix(o)){const u=r.toLowerCase();s.has(u)||(e.delete(r),s.add(u)),a===null?(e.delete(r),n.add(u)):(e.append(r,a),n.delete(u))}}return{[Pu]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Oo=t=>{var e,n,o,s,r,a;if(typeof globalThis.process<"u")return(o=(n=(e=Rh)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(a=(r=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||r===void 0?void 0:r.call(s,t))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ru;class Ro{constructor(e){var n,o,s,r,a,u,d,{baseURL:c=Oo("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=Oo("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,h=go(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:f,apiVersion:p},h),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(o=g.timeout)!==null&&o!==void 0?o:Ro.DEFAULT_TIMEOUT,this.logger=(s=g.logger)!==null&&s!==void 0?s:console;const _="warn";this.logLevel=_,this.logLevel=(a=(r=Ma(g.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:Ma(Oo("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:_,this.fetchOptions=g.fetchOptions,this.maxRetries=(u=g.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(d=g.fetch)!==null&&d!==void 0?d:Vv(),this.encoder=$v,this._options=g,this.apiKey=f,this.apiVersion=p,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=sn([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return sn([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return sn([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new xe(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Nt}`}defaultIdempotencyKey(){return`stainless-node-retry-${Sv()}`}makeStatusError(e,n,o,s){return he.generate(e,n,o,s)}buildURL(e,n,o){const s=!this.baseURLOverridden()&&o||this.baseURL,r=Av(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return Pv(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new lr(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var s,r,a;const u=await e,d=(s=u.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=d),await this.prepareOptions(u);const{req:c,url:f,timeout:p}=await this.buildRequest(u,{retryCount:d-n});await this.prepareRequest(c,{url:f,options:u});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=o===void 0?"":`, retryOf: ${o}`,_=Date.now();if(ue(this).debug(`[${h}] sending request`,ut({retryOfRequestLogID:o,method:u.method,url:f,options:u,headers:c.headers})),!((r=u.signal)===null||r===void 0)&&r.aborted)throw new Rs;const v=new AbortController,x=await this.fetchWithTimeout(f,c,p,v).catch(Ps),y=Date.now();if(x instanceof globalThis.Error){const T=`retrying, ${n} attempts remaining`;if(!((a=u.signal)===null||a===void 0)&&a.aborted)throw new Rs;const b=Ns(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(n)return ue(this).info(`[${h}] connection ${b?"timed out":"failed"} - ${T}`),ue(this).debug(`[${h}] connection ${b?"timed out":"failed"} (${T})`,ut({retryOfRequestLogID:o,url:f,durationMs:y-_,message:x.message})),this.retryRequest(u,n,o??h);throw ue(this).info(`[${h}] connection ${b?"timed out":"failed"} - error; no more retries left`),ue(this).debug(`[${h}] connection ${b?"timed out":"failed"} (error; no more retries left)`,ut({retryOfRequestLogID:o,url:f,durationMs:y-_,message:x.message})),b?new pu:new No({cause:x})}const w=`[${h}${g}] ${c.method} ${f} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${y-_}ms`;if(!x.ok){const T=await this.shouldRetry(x);if(n&&T){const I=`retrying, ${n} attempts remaining`;return await Bv(x.body),ue(this).info(`${w} - ${I}`),ue(this).debug(`[${h}] response error (${I})`,ut({retryOfRequestLogID:o,url:x.url,status:x.status,headers:x.headers,durationMs:y-_})),this.retryRequest(u,n,o??h,x.headers)}const b=T?"error; no more retries left":"error; not retryable";ue(this).info(`${w} - ${b}`);const C=await x.text().catch(I=>Ps(I).message),S=Dv(C),E=S?void 0:C;throw ue(this).debug(`[${h}] response error (${b})`,ut({retryOfRequestLogID:o,url:x.url,status:x.status,headers:x.headers,message:E,durationMs:Date.now()-_})),this.makeStatusError(x.status,S,E,x.headers)}return ue(this).info(w),ue(this).debug(`[${h}] response start`,ut({retryOfRequestLogID:o,url:x.url,status:x.status,headers:x.headers,durationMs:y-_})),{response:x,options:u,controller:v,requestLogID:h,retryOfRequestLogID:o,startTime:_}}async fetchWithTimeout(e,n,o,s){const r=n||{},{signal:a,method:u}=r,d=go(r,["signal","method"]);a&&a.addEventListener("abort",()=>s.abort());const c=setTimeout(()=>s.abort(),o),f=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,p=Object.assign(Object.assign(Object.assign({signal:s.signal},f?{duplex:"half"}:{}),{method:"GET"}),d);u&&(p.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,s){var r;let a;const u=s==null?void 0:s.get("retry-after-ms");if(u){const c=parseFloat(u);Number.isNaN(c)||(a=c)}const d=s==null?void 0:s.get("retry-after");if(d&&!a){const c=parseFloat(d);Number.isNaN(c)?a=Date.parse(d)-Date.now():a=c*1e3}if(!(a&&0<=a&&a<60*1e3)){const c=(r=e.maxRetries)!==null&&r!==void 0?r:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Fv(a),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const r=n-e,a=Math.min(.5*Math.pow(2,r),8),u=1-Math.random()*.25;return a*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,s,r;const a=Object.assign({},e),{method:u,path:d,query:c,defaultBaseURL:f}=a,p=this.buildURL(d,c,f);"timeout"in a&&Mv("timeout",a.timeout),a.timeout=(o=a.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:h,body:g}=this.buildBody({options:a}),_=await this.buildHeaders({options:e,method:u,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:_},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(r=a.fetchOptions)!==null&&r!==void 0?r:{}),url:p,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:s}){let r={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let u=sn([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),qv()),this._options.defaultHeaders,o,e.headers,a]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=sn([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Hv(e)}:this.encoder({body:e,headers:o})}}Ro.DEFAULT_TIMEOUT=6e4;class oe extends Ro{constructor(){super(...arguments),this.interactions=new Nu(this)}}Ru=oe;oe.GeminiNextGenAPIClient=Ru;oe.GeminiNextGenAPIClientError=xe;oe.APIError=he;oe.APIConnectionError=No;oe.APIConnectionTimeoutError=pu;oe.APIUserAbortError=Rs;oe.NotFoundError=vu;oe.ConflictError=xu;oe.RateLimitError=wu;oe.BadRequestError=mu;oe.AuthenticationError=gu;oe.InternalServerError=Tu;oe.PermissionDeniedError=yu;oe.UnprocessableEntityError=_u;oe.toFile=Wv;oe.Interactions=Nu;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ax(t,e){const n={},o=i(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function lx(t,e){const n={},o=i(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function ux(t,e){const n={},o=i(t,["sdkHttpResponse"]);return o!=null&&l(n,["sdkHttpResponse"],o),n}function cx(t,e){const n={},o=i(t,["sdkHttpResponse"]);return o!=null&&l(n,["sdkHttpResponse"],o),n}function dx(t,e,n){const o={};if(i(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=i(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&l(e,["displayName"],s),i(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=i(t,["epochCount"]);e!==void 0&&r!=null&&l(e,["tuningTask","hyperparameters","epochCount"],r);const a=i(t,["learningRateMultiplier"]);if(a!=null&&l(o,["tuningTask","hyperparameters","learningRateMultiplier"],a),i(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=i(t,["batchSize"]);e!==void 0&&u!=null&&l(e,["tuningTask","hyperparameters","batchSize"],u);const d=i(t,["learningRate"]);if(e!==void 0&&d!=null&&l(e,["tuningTask","hyperparameters","learningRate"],d),i(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(i(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function fx(t,e,n){const o={};let s=i(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=i(t,["validationDataset"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec"],Fa(g))}else if(s==="PREFERENCE_TUNING"){const g=i(t,["validationDataset"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec"],Fa(g))}const r=i(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&l(e,["tunedModelDisplayName"],r);const a=i(t,["description"]);e!==void 0&&a!=null&&l(e,["description"],a);let u=i(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=i(t,["epochCount"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){const g=i(t,["epochCount"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let d=i(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=i(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(d==="PREFERENCE_TUNING"){const g=i(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=i(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=i(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=i(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=i(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=i(t,["adapterSize"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=i(t,["adapterSize"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(i(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=i(t,["labels"]);e!==void 0&&p!=null&&l(e,["labels"],p);const h=i(t,["beta"]);return e!==void 0&&h!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),o}function hx(t,e){const n={},o=i(t,["baseModel"]);o!=null&&l(n,["baseModel"],o);const s=i(t,["preTunedModel"]);s!=null&&l(n,["preTunedModel"],s);const r=i(t,["trainingDataset"]);r!=null&&Cx(r);const a=i(t,["config"]);return a!=null&&dx(a,n),n}function px(t,e){const n={},o=i(t,["baseModel"]);o!=null&&l(n,["baseModel"],o);const s=i(t,["preTunedModel"]);s!=null&&l(n,["preTunedModel"],s);const r=i(t,["trainingDataset"]);r!=null&&Ex(r,n,e);const a=i(t,["config"]);return a!=null&&fx(a,n,e),n}function mx(t,e){const n={},o=i(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function gx(t,e){const n={},o=i(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function yx(t,e,n){const o={},s=i(t,["pageSize"]);e!==void 0&&s!=null&&l(e,["_query","pageSize"],s);const r=i(t,["pageToken"]);e!==void 0&&r!=null&&l(e,["_query","pageToken"],r);const a=i(t,["filter"]);return e!==void 0&&a!=null&&l(e,["_query","filter"],a),o}function vx(t,e,n){const o={},s=i(t,["pageSize"]);e!==void 0&&s!=null&&l(e,["_query","pageSize"],s);const r=i(t,["pageToken"]);e!==void 0&&r!=null&&l(e,["_query","pageToken"],r);const a=i(t,["filter"]);return e!==void 0&&a!=null&&l(e,["_query","filter"],a),o}function xx(t,e){const n={},o=i(t,["config"]);return o!=null&&yx(o,n),n}function _x(t,e){const n={},o=i(t,["config"]);return o!=null&&vx(o,n),n}function wx(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=i(t,["nextPageToken"]);s!=null&&l(n,["nextPageToken"],s);const r=i(t,["tunedModels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Mu(u))),l(n,["tuningJobs"],a)}return n}function Tx(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=i(t,["nextPageToken"]);s!=null&&l(n,["nextPageToken"],s);const r=i(t,["tuningJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Fs(u))),l(n,["tuningJobs"],a)}return n}function bx(t,e){const n={},o=i(t,["name"]);o!=null&&l(n,["model"],o);const s=i(t,["name"]);return s!=null&&l(n,["endpoint"],s),n}function Cx(t,e){const n={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=i(t,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),l(n,["examples","examples"],s)}return n}function Ex(t,e,n){const o={};let s=i(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=i(t,["gcsUri"]);e!==void 0&&a!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=i(t,["gcsUri"]);e!==void 0&&a!=null&&l(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let r=i(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=i(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=i(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&l(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(i(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Mu(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&l(n,["name"],s);const r=i(t,["state"]);r!=null&&l(n,["state"],Yl(r));const a=i(t,["createTime"]);a!=null&&l(n,["createTime"],a);const u=i(t,["tuningTask","startTime"]);u!=null&&l(n,["startTime"],u);const d=i(t,["tuningTask","completeTime"]);d!=null&&l(n,["endTime"],d);const c=i(t,["updateTime"]);c!=null&&l(n,["updateTime"],c);const f=i(t,["description"]);f!=null&&l(n,["description"],f);const p=i(t,["baseModel"]);p!=null&&l(n,["baseModel"],p);const h=i(t,["_self"]);return h!=null&&l(n,["tunedModel"],bx(h)),n}function Fs(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&l(n,["name"],s);const r=i(t,["state"]);r!=null&&l(n,["state"],Yl(r));const a=i(t,["createTime"]);a!=null&&l(n,["createTime"],a);const u=i(t,["startTime"]);u!=null&&l(n,["startTime"],u);const d=i(t,["endTime"]);d!=null&&l(n,["endTime"],d);const c=i(t,["updateTime"]);c!=null&&l(n,["updateTime"],c);const f=i(t,["error"]);f!=null&&l(n,["error"],f);const p=i(t,["description"]);p!=null&&l(n,["description"],p);const h=i(t,["baseModel"]);h!=null&&l(n,["baseModel"],h);const g=i(t,["tunedModel"]);g!=null&&l(n,["tunedModel"],g);const _=i(t,["preTunedModel"]);_!=null&&l(n,["preTunedModel"],_);const v=i(t,["supervisedTuningSpec"]);v!=null&&l(n,["supervisedTuningSpec"],v);const x=i(t,["preferenceOptimizationSpec"]);x!=null&&l(n,["preferenceOptimizationSpec"],x);const y=i(t,["tuningDataStats"]);y!=null&&l(n,["tuningDataStats"],y);const w=i(t,["encryptionSpec"]);w!=null&&l(n,["encryptionSpec"],w);const T=i(t,["partnerModelTuningSpec"]);T!=null&&l(n,["partnerModelTuningSpec"],T);const b=i(t,["customBaseModel"]);b!=null&&l(n,["customBaseModel"],b);const C=i(t,["experiment"]);C!=null&&l(n,["experiment"],C);const S=i(t,["labels"]);S!=null&&l(n,["labels"],S);const E=i(t,["outputUri"]);E!=null&&l(n,["outputUri"],E);const N=i(t,["pipelineJob"]);N!=null&&l(n,["pipelineJob"],N);const I=i(t,["serviceAccount"]);I!=null&&l(n,["serviceAccount"],I);const M=i(t,["tunedModelDisplayName"]);M!=null&&l(n,["tunedModelDisplayName"],M);const F=i(t,["veoTuningSpec"]);return F!=null&&l(n,["veoTuningSpec"],F),n}function Sx(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&l(n,["name"],s);const r=i(t,["metadata"]);r!=null&&l(n,["metadata"],r);const a=i(t,["done"]);a!=null&&l(n,["done"],a);const u=i(t,["error"]);return u!=null&&l(n,["error"],u),n}function Fa(t,e){const n={},o=i(t,["gcsUri"]);o!=null&&l(n,["validationDatasetUri"],o);const s=i(t,["vertexDatasetResource"]);return s!=null&&l(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ix extends Be{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ct(He.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},n),{preTunedModel:s});return r.baseModel=void 0,await this.tuneInternal(r)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),r=await this.tuneMldevInternal(s);let a="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?a=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(a=r.name.split("/operations/")[0]),{name:a,state:bs.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=gx(e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>Fs(f))}else{const c=mx(e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>Mu(f))}}async listInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=_x(e);return u=D("tuningJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=Tx(f),h=new aa;return Object.assign(h,p),h})}else{const c=xx(e);return u=D("tunedModels",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=wx(f),h=new aa;return Object.assign(h,p),h})}}async cancel(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=lx(e);return u=D("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=cx(f),h=new la;return Object.assign(h,p),h})}else{const c=ax(e);return u=D("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),a.then(f=>{const p=ux(f),h=new la;return Object.assign(h,p),h})}}async tuneInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=px(e,e);return r=D("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>Fs(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hx(e);return r=D("tunedModels",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>Sx(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ax{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const kx=1024*1024*8,Nx=3,Px=1e3,Rx=2,vo="x-goog-upload-status";async function Mx(t,e,n){var o;const s=await Du(t,e,n),r=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[vo])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function Dx(t,e,n){var o;const s=await Du(t,e,n),r=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[vo])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=$l(r),u=new tr;return Object.assign(u,a),u}async function Du(t,e,n){var o,s;let r=0,a=0,u=new Cs(new Response),d="upload";for(r=t.size;a<r;){const c=Math.min(kx,r-a),f=t.slice(a,a+c);a+c>=r&&(d+=", finalize");let p=0,h=Px;for(;p<Nx&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(a),"Content-Length":String(c)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[vo]));)p++,await Ux(h),h=h*Rx;if(a+=c,((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[vo])!=="active")break;if(r<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function Fx(t){return{size:t.size,type:t.type}}function Ux(t){return new Promise(e=>setTimeout(e,t))}class Lx{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Mx(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Dx(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Fx(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gx{create(e,n,o){return new qx(e,n,o)}}class qx{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ua="x-goog-api-key";class Vx{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Ua)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ua,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hx="gl-node/";class Bx{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new oe({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=Uh(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new Vx(this.apiKey);this.apiClient=new Fy({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Hx+"web",uploader:new Lx,downloader:new Ax}),this.models=new ev(this.apiClient),this.live=new Wy(this.apiClient,s,new Gx),this.batches=new dm(this.apiClient),this.chats=new Jm(this.models,this.apiClient),this.caches=new $m(this.apiClient),this.files=new ng(this.apiClient),this.operations=new tv(this.apiClient),this.authTokens=new yv(this.apiClient),this.tunings=new Ix(this.apiClient),this.fileSearchStores=new Ev(this.apiClient)}}const ur=t=>{const e=t||void 0;return e?new Bx({apiKey:e}):null},$x=async(t,e)=>{if(console.log("Generating Portfolio Summary. Supabase available:",!!W,"Manual API Key provided:",!!e),W&&!e)try{console.log("[Portfolio] Using Direct Fetch for Proxy...");const a=`${To}/functions/v1/gemini-proxy`,u=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_t}`,apikey:_t},body:JSON.stringify({action:"portfolio",payload:{tasks:t}})});if(!u.ok){const c=await u.json().catch(()=>({}));throw console.error("[Portfolio] Proxy Error Details:",c),new Error(c.error||`Proxy error ${u.status}`)}const d=await u.json();return console.log("[Portfolio] Proxy Success! Received result."),d.result}catch(a){console.error("[Portfolio] Secure proxy FETCH FAILED:",a.message||a)}const n=ur(e);if(!n)throw new Error("API Key missing. Please configure it in Admin Settings.");const r=`
    You are an assistant for an FTC Robotics team. 
    Based on the following completed tasks for the season, write a professional, 
    bulleted Engineering Portfolio summary in Markdown format. 
    Highlight technical achievements, problem-solving, and team progression.
    
    Tasks:
    ${t.filter(a=>a.status==="Done").map(a=>{var u;return`- ${a.title} (${a.type}): ${a.description}. Tags: ${((u=a.tags)==null?void 0:u.join(", "))||""}`}).join(`
`)}
  `;try{return(await n.models.generateContent({model:"gemini-1.5-flash",contents:r})).text||"Could not generate summary."}catch{throw new Error("AI Generation failed. Check API Key or limit.")}},Ox=async(t,e,n)=>{if(W&&!n)try{console.log("[Questions] Using Direct Fetch for Proxy...");const a=`${To}/functions/v1/gemini-proxy`,u=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_t}`,apikey:_t},body:JSON.stringify({action:"questions",payload:{context:t,studyGuide:e}})});if(!u.ok)throw new Error(`Proxy error ${u.status}`);const d=await u.json();console.log("[Questions] Proxy Success!");let c=d.result;const f=c.indexOf("{"),p=c.lastIndexOf("}");return f!==-1&&p!==-1&&(c=c.substring(f,p+1)),JSON.parse(c).questions||[]}catch(a){console.error("[Questions] Secure proxy FETCH FAILED:",a.message||a)}const o=ur(n);if(!o)throw new Error("API Key missing. Please configure it in Admin Settings.");const s=`
    Create 5 potential judge interview questions and answers for an FTC Robotics team.
    Base the questions on the provided context about the team's season and robot.
    Return the response as a JSON object with a list of "questions" (each with "question" and "answer" keys).
    
    Context: ${t}
    Study Guide: ${e||"None"}
  `,r=await o.models.generateContent({model:"gemini-1.5-flash",contents:s});try{const a=(r.text||"").replace(/```json|```/g,"").trim();return JSON.parse(a).questions||[]}catch(a){return console.error("Failed to parse AI response",a),[]}},Kx=async(t,e)=>{if(W&&!e)try{console.log("[Summarize] Using Direct Fetch for Proxy...");const s=`${To}/functions/v1/gemini-proxy`,r=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_t}`,apikey:_t},body:JSON.stringify({action:"summarize",payload:{text:t}})});if(!r.ok)throw new Error(`Proxy error ${r.status}`);const a=await r.json();return console.log("[Summarize] Proxy Success!"),a.result}catch(s){console.error("[Summarize] Secure proxy FETCH FAILED:",s.message||s)}const n=ur(e);if(!n)throw new Error("API Key missing. Please configure it in Admin Settings.");return(await n.models.generateContent({model:"gemini-1.5-flash",contents:`Summarize these robotics team meeting notes into concise minutes with action items:

${t}`})).text||""},Jx=({tasks:t,setTasks:e,members:n,teams:o})=>{const[s,r]=R.useState(null),[a,u]=R.useState(!1),[d,c]=R.useState(!1),[f,p]=R.useState("board"),[h,g]=R.useState(""),[_,v]=R.useState({}),[x,y]=R.useState(!1),{geminiApiKey:w}=Pn(),T=k=>{const P=n.find(H=>H.id===k);return P?`${P.firstName} ${P.lastNameInitial}.`:"Unassigned"},b=k=>{const P=o.find(H=>H.id===k);return P?P.name:"General"},C=k=>{const P=n.find(H=>H.id===k);return P?`${P.firstName[0]}${P.lastNameInitial}`:"?"},S=k=>{r(k),c(!1),u(!0)},E=()=>{var P,H;const k={id:Date.now().toString(),title:"New Task",description:"",status:kt.Backlog,type:nn.Feature,assignedTo:((P=n[0])==null?void 0:P.id)||"",department:((H=o[0])==null?void 0:H.id)||"",tags:[],checklist:[],timeline:[],createdAt:Date.now()};r(k),c(!0),u(!0)},N=()=>{if(!s)return;const k=t.find(H=>H.id===s.id);let P={...s};if(!d&&k&&k.status!==s.status){const H={id:Date.now().toString(),type:"history",authorId:"System",content:`moved to ${s.status}`,timestamp:Date.now()};P.timeline=[H,...P.timeline]}e(d?[...t,P]:t.map(H=>H.id===P.id?P:H)),u(!1)},I=()=>{var P;if(!h.trim()||!s)return;const k={id:Date.now().toString(),type:"comment",authorId:((P=n[0])==null?void 0:P.id)||"user",content:h,timestamp:Date.now()};r({...s,timeline:[k,...s.timeline]}),g("")},M=k=>{s&&r({...s,timeline:s.timeline.filter(P=>P.id!==k)})},F=async()=>{if(s!=null&&s.description){y(!0);try{const k=await Kx(s.description,w||void 0);r({...s,description:s.description+`

**AI Summary:**
`+k})}catch{alert("AI Error. Check API Key in Admin Settings.")}finally{y(!1)}}},Y=k=>{v(P=>({...P,[k]:!P[k]}))},O=()=>m.jsx("div",{className:"flex flex-col md:flex-row gap-4 h-full md:pb-4 overflow-y-auto md:overflow-x-auto",children:oi.map(k=>{const P=_[k];return m.jsxs("div",{className:`bg-slate-100 dark:bg-slate-800 rounded-xl flex flex-col flex-shrink-0 transition-all ${P?"md:w-12 h-auto":"md:w-[280px] md:h-full"}`,children:[m.jsxs("div",{className:"p-3 font-semibold text-slate-600 dark:text-slate-300 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center cursor-pointer md:cursor-default",onClick:()=>{window.innerWidth<768&&Y(k)},children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"md:hidden",children:P?m.jsx(Hc,{size:16}):m.jsx(qc,{size:16})}),m.jsx("span",{className:P?"md:hidden":"",children:k})]}),m.jsx("span",{className:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs px-2 py-1 rounded-full",children:t.filter(H=>H.status===k).length})]}),m.jsx("div",{className:`flex-1 overflow-y-auto p-2 space-y-2 transition-all ${P?"hidden":"block"} min-h-[50px] md:min-h-0`,children:t.filter(H=>H.status===k).map(H=>m.jsxs("div",{onClick:()=>S(H),className:"bg-white dark:bg-slate-700 p-3 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 cursor-pointer hover:shadow-md transition group relative",children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded ${H.type===nn.Bug?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:H.type}),m.jsx("div",{className:"text-xs text-slate-400 dark:text-slate-500",children:new Date(H.createdAt).toLocaleDateString()})]}),m.jsx("h4",{className:"font-medium text-slate-800 dark:text-slate-200 mb-1",children:H.title||"Untitled"}),m.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs text-slate-500 dark:text-slate-400",children:[m.jsx("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:b(H.department)}),H.dueDate&&m.jsxs("span",{className:"flex items-center gap-1 text-orange-600 dark:text-orange-400",children:[m.jsx(Wc,{size:10}),new Date(H.dueDate).toLocaleDateString()]}),m.jsx("div",{className:"flex-1"}),H.assignedTo&&m.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400 flex items-center justify-center font-bold text-[10px] border border-orange-200 dark:border-orange-800",children:C(H.assignedTo)})]})]},H.id))})]},k)})}),K=()=>m.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-x-auto",children:m.jsxs("table",{className:"w-full text-left text-sm text-slate-600 dark:text-slate-300 min-w-[600px]",children:[m.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 text-xs uppercase font-bold text-slate-500 dark:text-slate-400",children:m.jsxs("tr",{children:[m.jsx("th",{className:"p-4",children:"Title"}),m.jsx("th",{className:"p-4",children:"Type"}),m.jsx("th",{className:"p-4",children:"Status"}),m.jsx("th",{className:"p-4",children:"Assigned"}),m.jsx("th",{className:"p-4",children:"Due Date"}),m.jsx("th",{className:"p-4",children:"Created"})]})}),m.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:t.map(k=>m.jsxs("tr",{onClick:()=>S(k),className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition",children:[m.jsx("td",{className:"p-4 font-medium text-slate-900 dark:text-white",children:k.title||"Untitled"}),m.jsx("td",{className:"p-4",children:m.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded ${k.type===nn.Bug?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:k.type})}),m.jsx("td",{className:"p-4",children:k.status}),m.jsx("td",{className:"p-4",children:T(k.assignedTo)}),m.jsx("td",{className:"p-4",children:k.dueDate?new Date(k.dueDate).toLocaleDateString():"-"}),m.jsx("td",{className:"p-4 text-slate-400",children:new Date(k.createdAt).toLocaleDateString()})]},k.id))})]})}),L=()=>{const k=t.filter(P=>P.dueDate).sort((P,H)=>(P.dueDate||0)-(H.dueDate||0));return m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 overflow-y-auto",children:[m.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"Upcoming Deadlines"}),k.length===0?m.jsx("div",{className:"text-center text-slate-400 py-10",children:"No tasks with due dates found."}):m.jsx("div",{className:"space-y-6",children:k.map(P=>m.jsxs("div",{onClick:()=>S(P),className:"flex items-center gap-4 p-4 border border-slate-100 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition",children:[m.jsxs("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg flex flex-col items-center min-w-[60px]",children:[m.jsx("span",{className:"text-xs uppercase font-bold",children:new Date(P.dueDate).toLocaleString("default",{month:"short"})}),m.jsx("span",{className:"text-xl font-bold",children:new Date(P.dueDate).getDate()})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:P.title}),m.jsxs("div",{className:"flex gap-2 text-xs text-slate-500 dark:text-slate-400 mt-1",children:[m.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:P.status}),m.jsx("span",{children:""}),m.jsx("span",{children:T(P.assignedTo)})]})]})]},P.id))})]})};return m.jsxs("div",{className:"h-full flex flex-col",children:[m.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 px-4 gap-4",children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white self-start md:self-auto",children:"Sprint Planning"}),m.jsxs("div",{className:"flex flex-row items-center gap-3 w-full md:w-auto",children:[m.jsxs("div",{className:"flex items-center gap-1 bg-slate-200 dark:bg-slate-700 p-1 rounded-lg",children:[m.jsx("button",{onClick:()=>p("board"),className:`p-2 rounded-md transition flex items-center justify-center ${f==="board"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:m.jsx(bd,{size:18})}),m.jsx("button",{onClick:()=>p("list"),className:`p-2 rounded-md transition flex items-center justify-center ${f==="list"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:m.jsx(ud,{size:18})}),m.jsx("button",{onClick:()=>p("calendar"),className:`p-2 rounded-md transition flex items-center justify-center ${f==="calendar"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:m.jsx(Uc,{size:18})})]}),m.jsxs("button",{onClick:E,className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition",children:[m.jsx(un,{size:20})," ",m.jsx("span",{className:"hidden md:inline",children:"New Item"})]})]})]}),m.jsxs("div",{className:"flex-1 overflow-hidden px-4",children:[f==="board"&&m.jsx(O,{}),f==="list"&&m.jsx(K,{}),f==="calendar"&&m.jsx(L,{})]}),a&&s&&m.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[m.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[m.jsxs("div",{className:"flex-1 mr-4",children:[m.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-1 block",children:"Task Title"}),m.jsx("input",{value:s.title,onChange:k=>r({...s,title:k.target.value}),placeholder:"Task Title",className:"text-xl font-bold bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-600 rounded-lg p-2 focus:ring-2 focus:ring-orange-500 w-full placeholder-slate-400 dark:placeholder-slate-500 text-slate-900 dark:text-white"})]}),m.jsxs("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 bg-slate-100 dark:bg-slate-700 p-2 rounded-full",children:[m.jsx("span",{className:"sr-only",children:"Close"}),""]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Status"}),m.jsx("select",{value:s.status,onChange:k=>r({...s,status:k.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:oi.map(k=>m.jsx("option",{value:k,children:k},k))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Assigned To"}),m.jsxs("select",{value:s.assignedTo,onChange:k=>r({...s,assignedTo:k.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:[m.jsx("option",{value:"",children:"Unassigned"}),n.map(k=>m.jsxs("option",{value:k.id,children:[k.firstName," ",k.lastNameInitial,"."]},k.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Type"}),m.jsxs("select",{value:s.type,onChange:k=>r({...s,type:k.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:[m.jsx("option",{value:nn.Feature,children:"Feature"}),m.jsx("option",{value:nn.Bug,children:"Bug"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Team"}),m.jsx("select",{value:s.department,onChange:k=>r({...s,department:k.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:o.map(k=>m.jsx("option",{value:k.id,children:k.name},k.id))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Due Date"}),m.jsx("input",{type:"date",value:s.dueDate?new Date(s.dueDate).toISOString().substr(0,10):"",onChange:k=>r({...s,dueDate:k.target.valueAsNumber}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Description / Notes"}),m.jsxs("button",{onClick:F,disabled:x,className:"text-xs flex items-center gap-1 text-orange-600 dark:text-orange-400 hover:text-orange-700 font-medium",children:[x?m.jsx(oo,{className:"animate-spin",size:14}):m.jsx(xd,{size:14}),"AI Summarize"]})]}),m.jsx("textarea",{value:s.description,onChange:k=>r({...s,description:k.target.value}),className:"w-full h-32 p-3 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Describe the task, paste meeting minutes, or log bug details..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Checklist"}),m.jsxs("div",{className:"space-y-2",children:[s.checklist.map((k,P)=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",checked:k.completed,onChange:H=>{const ge=[...s.checklist];ge[P].completed=H.target.checked,r({...s,checklist:ge})},className:"rounded text-orange-600 focus:ring-orange-500"}),m.jsx("input",{type:"text",value:k.text,onChange:H=>{const ge=[...s.checklist];ge[P].text=H.target.value,r({...s,checklist:ge})},className:"flex-1 text-sm border-none bg-transparent focus:ring-0 text-slate-900 dark:text-white"}),m.jsx("button",{onClick:()=>{const H=s.checklist.filter((ge,en)=>en!==P);r({...s,checklist:H})},className:"text-slate-400 hover:text-red-500",children:""})]},P)),m.jsx("button",{onClick:()=>r({...s,checklist:[...s.checklist,{id:Date.now().toString(),text:"New Item",completed:!1}]}),className:"text-sm text-blue-600 dark:text-blue-400 font-medium hover:underline",children:"+ Add Checklist Item"})]})]}),m.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-6",children:[m.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Activity & Comments"}),m.jsxs("div",{className:"flex gap-2 mb-6",children:[m.jsx("input",{type:"text",value:h,onChange:k=>g(k.target.value),placeholder:"Add a comment...",className:"flex-1 border rounded-lg px-3 py-2 text-sm bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white",onKeyDown:k=>k.key==="Enter"&&I()}),m.jsx("button",{onClick:I,className:"bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700",children:m.jsx(Md,{size:18})})]}),m.jsx("div",{className:"space-y-4 max-h-48 overflow-y-auto",children:s.timeline.map(k=>m.jsxs("div",{className:"flex gap-3 text-sm",children:[m.jsx("div",{className:"mt-1 w-6 h-6 rounded-full bg-slate-200 dark:bg-slate-600 flex items-center justify-center text-xs font-bold text-slate-600 dark:text-slate-300 flex-shrink-0",children:k.authorId==="System"?"S":C(k.authorId)}),m.jsxs("div",{className:"flex-1 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-r-lg rounded-bl-lg",children:[m.jsxs("div",{className:"flex justify-between items-start mb-1",children:[m.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:k.authorId==="System"?"System":T(k.authorId)}),m.jsx("span",{className:"text-xs text-slate-400",children:new Date(k.timestamp).toLocaleDateString()})]}),m.jsx("div",{className:k.type==="history"?"italic text-slate-500":"text-slate-800 dark:text-slate-300",children:k.content}),k.type==="comment"&&m.jsx("div",{className:"flex justify-end mt-1",children:m.jsxs("button",{onClick:()=>M(k.id),className:"text-xs text-red-400 hover:text-red-600 flex items-center gap-1",children:[m.jsx(Jt,{size:10})," Delete"]})})]})]},k.id))})]})]}),m.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 flex justify-end gap-3 bg-slate-50 dark:bg-slate-900/50",children:[m.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 font-medium",children:"Cancel"}),m.jsx("button",{onClick:N,className:"px-6 py-2 rounded-lg bg-orange-600 text-white font-medium hover:bg-orange-700 shadow-sm",children:"Save Task"})]})]})})]})},zx=()=>{const[t,e]=R.useState([]),[n,o]=R.useState(!1),[s,r]=R.useState({hasAutonomous:!1,autoScore:0,intakeType:"No Intake",autoAim:!1,farShooting:!1,shotsTaken:0,shotsMissed:0,parking:"No Park",rating:3,endGameNotes:""}),a=()=>{if(!s.teamNumber)return;const c={id:Date.now().toString(),teamNumber:s.teamNumber||"",matchNumber:s.matchNumber||0,hasAutonomous:s.hasAutonomous||!1,autoScore:s.autoScore||0,intakeType:s.intakeType||"No Intake",autoAim:s.autoAim||!1,farShooting:s.farShooting||!1,shotsTaken:s.shotsTaken||0,shotsMissed:s.shotsMissed||0,parking:s.parking||"No Park",endGameNotes:s.endGameNotes||"",rating:s.rating||3};e([c,...t]),o(!1),u()},u=()=>{r({hasAutonomous:!1,autoScore:0,intakeType:"No Intake",autoAim:!1,farShooting:!1,shotsTaken:0,shotsMissed:0,parking:"No Park",rating:3,endGameNotes:""})},d=(c,f)=>{r(p=>({...p,[c]:Math.max(0,(p[c]||0)+f)}))};return m.jsxs("div",{className:"h-full flex flex-col max-w-5xl mx-auto w-full p-4 md:p-6",children:[m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Scouting Reports"}),m.jsxs("button",{onClick:()=>o(!0),className:"bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-orange-700 transition shadow-sm",children:[m.jsx(un,{size:20})," Scout Match"]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.map(c=>m.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition",children:[m.jsxs("div",{className:"flex justify-between items-start mb-4",children:[m.jsx("div",{children:m.jsxs("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:["#",c.teamNumber]})}),m.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-bold text-slate-600 dark:text-slate-300",children:["Match ",c.matchNumber]})]}),m.jsxs("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-300 mb-4",children:[m.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[m.jsx("span",{children:"Autonomous"}),m.jsx("span",{className:c.hasAutonomous?"text-green-600 dark:text-green-400 font-bold":"text-slate-400",children:c.hasAutonomous?`${c.autoScore} pts`:"No"})]}),m.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[m.jsx("span",{children:"Intake"}),m.jsx("span",{className:"font-medium",children:c.intakeType})]}),m.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[m.jsx("span",{children:"Shooting"}),m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{children:[c.shotsTaken," / ",c.shotsTaken+c.shotsMissed," Hits"]}),m.jsxs("div",{className:"text-xs text-slate-400",children:[c.farShooting&&"Far ",c.autoAim&&"Auto-Aim"]})]})]}),m.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[m.jsx("span",{children:"Parking"}),m.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:c.parking})]})]}),m.jsx("div",{className:"flex items-center gap-1 text-yellow-500 mb-2",children:[...Array(5)].map((f,p)=>m.jsx(Bd,{size:14,fill:p<c.rating?"currentColor":"none",className:p<c.rating?"":"text-slate-300 dark:text-slate-600"},p))}),c.endGameNotes&&m.jsxs("p",{className:"text-xs bg-slate-50 dark:bg-slate-700 p-2 rounded text-slate-500 dark:text-slate-300 italic",children:['"',c.endGameNotes,'"']})]},c.id)),t.length===0&&m.jsx("div",{className:"col-span-full text-center py-12 text-slate-400 bg-slate-50 dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:'No scouting data yet. Click "Scout Match" to begin.'})]})]}),n&&m.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh] shadow-2xl",children:[m.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 font-bold text-lg text-slate-900 dark:text-white",children:"New Scouting Report"}),m.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Team #"}),m.jsx("input",{type:"text",className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.teamNumber||"",onChange:c=>r({...s,teamNumber:c.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Match #"}),m.jsx("input",{type:"number",className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.matchNumber||"",onChange:c=>r({...s,matchNumber:parseInt(c.target.value)})})]})]}),m.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-3",children:[m.jsx("h4",{className:"font-bold text-slate-700 dark:text-white text-sm",children:"Autonomous"}),m.jsxs("label",{className:"flex items-center gap-3 text-slate-800 dark:text-white",children:[m.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded text-orange-600",checked:s.hasAutonomous,onChange:c=>r({...s,hasAutonomous:c.target.checked})}),m.jsx("span",{className:"font-medium",children:"Has Autonomous"})]}),s.hasAutonomous&&m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Auto Score"}),m.jsx("input",{type:"number",className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.autoScore,onChange:c=>r({...s,autoScore:parseInt(c.target.value)})})]})]}),m.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-3",children:[m.jsx("h4",{className:"font-bold text-slate-700 dark:text-white text-sm",children:"TeleOp"}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1 block",children:"Intake Type"}),m.jsxs("select",{className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.intakeType,onChange:c=>r({...s,intakeType:c.target.value}),children:[m.jsx("option",{children:"No Intake"}),m.jsx("option",{children:"Human Player"}),m.jsx("option",{children:"Automatic"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("label",{className:"flex items-center gap-2 text-slate-800 dark:text-white text-sm",children:[m.jsx("input",{type:"checkbox",checked:s.autoAim,onChange:c=>r({...s,autoAim:c.target.checked})}),"Auto Aim"]}),m.jsxs("label",{className:"flex items-center gap-2 text-slate-800 dark:text-white text-sm",children:[m.jsx("input",{type:"checkbox",checked:s.farShooting,onChange:c=>r({...s,farShooting:c.target.checked})}),"Far Shooting"]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:"Shots Taken"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>d("shotsTaken",-1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:m.jsx(Pr,{size:14})}),m.jsx("span",{className:"flex-1 text-center font-mono font-bold text-lg dark:text-white",children:s.shotsTaken}),m.jsx("button",{onClick:()=>d("shotsTaken",1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:m.jsx(un,{size:14})})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:"Shots Missed"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>d("shotsMissed",-1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:m.jsx(Pr,{size:14})}),m.jsx("span",{className:"flex-1 text-center font-mono font-bold text-lg dark:text-white",children:s.shotsMissed}),m.jsx("button",{onClick:()=>d("shotsMissed",1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:m.jsx(un,{size:14})})]})]})]})]}),m.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-3",children:[m.jsx("h4",{className:"font-bold text-slate-700 dark:text-white text-sm",children:"End Game"}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:"Parking"}),m.jsxs("select",{className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.parking,onChange:c=>r({...s,parking:c.target.value}),children:[m.jsx("option",{children:"No Park"}),m.jsx("option",{children:"Partial Park"}),m.jsx("option",{children:"Full Park"})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Driver Rating (1-5)"}),m.jsx("input",{type:"range",min:"1",max:"5",className:"w-full accent-orange-600",value:s.rating||3,onChange:c=>r({...s,rating:parseInt(c.target.value)})}),m.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[m.jsx("span",{children:"Novice"}),m.jsx("span",{children:"Expert"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Notes"}),m.jsx("textarea",{className:"w-full border dark:border-slate-600 rounded p-2 h-20 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.endGameNotes||"",onChange:c=>r({...s,endGameNotes:c.target.value})})]})]}),m.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[m.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded",children:"Cancel"}),m.jsx("button",{onClick:a,className:"px-6 py-2 bg-orange-600 text-white rounded font-medium hover:bg-orange-700",children:"Save Report"})]})]})})]})},Wx=()=>{const[t,e]=R.useState(Nh),[n,o]=R.useState(!1),[s,r]=R.useState(""),a=p=>{n||e(t.map(h=>h.id===p?{...h,checked:!h.checked}:h))},u=()=>{e(t.map(p=>({...p,checked:!1})))},d=()=>{s.trim()&&(e([...t,{id:Date.now().toString(),text:s.trim(),checked:!1}]),r(""))},c=p=>{e(t.filter(h=>h.id!==p))},f=(p,h)=>{e(t.map(g=>g.id===p?{...g,assignedTo:h}:g))};return m.jsx("div",{className:"h-full flex flex-col max-w-3xl mx-auto w-full p-2 md:p-6",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[m.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-100 dark:border-slate-700 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 bg-slate-50 dark:bg-slate-900/50",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Pre-Match Checklist"}),m.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Reset this list before every match."})]}),m.jsxs("div",{className:"flex gap-2 self-end sm:self-auto",children:[m.jsx("button",{onClick:()=>o(!n),className:`p-2 rounded-full transition ${n?"bg-orange-100 text-orange-600":"text-slate-500 hover:text-slate-900 hover:bg-slate-200 dark:text-slate-400 dark:hover:bg-slate-700"}`,title:"Edit Checklist",children:m.jsx(Gd,{size:20})}),m.jsx("button",{onClick:u,className:"text-slate-500 hover:text-orange-600 p-2 rounded-full hover:bg-orange-50 dark:text-slate-400 dark:hover:bg-slate-700 transition",title:"Reset Checklist",children:m.jsx(Nd,{size:20})})]})]}),m.jsxs("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 overflow-y-auto flex-1 pr-1 custom-scrollbar",children:[t.map(p=>m.jsxs("div",{className:`p-4 flex items-center gap-4 transition ${p.checked?"bg-green-50/50 dark:bg-green-900/20":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[m.jsx("div",{className:"cursor-pointer flex-shrink-0",onClick:()=>a(p.id),children:!n&&m.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition ${p.checked?"bg-green-500 border-green-500 text-white":"border-slate-300 dark:border-slate-500 text-transparent"}`,children:m.jsx(Kc,{size:16,fill:"currentColor",className:p.checked?"text-white":""})})}),m.jsx("span",{onClick:()=>a(p.id),className:`text-lg font-medium flex-1 cursor-pointer transition ${p.checked?"text-slate-400 line-through dark:text-slate-500":"text-slate-700 dark:text-slate-200"}`,children:p.text}),n&&m.jsx("div",{className:"relative",children:m.jsxs("select",{className:"text-xs border border-slate-200 dark:border-slate-600 rounded p-1 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 max-w-[120px]",value:p.assignedTo||"",onChange:h=>f(p.id,h.target.value),children:[m.jsx("option",{value:"",children:"Anyone"}),m.jsx("optgroup",{label:"Teams",children:kh.map(h=>m.jsx("option",{value:h.name,children:h.name},h.id))}),m.jsx("optgroup",{label:"Members",children:Ah.map(h=>m.jsxs("option",{value:h.firstName,children:[h.firstName," ",h.lastNameInitial,"."]},h.id))})]})}),!n&&p.assignedTo&&m.jsx("span",{className:"text-xs bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 px-2 py-1 rounded flex-shrink-0",children:p.assignedTo}),n&&m.jsx("button",{onClick:h=>{h.stopPropagation(),c(p.id)},className:"text-red-500 hover:text-red-700 p-2",children:m.jsx(Jt,{size:18})})]},p.id)),n&&m.jsxs("div",{className:"p-4 flex gap-2 bg-slate-50 dark:bg-slate-700/50",children:[m.jsx("input",{type:"text",value:s,onChange:p=>r(p.target.value),onKeyDown:p=>p.key==="Enter"&&d(),placeholder:"Add new item...",className:"flex-1 border rounded px-3 py-2 bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white"}),m.jsx("button",{onClick:d,className:"bg-orange-600 text-white px-4 py-2 rounded font-bold",children:"Add"})]})]})]})})},Yx=()=>{const t=R.useRef(null),[e,n]=R.useState("#ef4444"),[o,s]=R.useState("draw"),{matchPlans:r,addMatchPlan:a,deleteMatchPlan:u}=Pn(),[d,c]=R.useState([]),[f,p]=R.useState(""),[h,g]=R.useState(""),[_,v]=R.useState(""),[x,y]=R.useState(!1),[w,T]=R.useState(!1),[b,C]=R.useState(!1),[S,E]=R.useState(!1),[N,I]=R.useState(""),M=()=>{a({title:N||`Match Plan ${new Date().toLocaleString()}`,drawingData:d,notes:_,allianceTeam:h,partnerAutonomous:x,partnerPark:w}),C(!1),I(""),alert("Plan saved!")},F=L=>{c(L.drawingData),g(L.allianceTeam),v(L.notes),y(L.partnerAutonomous),T(L.partnerPark),E(!1)};R.useEffect(()=>{if(!t.current)return;const L=Mn(t.current),k=Ou().on("start",function(P){Mn(this).raise().attr("stroke","white").attr("stroke-width",3)}).on("drag",function(P){o==="drag"&&Mn(this).attr("cx",P.x).attr("cy",P.y)}).on("end",function(P){Mn(this).attr("stroke","white").attr("stroke-width",2)});L.selectAll(".draggable-robot").call(k)},[o]);const Y=L=>{if(o!=="draw")return;const k=t.current;if(!k)return;const P=k.createSVGPoint();P.x=L.nativeEvent.offsetX,P.y=L.nativeEvent.offsetY,p(`M ${P.x} ${P.y}`),k.setPointerCapture(L.pointerId)},O=L=>{o!=="draw"||!f||p(k=>`${k} L ${L.nativeEvent.offsetX} ${L.nativeEvent.offsetY}`)},K=L=>{o!=="draw"||!f||(c([...d,{d:f,stroke:e,width:3}]),p(""),t.current&&t.current.releasePointerCapture(L.pointerId))};return m.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:h-full h-auto lg:overflow-hidden overflow-visible",children:[m.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col overflow-hidden relative min-h-[500px] lg:min-h-0",children:[m.jsxs("div",{className:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-700 p-2 flex items-center justify-between border-b border-slate-200 dark:border-slate-600 shadow-sm",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>s("draw"),className:`p-2 rounded ${o==="draw"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:m.jsx(Ed,{size:18})}),m.jsx("div",{className:"h-8 w-px bg-slate-300 dark:bg-slate-600 mx-1"}),m.jsx("button",{onClick:()=>n("#ef4444"),className:`w-6 h-6 rounded-full bg-red-500 border-2 ${e==="#ef4444"?"border-slate-800 dark:border-white":"border-transparent"}`}),m.jsx("button",{onClick:()=>n("#3b82f6"),className:`w-6 h-6 rounded-full bg-blue-500 border-2 ${e==="#3b82f6"?"border-slate-800 dark:border-white":"border-transparent"}`}),m.jsx("button",{onClick:()=>n("#22c55e"),className:`w-6 h-6 rounded-full bg-green-500 border-2 ${e==="#22c55e"?"border-slate-800 dark:border-white":"border-transparent"}`}),m.jsx("button",{onClick:()=>n("#facc15"),className:`w-6 h-6 rounded-full bg-yellow-400 border-2 ${e==="#facc15"?"border-slate-800 dark:border-white":"border-transparent"}`})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>{const L=[...d];L.pop(),c(L)},className:"p-2 text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white hover:bg-slate-200 dark:hover:bg-slate-600 rounded",title:"Undo",children:m.jsx(Od,{size:18})}),m.jsx("button",{onClick:()=>c([]),className:"p-2 text-slate-500 dark:text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",title:"Clear",children:m.jsx(Jt,{size:18})}),m.jsx("div",{className:"h-8 w-px bg-slate-300 dark:bg-slate-600 mx-1"}),m.jsx("button",{onClick:()=>E(!0),className:"p-2 text-slate-500 dark:text-slate-400 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/30 rounded",title:"Load Plans",children:m.jsx(Sr,{size:18})}),m.jsx("button",{onClick:()=>C(!0),className:"p-2 text-slate-500 dark:text-slate-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/30 rounded",title:"Save Plan",children:m.jsx(Mr,{size:18})})]})]}),m.jsxs("div",{className:"relative flex-1 bg-slate-900 overflow-hidden cursor-crosshair",children:[m.jsx("img",{src:Ph,className:"absolute inset-0 w-full h-full object-contain opacity-50 pointer-events-none select-none",alt:"Field"}),m.jsxs("svg",{ref:t,className:"absolute inset-0 w-full h-full z-10 touch-none",onPointerDown:Y,onPointerMove:O,onPointerUp:K,onPointerCancel:K,onPointerLeave:K,children:[d.map((L,k)=>m.jsx("path",{d:L.d,stroke:L.stroke,strokeWidth:L.width,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},k)),f&&m.jsx("path",{d:f,stroke:e,strokeWidth:3,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("circle",{className:"draggable-robot cursor-move",cx:"50",cy:"50",r:"15",fill:"#ef4444",stroke:"white",strokeWidth:"2"}),m.jsx("circle",{className:"draggable-robot cursor-move",cx:"90",cy:"50",r:"15",fill:"#3b82f6",stroke:"white",strokeWidth:"2"})]})]})]}),m.jsxs("div",{className:"w-full lg:w-80 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-4 flex flex-col",children:[m.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Match Notes"}),m.jsxs("div",{className:"space-y-4 flex-1",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Alliance Partner"}),m.jsx("input",{type:"text",value:h,onChange:L=>g(L.target.value),placeholder:"Team # / Name",className:"w-full p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Our Strategy"}),m.jsx("textarea",{value:_,onChange:L=>v(L.target.value),className:"w-full h-32 p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm resize-none text-slate-900 dark:text-white",placeholder:`1. Autonomous path...
2. TeleOp focus...`})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Partner Capabilities"}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("label",{className:"flex items-center gap-2 p-2 border border-slate-200 dark:border-slate-600 rounded bg-slate-50 dark:bg-slate-700 text-xs text-slate-800 dark:text-slate-200",children:[m.jsx("input",{type:"checkbox",checked:x,onChange:L=>y(L.target.checked)})," Autonomous"]}),m.jsxs("label",{className:"flex items-center gap-2 p-2 border border-slate-200 dark:border-slate-600 rounded bg-slate-50 dark:bg-slate-700 text-xs text-slate-800 dark:text-slate-200",children:[m.jsx("input",{type:"checkbox",checked:w,onChange:L=>T(L.target.checked)})," Lifted Park"]})]})]})]}),m.jsxs("div",{className:"flex gap-3 mt-4 lg:hidden",children:[m.jsxs("button",{onClick:()=>E(!0),className:"flex-1 flex items-center justify-center gap-2 p-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-lg font-bold",children:[m.jsx(Sr,{size:20})," Load"]}),m.jsxs("button",{onClick:()=>C(!0),className:"flex-1 flex items-center justify-center gap-2 p-3 bg-green-600 text-white rounded-lg font-bold shadow-md",children:[m.jsx(Mr,{size:20})," Save"]})]})]}),b&&m.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 w-full max-w-sm",children:[m.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900 dark:text-white",children:"Save Match Plan"}),m.jsx("input",{autoFocus:!0,type:"text",placeholder:"Plan Name (e.g. Match 1)",value:N,onChange:L=>I(L.target.value),onKeyDown:L=>L.key==="Enter"&&M(),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded mb-4 bg-white dark:bg-slate-700 text-slate-900 dark:text-white"}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300",children:"Cancel"}),m.jsx("button",{onClick:M,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Save"})]})]})}),S&&m.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 w-full max-w-md max-h-[80vh] flex flex-col",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Saved Plans"}),m.jsx("button",{onClick:()=>E(!1),children:m.jsx(il,{})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:r.length===0?m.jsx("div",{className:"text-center text-slate-500 py-8",children:"No saved plans found."}):r.map(L=>m.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[m.jsxs("div",{className:"cursor-pointer flex-1",onClick:()=>F(L),children:[m.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:L.title}),m.jsxs("div",{className:"text-xs text-slate-500",children:[new Date(L.updatedAt).toLocaleDateString(),"  ",L.allianceTeam||"No Team"]})]}),m.jsx("button",{onClick:()=>{u(L.id)},className:"p-2 text-red-400 hover:text-red-600",children:m.jsx(Jt,{size:16})})]},L.id))})]})})]})},La=({tasks:t,view:e})=>{const n=Pn(b=>b.geminiApiKey),[o,s]=R.useState(""),[r,a]=R.useState([]),[u,d]=R.useState(!1),[c,f]=R.useState(null),[p,h]=R.useState("done"),[g,_]=R.useState(""),[v,x]=R.useState(""),y=async()=>{d(!0);const b=p==="done"?t.filter(C=>C.status==="Done"):t;try{const C=await $x(b,n||void 0);s(C)}catch{alert("Error generating portfolio. Please check your API Key configuration in Admin Settings.")}finally{d(!1)}},w=async()=>{d(!0);try{const C=await Ox(o||"We built a great robot that has a high scoring autonomous and durable drivetrain.",g,n||void 0);C&&C.length>0?a(C):a([{question:"Describe your robot's drivetrain.",answer:"We use a mecanum drivetrain for omnidirectional movement."},{question:"What was your biggest challenge?",answer:"Our biggest challenge was consistent intake, which we solved with a compliant wheel system."},{question:"How did you use sensors?",answer:"We use odometry pods for precise localization during autonomous."}])}catch{alert("Error generating questions. Showing demo questions instead."),a([{question:"Describe your robot's drivetrain.",answer:"We use a mecanum drivetrain for omnidirectional movement."},{question:"What was your biggest challenge?",answer:"Our biggest challenge was consistent intake, which we solved with a compliant wheel system."}])}finally{d(!1)}},T=b=>{var S;const C=(S=b.target.files)==null?void 0:S[0];if(C){x(C.name);const E=new FileReader;E.onload=N=>{var I;(I=N.target)!=null&&I.result&&_(N.target.result)},E.readAsText(C)}};return m.jsx("div",{className:"h-full flex flex-col p-4 md:p-6 max-w-5xl mx-auto w-full",children:m.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e==="portfolio"&&m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 h-full",children:[m.jsx("div",{className:"md:col-span-1 space-y-4",children:m.jsxs("div",{className:"bg-orange-50 dark:bg-slate-800 p-4 rounded-xl border border-orange-100 dark:border-slate-700",children:[m.jsx("h3",{className:"font-bold text-orange-900 dark:text-orange-400 mb-2",children:"Portfolio Helper"}),m.jsx("p",{className:"text-sm text-orange-800/80 dark:text-slate-300 mb-4",children:"The AI analyzes your tasks to create a summary of your season's technical achievements."}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-2",children:"Include Tasks"}),m.jsxs("div",{className:"flex bg-white dark:bg-slate-900 rounded-lg p-1 border border-orange-100 dark:border-slate-600",children:[m.jsx("button",{onClick:()=>h("done"),className:`flex-1 py-1 text-xs font-medium rounded transition ${p==="done"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:"Completed Only"}),m.jsx("button",{onClick:()=>h("all"),className:`flex-1 py-1 text-xs font-medium rounded transition ${p==="all"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:"All Tasks"})]})]}),m.jsxs("div",{className:"text-xs text-orange-800/60 dark:text-slate-400 font-mono bg-white/50 dark:bg-slate-900/50 p-2 rounded mb-4",children:["Tasks Analyzed: ",p==="done"?t.filter(b=>b.status==="Done").length:t.length]}),m.jsxs("button",{onClick:y,disabled:u,className:"w-full bg-orange-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-orange-700 transition flex justify-center items-center gap-2",children:[u?m.jsx(oo,{className:"animate-spin",size:18}):m.jsx(Fr,{size:18}),"Generate Summary"]})]})}),m.jsxs("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 h-full flex flex-col",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Generated Content"}),o&&m.jsxs("button",{className:"text-xs flex items-center gap-1 text-slate-500 dark:text-slate-400 hover:text-slate-900",children:[m.jsx(td,{size:14})," Copy MD"]})]}),m.jsx("div",{className:"flex-1 bg-slate-50 dark:bg-slate-900 rounded-lg p-4 font-mono text-sm text-slate-700 dark:text-slate-300 overflow-y-auto whitespace-pre-wrap leading-relaxed border border-slate-100 dark:border-slate-700",children:o||m.jsx("span",{className:"text-slate-400 italic",children:"Content will appear here..."})})]})]}),e==="judging"&&m.jsxs("div",{className:"h-full flex flex-col",children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6",children:"Judging Prep"}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[m.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2",children:"Study Guide & Context"}),m.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-4",children:"Upload a text file/PDF or paste content to help the AI ask better questions."}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[m.jsx("div",{className:"flex-1 relative",children:m.jsx("textarea",{className:"w-full h-24 p-3 text-sm border rounded-lg bg-slate-50 dark:bg-slate-900 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white resize-none",placeholder:"Paste technical info, robot specs, or outreach details here...",value:g,onChange:b=>_(b.target.value)})}),m.jsxs("div",{className:"w-full md:w-48 flex flex-col justify-center items-center border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-900 hover:bg-slate-100 dark:hover:bg-slate-800 transition cursor-pointer relative py-4 md:py-0",children:[m.jsx("input",{type:"file",onChange:T,className:"absolute inset-0 opacity-0 cursor-pointer",accept:".txt,.md,.json"}),m.jsx(Xc,{className:"text-slate-400 mb-2"}),m.jsx("span",{className:"text-xs text-slate-500 font-medium text-center px-2",children:v||"Upload .txt"})]})]}),m.jsx("div",{className:"flex justify-center",children:m.jsxs("button",{onClick:w,disabled:u,className:"bg-orange-600 text-white py-2 px-6 rounded-lg text-sm font-medium hover:bg-orange-700 transition flex items-center gap-2 shadow-sm",children:[u?m.jsx(oo,{className:"animate-spin",size:16}):m.jsx(Fr,{size:16}),"Generate Questions"]})})]}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 pb-6",children:[r.length===0&&!u&&m.jsx("div",{className:"col-span-full text-center py-10 text-slate-400 italic",children:"No flashcards yet. Add context and click Generate."}),r.map((b,C)=>m.jsx("div",{className:"h-64 perspective-1000 cursor-pointer group",onClick:()=>f(c===C?null:C),children:m.jsxs("div",{className:`relative w-full h-full transition-all duration-500 transform-style-3d ${c===C?"rotate-y-180":""}`,children:[m.jsxs("div",{className:"absolute w-full h-full bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-700 p-6 flex flex-col items-center justify-center text-center backface-hidden shadow-sm group-hover:border-orange-200 dark:group-hover:border-slate-500",children:[m.jsxs("span",{className:"text-xs uppercase font-bold text-orange-600 dark:text-orange-400 mb-2",children:["Question ",C+1]}),m.jsx("div",{className:"max-h-full overflow-y-auto custom-scrollbar pr-1",children:m.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-100 select-none break-words",children:b.question})}),m.jsxs("div",{className:"mt-4 text-xs text-slate-400 flex items-center gap-1 shrink-0",children:["Click to reveal answer ",m.jsx(Qo,{size:12})]})]}),m.jsxs("div",{className:"absolute w-full h-full bg-slate-800 dark:bg-slate-900 rounded-xl p-6 flex flex-col items-center justify-center text-center backface-hidden rotate-y-180 shadow-xl border border-slate-700",children:[m.jsx("span",{className:"text-xs uppercase font-bold text-slate-400 mb-2",children:"Suggested Answer"}),m.jsx("div",{className:"max-h-full overflow-y-auto custom-scrollbar pr-1",children:m.jsx("p",{className:"text-slate-200 dark:text-slate-300 text-sm leading-relaxed select-none break-words",children:b.answer})})]})]})},C))]})]})]})]})})},Qx=({members:t,setMembers:e,teams:n,setTeams:o})=>{const[s,r]=R.useState(""),[a,u]=R.useState(""),[d,c]=R.useState(""),[f,p]=R.useState(null),h=()=>{if(s.trim()&&a.trim().length===1){const y={id:Date.now().toString(),firstName:s.trim(),lastNameInitial:a.trim().toUpperCase()};e([...t,y]),r(""),u("")}else alert("Please provide a First Name and a single letter Last Initial.")},g=y=>{e(t.filter(w=>w.id!==y)),o(n.map(w=>({...w,memberIds:w.memberIds.filter(T=>T!==y)})))},_=()=>{if(d.trim()){const y={id:Date.now().toString(),name:d.trim(),memberIds:[]};o([...n,y]),c("")}},v=y=>{o(n.filter(w=>w.id!==y))},x=(y,w)=>{o(n.map(T=>{if(T.id!==y)return T;const b=T.memberIds.includes(w);return{...T,memberIds:b?T.memberIds.filter(C=>C!==w):[...T.memberIds,w]}}))};return m.jsxs("div",{className:"p-6 max-w-6xl mx-auto w-full h-full overflow-y-auto",children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6",children:"Admin Settings"}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-slate-100 dark:border-slate-700 pb-2",children:[m.jsx(Yd,{className:"text-orange-600",size:24}),m.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Team Roster"})]}),m.jsxs("div",{className:"flex gap-2 mb-4 items-end",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"First Name"}),m.jsx("input",{type:"text",value:s,onChange:y=>r(y.target.value),placeholder:"e.g. Abby",className:"w-full p-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white"})]}),m.jsxs("div",{className:"w-20",children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"Last Init."}),m.jsx("input",{type:"text",value:a,maxLength:1,onChange:y=>u(y.target.value),placeholder:"B",className:"w-full p-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white text-center",onKeyDown:y=>y.key==="Enter"&&h()})]}),m.jsx("button",{onClick:h,className:"bg-orange-600 text-white p-2.5 rounded-lg hover:bg-orange-700 transition mb-[1px]",children:m.jsx(Jd,{size:20})})]}),m.jsx("ul",{className:"space-y-2 max-h-96 overflow-y-auto pr-1 custom-scrollbar",children:t.map(y=>m.jsxs("li",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg group hover:bg-slate-100 dark:hover:bg-slate-700 transition",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-600 flex items-center justify-center font-bold text-slate-600 dark:text-slate-300 text-xs",children:[y.firstName[0],y.lastNameInitial]}),m.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:[y.firstName," ",y.lastNameInitial,"."]})]}),m.jsx("button",{onClick:()=>g(y.id),className:"text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition",children:m.jsx(Jt,{size:18})})]},y.id))})]}),m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-slate-100 dark:border-slate-700 pb-2",children:[m.jsx(id,{className:"text-orange-600",size:24}),m.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Sub-Teams & Assignments"})]}),m.jsxs("div",{className:"flex gap-2 mb-4",children:[m.jsx("input",{type:"text",value:d,onChange:y=>c(y.target.value),placeholder:"New Team Name (e.g. Pit Crew)",className:"flex-1 p-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white",onKeyDown:y=>y.key==="Enter"&&_()}),m.jsx("button",{onClick:_,className:"bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700 transition",children:m.jsx(un,{size:20})})]}),m.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:n.map(y=>m.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-lg overflow-hidden",children:[m.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 p-3 bg-slate-50 dark:bg-slate-700/50",children:[m.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-200",children:y.name}),m.jsxs("div",{className:"flex gap-2 self-end sm:self-auto",children:[m.jsx("button",{onClick:()=>p(f===y.id?null:y.id),className:`text-xs px-3 py-1 rounded-full transition ${f===y.id?"bg-orange-100 text-orange-700":"bg-white dark:bg-slate-600 text-slate-600 dark:text-slate-300"}`,children:f===y.id?"Done":"Manage Members"}),m.jsx("button",{onClick:()=>v(y.id),className:"text-slate-400 hover:text-red-500",children:m.jsx(Jt,{size:18})})]})]}),m.jsx("div",{className:"p-3 bg-white dark:bg-slate-800",children:f===y.id?m.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.map(w=>m.jsxs("div",{onClick:()=>x(y.id,w.id),className:`cursor-pointer p-2 rounded border flex items-center justify-between text-sm ${y.memberIds.includes(w.id)?"border-orange-500 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300":"border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-400"}`,children:[m.jsxs("span",{children:[w.firstName," ",w.lastNameInitial,"."]}),y.memberIds.includes(w.id)&&m.jsx(sl,{size:14})]},w.id))}):m.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.memberIds.length===0&&m.jsx("span",{className:"text-xs text-slate-400 italic",children:"No members assigned."}),y.memberIds.map(w=>{const T=t.find(b=>b.id===w);return T?m.jsxs("span",{className:"text-xs bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 px-2 py-1 rounded-full border border-slate-200 dark:border-slate-600",children:[T.firstName," ",T.lastNameInitial,"."]},w):null})]})})]},y.id))})]})]})]})};function Xx(){var b;const[t,e]=R.useState("kanban"),[n,o]=R.useState(!1),{user:s,signOut:r,isConfigured:a}=Vs(),{tasks:u,members:d,teams:c,theme:f,setTheme:p,addTask:h,updateTask:g,setMembers:_,setTeams:v}=Pn(),x=Hu(),y=u.map(C=>({...C,timeline:C.timeline.map(S=>({...S,type:S.type}))})),w=async()=>{await r(),x("/login")},T=({id:C,label:S,icon:E})=>m.jsxs("button",{onClick:()=>{e(C),o(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 mb-1
        ${t===C?"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 font-bold shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-slate-200 font-medium"}`,children:[m.jsx(E,{size:20}),m.jsx("span",{children:S})]});return m.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-slate-900 font-sans overflow-hidden transition-colors duration-200",children:[m.jsxs("aside",{className:"hidden lg:flex w-64 flex-col bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 h-full",children:[m.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3",children:[m.jsx("img",{src:"/ftc-team-manager/logo.png",className:"w-12 h-12 object-contain rounded-lg",alt:"Logo"}),m.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white tracking-tight",children:"FTC Manager"})]}),m.jsxs("nav",{className:"flex-1 p-4 overflow-y-auto",children:[m.jsx(T,{id:"kanban",label:"Sprint Planning",icon:kr}),m.jsx(T,{id:"checklist",label:"Pre-Match Checklist",icon:Ur}),m.jsx(T,{id:"scouting",label:"Scouting Reports",icon:Cr}),m.jsx(T,{id:"planner",label:"Match Planner",icon:Ir}),m.jsx("div",{className:"my-4 border-t border-slate-100 dark:border-slate-700"}),m.jsx(T,{id:"portfolio",label:"Portfolio Helper",icon:Tr}),m.jsx(T,{id:"judging",label:"Judging Prep",icon:Ar}),m.jsx("div",{className:"my-4 border-t border-slate-100 dark:border-slate-700"}),m.jsx(T,{id:"admin",label:"Admin Settings",icon:Dr})]}),m.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700",children:[m.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 rounded-xl p-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("p",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Appearance"}),m.jsx("button",{onClick:()=>p(f==="light"?"dark":"light"),className:"text-slate-500 dark:text-slate-400 hover:text-orange-600 dark:hover:text-orange-400",children:f==="light"?m.jsx(Rr,{size:16}):m.jsx(Lr,{size:16})})]}),m.jsxs("div",{className:"flex justify-between text-sm mb-1 text-slate-600 dark:text-slate-300",children:[m.jsx("span",{children:"Tasks Done"}),m.jsx("span",{className:"font-bold",children:u.filter(C=>C.status==="Done").length})]}),m.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-600 rounded-full h-1.5 mt-2",children:m.jsx("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:`${u.length>0?u.filter(C=>C.status==="Done").length/u.length*100:0}%`}})})]}),a&&s&&m.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[m.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-xl",children:[m.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900/50 rounded-full flex items-center justify-center",children:m.jsx(rl,{size:16,className:"text-orange-600 dark:text-orange-400"})}),m.jsx("div",{className:"flex-1 min-w-0",children:m.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:((b=s.user_metadata)==null?void 0:b.full_name)||s.email})}),m.jsx("button",{onClick:w,className:"p-2 text-slate-400 hover:text-red-500 transition-colors",title:"Sign out",children:m.jsx(Nr,{size:16})})]}),m.jsx(ni,{variant:"full"})]})]})]}),m.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 h-16 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between px-4 z-20 safe-area-top",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("img",{src:"/ftc-team-manager/logo.png",className:"w-12 h-12 object-contain rounded-lg",alt:"Logo"}),m.jsx("span",{className:"font-bold text-lg text-slate-900 dark:text-white",children:"FTC Manager"})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(ni,{variant:"icon"}),m.jsx("button",{onClick:()=>p(f==="light"?"dark":"light"),className:"text-slate-600 dark:text-slate-300",children:f==="light"?m.jsx(Rr,{size:20}):m.jsx(Lr,{size:20})}),m.jsx("button",{onClick:()=>o(!n),className:"p-2 text-slate-600 dark:text-slate-300",children:n?m.jsx(il,{}):m.jsx(yd,{})})]})]}),n&&m.jsxs("div",{className:"lg:hidden fixed inset-0 bg-white dark:bg-slate-800 z-50 pt-20 px-4 safe-area-top",children:[m.jsxs("nav",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-6 px-2",children:[m.jsx("img",{src:"/ftc-team-manager/logo.png",className:"w-10 h-10 object-contain rounded-lg",alt:"Logo"}),m.jsx("span",{className:"font-bold text-xl text-slate-900 dark:text-white",children:"FTC Manager"})]}),m.jsx(T,{id:"kanban",label:"Sprint Planning",icon:kr}),m.jsx(T,{id:"checklist",label:"Pre-Match Checklist",icon:Ur}),m.jsx(T,{id:"scouting",label:"Scouting Reports",icon:Cr}),m.jsx(T,{id:"planner",label:"Match Planner",icon:Ir}),m.jsx(T,{id:"portfolio",label:"Portfolio Helper",icon:Tr}),m.jsx(T,{id:"judging",label:"Judging Prep",icon:Ar}),m.jsx(T,{id:"admin",label:"Admin Settings",icon:Dr})]}),a&&s&&m.jsx("div",{className:"mt-8 pt-4 border-t border-slate-200 dark:border-slate-700",children:m.jsxs("button",{onClick:w,className:"w-full flex items-center gap-3 px-4 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-all",children:[m.jsx(Nr,{size:20}),m.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),m.jsx("main",{className:"flex-1 h-full overflow-hidden relative pt-16 lg:pt-0",children:m.jsxs("div",{className:"h-full w-full overflow-y-auto bg-slate-50 dark:bg-slate-900 p-4 lg:p-6",children:[t==="kanban"&&m.jsx(Jx,{tasks:y,setTasks:C=>{let S=[];typeof C=="function"?S=C(y):S=C,S.forEach(E=>{u.find(I=>I.id===E.id)?g(E.id,E):h(E)})},members:d,teams:c}),t==="checklist"&&m.jsx(Wx,{}),t==="scouting"&&m.jsx(zx,{}),t==="planner"&&m.jsx(Yx,{}),t==="portfolio"&&m.jsx(La,{tasks:y,view:"portfolio"}),t==="judging"&&m.jsx(La,{tasks:y,view:"judging"}),t==="admin"&&m.jsx(Qx,{members:d,setMembers:_,teams:c,setTeams:v})]})})]})}function jx(){const{user:t,isLoading:e,isConfigured:n}=Vs(),{theme:o,initializeStore:s}=Pn();return R.useEffect(()=>{s()},[s]),R.useEffect(()=>{o==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[o]),e?m.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4 animate-pulse",children:"B"}),m.jsx("p",{className:"text-slate-400",children:"Loading..."})]})}):m.jsxs(Vu,{children:[m.jsx(Do,{path:"/login",element:!n||t?m.jsx(dr,{to:"/",replace:!0}):m.jsx(Ch,{})}),m.jsx(Do,{path:"/auth/callback",element:m.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4 animate-pulse",children:"B"}),m.jsx("p",{className:"text-slate-400",children:"Completing sign in..."})]})})}),m.jsx(Do,{path:"/*",element:!n||t?m.jsx(Xx,{}):m.jsx(dr,{to:"/login",replace:!0})})]})}const Zx=new bc({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}}),Fu=document.getElementById("root");if(!Fu)throw new Error("Could not find root element to mount to");const e_=Ko.createRoot(Fu);e_.render(m.jsx(za.StrictMode,{children:m.jsx(Ec,{client:Zx,children:m.jsx(Bu,{children:m.jsx(Sc,{children:m.jsx(jx,{})})})})}));
//# sourceMappingURL=index-DSiEP-P9.js.map
