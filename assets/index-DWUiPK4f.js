var Uu=Object.defineProperty;var dr=t=>{throw TypeError(t)};var Lu=(t,e,n)=>e in t?Uu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Oe=(t,e,n)=>Lu(t,typeof e!="symbol"?e+"":e,n),Do=(t,e,n)=>e.has(t)||dr("Cannot "+n);var A=(t,e,n)=>(Do(t,e,"read from private field"),n?n.call(t):e.get(t)),J=(t,e,n)=>e.has(t)?dr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),B=(t,e,n,o)=>(Do(t,e,"write to private field"),o?o.call(t,n):e.set(t,n),n),se=(t,e,n)=>(Do(t,e,"access private method"),n);var Rn=(t,e,n,o)=>({set _(s){B(t,e,s,n)},get _(){return A(t,e,o)}});import{r as M,a as Gu,g as qu,R as Ja,b as Vu,c as Fo,N as fr,u as Hu,H as Bu}from"./vendor-B0Cn478z.js";import{c as $u}from"./supabase-CRHRt2Ih.js";import{s as Mn,d as Ou}from"./charts-CeMqgyHT.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var za={exports:{}},_o={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ku=M,Ju=Symbol.for("react.element"),zu=Symbol.for("react.fragment"),Wu=Object.prototype.hasOwnProperty,Yu=Ku.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qu={key:!0,ref:!0,__self:!0,__source:!0};function Wa(t,e,n){var o,s={},r=null,a=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(o in e)Wu.call(e,o)&&!Qu.hasOwnProperty(o)&&(s[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)s[o]===void 0&&(s[o]=e[o]);return{$$typeof:Ju,type:t,key:r,ref:a,props:s,_owner:Yu.current}}_o.Fragment=zu;_o.jsx=Wa;_o.jsxs=Wa;za.exports=_o;var h=za.exports,Jo={},hr=Gu;Jo.createRoot=hr.createRoot,Jo.hydrateRoot=hr.hydrateRoot;var bo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ju={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Qe,Ls,La,Xu=(La=class{constructor(){J(this,Qe,ju);J(this,Ls,!1)}setTimeoutProvider(t){B(this,Qe,t)}setTimeout(t,e){return A(this,Qe).setTimeout(t,e)}clearTimeout(t){A(this,Qe).clearTimeout(t)}setInterval(t,e){return A(this,Qe).setInterval(t,e)}clearInterval(t){A(this,Qe).clearInterval(t)}},Qe=new WeakMap,Ls=new WeakMap,La),zo=new Xu;function Zu(t){setTimeout(t,0)}var wo=typeof window>"u"||"Deno"in globalThis;function _e(){}function ec(t,e){return typeof t=="function"?t(e):t}function tc(t){return typeof t=="number"&&t>=0&&t!==1/0}function nc(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Wo(t,e){return typeof t=="function"?t(e):t}function oc(t,e){return typeof t=="function"?t(e):t}function pr(t,e){const{type:n="all",exact:o,fetchStatus:s,predicate:r,queryKey:a,stale:u}=t;if(a){if(o){if(e.queryHash!==Gs(a,e.options))return!1}else if(!gn(e.queryKey,a))return!1}if(n!=="all"){const d=e.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||r&&!r(e))}function mr(t,e){const{exact:n,status:o,predicate:s,mutationKey:r}=t;if(r){if(!e.options.mutationKey)return!1;if(n){if(mn(e.options.mutationKey)!==mn(r))return!1}else if(!gn(e.options.mutationKey,r))return!1}return!(o&&e.state.status!==o||s&&!s(e))}function Gs(t,e){return((e==null?void 0:e.queryKeyHashFn)||mn)(t)}function mn(t){return JSON.stringify(t,(e,n)=>Yo(n)?Object.keys(n).sort().reduce((o,s)=>(o[s]=n[s],o),{}):n)}function gn(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>gn(t[n],e[n])):!1}var sc=Object.prototype.hasOwnProperty;function Ya(t,e){if(t===e)return t;const n=gr(t)&&gr(e);if(!n&&!(Yo(t)&&Yo(e)))return e;const s=(n?t:Object.keys(t)).length,r=n?e:Object.keys(e),a=r.length,u=n?new Array(a):{};let d=0;for(let c=0;c<a;c++){const f=n?c:r[c],m=t[f],p=e[f];if(m===p){u[f]=m,(n?c<s:sc.call(t,f))&&d++;continue}if(m===null||p===null||typeof m!="object"||typeof p!="object"){u[f]=p;continue}const g=Ya(m,p);u[f]=g,g===m&&d++}return s===a&&d===s?t:u}function gr(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Yo(t){if(!yr(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!yr(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function yr(t){return Object.prototype.toString.call(t)==="[object Object]"}function rc(t){return new Promise(e=>{zo.setTimeout(e,t)})}function ic(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Ya(t,e):e}function ac(t,e,n=0){const o=[...t,e];return n&&o.length>n?o.slice(1):o}function lc(t,e,n=0){const o=[e,...t];return n&&o.length>n?o.slice(0,-1):o}var qs=Symbol();function Qa(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===qs?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function uc(t,e,n){let o=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),o||(o=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var dt,je,Gt,Ga,cc=(Ga=class extends bo{constructor(){super();J(this,dt);J(this,je);J(this,Gt);B(this,Gt,e=>{if(!wo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){A(this,je)||this.setEventListener(A(this,Gt))}onUnsubscribe(){var e;this.hasListeners()||((e=A(this,je))==null||e.call(this),B(this,je,void 0))}setEventListener(e){var n;B(this,Gt,e),(n=A(this,je))==null||n.call(this),B(this,je,e(o=>{typeof o=="boolean"?this.setFocused(o):this.onFocus()}))}setFocused(e){A(this,dt)!==e&&(B(this,dt,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof A(this,dt)=="boolean"?A(this,dt):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},dt=new WeakMap,je=new WeakMap,Gt=new WeakMap,Ga),ja=new cc;function dc(){let t,e;const n=new Promise((s,r)=>{t=s,e=r});n.status="pending",n.catch(()=>{});function o(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{o({status:"fulfilled",value:s}),t(s)},n.reject=s=>{o({status:"rejected",reason:s}),e(s)},n}var fc=Zu;function hc(){let t=[],e=0,n=u=>{u()},o=u=>{u()},s=fc;const r=u=>{e?t.push(u):s(()=>{n(u)})},a=()=>{const u=t;t=[],u.length&&s(()=>{o(()=>{u.forEach(d=>{n(d)})})})};return{batch:u=>{let d;e++;try{d=u()}finally{e--,e||a()}return d},batchCalls:u=>(...d)=>{r(()=>{u(...d)})},schedule:r,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{o=u},setScheduler:u=>{s=u}}}var ce=hc(),qt,Xe,Vt,qa,pc=(qa=class extends bo{constructor(){super();J(this,qt,!0);J(this,Xe);J(this,Vt);B(this,Vt,e=>{if(!wo&&window.addEventListener){const n=()=>e(!0),o=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",o,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",o)}}})}onSubscribe(){A(this,Xe)||this.setEventListener(A(this,Vt))}onUnsubscribe(){var e;this.hasListeners()||((e=A(this,Xe))==null||e.call(this),B(this,Xe,void 0))}setEventListener(e){var n;B(this,Vt,e),(n=A(this,Xe))==null||n.call(this),B(this,Xe,e(this.setOnline.bind(this)))}setOnline(e){A(this,qt)!==e&&(B(this,qt,e),this.listeners.forEach(o=>{o(e)}))}isOnline(){return A(this,qt)}},qt=new WeakMap,Xe=new WeakMap,Vt=new WeakMap,qa),no=new pc;function mc(t){return Math.min(1e3*2**t,3e4)}function Xa(t){return(t??"online")==="online"?no.isOnline():!0}var Qo=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Za(t){let e=!1,n=0,o;const s=dc(),r=()=>s.status!=="pending",a=v=>{var _;if(!r()){const y=new Qo(v);p(y),(_=t.onCancel)==null||_.call(t,y)}},u=()=>{e=!0},d=()=>{e=!1},c=()=>ja.isFocused()&&(t.networkMode==="always"||no.isOnline())&&t.canRun(),f=()=>Xa(t.networkMode)&&t.canRun(),m=v=>{r()||(o==null||o(),s.resolve(v))},p=v=>{r()||(o==null||o(),s.reject(v))},g=()=>new Promise(v=>{var _;o=y=>{(r()||c())&&v(y)},(_=t.onPause)==null||_.call(t)}).then(()=>{var v;o=void 0,r()||(v=t.onContinue)==null||v.call(t)}),x=()=>{if(r())return;let v;const _=n===0?t.initialPromise:void 0;try{v=_??t.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(m).catch(y=>{var S;if(r())return;const b=t.retry??(wo?0:3),w=t.retryDelay??mc,T=typeof w=="function"?w(n,y):w,C=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!C){p(y);return}n++,(S=t.onFail)==null||S.call(t,n,y),rc(T).then(()=>c()?void 0:g()).then(()=>{e?p(y):x()})})};return{promise:s,status:()=>s.status,cancel:a,continue:()=>(o==null||o(),s),cancelRetry:u,continueRetry:d,canStart:f,start:()=>(f()?x():g().then(x),s)}}var ft,Va,el=(Va=class{constructor(){J(this,ft)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),tc(this.gcTime)&&B(this,ft,zo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(wo?1/0:5*60*1e3))}clearGcTimeout(){A(this,ft)&&(zo.clearTimeout(A(this,ft)),B(this,ft,void 0))}},ft=new WeakMap,Va),ht,Ht,ye,pt,ne,En,mt,be,Me,Ha,gc=(Ha=class extends el{constructor(e){super();J(this,be);J(this,ht);J(this,Ht);J(this,ye);J(this,pt);J(this,ne);J(this,En);J(this,mt);B(this,mt,!1),B(this,En,e.defaultOptions),this.setOptions(e.options),this.observers=[],B(this,pt,e.client),B(this,ye,A(this,pt).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,B(this,ht,xr(this.options)),this.state=e.state??A(this,ht),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=A(this,ne))==null?void 0:e.promise}setOptions(e){if(this.options={...A(this,En),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=xr(this.options);n.data!==void 0&&(this.setState(vr(n.data,n.dataUpdatedAt)),B(this,ht,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&A(this,ye).remove(this)}setData(e,n){const o=ic(this.state.data,e,this.options);return se(this,be,Me).call(this,{data:o,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),o}setState(e,n){se(this,be,Me).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var o,s;const n=(o=A(this,ne))==null?void 0:o.promise;return(s=A(this,ne))==null||s.cancel(e),n?n.then(_e).catch(_e):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(A(this,ht))}isActive(){return this.observers.some(e=>oc(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===qs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Wo(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!nc(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(o=>o.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=A(this,ne))==null||n.continue()}onOnline(){var n;const e=this.observers.find(o=>o.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=A(this,ne))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),A(this,ye).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(A(this,ne)&&(A(this,mt)?A(this,ne).cancel({revert:!0}):A(this,ne).cancelRetry()),this.scheduleGc()),A(this,ye).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||se(this,be,Me).call(this,{type:"invalidate"})}async fetch(e,n){var d,c,f,m,p,g,x,v,_,y,b,w;if(this.state.fetchStatus!=="idle"&&((d=A(this,ne))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(A(this,ne))return A(this,ne).continueRetry(),A(this,ne).promise}if(e&&this.setOptions(e),!this.options.queryFn){const T=this.observers.find(C=>C.options.queryFn);T&&this.setOptions(T.options)}const o=new AbortController,s=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(B(this,mt,!0),o.signal)})},r=()=>{const T=Qa(this.options,n),S=(()=>{const E={client:A(this,pt),queryKey:this.queryKey,meta:this.meta};return s(E),E})();return B(this,mt,!1),this.options.persister?this.options.persister(T,S,this):T(S)},u=(()=>{const T={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:A(this,pt),state:this.state,fetchFn:r};return s(T),T})();(c=this.options.behavior)==null||c.onFetch(u,this),B(this,Ht,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=u.fetchOptions)==null?void 0:f.meta))&&se(this,be,Me).call(this,{type:"fetch",meta:(m=u.fetchOptions)==null?void 0:m.meta}),B(this,ne,Za({initialPromise:n==null?void 0:n.initialPromise,fn:u.fetchFn,onCancel:T=>{T instanceof Qo&&T.revert&&this.setState({...A(this,Ht),fetchStatus:"idle"}),o.abort()},onFail:(T,C)=>{se(this,be,Me).call(this,{type:"failed",failureCount:T,error:C})},onPause:()=>{se(this,be,Me).call(this,{type:"pause"})},onContinue:()=>{se(this,be,Me).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0}));try{const T=await A(this,ne).start();if(T===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(T),(g=(p=A(this,ye).config).onSuccess)==null||g.call(p,T,this),(v=(x=A(this,ye).config).onSettled)==null||v.call(x,T,this.state.error,this),T}catch(T){if(T instanceof Qo){if(T.silent)return A(this,ne).promise;if(T.revert){if(this.state.data===void 0)throw T;return this.state.data}}throw se(this,be,Me).call(this,{type:"error",error:T}),(y=(_=A(this,ye).config).onError)==null||y.call(_,T,this),(w=(b=A(this,ye).config).onSettled)==null||w.call(b,this.state.data,T,this),T}finally{this.scheduleGc()}}},ht=new WeakMap,Ht=new WeakMap,ye=new WeakMap,pt=new WeakMap,ne=new WeakMap,En=new WeakMap,mt=new WeakMap,be=new WeakSet,Me=function(e){const n=o=>{switch(e.type){case"failed":return{...o,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...o,fetchStatus:"paused"};case"continue":return{...o,fetchStatus:"fetching"};case"fetch":return{...o,...yc(o.data,this.options),fetchMeta:e.meta??null};case"success":const s={...o,...vr(e.data,e.dataUpdatedAt),dataUpdateCount:o.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return B(this,Ht,e.manual?s:void 0),s;case"error":const r=e.error;return{...o,error:r,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...o,isInvalidated:!0};case"setState":return{...o,...e.state}}};this.state=n(this.state),ce.batch(()=>{this.observers.forEach(o=>{o.onQueryUpdate()}),A(this,ye).notify({query:this,type:"updated",action:e})})},Ha);function yc(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Xa(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function vr(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function xr(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,o=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function _r(t){return{onFetch:(e,n)=>{var f,m,p,g,x;const o=e.options,s=(p=(m=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:p.direction,r=((g=e.state.data)==null?void 0:g.pages)||[],a=((x=e.state.data)==null?void 0:x.pageParams)||[];let u={pages:[],pageParams:[]},d=0;const c=async()=>{let v=!1;const _=w=>{uc(w,()=>e.signal,()=>v=!0)},y=Qa(e.options,e.fetchOptions),b=async(w,T,C)=>{if(v)return Promise.reject();if(T==null&&w.pages.length)return Promise.resolve(w);const E=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:T,direction:C?"backward":"forward",meta:e.options.meta};return _(F),F})(),N=await y(E),{maxPages:I}=e.options,P=C?lc:ac;return{pages:P(w.pages,N,I),pageParams:P(w.pageParams,T,I)}};if(s&&r.length){const w=s==="backward",T=w?vc:br,C={pages:r,pageParams:a},S=T(o,C);u=await b(C,S,w)}else{const w=t??r.length;do{const T=d===0?a[0]??o.initialPageParam:br(o,u);if(d>0&&T==null)break;u=await b(u,T),d++}while(d<w)}return u};e.options.persister?e.fetchFn=()=>{var v,_;return(_=(v=e.options).persister)==null?void 0:_.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function br(t,{pages:e,pageParams:n}){const o=e.length-1;return e.length>0?t.getNextPageParam(e[o],e,n[o],n):void 0}function vc(t,{pages:e,pageParams:n}){var o;return e.length>0?(o=t.getPreviousPageParam)==null?void 0:o.call(t,e[0],e,n[0],n):void 0}var Sn,Ae,le,gt,ke,Ke,Ba,xc=(Ba=class extends el{constructor(e){super();J(this,ke);J(this,Sn);J(this,Ae);J(this,le);J(this,gt);B(this,Sn,e.client),this.mutationId=e.mutationId,B(this,le,e.mutationCache),B(this,Ae,[]),this.state=e.state||_c(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){A(this,Ae).includes(e)||(A(this,Ae).push(e),this.clearGcTimeout(),A(this,le).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){B(this,Ae,A(this,Ae).filter(n=>n!==e)),this.scheduleGc(),A(this,le).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){A(this,Ae).length||(this.state.status==="pending"?this.scheduleGc():A(this,le).remove(this))}continue(){var e;return((e=A(this,gt))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,u,d,c,f,m,p,g,x,v,_,y,b,w,T,C,S,E,N,I;const n=()=>{se(this,ke,Ke).call(this,{type:"continue"})},o={client:A(this,Sn),meta:this.options.meta,mutationKey:this.options.mutationKey};B(this,gt,Za({fn:()=>this.options.mutationFn?this.options.mutationFn(e,o):Promise.reject(new Error("No mutationFn found")),onFail:(P,F)=>{se(this,ke,Ke).call(this,{type:"failed",failureCount:P,error:F})},onPause:()=>{se(this,ke,Ke).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>A(this,le).canRun(this)}));const s=this.state.status==="pending",r=!A(this,gt).canStart();try{if(s)n();else{se(this,ke,Ke).call(this,{type:"pending",variables:e,isPaused:r}),await((u=(a=A(this,le).config).onMutate)==null?void 0:u.call(a,e,this,o));const F=await((c=(d=this.options).onMutate)==null?void 0:c.call(d,e,o));F!==this.state.context&&se(this,ke,Ke).call(this,{type:"pending",context:F,variables:e,isPaused:r})}const P=await A(this,gt).start();return await((m=(f=A(this,le).config).onSuccess)==null?void 0:m.call(f,P,e,this.state.context,this,o)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,P,e,this.state.context,o)),await((v=(x=A(this,le).config).onSettled)==null?void 0:v.call(x,P,null,this.state.variables,this.state.context,this,o)),await((y=(_=this.options).onSettled)==null?void 0:y.call(_,P,null,e,this.state.context,o)),se(this,ke,Ke).call(this,{type:"success",data:P}),P}catch(P){try{await((w=(b=A(this,le).config).onError)==null?void 0:w.call(b,P,e,this.state.context,this,o))}catch(F){Promise.reject(F)}try{await((C=(T=this.options).onError)==null?void 0:C.call(T,P,e,this.state.context,o))}catch(F){Promise.reject(F)}try{await((E=(S=A(this,le).config).onSettled)==null?void 0:E.call(S,void 0,P,this.state.variables,this.state.context,this,o))}catch(F){Promise.reject(F)}try{await((I=(N=this.options).onSettled)==null?void 0:I.call(N,void 0,P,e,this.state.context,o))}catch(F){Promise.reject(F)}throw se(this,ke,Ke).call(this,{type:"error",error:P}),P}finally{A(this,le).runNext(this)}}},Sn=new WeakMap,Ae=new WeakMap,le=new WeakMap,gt=new WeakMap,ke=new WeakSet,Ke=function(e){const n=o=>{switch(e.type){case"failed":return{...o,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...o,isPaused:!0};case"continue":return{...o,isPaused:!1};case"pending":return{...o,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...o,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...o,data:void 0,error:e.error,failureCount:o.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ce.batch(()=>{A(this,Ae).forEach(o=>{o.onMutationUpdate(e)}),A(this,le).notify({mutation:this,type:"updated",action:e})})},Ba);function _c(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fe,we,In,$a,bc=($a=class extends bo{constructor(e={}){super();J(this,Fe);J(this,we);J(this,In);this.config=e,B(this,Fe,new Set),B(this,we,new Map),B(this,In,0)}build(e,n,o){const s=new xc({client:e,mutationCache:this,mutationId:++Rn(this,In)._,options:e.defaultMutationOptions(n),state:o});return this.add(s),s}add(e){A(this,Fe).add(e);const n=Dn(e);if(typeof n=="string"){const o=A(this,we).get(n);o?o.push(e):A(this,we).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(A(this,Fe).delete(e)){const n=Dn(e);if(typeof n=="string"){const o=A(this,we).get(n);if(o)if(o.length>1){const s=o.indexOf(e);s!==-1&&o.splice(s,1)}else o[0]===e&&A(this,we).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Dn(e);if(typeof n=="string"){const o=A(this,we).get(n),s=o==null?void 0:o.find(r=>r.state.status==="pending");return!s||s===e}else return!0}runNext(e){var o;const n=Dn(e);if(typeof n=="string"){const s=(o=A(this,we).get(n))==null?void 0:o.find(r=>r!==e&&r.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ce.batch(()=>{A(this,Fe).forEach(e=>{this.notify({type:"removed",mutation:e})}),A(this,Fe).clear(),A(this,we).clear()})}getAll(){return Array.from(A(this,Fe))}find(e){const n={exact:!0,...e};return this.getAll().find(o=>mr(n,o))}findAll(e={}){return this.getAll().filter(n=>mr(e,n))}notify(e){ce.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ce.batch(()=>Promise.all(e.map(n=>n.continue().catch(_e))))}},Fe=new WeakMap,we=new WeakMap,In=new WeakMap,$a);function Dn(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Ne,Oa,wc=(Oa=class extends bo{constructor(e={}){super();J(this,Ne);this.config=e,B(this,Ne,new Map)}build(e,n,o){const s=n.queryKey,r=n.queryHash??Gs(s,n);let a=this.get(r);return a||(a=new gc({client:e,queryKey:s,queryHash:r,options:e.defaultQueryOptions(n),state:o,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){A(this,Ne).has(e.queryHash)||(A(this,Ne).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=A(this,Ne).get(e.queryHash);n&&(e.destroy(),n===e&&A(this,Ne).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ce.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return A(this,Ne).get(e)}getAll(){return[...A(this,Ne).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(o=>pr(n,o))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(o=>pr(e,o)):n}notify(e){ce.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ce.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ce.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ne=new WeakMap,Oa),Z,Ze,et,Bt,$t,tt,Ot,Kt,Ka,Tc=(Ka=class{constructor(t={}){J(this,Z);J(this,Ze);J(this,et);J(this,Bt);J(this,$t);J(this,tt);J(this,Ot);J(this,Kt);B(this,Z,t.queryCache||new wc),B(this,Ze,t.mutationCache||new bc),B(this,et,t.defaultOptions||{}),B(this,Bt,new Map),B(this,$t,new Map),B(this,tt,0)}mount(){Rn(this,tt)._++,A(this,tt)===1&&(B(this,Ot,ja.subscribe(async t=>{t&&(await this.resumePausedMutations(),A(this,Z).onFocus())})),B(this,Kt,no.subscribe(async t=>{t&&(await this.resumePausedMutations(),A(this,Z).onOnline())})))}unmount(){var t,e;Rn(this,tt)._--,A(this,tt)===0&&((t=A(this,Ot))==null||t.call(this),B(this,Ot,void 0),(e=A(this,Kt))==null||e.call(this),B(this,Kt,void 0))}isFetching(t){return A(this,Z).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return A(this,Ze).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=A(this,Z).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=A(this,Z).build(this,e),o=n.state.data;return o===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Wo(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(o))}getQueriesData(t){return A(this,Z).findAll(t).map(({queryKey:e,state:n})=>{const o=n.data;return[e,o]})}setQueryData(t,e,n){const o=this.defaultQueryOptions({queryKey:t}),s=A(this,Z).get(o.queryHash),r=s==null?void 0:s.state.data,a=ec(e,r);if(a!==void 0)return A(this,Z).build(this,o).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return ce.batch(()=>A(this,Z).findAll(t).map(({queryKey:o})=>[o,this.setQueryData(o,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=A(this,Z).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=A(this,Z);ce.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=A(this,Z);return ce.batch(()=>(n.findAll(t).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},o=ce.batch(()=>A(this,Z).findAll(t).map(s=>s.cancel(n)));return Promise.all(o).then(_e).catch(_e)}invalidateQueries(t,e={}){return ce.batch(()=>(A(this,Z).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},o=ce.batch(()=>A(this,Z).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let r=s.fetch(void 0,n);return n.throwOnError||(r=r.catch(_e)),s.state.fetchStatus==="paused"?Promise.resolve():r}));return Promise.all(o).then(_e)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=A(this,Z).build(this,e);return n.isStaleByTime(Wo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(_e).catch(_e)}fetchInfiniteQuery(t){return t.behavior=_r(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(_e).catch(_e)}ensureInfiniteQueryData(t){return t.behavior=_r(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return no.isOnline()?A(this,Ze).resumePausedMutations():Promise.resolve()}getQueryCache(){return A(this,Z)}getMutationCache(){return A(this,Ze)}getDefaultOptions(){return A(this,et)}setDefaultOptions(t){B(this,et,t)}setQueryDefaults(t,e){A(this,Bt).set(mn(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...A(this,Bt).values()],n={};return e.forEach(o=>{gn(t,o.queryKey)&&Object.assign(n,o.defaultOptions)}),n}setMutationDefaults(t,e){A(this,$t).set(mn(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...A(this,$t).values()],n={};return e.forEach(o=>{gn(t,o.mutationKey)&&Object.assign(n,o.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...A(this,et).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Gs(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===qs&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...A(this,et).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){A(this,Z).clear(),A(this,Ze).clear()}},Z=new WeakMap,Ze=new WeakMap,et=new WeakMap,Bt=new WeakMap,$t=new WeakMap,tt=new WeakMap,Ot=new WeakMap,Kt=new WeakMap,Ka),Cc=M.createContext(void 0),Ec=({client:t,children:e})=>(M.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),h.jsx(Cc.Provider,{value:t,children:e}));const To="https://cvnonrjzshaawzxcjwmn.supabase.co",_t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN2bm9ucmp6c2hhYXd6eGNqd21uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczODM0MjQsImV4cCI6MjA4Mjk1OTQyNH0._Qx-efsymzv9R2WpvqcuuxDbz0GeugueEgSPIEM7Cn0",W=$u(To,_t,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Vs=()=>!!W,tl=M.createContext(void 0);function Sc({children:t}){const[e,n]=M.useState({user:null,session:null,isLoading:!0,isConfigured:Vs()});M.useEffect(()=>{if(!W){n(g=>({...g,isLoading:!1}));return}const m=setTimeout(()=>{n(g=>g.isLoading?(console.warn("Auth check timed out, proceeding to app..."),{...g,isLoading:!1}):g)},1500);W.auth.getSession().then(({data:{session:g}})=>{clearTimeout(m),n(x=>({...x,session:g,user:(g==null?void 0:g.user)??null,isLoading:!1}))}).catch(g=>{console.error("Auth session error:",g),clearTimeout(m),n(x=>({...x,isLoading:!1}))});const{data:{subscription:p}}=W.auth.onAuthStateChange(async(g,x)=>{n(v=>({...v,session:x,user:(x==null?void 0:x.user)??null,isLoading:!1})),g==="SIGNED_IN"&&(x!=null&&x.user)&&await o(x.user)});return()=>{p.unsubscribe()}},[]);const o=async m=>{if(!W)return;const{data:p}=await W.from("users").select("id").eq("id",m.id).single();p||await W.from("users").insert({id:m.id,email:m.email,full_name:m.user_metadata.full_name||m.user_metadata.name||null,avatar_url:m.user_metadata.avatar_url||null})},s=M.useCallback(async(m,p)=>{if(!W)return{error:{message:"Supabase not configured"}};const{error:g}=await W.auth.signInWithPassword({email:m,password:p});return{error:g}},[]),r=M.useCallback(async(m,p,g)=>{if(!W)return{error:{message:"Supabase not configured"}};const{error:x}=await W.auth.signUp({email:m,password:p,options:{data:{full_name:g}}});return{error:x}},[]),a=M.useCallback(async()=>{if(!W)return{error:{message:"Supabase not configured"}};const{error:m}=await W.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});return{error:m}},[]),u=M.useCallback(async()=>{if(!W)return{error:{message:"Supabase not configured"}};const{error:m}=await W.auth.signInWithOAuth({provider:"azure",options:{redirectTo:`${window.location.origin}/auth/callback`,scopes:"email profile openid"}});return{error:m}},[]),d=M.useCallback(async()=>{W&&await W.auth.signOut()},[]),c=M.useCallback(async m=>{if(!W)return{error:{message:"Supabase not configured"}};const{error:p}=await W.auth.resetPasswordForEmail(m,{redirectTo:`${window.location.origin}/auth/reset-password`});return{error:p}},[]),f={...e,signInWithEmail:s,signUpWithEmail:r,signInWithGoogle:a,signInWithMicrosoft:u,signOut:d,resetPassword:c};return h.jsx(tl.Provider,{value:f,children:t})}function Hs(){const t=M.useContext(tl);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ac=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,o)=>o?o.toUpperCase():n.toLowerCase()),wr=t=>{const e=Ac(t);return e.charAt(0).toUpperCase()+e.slice(1)},nl=(...t)=>t.filter((e,n,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===n).join(" ").trim(),kc=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:s="",children:r,iconNode:a,...u},d)=>M.createElement("svg",{ref:d,...Nc,width:e,height:e,stroke:t,strokeWidth:o?Number(n)*24/Number(e):n,className:nl("lucide",s),...!r&&!kc(u)&&{"aria-hidden":"true"},...u},[...a.map(([c,f])=>M.createElement(c,f)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=(t,e)=>{const n=M.forwardRef(({className:o,...s},r)=>M.createElement(Pc,{ref:r,iconNode:e,className:nl(`lucide-${Ic(wr(t))}`,`lucide-${t}`,o),...s}));return n.displayName=wr(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],jo=H("arrow-right",Rc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Tr=H("book-open",Mc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Fc=H("calendar",Dc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ol=H("check",Uc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Gc=H("chevron-down",Lc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Vc=H("chevron-right",qc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Bc=H("circle-alert",Hc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Oc=H("circle-check",$c);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Cr=H("clipboard-check",Kc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zc=H("clock",Jc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],oo=H("cloud-off",Wc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Qc=H("cloud-upload",Yc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Xc=H("cloud",jc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ed=H("download",Zc);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Er=H("folder-open",td);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],Sr=H("gamepad-2",nd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Ir=H("graduation-cap",od);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],rd=H("layers",sd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ar=H("layout-dashboard",id);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],ld=H("list",ad);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],so=H("loader-circle",ud);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],dd=H("lock",cd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],kr=H("log-out",fd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],pd=H("mail",hd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],gd=H("menu",md);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],vd=H("mic",yd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=[["path",{d:"M5 12h14",key:"1ays0h"}]],Nr=H("minus",xd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Pr=H("moon",_d);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],wd=H("panels-top-left",bd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Cd=H("pen",Td);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],un=H("plus",Ed);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Id=H("refresh-cw",Sd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],kd=H("rotate-ccw",Ad);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Rr=H("save",Nd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Rd=H("send",Pd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mr=H("settings",Md);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Dr=H("sparkles",Dd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fr=H("square-check-big",Fd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ld=H("square-pen",Ud);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ur=H("sun",Gd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Jt=H("trash-2",qd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Hd=H("trophy",Vd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],$d=H("undo",Bd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Kd=H("user-plus",Od);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sl=H("user",Jd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Wd=H("users",zd);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rl=H("x",Yd),Qd={},Lr=t=>{let e;const n=new Set,o=(f,m)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const g=e;e=m??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(x=>x(e,g))}},s=()=>e,d={setState:o,getState:s,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Qd?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(o,s,d);return d},jd=t=>t?Lr(t):Lr;var il={exports:{}},al={},ll={exports:{}},ul={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zt=M;function Xd(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zd=typeof Object.is=="function"?Object.is:Xd,ef=zt.useState,tf=zt.useEffect,nf=zt.useLayoutEffect,of=zt.useDebugValue;function sf(t,e){var n=e(),o=ef({inst:{value:n,getSnapshot:e}}),s=o[0].inst,r=o[1];return nf(function(){s.value=n,s.getSnapshot=e,Uo(s)&&r({inst:s})},[t,n,e]),tf(function(){return Uo(s)&&r({inst:s}),t(function(){Uo(s)&&r({inst:s})})},[t]),of(n),n}function Uo(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zd(t,n)}catch{return!0}}function rf(t,e){return e()}var af=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?rf:sf;ul.useSyncExternalStore=zt.useSyncExternalStore!==void 0?zt.useSyncExternalStore:af;ll.exports=ul;var lf=ll.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Co=M,uf=lf;function cf(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var df=typeof Object.is=="function"?Object.is:cf,ff=uf.useSyncExternalStore,hf=Co.useRef,pf=Co.useEffect,mf=Co.useMemo,gf=Co.useDebugValue;al.useSyncExternalStoreWithSelector=function(t,e,n,o,s){var r=hf(null);if(r.current===null){var a={hasValue:!1,value:null};r.current=a}else a=r.current;r=mf(function(){function d(g){if(!c){if(c=!0,f=g,g=o(g),s!==void 0&&a.hasValue){var x=a.value;if(s(x,g))return m=x}return m=g}if(x=m,df(f,g))return x;var v=o(g);return s!==void 0&&s(x,v)?(f=g,x):(f=g,m=v)}var c=!1,f,m,p=n===void 0?null:n;return[function(){return d(e())},p===null?void 0:function(){return d(p())}]},[e,n,o,s]);var u=ff(t,r[0],r[1]);return pf(function(){a.hasValue=!0,a.value=u},[u]),gf(u),u};il.exports=al;var yf=il.exports;const vf=qu(yf),cl={},{useDebugValue:xf}=Ja,{useSyncExternalStoreWithSelector:_f}=vf;let Gr=!1;const bf=t=>t;function wf(t,e=bf,n){(cl?"production":void 0)!=="production"&&n&&!Gr&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Gr=!0);const o=_f(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return xf(o),o}const Tf=t=>{(cl?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?jd(t):t,n=(o,s)=>wf(e,o,s);return Object.assign(n,e),n},Cf=t=>Tf,Ef={};function Sf(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var r;const a=d=>d===null?null:JSON.parse(d,void 0),u=(r=n.getItem(s))!=null?r:null;return u instanceof Promise?u.then(a):a(u)},setItem:(s,r)=>n.setItem(s,JSON.stringify(r,void 0)),removeItem:s=>n.removeItem(s)}}const yn=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(o){return yn(o)(n)},catch(o){return this}}}catch(n){return{then(o){return this},catch(o){return yn(o)(n)}}}},If=(t,e)=>(n,o,s)=>{let r={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,y)=>({...y,..._}),...e},a=!1;const u=new Set,d=new Set;let c;try{c=r.getStorage()}catch{}if(!c)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),n(..._)},o,s);const f=yn(r.serialize),m=()=>{const _=r.partialize({...o()});let y;const b=f({state:_,version:r.version}).then(w=>c.setItem(r.name,w)).catch(w=>{y=w});if(y)throw y;return b},p=s.setState;s.setState=(_,y)=>{p(_,y),m()};const g=t((..._)=>{n(..._),m()},o,s);let x;const v=()=>{var _;if(!c)return;a=!1,u.forEach(b=>b(o()));const y=((_=r.onRehydrateStorage)==null?void 0:_.call(r,o()))||void 0;return yn(c.getItem.bind(c))(r.name).then(b=>{if(b)return r.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==r.version){if(r.migrate)return r.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var w;return x=r.merge(b,(w=o())!=null?w:g),n(x,!0),m()}).then(()=>{y==null||y(x,void 0),a=!0,d.forEach(b=>b(x))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:_=>{r={...r,..._},_.getStorage&&(c=_.getStorage())},clearStorage:()=>{c==null||c.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:_=>(u.add(_),()=>{u.delete(_)}),onFinishHydration:_=>(d.add(_),()=>{d.delete(_)})},v(),x||g},Af=(t,e)=>(n,o,s)=>{let r={storage:Sf(()=>localStorage),partialize:v=>v,version:0,merge:(v,_)=>({..._,...v}),...e},a=!1;const u=new Set,d=new Set;let c=r.storage;if(!c)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),n(...v)},o,s);const f=()=>{const v=r.partialize({...o()});return c.setItem(r.name,{state:v,version:r.version})},m=s.setState;s.setState=(v,_)=>{m(v,_),f()};const p=t((...v)=>{n(...v),f()},o,s);s.getInitialState=()=>p;let g;const x=()=>{var v,_;if(!c)return;a=!1,u.forEach(b=>{var w;return b((w=o())!=null?w:p)});const y=((_=r.onRehydrateStorage)==null?void 0:_.call(r,(v=o())!=null?v:p))||void 0;return yn(c.getItem.bind(c))(r.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==r.version){if(r.migrate)return[!0,r.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var w;const[T,C]=b;if(g=r.merge(C,(w=o())!=null?w:p),n(g,!0),T)return f()}).then(()=>{y==null||y(g,void 0),g=o(),a=!0,d.forEach(b=>b(g))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:v=>{r={...r,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c==null||c.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>x(),hasHydrated:()=>a,onHydrate:v=>(u.add(v),()=>{u.delete(v)}),onFinishHydration:v=>(d.add(v),()=>{d.delete(v)})},r.skipHydration||x(),g||p},kf=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Ef?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),If(t,e)):Af(t,e),Nf=kf,j=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ee=Object.keys,ie=Array.isArray;function fe(t,e){return typeof e!="object"||ee(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||j.Promise||(j.Promise=Promise);const vn=Object.getPrototypeOf,Pf={}.hasOwnProperty;function me(t,e){return Pf.call(t,e)}function Wt(t,e){typeof e=="function"&&(e=e(vn(t))),(typeof Reflect>"u"?ee:Reflect.ownKeys)(e).forEach(n=>{Ge(t,n,e[n])})}const dl=Object.defineProperty;function Ge(t,e,n,o){dl(t,e,fe(n&&me(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},o))}function Mt(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Ge(t.prototype,"constructor",t),{extend:Wt.bind(null,t.prototype)}}}}const Rf=Object.getOwnPropertyDescriptor;function Bs(t,e){let n;return Rf(t,e)||(n=vn(t))&&Bs(n,e)}const Mf=[].slice;function ro(t,e,n){return Mf.call(t,e,n)}function fl(t,e){return e(t)}function rn(t){if(!t)throw new Error("Assertion Failed")}function hl(t){j.setImmediate?setImmediate(t):setTimeout(t,0)}function pl(t,e){return t.reduce((n,o,s)=>{var r=e(o,s);return r&&(n[r[0]]=r[1]),n},{})}function qe(t,e){if(typeof e=="string"&&me(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],o=0,s=e.length;o<s;++o){var r=qe(t,e[o]);n.push(r)}return n}var a=e.indexOf(".");if(a!==-1){var u=t[e.substr(0,a)];return u==null?void 0:qe(u,e.substr(a+1))}}function Te(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){rn(typeof n!="string"&&"length"in n);for(var o=0,s=e.length;o<s;++o)Te(t,e[o],n[o])}else{var r=e.indexOf(".");if(r!==-1){var a=e.substr(0,r),u=e.substr(r+1);if(u==="")n===void 0?ie(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var d=t[a];d&&me(t,a)||(d=t[a]={}),Te(d,u,n)}}else n===void 0?ie(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function ml(t){var e={};for(var n in t)me(t,n)&&(e[n]=t[n]);return e}const Df=[].concat;function gl(t){return Df.apply([],t)}const yl="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(gl([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>j[t]),Ff=yl.map(t=>j[t]);pl(yl,t=>[t,!0]);let We=null;function An(t){We=typeof WeakMap<"u"&&new WeakMap;const e=Xo(t);return We=null,e}function Xo(t){if(!t||typeof t!="object")return t;let e=We&&We.get(t);if(e)return e;if(ie(t)){e=[],We&&We.set(t,e);for(var n=0,o=t.length;n<o;++n)e.push(Xo(t[n]))}else if(Ff.indexOf(t.constructor)>=0)e=t;else{const r=vn(t);for(var s in e=r===Object.prototype?{}:Object.create(r),We&&We.set(t,e),t)me(t,s)&&(e[s]=Xo(t[s]))}return e}const{toString:Uf}={};function Zo(t){return Uf.call(t).slice(8,-1)}const es=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Lf=typeof es=="symbol"?function(t){var e;return t!=null&&(e=t[es])&&e.apply(t)}:function(){return null},At={};function Ue(t){var e,n,o,s;if(arguments.length===1){if(ie(t))return t.slice();if(this===At&&typeof t=="string")return[t];if(s=Lf(t)){for(n=[];!(o=s.next()).done;)n.push(o.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const $s=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Pe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function vl(t,e){Pe=t,xl=e}var xl=()=>!0;const Gf=!new Error("").stack;function Tt(){if(Gf)try{throw Tt.arguments,new Error}catch(t){return t}return new Error}function ts(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(xl).map(o=>`
`+o).join("")):""}var _l=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Os=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(_l),qf={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Dt(t,e){this._e=Tt(),this.name=t,this.message=e}function bl(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,o,s)=>s.indexOf(n)===o).join(`
`)}function io(t,e,n,o){this._e=Tt(),this.failures=e,this.failedKeys=o,this.successCount=n,this.message=bl(t,e)}function cn(t,e){this._e=Tt(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=bl(t,e)}Mt(Dt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+ts(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Mt(io).from(Dt),Mt(cn).from(Dt);var Ks=Os.reduce((t,e)=>(t[e]=e+"Error",t),{});const Vf=Dt;var q=Os.reduce((t,e)=>{var n=e+"Error";function o(s,r){this._e=Tt(),this.name=n,s?typeof s=="string"?(this.message=`${s}${r?`
 `+r:""}`,this.inner=r||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=qf[e]||n,this.inner=null)}return Mt(o).from(Vf),t[e]=o,t},{});q.Syntax=SyntaxError,q.Type=TypeError,q.Range=RangeError;var qr=_l.reduce((t,e)=>(t[e+"Error"]=q[e],t),{}),zn=Os.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=q[e]),t),{});function Q(){}function xn(t){return t}function Hf(t,e){return t==null||t===xn?e:function(n){return e(t(n))}}function bt(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Bf(t,e){return t===Q?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var r=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?bt(o,this.onsuccess):o),s&&(this.onerror=this.onerror?bt(s,this.onerror):s),r!==void 0?r:n}}function $f(t,e){return t===Q?e:function(){t.apply(this,arguments);var n=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?bt(n,this.onsuccess):n),o&&(this.onerror=this.onerror?bt(o,this.onerror):o)}}function Of(t,e){return t===Q?e:function(n){var o=t.apply(this,arguments);fe(n,o);var s=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?bt(s,this.onsuccess):s),r&&(this.onerror=this.onerror?bt(r,this.onerror):r),o===void 0?a===void 0?void 0:a:fe(o,a)}}function Kf(t,e){return t===Q?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Js(t,e){return t===Q?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var o=this,s=arguments.length,r=new Array(s);s--;)r[s]=arguments[s];return n.then(function(){return e.apply(o,r)})}return e.apply(this,arguments)}}zn.ModifyError=io,zn.DexieError=Dt,zn.BulkError=cn;var _n={};const wl=100,[ns,ao,os]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,vn(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,vn(e),t]})(),Tl=ao&&ao.then,Wn=ns&&ns.constructor,zs=!!os;var ss=!1,Jf=os?()=>{os.then(Fn)}:j.setImmediate?setImmediate.bind(null,Fn):j.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Fn(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Fn,0)},dn=function(t,e){an.push([t,e]),lo&&(Jf(),lo=!1)},rs=!0,lo=!0,yt=[],Yn=[],is=null,as=xn,Ft={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Br,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Br(t[0],t[1])}catch{}})}},G=Ft,an=[],vt=0,Qn=[];function U(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Q,this._lib=!1;var e=this._PSD=G;if(Pe&&(this._stackHolder=Tt(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==_n)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&us(this,this._value))}this._state=null,this._value=null,++e.ref,El(this,t)}const ls={get:function(){var t=G,e=uo;function n(o,s){var r=!t.global&&(t!==G||e!==uo);const a=r&&!Ve();var u=new U((d,c)=>{Ws(this,new Cl(co(o,t,r,a),co(s,t,r,a),d,c,t))});return Pe&&Al(u,this),u}return n.prototype=_n,n},set:function(t){Ge(this,"then",t&&t.prototype===_n?ls:{get:function(){return t},set:ls.set})}};function Cl(t,e,n,o,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=o,this.psd=s}function El(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var o=t._lib&&kn();n&&typeof n.then=="function"?El(t,(s,r)=>{n instanceof U?n._then(s,r):n.then(s,r)}):(t._state=!0,t._value=n,Sl(t)),o&&Nn()}},us.bind(null,t))}catch(n){us(t,n)}}function us(t,e){if(Yn.push(e),t._state===null){var n=t._lib&&kn();e=as(e),t._state=!1,t._value=e,Pe&&e!==null&&typeof e=="object"&&!e._promise&&function(o,s,r){try{o.apply(null,r)}catch{}}(()=>{var o=Bs(e,"stack");e._promise=t,Ge(e,"stack",{get:()=>ss?o&&(o.get?o.get.apply(e):o.value):t.stack})}),function(o){yt.some(s=>s._value===o._value)||yt.push(o)}(t),Sl(t),n&&Nn()}}function Sl(t){var e=t._listeners;t._listeners=[];for(var n=0,o=e.length;n<o;++n)Ws(t,e[n]);var s=t._PSD;--s.ref||s.finalize(),vt===0&&(++vt,dn(()=>{--vt==0&&Ys()},[]))}function Ws(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++vt,dn(zf,[n,t,e])}else t._listeners.push(e)}function zf(t,e,n){try{is=e;var o,s=e._value;e._state?o=t(s):(Yn.length&&(Yn=[]),o=t(s),Yn.indexOf(s)===-1&&function(r){for(var a=yt.length;a;)if(yt[--a]._value===r._value)return void yt.splice(a,1)}(e)),n.resolve(o)}catch(r){n.reject(r)}finally{is=null,--vt==0&&Ys(),--n.psd.ref||n.psd.finalize()}}function Il(t,e,n){if(e.length===n)return e;var o="";if(t._state===!1){var s,r,a=t._value;a!=null?(s=a.name||"Error",r=a.message||a,o=ts(a,0)):(s=a,r=""),e.push(s+(r?": "+r:"")+o)}return Pe&&((o=ts(t._stackHolder,2))&&e.indexOf(o)===-1&&e.push(o),t._prev&&Il(t._prev,e,n)),e}function Al(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Fn(){kn()&&Nn()}function kn(){var t=rs;return rs=!1,lo=!1,t}function Nn(){var t,e,n;do for(;an.length>0;)for(t=an,an=[],n=t.length,e=0;e<n;++e){var o=t[e];o[0].apply(null,o[1])}while(an.length>0);rs=!0,lo=!0}function Ys(){var t=yt;yt=[],t.forEach(o=>{o._PSD.onunhandled.call(null,o._value,o)});for(var e=Qn.slice(0),n=e.length;n;)e[--n]()}function Un(t){return new U(_n,!1,t)}function X(t,e){var n=G;return function(){var o=kn(),s=G;try{return rt(n,!0),t.apply(this,arguments)}catch(r){e&&e(r)}finally{rt(s,!1),o&&Nn()}}}Wt(U.prototype,{then:ls,_then:function(t,e){Ws(this,new Cl(null,null,t,e,G))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,o=>o instanceof e?n(o):Un(o)):this.then(null,o=>o&&o.name===e?n(o):Un(o))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Un(e)))},stack:{get:function(){if(this._stack)return this._stack;try{ss=!0;var t=Il(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{ss=!1}}},timeout:function(t,e){return t<1/0?new U((n,o)=>{var s=setTimeout(()=>o(new q.Timeout(e)),t);this.then(n,o).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Ge(U.prototype,Symbol.toStringTag,"Dexie.Promise"),Ft.env=kl(),Wt(U,{all:function(){var t=Ue.apply(null,arguments).map(Ln);return new U(function(e,n){t.length===0&&e([]);var o=t.length;t.forEach((s,r)=>U.resolve(s).then(a=>{t[r]=a,--o||e(t)},n))})},resolve:t=>{if(t instanceof U)return t;if(t&&typeof t.then=="function")return new U((n,o)=>{t.then(n,o)});var e=new U(_n,!0,t);return Al(e,is),e},reject:Un,race:function(){var t=Ue.apply(null,arguments).map(Ln);return new U((e,n)=>{t.map(o=>U.resolve(o).then(e,n))})},PSD:{get:()=>G,set:t=>G=t},totalEchoes:{get:()=>uo},newPSD:st,usePSD:Qt,scheduler:{get:()=>dn,set:t=>{dn=t}},rejectionMapper:{get:()=>as,set:t=>{as=t}},follow:(t,e)=>new U((n,o)=>st((s,r)=>{var a=G;a.unhandleds=[],a.onunhandled=r,a.finalize=bt(function(){(function(u){function d(){u(),Qn.splice(Qn.indexOf(d),1)}Qn.push(d),++vt,dn(()=>{--vt==0&&Ys()},[])})(()=>{this.unhandleds.length===0?s():r(this.unhandleds[0])})},a.finalize),t()},e,n,o))}),Wn&&(Wn.allSettled&&Ge(U,"allSettled",function(){const t=Ue.apply(null,arguments).map(Ln);return new U(e=>{t.length===0&&e([]);let n=t.length;const o=new Array(n);t.forEach((s,r)=>U.resolve(s).then(a=>o[r]={status:"fulfilled",value:a},a=>o[r]={status:"rejected",reason:a}).then(()=>--n||e(o)))})}),Wn.any&&typeof AggregateError<"u"&&Ge(U,"any",function(){const t=Ue.apply(null,arguments).map(Ln);return new U((e,n)=>{t.length===0&&n(new AggregateError([]));let o=t.length;const s=new Array(o);t.forEach((r,a)=>U.resolve(r).then(u=>e(u),u=>{s[a]=u,--o||n(new AggregateError(s))}))})}));const re={awaits:0,echoes:0,id:0};var Wf=0,jn=[],Lo=0,uo=0,Yf=0;function st(t,e,n,o){var s=G,r=Object.create(s);r.parent=s,r.ref=0,r.global=!1,r.id=++Yf;var a=Ft.env;r.env=zs?{Promise:U,PromiseProp:{value:U,configurable:!0,writable:!0},all:U.all,race:U.race,allSettled:U.allSettled,any:U.any,resolve:U.resolve,reject:U.reject,nthen:Vr(a.nthen,r),gthen:Vr(a.gthen,r)}:{},e&&fe(r,e),++s.ref,r.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=Qt(r,t,n,o);return r.ref===0&&r.finalize(),u}function Yt(){return re.id||(re.id=++Wf),++re.awaits,re.echoes+=wl,re.id}function Ve(){return!!re.awaits&&(--re.awaits==0&&(re.id=0),re.echoes=re.awaits*wl,!0)}function Ln(t){return re.echoes&&t&&t.constructor===Wn?(Yt(),t.then(e=>(Ve(),e),e=>(Ve(),te(e)))):t}function Qf(t){++uo,re.echoes&&--re.echoes!=0||(re.echoes=re.id=0),jn.push(G),rt(t,!0)}function jf(){var t=jn[jn.length-1];jn.pop(),rt(t,!1)}function rt(t,e){var n=G;if((e?!re.echoes||Lo++&&t===G:!Lo||--Lo&&t===G)||Nl(e?Qf.bind(null,t):jf),t!==G&&(G=t,n===Ft&&(Ft.env=kl()),zs)){var o=Ft.env.Promise,s=t.env;ao.then=s.nthen,o.prototype.then=s.gthen,(n.global||t.global)&&(Object.defineProperty(j,"Promise",s.PromiseProp),o.all=s.all,o.race=s.race,o.resolve=s.resolve,o.reject=s.reject,s.allSettled&&(o.allSettled=s.allSettled),s.any&&(o.any=s.any))}}function kl(){var t=j.Promise;return zs?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(j,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:ao.then,gthen:t.prototype.then}:{}}function Qt(t,e,n,o,s){var r=G;try{return rt(t,!0),e(n,o,s)}finally{rt(r,!1)}}function Nl(t){Tl.call(ns,t)}function co(t,e,n,o){return typeof t!="function"?t:function(){var s=G;n&&Yt(),rt(e,!0);try{return t.apply(this,arguments)}finally{rt(s,!1),o&&Nl(Ve)}}}function Vr(t,e){return function(n,o){return t.call(this,co(n,e),co(o,e))}}(""+Tl).indexOf("[native code]")===-1&&(Yt=Ve=Q);const Hr="unhandledrejection";function Br(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var o,s={promise:e,reason:t};if(j.document&&document.createEvent?((o=document.createEvent("Event")).initEvent(Hr,!0,!0),fe(o,s)):j.CustomEvent&&fe(o=new CustomEvent(Hr,{detail:s}),s),o&&j.dispatchEvent&&(dispatchEvent(o),!j.PromiseRejectionEvent&&j.onunhandledrejection))try{j.onunhandledrejection(o)}catch{}Pe&&o&&!o.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var te=U.reject;function cs(t,e,n,o){if(t.idbdb&&(t._state.openComplete||G.letThrough||t._vip)){var s=t._createTransaction(e,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(r){return r.name===Ks.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>cs(t,e,n,o))):te(r)}return s._promise(e,(r,a)=>st(()=>(G.trans=s,o(r,a,s)))).then(r=>s._completion.then(()=>r))}if(t._state.openComplete)return te(new q.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return te(new q.DatabaseClosed);t.open().catch(Q)}return t._state.dbReadyPromise.then(()=>cs(t,e,n,o))}const $r="3.2.7",ct="",ds=-1/0,Re="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Pl="String expected.",fn=[],Eo=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Xf=Eo,Zf=Eo,Rl=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),So="__dbnames",Go="readonly",qo="readwrite";function wt(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Ml={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Gn(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=An(e))[t],e)}class eh{_trans(e,n,o){const s=this._tx||G.trans,r=this.name;function a(d,c,f){if(!f.schema[r])throw new q.NotFound("Table "+r+" not part of transaction");return n(f.idbtrans,f)}const u=kn();try{return s&&s.db===this.db?s===G.trans?s._promise(e,a,o):st(()=>s._promise(e,a,o),{trans:s,transless:G.transless||G}):cs(this.db,e,[this.name],a)}finally{u&&Nn()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",o=>this.core.get({trans:o,key:e}).then(s=>this.hook.reading.fire(s))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(ie(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=ee(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const o=this.schema.indexes.concat(this.schema.primKey).filter(c=>{if(c.compound&&n.every(f=>c.keyPath.indexOf(f)>=0)){for(let f=0;f<n.length;++f)if(n.indexOf(c.keyPath[f])===-1)return!1;return!0}return!1}).sort((c,f)=>c.keyPath.length-f.keyPath.length)[0];if(o&&this.db._maxKey!==ct){const c=o.keyPath.slice(0,n.length);return this.where(c).equals(c.map(f=>e[f]))}!o&&Pe&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,r=this.db._deps.indexedDB;function a(c,f){try{return r.cmp(c,f)===0}catch{return!1}}const[u,d]=n.reduce(([c,f],m)=>{const p=s[m],g=e[m];return[c||p,c||!p?wt(f,p&&p.multi?x=>{const v=qe(x,m);return ie(v)&&v.some(_=>a(g,_))}:x=>a(g,qe(x,m))):f]},[null,null]);return u?this.where(u.name).equals(e[u.keyPath]).filter(d):o?this.filter(d):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,ie(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=o=>{if(!o)return o;const s=Object.create(e.prototype);for(var r in o)if(me(o,r))try{s[r]=o[r]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){fe(this,e)})}add(e,n){const{auto:o,keyPath:s}=this.schema.primKey;let r=e;return s&&o&&(r=Gn(s)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:n!=null?[n]:null,values:[r]})).then(a=>a.numFailures?U.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{Te(e,s,a)}catch{}return a})}update(e,n){if(typeof e!="object"||ie(e))return this.where(":id").equals(e).modify(n);{const o=qe(e,this.schema.primKey.keyPath);if(o===void 0)return te(new q.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?ee(n).forEach(s=>{Te(e,s,n[s])}):n(e,{value:e,primKey:o})}catch{}return this.where(":id").equals(o).modify(n)}}put(e,n){const{auto:o,keyPath:s}=this.schema.primKey;let r=e;return s&&o&&(r=Gn(s)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[r],keys:n!=null?[n]:null})).then(a=>a.numFailures?U.reject(a.failures[0]):a.lastResult).then(a=>{if(s)try{Te(e,s,a)}catch{}return a})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?U.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Ml})).then(e=>e.numFailures?U.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(o=>o.map(s=>this.hook.reading.fire(s))))}bulkAdd(e,n,o){const s=Array.isArray(n)?n:void 0,r=(o=o||(s?void 0:n))?o.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:u,keyPath:d}=this.schema.primKey;if(d&&s)throw new q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let f=d&&u?e.map(Gn(d)):e;return this.core.mutate({trans:a,type:"add",keys:s,values:f,wantResults:r}).then(({numFailures:m,results:p,lastResult:g,failures:x})=>{if(m===0)return r?p:g;throw new cn(`${this.name}.bulkAdd(): ${m} of ${c} operations failed`,x)})})}bulkPut(e,n,o){const s=Array.isArray(n)?n:void 0,r=(o=o||(s?void 0:n))?o.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:u,keyPath:d}=this.schema.primKey;if(d&&s)throw new q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let f=d&&u?e.map(Gn(d)):e;return this.core.mutate({trans:a,type:"put",keys:s,values:f,wantResults:r}).then(({numFailures:m,results:p,lastResult:g,failures:x})=>{if(m===0)return r?p:g;throw new cn(`${this.name}.bulkPut(): ${m} of ${c} operations failed`,x)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",o=>this.core.mutate({trans:o,type:"delete",keys:e})).then(({numFailures:o,lastResult:s,failures:r})=>{if(o===0)return s;throw new cn(`${this.name}.bulkDelete(): ${o} of ${n} operations failed`,r)})}}function hn(t){var e={},n=function(a,u){if(u){for(var d=arguments.length,c=new Array(d-1);--d;)c[d-1]=arguments[d];return e[a].subscribe.apply(null,c),t}if(typeof a=="string")return e[a]};n.addEventType=r;for(var o=1,s=arguments.length;o<s;++o)r(arguments[o]);return n;function r(a,u,d){if(typeof a!="object"){var c;u||(u=Kf),d||(d=Q);var f={subscribers:[],fire:d,subscribe:function(m){f.subscribers.indexOf(m)===-1&&(f.subscribers.push(m),f.fire=u(f.fire,m))},unsubscribe:function(m){f.subscribers=f.subscribers.filter(function(p){return p!==m}),f.fire=f.subscribers.reduce(u,d)}};return e[a]=n[a]=f,f}ee(c=a).forEach(function(m){var p=c[m];if(ie(p))r(m,c[m][0],c[m][1]);else{if(p!=="asap")throw new q.InvalidArgument("Invalid event config");var g=r(m,xn,function(){for(var x=arguments.length,v=new Array(x);x--;)v[x]=arguments[x];g.subscribers.forEach(function(_){hl(function(){_.apply(null,v)})})})}})}}function tn(t,e){return Mt(e).from({prototype:t}),e}function Et(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Vo(t,e){t.filter=wt(t.filter,e)}function Ho(t,e,n){var o=t.replayFilter;t.replayFilter=o?()=>wt(o(),e()):e,t.justLimit=n&&!o}function Xn(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new q.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Or(t,e,n){const o=Xn(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:o,range:t.range}})}function qn(t,e,n,o){const s=t.replayFilter?wt(t.filter,t.replayFilter()):t.filter;if(t.or){const r={},a=(u,d,c)=>{if(!s||s(d,c,p=>d.stop(p),p=>d.fail(p))){var f=d.primaryKey,m=""+f;m==="[object ArrayBuffer]"&&(m=""+new Uint8Array(f)),me(r,m)||(r[m]=!0,e(u,d,c))}};return Promise.all([t.or._iterate(a,n),Kr(Or(t,o,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}return Kr(Or(t,o,n),wt(t.algorithm,s),e,!t.keysOnly&&t.valueMapper)}function Kr(t,e,n,o){var s=X(o?(r,a,u)=>n(o(r),a,u):n);return t.then(r=>{if(r)return r.start(()=>{var a=()=>r.continue();e&&!e(r,u=>a=u,u=>{r.stop(u),a=Q},u=>{r.fail(u),a=Q})||s(r.value,r,u=>a=u),a()})})}function de(t,e){try{const n=Jr(t),o=Jr(e);if(n!==o)return n==="Array"?1:o==="Array"?-1:n==="binary"?1:o==="binary"?-1:n==="string"?1:o==="string"?-1:n==="Date"?1:o!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(s,r){const a=s.length,u=r.length,d=a<u?a:u;for(let c=0;c<d;++c)if(s[c]!==r[c])return s[c]<r[c]?-1:1;return a===u?0:a<u?-1:1}(zr(t),zr(e));case"Array":return function(s,r){const a=s.length,u=r.length,d=a<u?a:u;for(let c=0;c<d;++c){const f=de(s[c],r[c]);if(f!==0)return f}return a===u?0:a<u?-1:1}(t,e)}}catch{}return NaN}function Jr(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Zo(t);return n==="ArrayBuffer"?"binary":n}function zr(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class th{_read(e,n){var o=this._ctx;return o.error?o.table._trans(null,te.bind(null,o.error)):o.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,te.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=wt(n.algorithm,e)}_iterate(e,n){return qn(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return e&&fe(o,e),n._ctx=o,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(o=>qn(n,e,o,n.table.core))}count(e){return this._read(n=>{const o=this._ctx,s=o.table.core;if(Et(o,!0))return s.count({trans:n,query:{index:Xn(o,s.schema),range:o.range}}).then(a=>Math.min(a,o.limit));var r=0;return qn(o,()=>(++r,!1),n,s).then(()=>r)}).then(e)}sortBy(e,n){const o=e.split(".").reverse(),s=o[0],r=o.length-1;function a(c,f){return f?a(c[o[f]],f-1):c[s]}var u=this._ctx.dir==="next"?1:-1;function d(c,f){var m=a(c,r),p=a(f,r);return m<p?-u:m>p?u:0}return this.toArray(function(c){return c.sort(d)}).then(n)}toArray(e){return this._read(n=>{var o=this._ctx;if(o.dir==="next"&&Et(o,!0)&&o.limit>0){const{valueMapper:s}=o,r=Xn(o,o.table.core.schema);return o.table.core.query({trans:n,limit:o.limit,values:!0,query:{index:r,range:o.range}}).then(({result:a})=>s?a.map(s):a)}{const s=[];return qn(o,r=>s.push(r),n,o.table.core).then(()=>s)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,Et(n)?Ho(n,()=>{var o=e;return(s,r)=>o===0||(o===1?(--o,!1):(r(()=>{s.advance(o),o=0}),!1))}):Ho(n,()=>{var o=e;return()=>--o<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ho(this._ctx,()=>{var n=e;return function(o,s,r){return--n<=0&&s(r),n>=0}},!0),this}until(e,n){return Vo(this._ctx,function(o,s,r){return!e(o.value)||(s(r),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,o;return Vo(this._ctx,function(s){return e(s.value)}),n=this._ctx,o=e,n.isMatch=wt(n.isMatch,o),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(o,s){e(s.key,s)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(o,s){e(s.primaryKey,s)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var o=[];return this.each(function(s,r){o.push(r.key)}).then(function(){return o}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&Et(n,!0)&&n.limit>0)return this._read(s=>{var r=Xn(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:r,range:n.range}})}).then(({result:s})=>s).then(e);n.keysOnly=!n.isMatch;var o=[];return this.each(function(s,r){o.push(r.primaryKey)}).then(function(){return o}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var o={};return Vo(this._ctx,function(s){var r=s.primaryKey.toString(),a=me(o,r);return o[r]=!0,!a}),this}modify(e){var n=this._ctx;return this._write(o=>{var s;if(typeof e=="function")s=e;else{var r=ee(e),a=r.length;s=function(v){for(var _=!1,y=0;y<a;++y){var b=r[y],w=e[b];qe(v,b)!==w&&(Te(v,b,w),_=!0)}return _}}const u=n.table.core,{outbound:d,extractKey:c}=u.schema.primaryKey,f=this.db._options.modifyChunkSize||200,m=[];let p=0;const g=[],x=(v,_)=>{const{failures:y,numFailures:b}=_;p+=v-b;for(let w of ee(y))m.push(y[w])};return this.clone().primaryKeys().then(v=>{const _=y=>{const b=Math.min(f,v.length-y);return u.getMany({trans:o,keys:v.slice(y,y+b),cache:"immutable"}).then(w=>{const T=[],C=[],S=d?[]:null,E=[];for(let I=0;I<b;++I){const P=w[I],F={value:An(P),primKey:v[y+I]};s.call(F,F.value,F)!==!1&&(F.value==null?E.push(v[y+I]):d||de(c(P),c(F.value))===0?(C.push(F.value),d&&S.push(v[y+I])):(E.push(v[y+I]),T.push(F.value)))}const N=Et(n)&&n.limit===1/0&&(typeof e!="function"||e===Bo)&&{index:n.index,range:n.range};return Promise.resolve(T.length>0&&u.mutate({trans:o,type:"add",values:T}).then(I=>{for(let P in I.failures)E.splice(parseInt(P),1);x(T.length,I)})).then(()=>(C.length>0||N&&typeof e=="object")&&u.mutate({trans:o,type:"put",keys:S,values:C,criteria:N,changeSpec:typeof e!="function"&&e}).then(I=>x(C.length,I))).then(()=>(E.length>0||N&&e===Bo)&&u.mutate({trans:o,type:"delete",keys:E,criteria:N}).then(I=>x(E.length,I))).then(()=>v.length>y+b&&_(y+f))})};return _(0).then(()=>{if(m.length>0)throw new io("Error modifying one or more objects",m,p,g);return v.length})})})}delete(){var e=this._ctx,n=e.range;return Et(e)&&(e.isPrimKey&&!Zf||n.type===3)?this._write(o=>{const{primaryKey:s}=e.table.core.schema,r=n;return e.table.core.count({trans:o,query:{index:s,range:r}}).then(a=>e.table.core.mutate({trans:o,type:"deleteRange",range:r}).then(({failures:u,lastResult:d,results:c,numFailures:f})=>{if(f)throw new io("Could not delete some values",Object.keys(u).map(m=>u[m]),a-f);return a-f}))}):this.modify(Bo)}}const Bo=(t,e)=>e.value=null;function nh(t,e){return t<e?-1:t===e?0:1}function oh(t,e){return t>e?-1:t===e?0:1}function pe(t,e,n){var o=t instanceof Fl?new t.Collection(t):t;return o._ctx.error=n?new n(e):new TypeError(e),o}function St(t){return new t.Collection(t,()=>Dl("")).limit(0)}function sh(t,e,n,o,s,r){for(var a=Math.min(t.length,o.length),u=-1,d=0;d<a;++d){var c=e[d];if(c!==o[d])return s(t[d],n[d])<0?t.substr(0,d)+n[d]+n.substr(d+1):s(t[d],o[d])<0?t.substr(0,d)+o[d]+n.substr(d+1):u>=0?t.substr(0,u)+e[u]+n.substr(u+1):null;s(t[d],c)<0&&(u=d)}return a<o.length&&r==="next"?t+n.substr(t.length):a<t.length&&r==="prev"?t.substr(0,n.length):u<0?null:t.substr(0,u)+o[u]+n.substr(u+1)}function Vn(t,e,n,o){var s,r,a,u,d,c,f,m=n.length;if(!n.every(v=>typeof v=="string"))return pe(t,Pl);function p(v){s=function(y){return y==="next"?b=>b.toUpperCase():b=>b.toLowerCase()}(v),r=function(y){return y==="next"?b=>b.toLowerCase():b=>b.toUpperCase()}(v),a=v==="next"?nh:oh;var _=n.map(function(y){return{lower:r(y),upper:s(y)}}).sort(function(y,b){return a(y.lower,b.lower)});u=_.map(function(y){return y.upper}),d=_.map(function(y){return y.lower}),c=v,f=v==="next"?"":o}p("next");var g=new t.Collection(t,()=>Je(u[0],d[m-1]+o));g._ondirectionchange=function(v){p(v)};var x=0;return g._addAlgorithm(function(v,_,y){var b=v.key;if(typeof b!="string")return!1;var w=r(b);if(e(w,d,x))return!0;for(var T=null,C=x;C<m;++C){var S=sh(b,w,u[C],d[C],a,c);S===null&&T===null?x=C+1:(T===null||a(T,S)>0)&&(T=S)}return _(T!==null?function(){v.continue(T+f)}:y),!1}),g}function Je(t,e,n,o){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:o}}function Dl(t){return{type:1,lower:t,upper:t}}class Fl{get Collection(){return this._ctx.table.db.Collection}between(e,n,o,s){o=o!==!1,s=s===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(o||s)&&(!o||!s)?St(this):new this.Collection(this,()=>Je(e,n,!o,!s))}catch{return pe(this,Re)}}equals(e){return e==null?pe(this,Re):new this.Collection(this,()=>Dl(e))}above(e){return e==null?pe(this,Re):new this.Collection(this,()=>Je(e,void 0,!0))}aboveOrEqual(e){return e==null?pe(this,Re):new this.Collection(this,()=>Je(e,void 0,!1))}below(e){return e==null?pe(this,Re):new this.Collection(this,()=>Je(void 0,e,!1,!0))}belowOrEqual(e){return e==null?pe(this,Re):new this.Collection(this,()=>Je(void 0,e))}startsWith(e){return typeof e!="string"?pe(this,Pl):this.between(e,e+ct,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Vn(this,(n,o)=>n.indexOf(o[0])===0,[e],ct)}equalsIgnoreCase(e){return Vn(this,(n,o)=>n===o[0],[e],"")}anyOfIgnoreCase(){var e=Ue.apply(At,arguments);return e.length===0?St(this):Vn(this,(n,o)=>o.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Ue.apply(At,arguments);return e.length===0?St(this):Vn(this,(n,o)=>o.some(s=>n.indexOf(s)===0),e,ct)}anyOf(){const e=Ue.apply(At,arguments);let n=this._cmp;try{e.sort(n)}catch{return pe(this,Re)}if(e.length===0)return St(this);const o=new this.Collection(this,()=>Je(e[0],e[e.length-1]));o._ondirectionchange=r=>{n=r==="next"?this._ascending:this._descending,e.sort(n)};let s=0;return o._addAlgorithm((r,a,u)=>{const d=r.key;for(;n(d,e[s])>0;)if(++s,s===e.length)return a(u),!1;return n(d,e[s])===0||(a(()=>{r.continue(e[s])}),!1)}),o}notEqual(e){return this.inAnyRange([[ds,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Ue.apply(At,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return pe(this,Re)}const n=e.reduce((o,s)=>o?o.concat([[o[o.length-1][1],s]]):[[ds,s]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const o=this._cmp,s=this._ascending,r=this._descending,a=this._min,u=this._max;if(e.length===0)return St(this);if(!e.every(b=>b[0]!==void 0&&b[1]!==void 0&&s(b[0],b[1])<=0))return pe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",q.InvalidArgument);const d=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let f,m=s;function p(b,w){return m(b[0],w[0])}try{f=e.reduce(function(b,w){let T=0,C=b.length;for(;T<C;++T){const S=b[T];if(o(w[0],S[1])<0&&o(w[1],S[0])>0){S[0]=a(S[0],w[0]),S[1]=u(S[1],w[1]);break}}return T===C&&b.push(w),b},[]),f.sort(p)}catch{return pe(this,Re)}let g=0;const x=c?b=>s(b,f[g][1])>0:b=>s(b,f[g][1])>=0,v=d?b=>r(b,f[g][0])>0:b=>r(b,f[g][0])>=0;let _=x;const y=new this.Collection(this,()=>Je(f[0][0],f[f.length-1][1],!d,!c));return y._ondirectionchange=b=>{b==="next"?(_=x,m=s):(_=v,m=r),f.sort(p)},y._addAlgorithm((b,w,T)=>{for(var C=b.key;_(C);)if(++g,g===f.length)return w(T),!1;return!!function(S){return!x(S)&&!v(S)}(C)||(this._cmp(C,f[g][1])===0||this._cmp(C,f[g][0])===0||w(()=>{m===s?b.continue(f[g][0]):b.continue(f[g][1])}),!1)}),y}startsWithAnyOf(){const e=Ue.apply(At,arguments);return e.every(n=>typeof n=="string")?e.length===0?St(this):this.inAnyRange(e.map(n=>[n,n+ct])):pe(this,"startsWithAnyOf() only works with strings")}}function Ie(t){return X(function(e){return bn(e),t(e.target.error),!1})}function bn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const wn="storagemutated",Ye="x-storagemutated-1",it=hn(null,wn);class rh{_lock(){return rn(!G.global),++this._reculock,this._reculock!==1||G.global||(G.lockOwnerFor=this),this}_unlock(){if(rn(!G.global),--this._reculock==0)for(G.global||(G.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Qt(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&G.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,o=this.db._state.dbOpenError;if(rn(!this.idbtrans),!e&&!n)switch(o&&o.name){case"DatabaseClosedError":throw new q.DatabaseClosed(o);case"MissingAPIError":throw new q.MissingAPI(o.message,o);default:throw new q.OpenFailed(o)}if(!this.active)throw new q.TransactionInactive;return rn(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=X(s=>{bn(s),this._reject(e.error)}),e.onabort=X(s=>{bn(s),this.active&&this._reject(new q.Abort(e.error)),this.active=!1,this.on("abort").fire(s)}),e.oncomplete=X(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&it.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,o){if(e==="readwrite"&&this.mode!=="readwrite")return te(new q.ReadOnly("Transaction is readonly"));if(!this.active)return te(new q.TransactionInactive);if(this._locked())return new U((r,a)=>{this._blockedFuncs.push([()=>{this._promise(e,n,o).then(r,a)},G])});if(o)return st(()=>{var r=new U((a,u)=>{this._lock();const d=n(a,u,this);d&&d.then&&d.then(a,u)});return r.finally(()=>this._unlock()),r._lib=!0,r});var s=new U((r,a)=>{var u=n(r,a,this);u&&u.then&&u.then(r,a)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const o=U.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>o);else{n._waitingFor=o,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=a)})()}var r=n._waitingFor;return new U((a,u)=>{o.then(d=>n._waitingQueue.push(X(a.bind(null,d))),d=>n._waitingQueue.push(X(u.bind(null,d)))).finally(()=>{n._waitingFor===r&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new q.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(me(n,e))return n[e];const o=this.schema[e];if(!o)throw new q.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,o,this);return s.core=this.db.core.table(e),n[e]=s,s}}function fs(t,e,n,o,s,r,a){return{name:t,keyPath:e,unique:n,multi:o,auto:s,compound:r,src:(n&&!a?"&":"")+(o?"*":"")+(s?"++":"")+Ul(e)}}function Ul(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Ll(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:pl(n,o=>[o.name,o])}}let Tn=t=>{try{return t.only([[]]),Tn=()=>[[]],[[]]}catch{return Tn=()=>ct,ct}};function hs(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?o=>o[e]:o=>qe(o,e)}(t):e=>qe(e,t)}function Wr(t){return[].slice.call(t)}let ih=0;function pn(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function ah(t,e,n){function o(d){if(d.type===3)return null;if(d.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:f,lowerOpen:m,upperOpen:p}=d;return c===void 0?f===void 0?null:e.upperBound(f,!!p):f===void 0?e.lowerBound(c,!!m):e.bound(c,f,!!m,!!p)}const{schema:s,hasGetAll:r}=function(d,c){const f=Wr(d.objectStoreNames);return{schema:{name:d.name,tables:f.map(m=>c.objectStore(m)).map(m=>{const{keyPath:p,autoIncrement:g}=m,x=ie(p),v=p==null,_={},y={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:v,compound:x,keyPath:p,autoIncrement:g,unique:!0,extractKey:hs(p)},indexes:Wr(m.indexNames).map(b=>m.index(b)).map(b=>{const{name:w,unique:T,multiEntry:C,keyPath:S}=b,E={name:w,compound:ie(S),keyPath:S,unique:T,multiEntry:C,extractKey:hs(S)};return _[pn(S)]=E,E}),getIndexByKeyPath:b=>_[pn(b)]};return _[":id"]=y.primaryKey,p!=null&&(_[pn(p)]=y.primaryKey),y})},hasGetAll:f.length>0&&"getAll"in c.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),a=s.tables.map(d=>function(c){const f=c.name;return{name:f,schema:c,mutate:function({trans:m,type:p,keys:g,values:x,range:v}){return new Promise((_,y)=>{_=X(_);const b=m.objectStore(f),w=b.keyPath==null,T=p==="put"||p==="add";if(!T&&p!=="delete"&&p!=="deleteRange")throw new Error("Invalid operation type: "+p);const{length:C}=g||x||{length:1};if(g&&x&&g.length!==x.length)throw new Error("Given keys array must have same length as given values array.");if(C===0)return _({numFailures:0,failures:{},results:[],lastResult:void 0});let S;const E=[],N=[];let I=0;const P=Y=>{++I,bn(Y)};if(p==="deleteRange"){if(v.type===4)return _({numFailures:I,failures:N,results:[],lastResult:void 0});v.type===3?E.push(S=b.clear()):E.push(S=b.delete(o(v)))}else{const[Y,O]=T?w?[x,g]:[x,null]:[g,null];if(T)for(let K=0;K<C;++K)E.push(S=O&&O[K]!==void 0?b[p](Y[K],O[K]):b[p](Y[K])),S.onerror=P;else for(let K=0;K<C;++K)E.push(S=b[p](Y[K])),S.onerror=P}const F=Y=>{const O=Y.target.result;E.forEach((K,L)=>K.error!=null&&(N[L]=K.error)),_({numFailures:I,failures:N,results:p==="delete"?g:E.map(K=>K.result),lastResult:O})};S.onerror=Y=>{P(Y),F(Y)},S.onsuccess=F})},getMany:({trans:m,keys:p})=>new Promise((g,x)=>{g=X(g);const v=m.objectStore(f),_=p.length,y=new Array(_);let b,w=0,T=0;const C=E=>{const N=E.target;y[N._pos]=N.result,++T===w&&g(y)},S=Ie(x);for(let E=0;E<_;++E)p[E]!=null&&(b=v.get(p[E]),b._pos=E,b.onsuccess=C,b.onerror=S,++w);w===0&&g(y)}),get:({trans:m,key:p})=>new Promise((g,x)=>{g=X(g);const v=m.objectStore(f).get(p);v.onsuccess=_=>g(_.target.result),v.onerror=Ie(x)}),query:function(m){return p=>new Promise((g,x)=>{g=X(g);const{trans:v,values:_,limit:y,query:b}=p,w=y===1/0?void 0:y,{index:T,range:C}=b,S=v.objectStore(f),E=T.isPrimaryKey?S:S.index(T.name),N=o(C);if(y===0)return g({result:[]});if(m){const I=_?E.getAll(N,w):E.getAllKeys(N,w);I.onsuccess=P=>g({result:P.target.result}),I.onerror=Ie(x)}else{let I=0;const P=_||!("openKeyCursor"in E)?E.openCursor(N):E.openKeyCursor(N),F=[];P.onsuccess=Y=>{const O=P.result;return O?(F.push(_?O.value:O.primaryKey),++I===y?g({result:F}):void O.continue()):g({result:F})},P.onerror=Ie(x)}})}(r),openCursor:function({trans:m,values:p,query:g,reverse:x,unique:v}){return new Promise((_,y)=>{_=X(_);const{index:b,range:w}=g,T=m.objectStore(f),C=b.isPrimaryKey?T:T.index(b.name),S=x?v?"prevunique":"prev":v?"nextunique":"next",E=p||!("openKeyCursor"in C)?C.openCursor(o(w),S):C.openKeyCursor(o(w),S);E.onerror=Ie(y),E.onsuccess=X(N=>{const I=E.result;if(!I)return void _(null);I.___id=++ih,I.done=!1;const P=I.continue.bind(I);let F=I.continuePrimaryKey;F&&(F=F.bind(I));const Y=I.advance.bind(I),O=()=>{throw new Error("Cursor not stopped")};I.trans=m,I.stop=I.continue=I.continuePrimaryKey=I.advance=()=>{throw new Error("Cursor not started")},I.fail=X(y),I.next=function(){let K=1;return this.start(()=>K--?this.continue():this.stop()).then(()=>this)},I.start=K=>{const L=new Promise((R,V)=>{R=X(R),E.onerror=Ie(V),I.fail=V,I.stop=ge=>{I.stop=I.continue=I.continuePrimaryKey=I.advance=O,R(ge)}}),k=()=>{if(E.result)try{K()}catch(R){I.fail(R)}else I.done=!0,I.start=()=>{throw new Error("Cursor behind last entry")},I.stop()};return E.onsuccess=X(R=>{E.onsuccess=k,k()}),I.continue=P,I.continuePrimaryKey=F,I.advance=Y,k(),L},_(I)},y)})},count({query:m,trans:p}){const{index:g,range:x}=m;return new Promise((v,_)=>{const y=p.objectStore(f),b=g.isPrimaryKey?y:y.index(g.name),w=o(x),T=w?b.count(w):b.count();T.onsuccess=X(C=>v(C.target.result)),T.onerror=Ie(_)})}}}(d)),u={};return a.forEach(d=>u[d.name]=d),{stack:"dbcore",transaction:t.transaction.bind(t),table(d){if(!u[d])throw new Error(`Table '${d}' not found`);return u[d]},MIN_KEY:-1/0,MAX_KEY:Tn(e),schema:s}}function ps({_novip:t},e){const n=e.db,o=function(s,r,{IDBKeyRange:a,indexedDB:u},d){return{dbcore:function(f,m){return m.reduce((p,{create:g})=>({...p,...g(p)}),f)}(ah(r,a,d),s.dbcore)}}(t._middlewares,n,t._deps,e);t.core=o.dbcore,t.tables.forEach(s=>{const r=s.name;t.core.schema.tables.some(a=>a.name===r)&&(s.core=t.core.table(r),t[r]instanceof t.Table&&(t[r].core=s.core))})}function fo({_novip:t},e,n,o){n.forEach(s=>{const r=o[s];e.forEach(a=>{const u=Bs(a,s);(!u||"value"in u&&u.value===void 0)&&(a===t.Transaction.prototype||a instanceof t.Transaction?Ge(a,s,{get(){return this.table(s)},set(d){dl(this,s,{value:d,writable:!0,configurable:!0,enumerable:!0})}}):a[s]=new t.Table(s,r))})})}function ms({_novip:t},e){e.forEach(n=>{for(let o in n)n[o]instanceof t.Table&&delete n[o]})}function lh(t,e){return t._cfg.version-e._cfg.version}function uh(t,e,n,o){const s=t._dbSchema,r=t._createTransaction("readwrite",t._storeNames,s);r.create(n),r._completion.catch(o);const a=r._reject.bind(r),u=G.transless||G;st(()=>{G.trans=r,G.transless=u,e===0?(ee(s).forEach(d=>{$o(n,d,s[d].primKey,s[d].indexes)}),ps(t,n),U.follow(()=>t.on.populate.fire(r)).catch(a)):function({_novip:d},c,f,m){const p=[],g=d._versions;let x=d._dbSchema=ys(d,d.idbdb,m),v=!1;const _=g.filter(b=>b._cfg.version>=c);function y(){return p.length?U.resolve(p.shift()(f.idbtrans)).then(y):U.resolve()}return _.forEach(b=>{p.push(()=>{const w=x,T=b._cfg.dbschema;vs(d,w,m),vs(d,T,m),x=d._dbSchema=T;const C=Gl(w,T);C.add.forEach(E=>{$o(m,E[0],E[1].primKey,E[1].indexes)}),C.change.forEach(E=>{if(E.recreate)throw new q.Upgrade("Not yet support for changing primary key");{const N=m.objectStore(E.name);E.add.forEach(I=>gs(N,I)),E.change.forEach(I=>{N.deleteIndex(I.name),gs(N,I)}),E.del.forEach(I=>N.deleteIndex(I))}});const S=b._cfg.contentUpgrade;if(S&&b._cfg.version>c){ps(d,m),f._memoizedTables={},v=!0;let E=ml(T);C.del.forEach(F=>{E[F]=w[F]}),ms(d,[d.Transaction.prototype]),fo(d,[d.Transaction.prototype],ee(E),E),f.schema=E;const N=$s(S);let I;N&&Yt();const P=U.follow(()=>{if(I=S(f),I&&N){var F=Ve.bind(null,null);I.then(F,F)}});return I&&typeof I.then=="function"?U.resolve(I):P.then(()=>I)}}),p.push(w=>{(!v||!Xf)&&function(T,C){[].slice.call(C.db.objectStoreNames).forEach(S=>T[S]==null&&C.db.deleteObjectStore(S))}(b._cfg.dbschema,w),ms(d,[d.Transaction.prototype]),fo(d,[d.Transaction.prototype],d._storeNames,d._dbSchema),f.schema=d._dbSchema})}),y().then(()=>{var b,w;w=m,ee(b=x).forEach(T=>{w.db.objectStoreNames.contains(T)||$o(w,T,b[T].primKey,b[T].indexes)})})}(t,e,r,n).catch(a)})}function Gl(t,e){const n={del:[],add:[],change:[]};let o;for(o in t)e[o]||n.del.push(o);for(o in e){const s=t[o],r=e[o];if(s){const a={name:o,def:r,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(r.primKey.keyPath||"")||s.primKey.auto!==r.primKey.auto&&!Eo)a.recreate=!0,n.change.push(a);else{const u=s.idxByName,d=r.idxByName;let c;for(c in u)d[c]||a.del.push(c);for(c in d){const f=u[c],m=d[c];f?f.src!==m.src&&a.change.push(m):a.add.push(m)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([o,r])}return n}function $o(t,e,n,o){const s=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return o.forEach(r=>gs(s,r)),s}function gs(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function ys(t,e,n){const o={};return ro(e.objectStoreNames,0).forEach(s=>{const r=n.objectStore(s);let a=r.keyPath;const u=fs(Ul(a),a||"",!1,!1,!!r.autoIncrement,a&&typeof a!="string",!0),d=[];for(let f=0;f<r.indexNames.length;++f){const m=r.index(r.indexNames[f]);a=m.keyPath;var c=fs(m.name,a,!!m.unique,!!m.multiEntry,!1,a&&typeof a!="string",!1);d.push(c)}o[s]=Ll(s,u,d)}),o}function vs({_novip:t},e,n){const o=n.db.objectStoreNames;for(let s=0;s<o.length;++s){const r=o[s],a=n.objectStore(r);t._hasGetAll="getAll"in a;for(let u=0;u<a.indexNames.length;++u){const d=a.indexNames[u],c=a.index(d).keyPath,f=typeof c=="string"?c:"["+ro(c).join("+")+"]";if(e[r]){const m=e[r].idxByName[f];m&&(m.name=d,delete e[r].idxByName[f],e[r].idxByName[d]=m)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&j.WorkerGlobalScope&&j instanceof j.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class ch{_parseStoresSpec(e,n){ee(e).forEach(o=>{if(e[o]!==null){var s=e[o].split(",").map((a,u)=>{const d=(a=a.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return fs(d,c||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),ie(c),u===0)}),r=s.shift();if(r.multi)throw new q.Schema("Primary key cannot be multi-valued");s.forEach(a=>{if(a.auto)throw new q.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new q.Schema("Index must have a name and cannot be an empty string")}),n[o]=Ll(o,r,s)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?fe(this._cfg.storesSource,e):e;const o=n._versions,s={};let r={};return o.forEach(a=>{fe(s,a._cfg.storesSource),r=a._cfg.dbschema={},a._parseStoresSpec(s,r)}),n._dbSchema=r,ms(n,[n._allTables,n,n.Transaction.prototype]),fo(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],ee(r),r),n._storeNames=ee(r),this}upgrade(e){return this._cfg.contentUpgrade=Js(this._cfg.contentUpgrade||Q,e),this}}function Qs(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new xt(So,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function js(t){return t&&typeof t.databases=="function"}function xs(t){return st(function(){return G.letThrough=!0,t()})}function dh(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function fh(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?te(e.dbOpenError):t);Pe&&(e.openCanceller._stackHolder=Tt()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const o=e.openCanceller;function s(){if(e.openCanceller!==o)throw new q.DatabaseClosed("db.open() was cancelled")}let r=e.dbReadyResolve,a=null,u=!1;const d=()=>new U((c,f)=>{if(s(),!n)throw new q.MissingAPI;const m=t.name,p=e.autoSchema?n.open(m):n.open(m,Math.round(10*t.verno));if(!p)throw new q.MissingAPI;p.onerror=Ie(f),p.onblocked=X(t._fireOnBlocked),p.onupgradeneeded=X(g=>{if(a=p.transaction,e.autoSchema&&!t._options.allowEmptyDB){p.onerror=bn,a.abort(),p.result.close();const v=n.deleteDatabase(m);v.onsuccess=v.onerror=X(()=>{f(new q.NoSuchDatabase(`Database ${m} doesnt exist`))})}else{a.onerror=Ie(f);var x=g.oldVersion>Math.pow(2,62)?0:g.oldVersion;u=x<1,t._novip.idbdb=p.result,uh(t,x/10,a,f)}},f),p.onsuccess=X(()=>{a=null;const g=t._novip.idbdb=p.result,x=ro(g.objectStoreNames);if(x.length>0)try{const _=g.transaction((v=x).length===1?v[0]:v,"readonly");e.autoSchema?function({_novip:y},b,w){y.verno=b.version/10;const T=y._dbSchema=ys(0,b,w);y._storeNames=ro(b.objectStoreNames,0),fo(y,[y._allTables],ee(T),T)}(t,g,_):(vs(t,t._dbSchema,_),function(y,b){const w=Gl(ys(0,y.idbdb,b),y._dbSchema);return!(w.add.length||w.change.some(T=>T.add.length||T.change.length))}(t,_)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),ps(t,_)}catch{}var v;fn.push(t),g.onversionchange=X(_=>{e.vcFired=!0,t.on("versionchange").fire(_)}),g.onclose=X(_=>{t.on("close").fire(_)}),u&&function({indexedDB:_,IDBKeyRange:y},b){!js(_)&&b!==So&&Qs(_,y).put({name:b}).catch(Q)}(t._deps,m),c()},f)}).catch(c=>c&&c.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d()):U.reject(c));return U.race([o,(typeof navigator>"u"?U.resolve():dh()).then(d)]).then(()=>(s(),e.onReadyBeingFired=[],U.resolve(xs(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let f=e.onReadyBeingFired.reduce(Js,Q);return e.onReadyBeingFired=[],U.resolve(xs(()=>f(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{a&&a.abort()}catch{}return o===e.openCanceller&&t._close(),te(c)}).finally(()=>{e.openComplete=!0,r()})}function _s(t){var e=r=>t.next(r),n=s(e),o=s(r=>t.throw(r));function s(r){return a=>{var u=r(a),d=u.value;return u.done?d:d&&typeof d.then=="function"?d.then(n,o):ie(d)?Promise.all(d).then(n,o):n(d)}}return s(e)()}function hh(t,e,n){var o=arguments.length;if(o<2)throw new q.InvalidArgument("Too few arguments");for(var s=new Array(o-1);--o;)s[o-1]=arguments[o];return n=s.pop(),[t,gl(s),n]}function ql(t,e,n,o,s){return U.resolve().then(()=>{const r=G.transless||G,a=t._createTransaction(e,n,t._dbSchema,o),u={trans:a,transless:r};if(o)a.idbtrans=o.idbtrans;else try{a.create(),t._state.PR1398_maxLoop=3}catch(m){return m.name===Ks.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>ql(t,e,n,null,s))):te(m)}const d=$s(s);let c;d&&Yt();const f=U.follow(()=>{if(c=s.call(a,a),c)if(d){var m=Ve.bind(null,null);c.then(m,m)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=_s(c))},u);return(c&&typeof c.then=="function"?U.resolve(c).then(m=>a.active?m:te(new q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):f.then(()=>c)).then(m=>(o&&a._resolve(),a._completion.then(()=>m))).catch(m=>(a._reject(m),te(m)))})}function Hn(t,e,n){const o=ie(t)?t.slice():[t];for(let s=0;s<n;++s)o.push(e);return o}const ph={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:o}=n,s={},r=[];function a(f,m,p){const g=pn(f),x=s[g]=s[g]||[],v=f==null?0:typeof f=="string"?1:f.length,_=m>0,y={...p,isVirtual:_,keyTail:m,keyLength:v,extractKey:hs(f),unique:!_&&p.unique};return x.push(y),y.isPrimaryKey||r.push(y),v>1&&a(v===2?f[0]:f.slice(0,v-1),m+1,p),x.sort((b,w)=>b.keyTail-w.keyTail),y}const u=a(o.primaryKey.keyPath,0,o.primaryKey);s[":id"]=[u];for(const f of o.indexes)a(f.keyPath,0,f);function d(f){const m=f.query.index;return m.isVirtual?{...f,query:{index:m,range:(p=f.query.range,g=m.keyTail,{type:p.type===1?2:p.type,lower:Hn(p.lower,p.lowerOpen?t.MAX_KEY:t.MIN_KEY,g),lowerOpen:!0,upper:Hn(p.upper,p.upperOpen?t.MIN_KEY:t.MAX_KEY,g),upperOpen:!0})}}:f;var p,g}return{...n,schema:{...o,primaryKey:u,indexes:r,getIndexByKeyPath:function(f){const m=s[pn(f)];return m&&m[0]}},count:f=>n.count(d(f)),query:f=>n.query(d(f)),openCursor(f){const{keyTail:m,isVirtual:p,keyLength:g}=f.query.index;return p?n.openCursor(d(f)).then(x=>x&&function(v){return Object.create(v,{continue:{value:function(y){y!=null?v.continue(Hn(y,f.reverse?t.MAX_KEY:t.MIN_KEY,m)):f.unique?v.continue(v.key.slice(0,g).concat(f.reverse?t.MIN_KEY:t.MAX_KEY,m)):v.continue()}},continuePrimaryKey:{value(y,b){v.continuePrimaryKey(Hn(y,t.MAX_KEY,m),b)}},primaryKey:{get:()=>v.primaryKey},key:{get(){const y=v.key;return g===1?y[0]:y.slice(0,g)}},value:{get:()=>v.value}})}(x)):n.openCursor(f)}}}}}};function Xs(t,e,n,o){return n=n||{},o=o||"",ee(t).forEach(s=>{if(me(e,s)){var r=t[s],a=e[s];if(typeof r=="object"&&typeof a=="object"&&r&&a){const u=Zo(r);u!==Zo(a)?n[o+s]=e[s]:u==="Object"?Xs(r,a,n,o+s+"."):r!==a&&(n[o+s]=e[s])}else r!==a&&(n[o+s]=e[s])}else n[o+s]=void 0}),ee(e).forEach(s=>{me(t,s)||(n[o+s]=e[s])}),n}const mh={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:o}=n.schema;return{...n,mutate(r){const a=G.trans,{deleting:u,creating:d,updating:c}=a.table(e).hook;switch(r.type){case"add":if(d.fire===Q)break;return a._promise("readwrite",()=>f(r),!0);case"put":if(d.fire===Q&&c.fire===Q)break;return a._promise("readwrite",()=>f(r),!0);case"delete":if(u.fire===Q)break;return a._promise("readwrite",()=>f(r),!0);case"deleteRange":if(u.fire===Q)break;return a._promise("readwrite",()=>function(p){return m(p.trans,p.range,1e4)}(r),!0)}return n.mutate(r);function f(p){const g=G.trans,x=p.keys||function(v,_){return _.type==="delete"?_.keys:_.keys||_.values.map(v.extractKey)}(o,p);if(!x)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?{...p,keys:x}:{...p}).type!=="delete"&&(p.values=[...p.values]),p.keys&&(p.keys=[...p.keys]),function(v,_,y){return _.type==="add"?Promise.resolve([]):v.getMany({trans:_.trans,keys:y,cache:"immutable"})}(n,p,x).then(v=>{const _=x.map((y,b)=>{const w=v[b],T={onerror:null,onsuccess:null};if(p.type==="delete")u.fire.call(T,y,w,g);else if(p.type==="add"||w===void 0){const C=d.fire.call(T,y,p.values[b],g);y==null&&C!=null&&(y=C,p.keys[b]=y,o.outbound||Te(p.values[b],o.keyPath,y))}else{const C=Xs(w,p.values[b]),S=c.fire.call(T,C,y,w,g);if(S){const E=p.values[b];Object.keys(S).forEach(N=>{me(E,N)?E[N]=S[N]:Te(E,N,S[N])})}}return T});return n.mutate(p).then(({failures:y,results:b,numFailures:w,lastResult:T})=>{for(let C=0;C<x.length;++C){const S=b?b[C]:x[C],E=_[C];S==null?E.onerror&&E.onerror(y[C]):E.onsuccess&&E.onsuccess(p.type==="put"&&v[C]?p.values[C]:S)}return{failures:y,results:b,numFailures:w,lastResult:T}}).catch(y=>(_.forEach(b=>b.onerror&&b.onerror(y)),Promise.reject(y)))})}function m(p,g,x){return n.query({trans:p,values:!1,query:{index:o,range:g},limit:x}).then(({result:v})=>f({type:"delete",keys:v,trans:p}).then(_=>_.numFailures>0?Promise.reject(_.failures[0]):v.length<x?{failures:[],numFailures:0,lastResult:void 0}:m(p,{...g,lower:v[v.length-1],lowerOpen:!0},x)))}}}}})};function Vl(t,e,n){try{if(!e||e.keys.length<t.length)return null;const o=[];for(let s=0,r=0;s<e.keys.length&&r<t.length;++s)de(e.keys[s],t[r])===0&&(o.push(n?An(e.values[s]):e.values[s]),++r);return o.length===t.length?o:null}catch{return null}}const gh={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:o=>{if(!o.cache)return n.getMany(o);const s=Vl(o.keys,o.trans._cache,o.cache==="clone");return s?U.resolve(s):n.getMany(o).then(r=>(o.trans._cache={keys:o.keys,values:o.cache==="clone"?An(r):r},r))},mutate:o=>(o.type!=="add"&&(o.trans._cache=null),n.mutate(o))}}})};function Zs(t){return!("from"in t)}const De=function(t,e){if(!this){const n=new De;return t&&"d"in t&&fe(n,t),n}fe(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Cn(t,e,n){const o=de(e,n);if(isNaN(o))return;if(o>0)throw RangeError();if(Zs(t))return fe(t,{from:e,to:n,d:1});const s=t.l,r=t.r;if(de(n,t.from)<0)return s?Cn(s,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Yr(t);if(de(e,t.to)>0)return r?Cn(r,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Yr(t);de(e,t.from)<0&&(t.from=e,t.l=null,t.d=r?r.d+1:1),de(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const a=!t.r;s&&!t.l&&ho(t,s),r&&a&&ho(t,r)}function ho(t,e){Zs(e)||function n(o,{from:s,to:r,l:a,r:u}){Cn(o,s,r),a&&n(o,a),u&&n(o,u)}(t,e)}function yh(t,e){const n=bs(e);let o=n.next();if(o.done)return!1;let s=o.value;const r=bs(t);let a=r.next(s.from),u=a.value;for(;!o.done&&!a.done;){if(de(u.from,s.to)<=0&&de(u.to,s.from)>=0)return!0;de(s.from,u.from)<0?s=(o=n.next(u.from)).value:u=(a=r.next(s.from)).value}return!1}function bs(t){let e=Zs(t)?null:{s:0,n:t};return{next(n){const o=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,o)for(;e.n.l&&de(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!o||de(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Yr(t){var e,n;const o=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),s=o>1?"r":o<-1?"l":"";if(s){const r=s==="r"?"l":"r",a={...t},u=t[s];t.from=u.from,t.to=u.to,t[s]=u[s],a[s]=u[r],t[r]=a,a.d=Qr(a)}t.d=Qr(t)}function Qr({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}Wt(De.prototype,{add(t){return ho(this,t),this},addKey(t){return Cn(this,t,t),this},addKeys(t){return t.forEach(e=>Cn(this,e,e)),this},[es](){return bs(this)}});const vh={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new De(t.MIN_KEY,t.MAX_KEY);return{...t,table:o=>{const s=t.table(o),{schema:r}=s,{primaryKey:a}=r,{extractKey:u,outbound:d}=a,c={...s,mutate:p=>{const g=p.trans,x=g.mutatedParts||(g.mutatedParts={}),v=S=>{const E=`idb://${e}/${o}/${S}`;return x[E]||(x[E]=new De)},_=v(""),y=v(":dels"),{type:b}=p;let[w,T]=p.type==="deleteRange"?[p.range]:p.type==="delete"?[p.keys]:p.values.length<50?[[],p.values]:[];const C=p.trans._cache;return s.mutate(p).then(S=>{if(ie(w)){b!=="delete"&&(w=S.results),_.addKeys(w);const E=Vl(w,C);E||b==="add"||y.addKeys(w),(E||T)&&function(N,I,P,F){function Y(O){const K=N(O.name||"");function L(R){return R!=null?O.extractKey(R):null}const k=R=>O.multiEntry&&ie(R)?R.forEach(V=>K.addKey(V)):K.addKey(R);(P||F).forEach((R,V)=>{const ge=P&&L(P[V]),en=F&&L(F[V]);de(ge,en)!==0&&(ge!=null&&k(ge),en!=null&&k(en))})}I.indexes.forEach(Y)}(v,r,E,T)}else if(w){const E={from:w.lower,to:w.upper};y.add(E),_.add(E)}else _.add(n),y.add(n),r.indexes.forEach(E=>v(E.name).add(n));return S})}},f=({query:{index:p,range:g}})=>{var x,v;return[p,new De((x=g.lower)!==null&&x!==void 0?x:t.MIN_KEY,(v=g.upper)!==null&&v!==void 0?v:t.MAX_KEY)]},m={get:p=>[a,new De(p.key)],getMany:p=>[a,new De().addKeys(p.keys)],count:f,query:f,openCursor:f};return ee(m).forEach(p=>{c[p]=function(g){const{subscr:x}=G;if(x){const v=T=>{const C=`idb://${e}/${o}/${T}`;return x[C]||(x[C]=new De)},_=v(""),y=v(":dels"),[b,w]=m[p](g);if(v(b.name||"").add(w),!b.isPrimaryKey){if(p!=="count"){const T=p==="query"&&d&&g.values&&s.query({...g,values:!1});return s[p].apply(this,arguments).then(C=>{if(p==="query"){if(d&&g.values)return T.then(({result:E})=>(_.addKeys(E),C));const S=g.values?C.result.map(u):C.result;g.values?_.addKeys(S):y.addKeys(S)}else if(p==="openCursor"){const S=C,E=g.values;return S&&Object.create(S,{key:{get:()=>(y.addKey(S.primaryKey),S.key)},primaryKey:{get(){const N=S.primaryKey;return y.addKey(N),N}},value:{get:()=>(E&&_.addKey(S.primaryKey),S.value)}})}return C})}y.add(n)}}return s[p].apply(this,arguments)}}),c}}}};class xt{constructor(e,n){this._middlewares={},this.verno=0;const o=xt.dependencies;this._options=n={addons:xt.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const r={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Q,dbReadyPromise:null,cancelOpen:Q,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;r.dbReadyPromise=new U(u=>{r.dbReadyResolve=u}),r.openCanceller=new U((u,d)=>{r.cancelOpen=d}),this._state=r,this.name=e,this.on=hn(this,"populate","blocked","versionchange","close",{ready:[Js,Q]}),this.on.ready.subscribe=fl(this.on.ready.subscribe,u=>(d,c)=>{xt.vip(()=>{const f=this._state;if(f.openComplete)f.dbOpenError||U.resolve().then(d),c&&u(d);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(d),c&&u(d);else{u(d);const m=this;c||u(function p(){m.on.ready.unsubscribe(d),m.on.ready.unsubscribe(p)})}})}),this.Collection=(a=this,tn(th.prototype,function(u,d){this.db=a;let c=Ml,f=null;if(d)try{c=d()}catch(x){f=x}const m=u._ctx,p=m.table,g=p.hook.reading.fire;this._ctx={table:p,index:m.index,isPrimKey:!m.index||p.schema.primKey.keyPath&&m.index===p.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:m.or,valueMapper:g!==xn?g:null}})),this.Table=function(u){return tn(eh.prototype,function(d,c,f){this.db=u,this._tx=f,this.name=d,this.schema=c,this.hook=u._allTables[d]?u._allTables[d].hook:hn(null,{creating:[Bf,Q],reading:[Hf,xn],updating:[Of,Q],deleting:[$f,Q]})})}(this),this.Transaction=function(u){return tn(rh.prototype,function(d,c,f,m,p){this.db=u,this.mode=d,this.storeNames=c,this.schema=f,this.chromeTransactionDurability=m,this.idbtrans=null,this.on=hn(this,"complete","error","abort"),this.parent=p||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new U((g,x)=>{this._resolve=g,this._reject=x}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},g=>{var x=this.active;return this.active=!1,this.on.error.fire(g),this.parent?this.parent._reject(g):x&&this.idbtrans&&this.idbtrans.abort(),te(g)})})}(this),this.Version=function(u){return tn(ch.prototype,function(d){this.db=u,this._cfg={version:d,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(u){return tn(Fl.prototype,function(d,c,f){this.db=u,this._ctx={table:d,index:c===":id"?null:c,or:f};const m=u._deps.indexedDB;if(!m)throw new q.MissingAPI;this._cmp=this._ascending=m.cmp.bind(m),this._descending=(p,g)=>m.cmp(g,p),this._max=(p,g)=>m.cmp(p,g)>0?p:g,this._min=(p,g)=>m.cmp(p,g)<0?p:g,this._IDBKeyRange=u._deps.IDBKeyRange})}(this),this.on("versionchange",u=>{u.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",u=>{!u.newVersion||u.newVersion<u.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${u.oldVersion/10}`)}),this._maxKey=Tn(n.IDBKeyRange),this._createTransaction=(u,d,c,f)=>new this.Transaction(u,d,c,this._options.chromeTransactionDurability,f),this._fireOnBlocked=u=>{this.on("blocked").fire(u),fn.filter(d=>d.name===this.name&&d!==this&&!d._state.vcFired).map(d=>d.on("versionchange").fire(u))},this.use(ph),this.use(mh),this.use(vh),this.use(gh),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(u=>u(this))}version(e){if(isNaN(e)||e<.1)throw new q.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var o=n.filter(s=>s._cfg.version===e)[0];return o||(o=new this.Version(e),n.push(o),n.sort(lh),o.stores({}),this._state.autoSchema=!1,o)}_whenReady(e){return this.idbdb&&(this._state.openComplete||G.letThrough||this._vip)?e():new U((n,o)=>{if(this._state.openComplete)return o(new q.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void o(new q.DatabaseClosed);this.open().catch(Q)}this._state.dbReadyPromise.then(n,o)}).then(e)}use({stack:e,create:n,level:o,name:s}){s&&this.unuse({stack:e,name:s});const r=this._middlewares[e]||(this._middlewares[e]=[]);return r.push({stack:e,create:n,level:o??10,name:s}),r.sort((a,u)=>a.level-u.level),this}unuse({stack:e,name:n,create:o}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(s=>o?s.create!==o:!!n&&s.name!==n)),this}open(){return fh(this)}_close(){const e=this._state,n=fn.indexOf(this);if(n>=0&&fn.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new U(o=>{e.dbReadyResolve=o}),e.openCanceller=new U((o,s)=>{e.cancelOpen=s})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new q.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new U((o,s)=>{const r=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=X(()=>{(function({indexedDB:u,IDBKeyRange:d},c){!js(u)&&c!==So&&Qs(u,d).delete(c).catch(Q)})(this._deps,this.name),o()}),a.onerror=Ie(s),a.onblocked=this._fireOnBlocked};if(e)throw new q.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(r):r()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return ee(this._allTables).map(e=>this._allTables[e])}transaction(){const e=hh.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,o){let s=G.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const r=e.indexOf("?")!==-1;let a,u;e=e.replace("!","").replace("?","");try{if(u=n.map(c=>{var f=c instanceof this.Table?c.name:c;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),e=="r"||e===Go)a=Go;else{if(e!="rw"&&e!=qo)throw new q.InvalidArgument("Invalid transaction mode: "+e);a=qo}if(s){if(s.mode===Go&&a===qo){if(!r)throw new q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&u.forEach(c=>{if(s&&s.storeNames.indexOf(c)===-1){if(!r)throw new q.SubTransaction("Table "+c+" not included in parent transaction.");s=null}}),r&&s&&!s.active&&(s=null)}}catch(c){return s?s._promise(null,(f,m)=>{m(c)}):te(c)}const d=ql.bind(null,this,a,u,s,o);return s?s._promise(a,d,"lock"):G.trans?Qt(G.transless,()=>this._whenReady(d)):this._whenReady(d)}table(e){if(!me(this._allTables,e))throw new q.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const xh=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class _h{constructor(e){this._subscribe=e}subscribe(e,n,o){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:o})}[xh](){return this}}function Hl(t,e){return ee(e).forEach(n=>{ho(t[n]||(t[n]=new De),e[n])}),t}function bh(t){let e,n=!1;const o=new _h(s=>{const r=$s(t);let a=!1,u={},d={};const c={get closed(){return a},unsubscribe:()=>{a=!0,it.storagemutated.unsubscribe(g)}};s.start&&s.start(c);let f=!1,m=!1;function p(){return ee(d).some(v=>u[v]&&yh(u[v],d[v]))}const g=v=>{Hl(u,v),p()&&x()},x=()=>{if(f||a)return;u={};const v={},_=function(y){r&&Yt();const b=()=>st(t,{subscr:y,trans:null}),w=G.trans?Qt(G.transless,b):b();return r&&w.then(Ve,Ve),w}(v);m||(it(wn,g),m=!0),f=!0,Promise.resolve(_).then(y=>{n=!0,e=y,f=!1,a||(p()?x():(u={},d=v,s.next&&s.next(y)))},y=>{f=!1,n=!1,s.error&&s.error(y),c.unsubscribe()})};return x(),c});return o.hasValue=()=>n,o.getValue=()=>e,o}let ws;try{ws={indexedDB:j.indexedDB||j.mozIndexedDB||j.webkitIndexedDB||j.msIndexedDB,IDBKeyRange:j.IDBKeyRange||j.webkitIDBKeyRange}}catch{ws={indexedDB:null,IDBKeyRange:null}}const lt=xt;function Zn(t){let e=Le;try{Le=!0,it.storagemutated.fire(t)}finally{Le=e}}Wt(lt,{...zn,delete:t=>new lt(t,{addons:[]}).delete(),exists:t=>new lt(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return js(e)?Promise.resolve(e.databases()).then(o=>o.map(s=>s.name).filter(s=>s!==So)):Qs(e,n).toCollection().primaryKeys()}(lt.dependencies).then(t)}catch{return te(new q.MissingAPI)}},defineClass:()=>function(t){fe(this,t)},ignoreTransaction:t=>G.trans?Qt(G.transless,t):t(),vip:xs,async:function(t){return function(){try{var e=_s(t.apply(this,arguments));return e&&typeof e.then=="function"?e:U.resolve(e)}catch(n){return te(n)}}},spawn:function(t,e,n){try{var o=_s(t.apply(n,e||[]));return o&&typeof o.then=="function"?o:U.resolve(o)}catch(s){return te(s)}},currentTransaction:{get:()=>G.trans||null},waitFor:function(t,e){const n=U.resolve(typeof t=="function"?lt.ignoreTransaction(t):t).timeout(e||6e4);return G.trans?G.trans.waitFor(n):n},Promise:U,debug:{get:()=>Pe,set:t=>{vl(t,t==="dexie"?()=>!0:Rl)}},derive:Mt,extend:fe,props:Wt,override:fl,Events:hn,on:it,liveQuery:bh,extendObservabilitySet:Hl,getByKeyPath:qe,setByKeyPath:Te,delByKeyPath:function(t,e){typeof e=="string"?Te(t,e,void 0):"length"in e&&[].map.call(e,function(n){Te(t,n,void 0)})},shallowClone:ml,deepClone:An,getObjectDiff:Xs,cmp:de,asap:hl,minKey:ds,addons:[],connections:fn,errnames:Ks,dependencies:ws,semVer:$r,version:$r.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),lt.maxKey=Tn(lt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(it(wn,t=>{if(!Le){let e;Eo?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Ye,!0,!0,t)):e=new CustomEvent(Ye,{detail:t}),Le=!0,dispatchEvent(e),Le=!1}}),addEventListener(Ye,({detail:t})=>{Le||Zn(t)}));let Le=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Ye);typeof t.unref=="function"&&t.unref(),it(wn,e=>{Le||t.postMessage(e)}),t.onmessage=e=>{e.data&&Zn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){it(wn,e=>{try{Le||(typeof localStorage<"u"&&localStorage.setItem(Ye,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Ye,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Ye){const n=JSON.parse(e.newValue);n&&Zn(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Ye&&Zn(e.changedParts)})}U.rejectionMapper=function(t,e){if(!t||t instanceof Dt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!qr[t.name])return t;var n=new qr[t.name](e||t.message,t);return"stack"in t&&Ge(n,"stack",{get:function(){return this.inner.stack}}),n},vl(Pe,Rl);class wh extends xt{constructor(){super("FTCManagerDB");Oe(this,"tasks");Oe(this,"checklists");Oe(this,"scoutingReports");Oe(this,"matchPlans");Oe(this,"syncQueue");Oe(this,"members");Oe(this,"teams");this.version(1).stores({tasks:"id, organizationId, teamId, status, syncStatus, updatedAt",checklists:"id, organizationId, syncStatus",scoutingReports:"id, organizationId, opponentTeamNumber, matchNumber, syncStatus",matchPlans:"id, organizationId, syncStatus",syncQueue:"id, tableName, timestamp, retryCount",members:"id, organizationId, syncStatus",teams:"id, organizationId, syncStatus"})}}const nt=new wh;function ze(){return crypto.randomUUID()}async function It(t,e,n,o){await nt.syncQueue.add({id:ze(),tableName:t,recordId:e,operation:n,data:o,timestamp:Date.now(),retryCount:0})}async function jr(){return await nt.syncQueue.count()}const Xr=[{id:"m1",firstName:"Abby",lastNameInitial:"B"},{id:"m2",firstName:"Ben",lastNameInitial:"C"},{id:"m3",firstName:"Charlie",lastNameInitial:"D"},{id:"m4",firstName:"Dana",lastNameInitial:"E"},{id:"m5",firstName:"Evan",lastNameInitial:"F"}],Zr=[{id:"t1",name:"Programming",memberIds:["m1"]},{id:"t2",name:"Build",memberIds:["m2"]},{id:"t3",name:"Drive",memberIds:["m3"]},{id:"t4",name:"Scouting",memberIds:["m5"]},{id:"t5",name:"Outreach",memberIds:["m4"]}],ei=[{id:"1",text:"Turn off robot",checked:!1},{id:"2",text:"Swap main battery",checked:!1},{id:"3",text:"Charge old battery",checked:!1},{id:"4",text:"Charge Driver Hub",checked:!1},{id:"5",text:"Tighten chassis screws",checked:!1},{id:"6",text:"Check wiring connections",checked:!1},{id:"7",text:"Clean wheels",checked:!1},{id:"8",text:"Reset servo positions",checked:!1}],Pn=Cf()(Nf((t,e)=>({currentOrganizationId:null,isDemoMode:!Vs(),tasks:[],members:Xr,teams:Zr,scoutingReports:[],checklist:ei,matchPlans:[],theme:"light",geminiApiKey:null,setTheme:n=>{t({theme:n}),n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},setGeminiApiKey:n=>t({geminiApiKey:n}),addTask:n=>{const o={...n,id:ze(),createdAt:Date.now(),timeline:[{id:ze(),type:"history",authorId:"System",content:"Task created",timestamp:Date.now()}]};t(s=>({tasks:[...s.tasks,o]})),e().isDemoMode||It("tasks",o.id,"create",o)},updateTask:(n,o)=>{if(t(s=>({tasks:s.tasks.map(r=>r.id===n?{...r,...o}:r)})),!e().isDemoMode){const s=e().tasks.find(r=>r.id===n);s&&It("tasks",n,"update",{...s,...o})}},deleteTask:n=>{t(o=>({tasks:o.tasks.filter(s=>s.id!==n)})),e().isDemoMode||It("tasks",n,"delete",null)},addMember:(n,o)=>{const s={id:ze(),firstName:n,lastNameInitial:o};t(r=>({members:[...r.members,s]}))},removeMember:n=>{t(o=>({members:o.members.filter(s=>s.id!==n),teams:o.teams.map(s=>({...s,memberIds:s.memberIds.filter(r=>r!==n)}))}))},setMembers:n=>t({members:n}),addTeam:n=>{const o={id:ze(),name:n,memberIds:[]};t(s=>({teams:[...s.teams,o]}))},removeTeam:n=>{t(o=>({teams:o.teams.filter(s=>s.id!==n)}))},toggleMemberInTeam:(n,o)=>{t(s=>({teams:s.teams.map(r=>{if(r.id!==n)return r;const a=r.memberIds.includes(o)?r.memberIds.filter(u=>u!==o):[...r.memberIds,o];return{...r,memberIds:a}})}))},setTeams:n=>t({teams:n}),addScoutingReport:n=>{const o={...n,id:ze()};t(s=>({scoutingReports:[...s.scoutingReports,o]}))},toggleChecklistItem:n=>{t(o=>({checklist:o.checklist.map(s=>s.id===n?{...s,checked:!s.checked}:s)}))},resetChecklist:()=>{t(n=>({checklist:n.checklist.map(o=>({...o,checked:!1}))}))},addChecklistItem:n=>{const o={id:ze(),text:n,checked:!1};t(s=>({checklist:[...s.checklist,o]}))},deleteChecklistItem:n=>{t(o=>({checklist:o.checklist.filter(s=>s.id!==n)}))},updateChecklistAssignment:(n,o)=>{t(s=>({checklist:s.checklist.map(r=>r.id===n?{...r,assignedTo:o}:r)}))},addMatchPlan:n=>{const o={...n,id:ze(),updatedAt:Date.now()};t(s=>({matchPlans:[...s.matchPlans,o]})),e().isDemoMode||It("matchPlans",o.id,"create",o)},deleteMatchPlan:n=>{t(o=>({matchPlans:o.matchPlans.filter(s=>s.id!==n)})),e().isDemoMode||It("matchPlans",n,"delete",null)},updateMatchPlan:(n,o)=>{if(t(s=>({matchPlans:s.matchPlans.map(r=>r.id===n?{...r,...o,updatedAt:Date.now()}:r)})),!e().isDemoMode){const s=e().matchPlans.find(r=>r.id===n);s&&It("matchPlans",n,"update",{...s,...o})}},initializeStore:async()=>{try{const n=await nt.tasks.toArray();n.length>0&&t({tasks:n.map(s=>({id:s.id,title:s.title,description:s.description||"",status:s.status,type:s.type,assignedTo:s.assignedTo||"",department:s.teamId||"",tags:s.tags,checklist:s.checklist,timeline:Array.isArray(s.timeline)?s.timeline.map(r=>({...r,type:r.type})):[],createdAt:s.createdAt,dueDate:s.dueDate}))});const o=await nt.matchPlans.toArray();o.length>0&&t({matchPlans:o.map(s=>({id:s.id,title:s.title||`Match ${s.matchNumber||"?"}`,drawingData:s.drawingData,notes:s.notes||"",allianceTeam:s.allianceTeam||"",partnerAutonomous:s.partnerAutonomous||!1,partnerPark:s.partnerPark||!1,updatedAt:s.updatedAt}))})}catch(n){console.warn("Failed to load from IndexedDB:",n)}},resetToDefaults:()=>{t({tasks:[],members:Xr,teams:Zr,scoutingReports:[],checklist:ei,matchPlans:[]})}}),{name:"ftc-team-manager-storage",partialize:t=>({tasks:t.tasks,members:t.members,teams:t.teams,scoutingReports:t.scoutingReports,checklist:t.checklist,matchPlans:t.matchPlans,theme:t.theme,geminiApiKey:t.geminiApiKey})}));if(typeof window<"u"){const t=localStorage.getItem("ftc-team-manager-storage");if(t)try{const{state:e}=JSON.parse(t);(e==null?void 0:e.theme)==="dark"&&document.documentElement.classList.add("dark")}catch{}}function Th(){const{signInWithEmail:t,signUpWithEmail:e,signInWithGoogle:n,signInWithMicrosoft:o,resetPassword:s,isConfigured:r}=Hs(),[a,u]=M.useState("login"),[d,c]=M.useState(""),[f,m]=M.useState(""),[p,g]=M.useState(""),[x,v]=M.useState(!1),[_,y]=M.useState(null),[b,w]=M.useState(null),T=async E=>{E.preventDefault(),v(!0),y(null),w(null);try{if(a==="login"){const{error:N}=await t(d,f);N&&y(N.message)}else if(a==="signup"){const{error:N}=await e(d,f,p);N?y(N.message):w("Check your email for a confirmation link!")}else if(a==="forgot"){const{error:N}=await s(d);N?y(N.message):w("Password reset email sent!")}}catch{y("An unexpected error occurred")}finally{v(!1)}},C=async()=>{v(!0),y(null);const{error:E}=await n();E&&(y(E.message),v(!1))},S=async()=>{v(!0),y(null);const{error:E}=await o();E&&(y(E.message),v(!1))};return r?h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:h.jsxs("div",{className:"max-w-md w-full",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl shadow-xl border border-slate-700/50 mb-4 p-4",children:h.jsx("img",{src:"/ftc-team-manager/logo.png",className:"w-full h-full object-contain",alt:"Logo"})}),h.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"FTC Team Manager"}),h.jsxs("p",{className:"text-slate-400",children:[a==="login"&&"Sign in to your account",a==="signup"&&"Create your account",a==="forgot"&&"Reset your password"]})]}),h.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700 rounded-2xl p-6 shadow-xl",children:[_&&h.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-3 mb-4",children:h.jsx("p",{className:"text-red-400 text-sm",children:_})}),b&&h.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-3 mb-4",children:h.jsx("p",{className:"text-green-400 text-sm",children:b})}),a!=="forgot"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"space-y-3 mb-6",children:[h.jsxs("button",{onClick:C,disabled:x,className:"w-full flex items-center justify-center gap-3 bg-white text-slate-900 font-medium py-3 px-4 rounded-xl hover:bg-slate-100 transition-all disabled:opacity-50",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),h.jsxs("button",{onClick:S,disabled:x,className:"w-full flex items-center justify-center gap-3 bg-slate-700 text-white font-medium py-3 px-4 rounded-xl hover:bg-slate-600 transition-all disabled:opacity-50",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"#F25022",d:"M1 1h10v10H1z"}),h.jsx("path",{fill:"#00A4EF",d:"M1 13h10v10H1z"}),h.jsx("path",{fill:"#7FBA00",d:"M13 1h10v10H13z"}),h.jsx("path",{fill:"#FFB900",d:"M13 13h10v10H13z"})]}),"Continue with Microsoft"]})]}),h.jsxs("div",{className:"relative mb-6",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-slate-600"})}),h.jsx("div",{className:"relative flex justify-center text-sm",children:h.jsx("span",{className:"px-4 bg-slate-800/50 text-slate-400",children:"or continue with email"})})]})]}),h.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a==="signup"&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Full Name"}),h.jsxs("div",{className:"relative",children:[h.jsx(sl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),h.jsx("input",{type:"text",value:p,onChange:E=>g(E.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"John Smith",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(pd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),h.jsx("input",{type:"email",value:d,onChange:E=>c(E.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"you@team12345.org",required:!0})]})]}),a!=="forgot"&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(dd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),h.jsx("input",{type:"password",value:f,onChange:E=>m(E.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"",required:!0,minLength:6})]})]}),h.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold py-3 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg shadow-orange-500/25 disabled:opacity-50",children:x?h.jsx(so,{className:"w-5 h-5 animate-spin"}):h.jsxs(h.Fragment,{children:[a==="login"&&"Sign In",a==="signup"&&"Create Account",a==="forgot"&&"Send Reset Link",h.jsx(jo,{className:"w-4 h-4"})]})})]}),h.jsxs("div",{className:"mt-6 text-center text-sm",children:[a==="login"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>u("forgot"),className:"text-slate-400 hover:text-orange-400 transition-colors",children:"Forgot password?"}),h.jsxs("p",{className:"mt-4 text-slate-400",children:["Don't have an account?"," ",h.jsx("button",{onClick:()=>u("signup"),className:"text-orange-400 hover:text-orange-300 font-medium",children:"Sign up"})]})]}),a==="signup"&&h.jsxs("p",{className:"text-slate-400",children:["Already have an account?"," ",h.jsx("button",{onClick:()=>u("login"),className:"text-orange-400 hover:text-orange-300 font-medium",children:"Sign in"})]}),a==="forgot"&&h.jsx("button",{onClick:()=>u("login"),className:"text-orange-400 hover:text-orange-300 font-medium",children:"Back to sign in"})]})]})]})}):h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:h.jsxs("div",{className:"max-w-md w-full",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl shadow-lg shadow-orange-500/25 mb-4",children:h.jsx("img",{src:"/ftc-team-manager/logo.png",className:"w-full h-full object-contain",alt:"Logo"})}),h.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"FTC Team Manager"}),h.jsx("p",{className:"text-slate-400",children:"Running in Demo Mode"})]}),h.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700 rounded-2xl p-6 shadow-xl",children:[h.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 mb-6",children:h.jsxs("p",{className:"text-amber-200 text-sm",children:[h.jsx("strong",{children:"Demo Mode:"})," Cloud sync is disabled. Your data will be saved locally in this browser. To enable authentication and cloud sync, configure your Supabase credentials in ",h.jsx("code",{className:"bg-slate-700 px-1 rounded",children:".env.local"})]})}),h.jsxs("a",{href:"/",className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-semibold py-3 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg shadow-orange-500/25",children:["Continue to App",h.jsx(jo,{className:"w-4 h-4"})]})]})]})})}function Bl(){const[t,e]=M.useState(navigator.onLine),[n,o]=M.useState("idle"),[s,r]=M.useState(0),[a,u]=M.useState(null),[d,c]=M.useState(null),f=M.useRef(!1);M.useEffect(()=>{const p=()=>{e(!0),o("idle")},g=()=>{e(!1),o("offline"),f.current=!1};return window.addEventListener("online",p),window.addEventListener("offline",g),()=>{window.removeEventListener("online",p),window.removeEventListener("offline",g)}},[]),M.useEffect(()=>{const p=async()=>{const x=await jr();r(x)};p();const g=setInterval(p,5e3);return()=>clearInterval(g)},[]),M.useEffect(()=>{t&&s>0&&n==="idle"&&!f.current&&m()},[t,s,n]);const m=M.useCallback(async()=>{if(!f.current){if(!t||!W){o("offline");return}f.current=!0,o("syncing"),c(null);try{const p=await nt.syncQueue.toArray();for(const x of p)try{await Ch(x),await nt.syncQueue.delete(x.id)}catch(v){const _=(x.retryCount||0)+1;_>=5?(console.error(`Sync item ${x.id} failed after 5 retries. Removing from queue.`,v),await nt.syncQueue.delete(x.id)):await nt.syncQueue.update(x.id,{retryCount:_,lastError:v instanceof Error?v.message:"Unknown error"})}await Eh(),u(new Date),o("idle");const g=await jr();r(g)}catch(p){console.error("Sync failed:",p),c(p instanceof Error?p.message:"Sync failed"),o("error")}finally{f.current=!1}}},[t]);return{isOnline:t,syncStatus:n,pendingChanges:s,lastSyncTime:a,sync:m,error:d}}async function Ch(t){if(!W)throw new Error("Supabase not configured");const{tableName:e,operation:n,data:o,recordId:s}=t;switch(n){case"create":const{error:r}=await W.from(e).insert(o);if(r)throw r;break;case"update":const{error:a}=await W.from(e).update(o).eq("id",s);if(a)throw a;break;case"delete":const{error:u}=await W.from(e).delete().eq("id",s);if(u)throw u;break}}async function Eh(){W&&console.log("Pull from server completed")}function ti({variant:t="full"}){const{isOnline:e,syncStatus:n,pendingChanges:o,lastSyncTime:s,sync:r,error:a}=Bl();if(!Vs())return null;const d=()=>{if(!e)return h.jsx(oo,{className:"w-4 h-4 text-slate-400"});switch(n){case"syncing":return h.jsx(Id,{className:"w-4 h-4 text-blue-400 animate-spin"});case"error":return h.jsx(Bc,{className:"w-4 h-4 text-red-400"});case"idle":return o>0?h.jsx(Xc,{className:"w-4 h-4 text-amber-400"}):h.jsx(ol,{className:"w-4 h-4 text-green-400"});default:return h.jsx(oo,{className:"w-4 h-4 text-slate-400"})}},c=()=>{if(!e)return"Offline";switch(n){case"syncing":return"Syncing...";case"error":return"Sync Error";case"idle":return o>0?`${o} pending`:"Synced";default:return"Offline"}},f=()=>{if(!e)return"bg-slate-500/10 border-slate-500/20";switch(n){case"syncing":return"bg-blue-500/10 border-blue-500/20";case"error":return"bg-red-500/10 border-red-500/20";case"idle":return o>0?"bg-amber-500/10 border-amber-500/20":"bg-green-500/10 border-green-500/20";default:return"bg-slate-500/10 border-slate-500/20"}};return h.jsxs("button",{onClick:()=>r(),disabled:n==="syncing"||!e,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${f()} ${t==="icon"?"aspect-square justify-center":""}`,title:a||(s?`Last synced: ${s.toLocaleTimeString()}`:"Click to sync"),children:[h.jsx("span",{className:n==="syncing"?"animate-spin":"",children:d()}),t==="full"&&h.jsx("span",{children:c()})]})}const kt={Backlog:"Backlog",ToDo:"To Do",InProgress:"In Progress",Validation:"Validation",Done:"Done"},nn={Feature:"Feature",Bug:"Bug"},ni=[kt.Backlog,kt.ToDo,kt.InProgress,kt.Validation,kt.Done],Sh=[{id:"m1",firstName:"Abby",lastNameInitial:"B"},{id:"m2",firstName:"Ben",lastNameInitial:"C"},{id:"m3",firstName:"Charlie",lastNameInitial:"D"},{id:"m4",firstName:"Dana",lastNameInitial:"E"},{id:"m5",firstName:"Evan",lastNameInitial:"F"}],Ih=[{id:"t1",name:"Programming",memberIds:["m1"]},{id:"t2",name:"Build",memberIds:["m2"]},{id:"t3",name:"Drive",memberIds:["m3"]},{id:"t4",name:"Scouting",memberIds:["m5"]},{id:"t5",name:"Outreach",memberIds:["m4"]}],Ah=[{id:"1",text:"Turn off robot",checked:!1},{id:"2",text:"Swap main battery",checked:!1},{id:"3",text:"Charge old battery",checked:!1},{id:"4",text:"Charge Driver Hub",checked:!1},{id:"5",text:"Tighten chassis screws",checked:!1},{id:"6",text:"Check wiring connections",checked:!1},{id:"7",text:"Clean wheels",checked:!1},{id:"8",text:"Reset servo positions",checked:!1}],kh="DecodeField.png";var Nh={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ph,Rh;function Mh(){return{geminiUrl:Ph,vertexUrl:Rh}}function Dh(t,e,n,o){var s,r;if(!(t!=null&&t.baseUrl)){const a=Mh();return e?(s=a.vertexUrl)!==null&&s!==void 0?s:n:(r=a.geminiUrl)!==null&&r!==void 0?r:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Be{}function D(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const r=e[s];return r!=null?String(r):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function l(t,e,n){for(let r=0;r<e.length-1;r++){const a=e[r];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];l(f,e.slice(r+1),n[c])}else for(const c of d)l(c,e.slice(r+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];l(d[0],e.slice(r+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function i(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const s=e[o];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in t){const a=t[r];return Array.isArray(a)?a.map(u=>i(u,e.slice(o+1),n)):n}else return n}else t=t[s]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function Fh(t,e){for(const[n,o]of Object.entries(e)){const s=n.split("."),r=o.split("."),a=new Set;let u=-1;for(let d=0;d<s.length;d++)if(s[d]==="*"){u=d;break}if(u!==-1&&r.length>u)for(let d=u;d<r.length;d++){const c=r[d];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&a.add(c)}Ts(t,s,r,0,a)}}function Ts(t,e,n,o,s){if(o>=e.length||typeof t!="object"||t===null)return;const r=e[o];if(r.endsWith("[]")){const a=r.slice(0,-2),u=t;if(a in u&&Array.isArray(u[a]))for(const d of u[a])Ts(d,e,n,o+1,s)}else if(r==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,u=Object.keys(a).filter(c=>!c.startsWith("_")&&!s.has(c)),d={};for(const c of u)d[c]=a[c];for(const[c,f]of Object.entries(d)){const m=[];for(const p of n.slice(o))p==="*"?m.push(c):m.push(p);l(a,m,f)}for(const c of u)delete a[c]}}else{const a=t;r in a&&Ts(a[r],e,n,o+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function er(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uh(t){const e={},n=i(t,["operationName"]);n!=null&&l(e,["operationName"],n);const o=i(t,["resourceName"]);return o!=null&&l(e,["_url","resourceName"],o),e}function Lh(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response","generateVideoResponse"]);return a!=null&&l(e,["response"],qh(a)),e}function Gh(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response"]);return a!=null&&l(e,["response"],Vh(a)),e}function qh(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Hh(a))),l(e,["generatedVideos"],r)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&l(e,["raiMediaFilteredReasons"],s),e}function Vh(t){const e={},n=i(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Bh(a))),l(e,["generatedVideos"],r)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&l(e,["raiMediaFilteredReasons"],s),e}function Hh(t){const e={},n=i(t,["video"]);return n!=null&&l(e,["video"],Wh(n)),e}function Bh(t){const e={},n=i(t,["_self"]);return n!=null&&l(e,["video"],Yh(n)),e}function $h(t){const e={},n=i(t,["operationName"]);return n!=null&&l(e,["_url","operationName"],n),e}function Oh(t){const e={},n=i(t,["operationName"]);return n!=null&&l(e,["_url","operationName"],n),e}function Kh(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response"]);return a!=null&&l(e,["response"],Jh(a)),e}function Jh(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&l(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&l(e,["documentName"],s),e}function $l(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response"]);return a!=null&&l(e,["response"],zh(a)),e}function zh(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&l(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&l(e,["documentName"],s),e}function Wh(t){const e={},n=i(t,["uri"]);n!=null&&l(e,["uri"],n);const o=i(t,["encodedVideo"]);o!=null&&l(e,["videoBytes"],er(o));const s=i(t,["encoding"]);return s!=null&&l(e,["mimeType"],s),e}function Yh(t){const e={},n=i(t,["gcsUri"]);n!=null&&l(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&l(e,["videoBytes"],er(o));const s=i(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oi;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(oi||(oi={}));var si;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(si||(si={}));var ri;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(ri||(ri={}));var ot;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ot||(ot={}));var ii;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ii||(ii={}));var ai;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ai||(ai={}));var li;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(li||(li={}));var ui;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ui||(ui={}));var ci;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ci||(ci={}));var di;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(di||(di={}));var fi;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(fi||(fi={}));var hi;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(hi||(hi={}));var pi;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(pi||(pi={}));var mi;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(mi||(mi={}));var gi;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(gi||(gi={}));var yi;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(yi||(yi={}));var vi;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(vi||(vi={}));var xi;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(xi||(xi={}));var _i;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_i||(_i={}));var po;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(po||(po={}));var bi;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(bi||(bi={}));var wi;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(wi||(wi={}));var Ti;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ti||(Ti={}));var Cs;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Cs||(Cs={}));var Ci;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Ci||(Ci={}));var Ei;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Ei||(Ei={}));var Si;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Si||(Si={}));var Ii;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ii||(Ii={}));var Ai;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ai||(Ai={}));var ki;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ki||(ki={}));var Ni;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Ni||(Ni={}));var Pi;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Pi||(Pi={}));var Ri;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Ri||(Ri={}));var Mi;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Mi||(Mi={}));var Di;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Di||(Di={}));var Fi;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Fi||(Fi={}));var Ui;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ui||(Ui={}));var Li;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Li||(Li={}));var Gi;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Gi||(Gi={}));var qi;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(qi||(qi={}));var Vi;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Vi||(Vi={}));var Hi;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Hi||(Hi={}));var Bi;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Bi||(Bi={}));var $i;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})($i||($i={}));var Oi;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Oi||(Oi={}));var Ki;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Ki||(Ki={}));var Ji;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ji||(Ji={}));var zi;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(zi||(zi={}));var Wi;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Wi||(Wi={}));var Yi;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Yi||(Yi={}));var Qi;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Qi||(Qi={}));var ji;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ji||(ji={}));var Xi;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Xi||(Xi={}));var Zi;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Zi||(Zi={}));var ea;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(ea||(ea={}));var Pt;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Pt||(Pt={}));class Es{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class on{get text(){var e,n,o,s,r,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const m=[];for(const p of(d=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[g,x]of Object.entries(p))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(x!==null||x!==void 0)&&m.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,c+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,o,s,r,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const m of(d=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[p,g]of Object.entries(m))p!=="inlineData"&&(g!==null||g!==void 0)&&f.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,o,s,r,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,o,s,r,a,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,o,s,r,a,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class ta{}class na{}class Qh{}class jh{}class Xh{}class Zh{}class oa{}class sa{}class ra{}class ep{}class mo{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new mo;let s;const r=e;return n?s=Gh(r):s=Lh(r),Object.assign(o,s),o}}class ia{}class aa{}class la{}class ua{}class tp{}class np{}class op{}class tr{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new tr,r=Kh(e);return Object.assign(o,r),o}}class sp{}class rp{}class ip{}class ca{}class ap{get text(){var e,n,o;let s="",r=!1;const a=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;r=!0,s+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?s:void 0}get data(){var e,n,o;let s="";const r=[];for(const a of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&r.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class lp{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class nr{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new nr,r=$l(e);return Object.assign(o,r),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Ol(t,e){const n=z(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Kl(t){return Array.isArray(t)?t.map(e=>go(e)):[go(t)]}function go(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Jl(t){const e=go(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function zl(t){const e=go(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function da(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Wl(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>da(e)):[da(t)]}function Ss(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function fa(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ha(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ae(t){if(t==null)throw new Error("ContentUnion is required");return Ss(t)?t:{role:"user",parts:Wl(t)}}function or(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=ae(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=ae(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ae(n)):[ae(e)]}function ve(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(fa(t)||ha(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ae(t)]}const e=[],n=[],o=Ss(t[0]);for(const s of t){const r=Ss(s);if(r!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(s);else{if(fa(s)||ha(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:Wl(n)}),e}function up(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(ot).includes(n[0].toUpperCase())?n[0].toUpperCase():ot.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(ot).includes(o.toUpperCase())?o.toUpperCase():ot.TYPE_UNSPECIFIED})}}function Ut(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=t.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,t=r[1]):r[1].type==="null"&&(e.nullable=!0,t=r[0])),t.type instanceof Array&&up(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(ot).includes(u.toUpperCase())?u.toUpperCase():ot.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Ut(u);else if(o.includes(a)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(Ut(c))}e[a]=d}else if(s.includes(a)){const d={};for(const[c,f]of Object.entries(u))d[c]=Ut(f);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function sr(t){return Ut(t)}function rr(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ir(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function jt(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ut(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ut(e.response));return t}function Xt(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function cp(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function $e(t,e){if(typeof e!="string")throw new Error("name must be a string");return cp(t,e,"cachedContents")}function Yl(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function at(t){return er(t)}function dp(t){return t!=null&&typeof t=="object"&&"name"in t}function fp(t){return t!=null&&typeof t=="object"&&"video"in t}function hp(t){return t!=null&&typeof t=="object"&&"uri"in t}function Ql(t){var e;let n;if(dp(t)&&(n=t.name),!(hp(t)&&(n=t.uri,n===void 0))&&!(fp(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function jl(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Xl(t){for(const e of["models","tunedModels","publisherModels"])if(pp(t,e))return t[e];return[]}function pp(t,e){return t!==null&&typeof t=="object"&&e in t}function mp(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function gp(t,e={}){const n=[],o=new Set;for(const s of t){const r=s.name;if(o.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);o.add(r);const a=mp(s,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function Zl(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function yp(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function eu(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let r=!1;for(const a of s){if(typeof a!="object"||a===null)continue;const d=a.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Zt(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function tu(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vp(t){const e={},n=i(t,["responsesFile"]);n!=null&&l(e,["fileName"],n);const o=i(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>Xp(a))),l(e,["inlinedResponses"],r)}const s=i(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["inlinedEmbedContentResponses"],r)}return e}function xp(t){const e={},n=i(t,["predictionsFormat"]);n!=null&&l(e,["format"],n);const o=i(t,["gcsDestination","outputUriPrefix"]);o!=null&&l(e,["gcsUri"],o);const s=i(t,["bigqueryDestination","outputUri"]);return s!=null&&l(e,["bigqueryUri"],s),e}function _p(t){const e={},n=i(t,["format"]);n!=null&&l(e,["predictionsFormat"],n);const o=i(t,["gcsUri"]);o!=null&&l(e,["gcsDestination","outputUriPrefix"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&l(e,["bigqueryDestination","outputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(i(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function eo(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata","displayName"]);o!=null&&l(e,["displayName"],o);const s=i(t,["metadata","state"]);s!=null&&l(e,["state"],tu(s));const r=i(t,["metadata","createTime"]);r!=null&&l(e,["createTime"],r);const a=i(t,["metadata","endTime"]);a!=null&&l(e,["endTime"],a);const u=i(t,["metadata","updateTime"]);u!=null&&l(e,["updateTime"],u);const d=i(t,["metadata","model"]);d!=null&&l(e,["model"],d);const c=i(t,["metadata","output"]);return c!=null&&l(e,["dest"],vp(eu(c))),e}function Is(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["displayName"]);o!=null&&l(e,["displayName"],o);const s=i(t,["state"]);s!=null&&l(e,["state"],tu(s));const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["createTime"]);a!=null&&l(e,["createTime"],a);const u=i(t,["startTime"]);u!=null&&l(e,["startTime"],u);const d=i(t,["endTime"]);d!=null&&l(e,["endTime"],d);const c=i(t,["updateTime"]);c!=null&&l(e,["updateTime"],c);const f=i(t,["model"]);f!=null&&l(e,["model"],f);const m=i(t,["inputConfig"]);m!=null&&l(e,["src"],bp(m));const p=i(t,["outputConfig"]);p!=null&&l(e,["dest"],xp(eu(p)));const g=i(t,["completionStats"]);return g!=null&&l(e,["completionStats"],g),e}function bp(t){const e={},n=i(t,["instancesFormat"]);n!=null&&l(e,["format"],n);const o=i(t,["gcsSource","uris"]);o!=null&&l(e,["gcsUri"],o);const s=i(t,["bigquerySource","inputUri"]);return s!=null&&l(e,["bigqueryUri"],s),e}function wp(t,e){const n={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&l(n,["fileName"],o);const s=i(e,["inlinedRequests"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>jp(t,a))),l(n,["requests","requests"],r)}return n}function Tp(t){const e={},n=i(t,["format"]);n!=null&&l(e,["instancesFormat"],n);const o=i(t,["gcsUri"]);o!=null&&l(e,["gcsSource","uris"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&l(e,["bigquerySource","inputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Cp(t){const e={},n=i(t,["data"]);if(n!=null&&l(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Ep(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],Zt(t,o)),n}function Sp(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],Zt(t,o)),n}function Ip(t){const e={},n=i(t,["content"]);n!=null&&l(e,["content"],n);const o=i(t,["citationMetadata"]);o!=null&&l(e,["citationMetadata"],Ap(o));const s=i(t,["tokenCount"]);s!=null&&l(e,["tokenCount"],s);const r=i(t,["finishReason"]);r!=null&&l(e,["finishReason"],r);const a=i(t,["avgLogprobs"]);a!=null&&l(e,["avgLogprobs"],a);const u=i(t,["groundingMetadata"]);u!=null&&l(e,["groundingMetadata"],u);const d=i(t,["index"]);d!=null&&l(e,["index"],d);const c=i(t,["logprobsResult"]);c!=null&&l(e,["logprobsResult"],c);const f=i(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),l(e,["safetyRatings"],p)}const m=i(t,["urlContextMetadata"]);return m!=null&&l(e,["urlContextMetadata"],m),e}function Ap(t){const e={},n=i(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["citations"],o)}return e}function nu(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>rm(r))),l(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&l(e,["role"],o),e}function kp(t,e){const n={},o=i(t,["displayName"]);if(e!==void 0&&o!=null&&l(e,["batch","displayName"],o),i(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Np(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=i(t,["dest"]);return e!==void 0&&s!=null&&l(e,["outputConfig"],_p(yp(s))),n}function pa(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["src"]);s!=null&&l(n,["batch","inputConfig"],wp(t,Zl(t,s)));const r=i(e,["config"]);return r!=null&&kp(r,n),n}function Pp(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["model"],z(t,o));const s=i(e,["src"]);s!=null&&l(n,["inputConfig"],Tp(Zl(t,s)));const r=i(e,["config"]);return r!=null&&Np(r,n),n}function Rp(t,e){const n={},o=i(t,["displayName"]);return e!==void 0&&o!=null&&l(e,["batch","displayName"],o),n}function Mp(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["src"]);s!=null&&l(n,["batch","inputConfig"],Vp(t,s));const r=i(e,["config"]);return r!=null&&Rp(r,n),n}function Dp(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],Zt(t,o)),n}function Fp(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],Zt(t,o)),n}function Up(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&l(e,["name"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);return r!=null&&l(e,["error"],r),e}function Lp(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&l(e,["name"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);return r!=null&&l(e,["error"],r),e}function Gp(t,e){const n={},o=i(e,["contents"]);if(o!=null){let r=or(t,o);Array.isArray(r)&&(r=r.map(a=>a)),l(n,["requests[]","request","content"],r)}const s=i(e,["config"]);return s!=null&&(l(n,["_self"],qp(s,n)),Fh(n,{"requests[].*":"requests[].request.*"})),n}function qp(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&l(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&l(e,["requests[]","title"],s);const r=i(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&l(e,["requests[]","outputDimensionality"],r),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Vp(t,e){const n={},o=i(e,["fileName"]);o!=null&&l(n,["file_name"],o);const s=i(e,["inlinedRequests"]);return s!=null&&l(n,["requests"],Gp(t,s)),n}function Hp(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Bp(t){const e={},n=i(t,["id"]);n!=null&&l(e,["id"],n);const o=i(t,["args"]);o!=null&&l(e,["args"],o);const s=i(t,["name"]);if(s!=null&&l(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $p(t){const e={},n=i(t,["mode"]);n!=null&&l(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);if(o!=null&&l(e,["allowedFunctionNames"],o),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Op(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&l(n,["systemInstruction"],nu(ae(s)));const r=i(e,["temperature"]);r!=null&&l(o,["temperature"],r);const a=i(e,["topP"]);a!=null&&l(o,["topP"],a);const u=i(e,["topK"]);u!=null&&l(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&l(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&l(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&l(o,["stopSequences"],f);const m=i(e,["responseLogprobs"]);m!=null&&l(o,["responseLogprobs"],m);const p=i(e,["logprobs"]);p!=null&&l(o,["logprobs"],p);const g=i(e,["presencePenalty"]);g!=null&&l(o,["presencePenalty"],g);const x=i(e,["frequencyPenalty"]);x!=null&&l(o,["frequencyPenalty"],x);const v=i(e,["seed"]);v!=null&&l(o,["seed"],v);const _=i(e,["responseMimeType"]);_!=null&&l(o,["responseMimeType"],_);const y=i(e,["responseSchema"]);y!=null&&l(o,["responseSchema"],sr(y));const b=i(e,["responseJsonSchema"]);if(b!=null&&l(o,["responseJsonSchema"],b),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=i(e,["safetySettings"]);if(n!==void 0&&w!=null){let O=w;Array.isArray(O)&&(O=O.map(K=>im(K))),l(n,["safetySettings"],O)}const T=i(e,["tools"]);if(n!==void 0&&T!=null){let O=Xt(T);Array.isArray(O)&&(O=O.map(K=>lm(jt(K)))),l(n,["tools"],O)}const C=i(e,["toolConfig"]);if(n!==void 0&&C!=null&&l(n,["toolConfig"],am(C)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=i(e,["cachedContent"]);n!==void 0&&S!=null&&l(n,["cachedContent"],$e(t,S));const E=i(e,["responseModalities"]);E!=null&&l(o,["responseModalities"],E);const N=i(e,["mediaResolution"]);N!=null&&l(o,["mediaResolution"],N);const I=i(e,["speechConfig"]);if(I!=null&&l(o,["speechConfig"],rr(I)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=i(e,["thinkingConfig"]);P!=null&&l(o,["thinkingConfig"],P);const F=i(e,["imageConfig"]);F!=null&&l(o,["imageConfig"],Qp(F));const Y=i(e,["enableEnhancedCivicAnswers"]);return Y!=null&&l(o,["enableEnhancedCivicAnswers"],Y),o}function Kp(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>Ip(c))),l(e,["candidates"],d)}const s=i(t,["modelVersion"]);s!=null&&l(e,["modelVersion"],s);const r=i(t,["promptFeedback"]);r!=null&&l(e,["promptFeedback"],r);const a=i(t,["responseId"]);a!=null&&l(e,["responseId"],a);const u=i(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function Jp(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],Zt(t,o)),n}function zp(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],Zt(t,o)),n}function Wp(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function Yp(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function Qp(t){const e={},n=i(t,["aspectRatio"]);n!=null&&l(e,["aspectRatio"],n);const o=i(t,["imageSize"]);if(o!=null&&l(e,["imageSize"],o),i(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function jp(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["request","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let u=ve(s);Array.isArray(u)&&(u=u.map(d=>nu(d))),l(n,["request","contents"],u)}const r=i(e,["metadata"]);r!=null&&l(n,["metadata"],r);const a=i(e,["config"]);return a!=null&&l(n,["request","generationConfig"],Op(t,a,i(n,["request"],{}))),n}function Xp(t){const e={},n=i(t,["response"]);n!=null&&l(e,["response"],Kp(n));const o=i(t,["error"]);return o!=null&&l(e,["error"],o),e}function Zp(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);if(e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),i(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function em(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&l(e,["_query","pageToken"],s);const r=i(t,["filter"]);return e!==void 0&&r!=null&&l(e,["_query","filter"],r),n}function tm(t){const e={},n=i(t,["config"]);return n!=null&&Zp(n,e),e}function nm(t){const e={},n=i(t,["config"]);return n!=null&&em(n,e),e}function om(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>eo(a))),l(e,["batchJobs"],r)}return e}function sm(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>Is(a))),l(e,["batchJobs"],r)}return e}function rm(t){const e={},n=i(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&l(e,["fileData"],Hp(r));const a=i(t,["functionCall"]);a!=null&&l(e,["functionCall"],Bp(a));const u=i(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&l(e,["inlineData"],Cp(d));const c=i(t,["text"]);c!=null&&l(e,["text"],c);const f=i(t,["thought"]);f!=null&&l(e,["thought"],f);const m=i(t,["thoughtSignature"]);m!=null&&l(e,["thoughtSignature"],m);const p=i(t,["videoMetadata"]);return p!=null&&l(e,["videoMetadata"],p),e}function im(t){const e={},n=i(t,["category"]);if(n!=null&&l(e,["category"],n),i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(t,["threshold"]);return o!=null&&l(e,["threshold"],o),e}function am(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],$p(n));const o=i(t,["retrievalConfig"]);return o!=null&&l(e,["retrievalConfig"],o),e}function lm(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),l(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);const a=i(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],Wp(u));const d=i(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],Yp(d));const c=i(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var He;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(He||(He={}));class Ct{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,r;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(r=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class um extends Be{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ct(He.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=pa(this.apiClient,e),o=n._url,s=D("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,d=u.requests,c=[];for(const f of d){const m=Object.assign({},f);if(m.systemInstruction){const p=m.systemInstruction;delete m.systemInstruction;const g=m.request;g.systemInstruction=p,m.request=g}c.push(m)}return u.requests=c,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const r=this.getGcsUri(e),a=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?o.dest=`${r.slice(0,-6)}/dest`:o.dest=`${r}_dest_${s}`;else if(a)o.dest=`${a}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Pp(this.apiClient,e);return u=D("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Is(f))}else{const c=pa(this.apiClient,e);return u=D("{model}:batchGenerateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>eo(f))}}async createEmbeddingsInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Mp(this.apiClient,e);return r=D("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>eo(d))}}async get(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=zp(this.apiClient,e);return u=D("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Is(f))}else{const c=Jp(this.apiClient,e);return u=D("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>eo(f))}}async cancel(e){var n,o,s,r;let a="",u={};if(this.apiClient.isVertexAI()){const d=Sp(this.apiClient,e);a=D("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=Ep(this.apiClient,e);a=D("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=nm(e);return u=D("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=sm(f),p=new ca;return Object.assign(p,m),p})}else{const c=tm(e);return u=D("batches",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=om(f),p=new ca;return Object.assign(p,m),p})}}async delete(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Fp(this.apiClient,e);return u=D("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>Lp(f))}else{const c=Dp(this.apiClient,e);return u=D("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>Up(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cm(t){const e={},n=i(t,["data"]);if(n!=null&&l(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function ma(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Mm(r))),l(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&l(e,["role"],o),e}function dm(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&l(e,["expireTime"],s);const r=i(t,["displayName"]);e!==void 0&&r!=null&&l(e,["displayName"],r);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let f=ve(a);Array.isArray(f)&&(f=f.map(m=>ma(m))),l(e,["contents"],f)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],ma(ae(u)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(m=>Fm(m))),l(e,["tools"],f)}const c=i(t,["toolConfig"]);if(e!==void 0&&c!=null&&l(e,["toolConfig"],Dm(c)),i(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function fm(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&l(e,["expireTime"],s);const r=i(t,["displayName"]);e!==void 0&&r!=null&&l(e,["displayName"],r);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let m=ve(a);Array.isArray(m)&&(m=m.map(p=>p)),l(e,["contents"],m)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],ae(u));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let m=d;Array.isArray(m)&&(m=m.map(p=>Um(p))),l(e,["tools"],m)}const c=i(t,["toolConfig"]);e!==void 0&&c!=null&&l(e,["toolConfig"],c);const f=i(t,["kmsKeyName"]);return e!==void 0&&f!=null&&l(e,["encryption_spec","kmsKeyName"],f),n}function hm(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["model"],Ol(t,o));const s=i(e,["config"]);return s!=null&&dm(s,n),n}function pm(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["model"],Ol(t,o));const s=i(e,["config"]);return s!=null&&fm(s,n),n}function mm(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],$e(t,o)),n}function gm(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],$e(t,o)),n}function ym(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function vm(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function xm(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function _m(t){const e={},n=i(t,["id"]);n!=null&&l(e,["id"],n);const o=i(t,["args"]);o!=null&&l(e,["args"],o);const s=i(t,["name"]);if(s!=null&&l(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bm(t){const e={},n=i(t,["mode"]);n!=null&&l(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);if(o!=null&&l(e,["allowedFunctionNames"],o),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function wm(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&l(e,["description"],n);const o=i(t,["name"]);o!=null&&l(e,["name"],o);const s=i(t,["parameters"]);s!=null&&l(e,["parameters"],s);const r=i(t,["parametersJsonSchema"]);r!=null&&l(e,["parametersJsonSchema"],r);const a=i(t,["response"]);a!=null&&l(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function Tm(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],$e(t,o)),n}function Cm(t,e){const n={},o=i(e,["name"]);return o!=null&&l(n,["_url","name"],$e(t,o)),n}function Em(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function Sm(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function Im(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function Am(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function km(t){const e={},n=i(t,["config"]);return n!=null&&Im(n,e),e}function Nm(t){const e={},n=i(t,["config"]);return n!=null&&Am(n,e),e}function Pm(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["cachedContents"],r)}return e}function Rm(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["cachedContents"],r)}return e}function Mm(t){const e={},n=i(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&l(e,["fileData"],xm(r));const a=i(t,["functionCall"]);a!=null&&l(e,["functionCall"],_m(a));const u=i(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&l(e,["inlineData"],cm(d));const c=i(t,["text"]);c!=null&&l(e,["text"],c);const f=i(t,["thought"]);f!=null&&l(e,["thought"],f);const m=i(t,["thoughtSignature"]);m!=null&&l(e,["thoughtSignature"],m);const p=i(t,["videoMetadata"]);return p!=null&&l(e,["videoMetadata"],p),e}function Dm(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],bm(n));const o=i(t,["retrievalConfig"]);return o!=null&&l(e,["retrievalConfig"],o),e}function Fm(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),l(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);const a=i(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],Em(u));const d=i(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],Sm(d));const c=i(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}function Um(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>wm(p))),l(e,["functionDeclarations"],m)}const o=i(t,["retrieval"]);o!=null&&l(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&l(e,["googleSearchRetrieval"],s);const r=i(t,["computerUse"]);if(r!=null&&l(e,["computerUse"],r),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(t,["codeExecution"]);a!=null&&l(e,["codeExecution"],a);const u=i(t,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);const d=i(t,["googleMaps"]);d!=null&&l(e,["googleMaps"],d);const c=i(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],c);const f=i(t,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function Lm(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&l(e,["expireTime"],s),n}function Gm(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&l(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&l(e,["expireTime"],s),n}function qm(t,e){const n={},o=i(e,["name"]);o!=null&&l(n,["_url","name"],$e(t,o));const s=i(e,["config"]);return s!=null&&Lm(s,n),n}function Vm(t,e){const n={},o=i(e,["name"]);o!=null&&l(n,["_url","name"],$e(t,o));const s=i(e,["config"]);return s!=null&&Gm(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hm extends Be{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ct(He.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=pm(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const c=hm(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async get(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Cm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const c=Tm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async delete(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=gm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=vm(f),p=new la;return Object.assign(p,m),p})}else{const c=mm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=ym(f),p=new la;return Object.assign(p,m),p})}}async update(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Vm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const c=qm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async listInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Nm(e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Rm(f),p=new ua;return Object.assign(p,m),p})}else{const c=km(e);return u=D("cachedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Pm(f),p=new ua;return Object.assign(p,m),p})}}}function yo(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n}function ga(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $(t){return this instanceof $?(this.v=t,this):new $(t)}function Ce(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(g){return function(x){return Promise.resolve(x).then(g,m)}}function u(g,x){o[g]&&(s[g]=function(v){return new Promise(function(_,y){r.push([g,v,_,y])>1||d(g,v)})},x&&(s[g]=x(s[g])))}function d(g,x){try{c(o[g](x))}catch(v){p(r[0][3],v)}}function c(g){g.value instanceof $?Promise.resolve(g.value.v).then(f,m):p(r[0][2],g)}function f(g){d("next",g)}function m(g){d("throw",g)}function p(g,x){g(x),r.shift(),r.length&&d(r[0][0],r[0][1])}}function Ee(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ga=="function"?ga(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(r){n[r]=t[r]&&function(a){return new Promise(function(u,d){a=t[r](a),s(u,d,a.done,a.value)})}}function s(r,a,u,d){Promise.resolve(d).then(function(c){r({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bm(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:ou(n)}function ou(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function $m(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ya(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let r=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),r&&!ou(t[o])&&(r=!1),o++;r?e.push(...s):e.pop()}return e}class Om{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Km(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Km{constructor(e,n,o,s={},r=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=r,this.sendPromise=Promise.resolve(),$m(r)}async sendMessage(e){var n;await this.sendPromise;const o=ae(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,a,u;const d=await s,c=(a=(r=d.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content,f=d.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];f!=null&&(p=(u=f.slice(m))!==null&&u!==void 0?u:[]);const g=c?[c]:[];this.recordHistory(o,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const o=ae(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const r=await s;return this.processStreamResponse(r,o)}getHistory(e=!1){const n=e?ya(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Ce(this,arguments,function*(){var s,r,a,u,d,c;const f=[];try{for(var m=!0,p=Ee(e),g;g=yield $(p.next()),s=g.done,!s;m=!0){u=g.value,m=!1;const x=u;if(Bm(x)){const v=(c=(d=x.candidates)===null||d===void 0?void 0:d[0])===null||c===void 0?void 0:c.content;v!==void 0&&f.push(v)}yield yield $(x)}}catch(x){r={error:x}}finally{try{!m&&!s&&(a=p.return)&&(yield $(a.call(p)))}finally{if(r)throw r.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(r=>r.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...ya(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Io extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Io.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jm(t){const e={},n=i(t,["file"]);return n!=null&&l(e,["file"],n),e}function zm(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Wm(t){const e={},n=i(t,["name"]);return n!=null&&l(e,["_url","file"],Ql(n)),e}function Ym(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Qm(t){const e={},n=i(t,["name"]);return n!=null&&l(e,["_url","file"],Ql(n)),e}function jm(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function Xm(t){const e={},n=i(t,["config"]);return n!=null&&jm(n,e),e}function Zm(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eg extends Be{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ct(He.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Xm(e);return r=D("files",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Zm(d),f=new sp;return Object.assign(f,c),f})}}async createInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Jm(e);return r=D("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=zm(d),f=new rp;return Object.assign(f,c),f})}}async get(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Qm(e);return r=D("files/{file}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wm(e);return r=D("files/{file}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Ym(d),f=new ip;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function to(t){const e={},n=i(t,["data"]);if(n!=null&&l(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function tg(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>yg(r))),l(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&l(e,["role"],o),e}function ng(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function og(t){const e={},n=i(t,["id"]);n!=null&&l(e,["id"],n);const o=i(t,["args"]);o!=null&&l(e,["args"],o);const s=i(t,["name"]);if(s!=null&&l(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sg(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&l(e,["description"],n);const o=i(t,["name"]);o!=null&&l(e,["name"],o);const s=i(t,["parameters"]);s!=null&&l(e,["parameters"],s);const r=i(t,["parametersJsonSchema"]);r!=null&&l(e,["parametersJsonSchema"],r);const a=i(t,["response"]);a!=null&&l(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function rg(t){const e={},n=i(t,["modelSelectionConfig"]);n!=null&&l(e,["modelConfig"],n);const o=i(t,["responseJsonSchema"]);o!=null&&l(e,["responseJsonSchema"],o);const s=i(t,["audioTimestamp"]);s!=null&&l(e,["audioTimestamp"],s);const r=i(t,["candidateCount"]);r!=null&&l(e,["candidateCount"],r);const a=i(t,["enableAffectiveDialog"]);a!=null&&l(e,["enableAffectiveDialog"],a);const u=i(t,["frequencyPenalty"]);u!=null&&l(e,["frequencyPenalty"],u);const d=i(t,["logprobs"]);d!=null&&l(e,["logprobs"],d);const c=i(t,["maxOutputTokens"]);c!=null&&l(e,["maxOutputTokens"],c);const f=i(t,["mediaResolution"]);f!=null&&l(e,["mediaResolution"],f);const m=i(t,["presencePenalty"]);m!=null&&l(e,["presencePenalty"],m);const p=i(t,["responseLogprobs"]);p!=null&&l(e,["responseLogprobs"],p);const g=i(t,["responseMimeType"]);g!=null&&l(e,["responseMimeType"],g);const x=i(t,["responseModalities"]);x!=null&&l(e,["responseModalities"],x);const v=i(t,["responseSchema"]);v!=null&&l(e,["responseSchema"],v);const _=i(t,["routingConfig"]);_!=null&&l(e,["routingConfig"],_);const y=i(t,["seed"]);y!=null&&l(e,["seed"],y);const b=i(t,["speechConfig"]);b!=null&&l(e,["speechConfig"],b);const w=i(t,["stopSequences"]);w!=null&&l(e,["stopSequences"],w);const T=i(t,["temperature"]);T!=null&&l(e,["temperature"],T);const C=i(t,["thinkingConfig"]);C!=null&&l(e,["thinkingConfig"],C);const S=i(t,["topK"]);S!=null&&l(e,["topK"],S);const E=i(t,["topP"]);if(E!=null&&l(e,["topP"],E),i(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ig(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function ag(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function lg(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","responseModalities"],s);const r=i(t,["temperature"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig","temperature"],r);const a=i(t,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const m=i(t,["speechConfig"]);e!==void 0&&m!=null&&l(e,["setup","generationConfig","speechConfig"],ir(m));const p=i(t,["thinkingConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","thinkingConfig"],p);const g=i(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=i(t,["systemInstruction"]);e!==void 0&&x!=null&&l(e,["setup","systemInstruction"],tg(ae(x)));const v=i(t,["tools"]);if(e!==void 0&&v!=null){let S=Xt(v);Array.isArray(S)&&(S=S.map(E=>xg(jt(E)))),l(e,["setup","tools"],S)}const _=i(t,["sessionResumption"]);e!==void 0&&_!=null&&l(e,["setup","sessionResumption"],vg(_));const y=i(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&l(e,["setup","inputAudioTranscription"],y);const b=i(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&l(e,["setup","outputAudioTranscription"],b);const w=i(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&l(e,["setup","realtimeInputConfig"],w);const T=i(t,["contextWindowCompression"]);e!==void 0&&T!=null&&l(e,["setup","contextWindowCompression"],T);const C=i(t,["proactivity"]);if(e!==void 0&&C!=null&&l(e,["setup","proactivity"],C),i(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function ug(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig"],rg(o));const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","responseModalities"],s);const r=i(t,["temperature"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig","temperature"],r);const a=i(t,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const m=i(t,["speechConfig"]);e!==void 0&&m!=null&&l(e,["setup","generationConfig","speechConfig"],ir(m));const p=i(t,["thinkingConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","thinkingConfig"],p);const g=i(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=i(t,["systemInstruction"]);e!==void 0&&x!=null&&l(e,["setup","systemInstruction"],ae(x));const v=i(t,["tools"]);if(e!==void 0&&v!=null){let E=Xt(v);Array.isArray(E)&&(E=E.map(N=>_g(jt(N)))),l(e,["setup","tools"],E)}const _=i(t,["sessionResumption"]);e!==void 0&&_!=null&&l(e,["setup","sessionResumption"],_);const y=i(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&l(e,["setup","inputAudioTranscription"],y);const b=i(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&l(e,["setup","outputAudioTranscription"],b);const w=i(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&l(e,["setup","realtimeInputConfig"],w);const T=i(t,["contextWindowCompression"]);e!==void 0&&T!=null&&l(e,["setup","contextWindowCompression"],T);const C=i(t,["proactivity"]);e!==void 0&&C!=null&&l(e,["setup","proactivity"],C);const S=i(t,["explicitVadSignal"]);return e!==void 0&&S!=null&&l(e,["setup","explicitVadSignal"],S),n}function cg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["setup","model"],z(t,o));const s=i(e,["config"]);return s!=null&&l(n,["config"],lg(s,n)),n}function dg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["setup","model"],z(t,o));const s=i(e,["config"]);return s!=null&&l(n,["config"],ug(s,n)),n}function fg(t){const e={},n=i(t,["musicGenerationConfig"]);return n!=null&&l(e,["musicGenerationConfig"],n),e}function hg(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["weightedPrompts"],o)}return e}function pg(t){const e={},n=i(t,["media"]);if(n!=null){let c=Kl(n);Array.isArray(c)&&(c=c.map(f=>to(f))),l(e,["mediaChunks"],c)}const o=i(t,["audio"]);o!=null&&l(e,["audio"],to(zl(o)));const s=i(t,["audioStreamEnd"]);s!=null&&l(e,["audioStreamEnd"],s);const r=i(t,["video"]);r!=null&&l(e,["video"],to(Jl(r)));const a=i(t,["text"]);a!=null&&l(e,["text"],a);const u=i(t,["activityStart"]);u!=null&&l(e,["activityStart"],u);const d=i(t,["activityEnd"]);return d!=null&&l(e,["activityEnd"],d),e}function mg(t){const e={},n=i(t,["media"]);if(n!=null){let c=Kl(n);Array.isArray(c)&&(c=c.map(f=>f)),l(e,["mediaChunks"],c)}const o=i(t,["audio"]);o!=null&&l(e,["audio"],zl(o));const s=i(t,["audioStreamEnd"]);s!=null&&l(e,["audioStreamEnd"],s);const r=i(t,["video"]);r!=null&&l(e,["video"],Jl(r));const a=i(t,["text"]);a!=null&&l(e,["text"],a);const u=i(t,["activityStart"]);u!=null&&l(e,["activityStart"],u);const d=i(t,["activityEnd"]);return d!=null&&l(e,["activityEnd"],d),e}function gg(t){const e={},n=i(t,["setupComplete"]);n!=null&&l(e,["setupComplete"],n);const o=i(t,["serverContent"]);o!=null&&l(e,["serverContent"],o);const s=i(t,["toolCall"]);s!=null&&l(e,["toolCall"],s);const r=i(t,["toolCallCancellation"]);r!=null&&l(e,["toolCallCancellation"],r);const a=i(t,["usageMetadata"]);a!=null&&l(e,["usageMetadata"],bg(a));const u=i(t,["goAway"]);u!=null&&l(e,["goAway"],u);const d=i(t,["sessionResumptionUpdate"]);d!=null&&l(e,["sessionResumptionUpdate"],d);const c=i(t,["voiceActivityDetectionSignal"]);return c!=null&&l(e,["voiceActivityDetectionSignal"],c),e}function yg(t){const e={},n=i(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&l(e,["fileData"],ng(r));const a=i(t,["functionCall"]);a!=null&&l(e,["functionCall"],og(a));const u=i(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&l(e,["inlineData"],to(d));const c=i(t,["text"]);c!=null&&l(e,["text"],c);const f=i(t,["thought"]);f!=null&&l(e,["thought"],f);const m=i(t,["thoughtSignature"]);m!=null&&l(e,["thoughtSignature"],m);const p=i(t,["videoMetadata"]);return p!=null&&l(e,["videoMetadata"],p),e}function vg(t){const e={},n=i(t,["handle"]);if(n!=null&&l(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function xg(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),l(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);const a=i(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],ig(u));const d=i(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],ag(d));const c=i(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}function _g(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>sg(p))),l(e,["functionDeclarations"],m)}const o=i(t,["retrieval"]);o!=null&&l(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&l(e,["googleSearchRetrieval"],s);const r=i(t,["computerUse"]);if(r!=null&&l(e,["computerUse"],r),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(t,["codeExecution"]);a!=null&&l(e,["codeExecution"],a);const u=i(t,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);const d=i(t,["googleMaps"]);d!=null&&l(e,["googleMaps"],d);const c=i(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],c);const f=i(t,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function bg(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&l(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&l(e,["cachedContentTokenCount"],o);const s=i(t,["candidatesTokenCount"]);s!=null&&l(e,["responseTokenCount"],s);const r=i(t,["toolUsePromptTokenCount"]);r!=null&&l(e,["toolUsePromptTokenCount"],r);const a=i(t,["thoughtsTokenCount"]);a!=null&&l(e,["thoughtsTokenCount"],a);const u=i(t,["totalTokenCount"]);u!=null&&l(e,["totalTokenCount"],u);const d=i(t,["promptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(x=>x)),l(e,["promptTokensDetails"],g)}const c=i(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(x=>x)),l(e,["cacheTokensDetails"],g)}const f=i(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(x=>x)),l(e,["responseTokensDetails"],g)}const m=i(t,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(x=>x)),l(e,["toolUsePromptTokensDetails"],g)}const p=i(t,["trafficType"]);return p!=null&&l(e,["trafficType"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wg(t){const e={},n=i(t,["data"]);if(n!=null&&l(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Tg(t){const e={},n=i(t,["content"]);n!=null&&l(e,["content"],n);const o=i(t,["citationMetadata"]);o!=null&&l(e,["citationMetadata"],Cg(o));const s=i(t,["tokenCount"]);s!=null&&l(e,["tokenCount"],s);const r=i(t,["finishReason"]);r!=null&&l(e,["finishReason"],r);const a=i(t,["avgLogprobs"]);a!=null&&l(e,["avgLogprobs"],a);const u=i(t,["groundingMetadata"]);u!=null&&l(e,["groundingMetadata"],u);const d=i(t,["index"]);d!=null&&l(e,["index"],d);const c=i(t,["logprobsResult"]);c!=null&&l(e,["logprobsResult"],c);const f=i(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),l(e,["safetyRatings"],p)}const m=i(t,["urlContextMetadata"]);return m!=null&&l(e,["urlContextMetadata"],m),e}function Cg(t){const e={},n=i(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["citations"],o)}return e}function Eg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let r=ve(s);Array.isArray(r)&&(r=r.map(a=>a)),l(n,["contents"],r)}return n}function Sg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["tokensInfo"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),l(e,["tokensInfo"],s)}return e}function Ig(t){const e={},n=i(t,["values"]);n!=null&&l(e,["values"],n);const o=i(t,["statistics"]);return o!=null&&l(e,["statistics"],Ag(o)),e}function Ag(t){const e={},n=i(t,["truncated"]);n!=null&&l(e,["truncated"],n);const o=i(t,["token_count"]);return o!=null&&l(e,["tokenCount"],o),e}function Ao(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>L0(r))),l(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&l(e,["role"],o),e}function kg(t){const e={},n=i(t,["controlType"]);n!=null&&l(e,["controlType"],n);const o=i(t,["enableControlImageComputation"]);return o!=null&&l(e,["computeControl"],o),e}function Ng(t){const e={};if(i(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Pg(t,e){const n={},o=i(t,["systemInstruction"]);e!==void 0&&o!=null&&l(e,["systemInstruction"],ae(o));const s=i(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>au(u))),l(e,["tools"],a)}const r=i(t,["generationConfig"]);return e!==void 0&&r!=null&&l(e,["generationConfig"],w0(r)),n}function Rg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let a=ve(s);Array.isArray(a)&&(a=a.map(u=>Ao(u))),l(n,["contents"],a)}const r=i(e,["config"]);return r!=null&&Ng(r),n}function Mg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let a=ve(s);Array.isArray(a)&&(a=a.map(u=>u)),l(n,["contents"],a)}const r=i(e,["config"]);return r!=null&&Pg(r,n),n}function Dg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);o!=null&&l(e,["totalTokens"],o);const s=i(t,["cachedContentTokenCount"]);return s!=null&&l(e,["cachedContentTokenCount"],s),e}function Fg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);return o!=null&&l(e,["totalTokens"],o),e}function Ug(t,e){const n={},o=i(e,["model"]);return o!=null&&l(n,["_url","name"],z(t,o)),n}function Lg(t,e){const n={},o=i(e,["model"]);return o!=null&&l(n,["_url","name"],z(t,o)),n}function Gg(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function qg(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Vg(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&l(e,["parameters","negativePrompt"],s);const r=i(t,["numberOfImages"]);e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&l(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&l(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&l(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const m=i(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&l(e,["parameters","includeSafetyAttributes"],m);const p=i(t,["includeRaiReason"]);e!==void 0&&p!=null&&l(e,["parameters","includeRaiReason"],p);const g=i(t,["language"]);e!==void 0&&g!=null&&l(e,["parameters","language"],g);const x=i(t,["outputMimeType"]);e!==void 0&&x!=null&&l(e,["parameters","outputOptions","mimeType"],x);const v=i(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&l(e,["parameters","outputOptions","compressionQuality"],v);const _=i(t,["addWatermark"]);e!==void 0&&_!=null&&l(e,["parameters","addWatermark"],_);const y=i(t,["labels"]);e!==void 0&&y!=null&&l(e,["labels"],y);const b=i(t,["editMode"]);e!==void 0&&b!=null&&l(e,["parameters","editMode"],b);const w=i(t,["baseSteps"]);return e!==void 0&&w!=null&&l(e,["parameters","editConfig","baseSteps"],w),n}function Hg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const r=i(e,["referenceImages"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>$0(d))),l(n,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&Vg(a,n),n}function Bg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>ko(r))),l(e,["generatedImages"],s)}return e}function $g(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&l(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&l(e,["requests[]","title"],s);const r=i(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&l(e,["requests[]","outputDimensionality"],r),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Og(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&l(e,["instances[]","task_type"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&l(e,["instances[]","title"],s);const r=i(t,["outputDimensionality"]);e!==void 0&&r!=null&&l(e,["parameters","outputDimensionality"],r);const a=i(t,["mimeType"]);e!==void 0&&a!=null&&l(e,["instances[]","mimeType"],a);const u=i(t,["autoTruncate"]);return e!==void 0&&u!=null&&l(e,["parameters","autoTruncate"],u),n}function Kg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let u=or(t,s);Array.isArray(u)&&(u=u.map(d=>d)),l(n,["requests[]","content"],u)}const r=i(e,["config"]);r!=null&&$g(r,n);const a=i(e,["model"]);return a!==void 0&&l(n,["requests[]","model"],z(t,a)),n}function Jg(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let a=or(t,s);Array.isArray(a)&&(a=a.map(u=>u)),l(n,["instances[]","content"],a)}const r=i(e,["config"]);return r!=null&&Og(r,n),n}function zg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["embeddings"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["embeddings"],r)}const s=i(t,["metadata"]);return s!=null&&l(e,["metadata"],s),e}function Wg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["predictions[]","embeddings"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>Ig(a))),l(e,["embeddings"],r)}const s=i(t,["metadata"]);return s!=null&&l(e,["metadata"],s),e}function Yg(t){const e={},n=i(t,["endpoint"]);n!=null&&l(e,["name"],n);const o=i(t,["deployedModelId"]);return o!=null&&l(e,["deployedModelId"],o),e}function Qg(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function jg(t){const e={},n=i(t,["id"]);n!=null&&l(e,["id"],n);const o=i(t,["args"]);o!=null&&l(e,["args"],o);const s=i(t,["name"]);if(s!=null&&l(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Xg(t){const e={},n=i(t,["mode"]);n!=null&&l(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);if(o!=null&&l(e,["allowedFunctionNames"],o),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Zg(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&l(e,["description"],n);const o=i(t,["name"]);o!=null&&l(e,["name"],o);const s=i(t,["parameters"]);s!=null&&l(e,["parameters"],s);const r=i(t,["parametersJsonSchema"]);r!=null&&l(e,["parametersJsonSchema"],r);const a=i(t,["response"]);a!=null&&l(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function e0(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&l(n,["systemInstruction"],Ao(ae(s)));const r=i(e,["temperature"]);r!=null&&l(o,["temperature"],r);const a=i(e,["topP"]);a!=null&&l(o,["topP"],a);const u=i(e,["topK"]);u!=null&&l(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&l(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&l(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&l(o,["stopSequences"],f);const m=i(e,["responseLogprobs"]);m!=null&&l(o,["responseLogprobs"],m);const p=i(e,["logprobs"]);p!=null&&l(o,["logprobs"],p);const g=i(e,["presencePenalty"]);g!=null&&l(o,["presencePenalty"],g);const x=i(e,["frequencyPenalty"]);x!=null&&l(o,["frequencyPenalty"],x);const v=i(e,["seed"]);v!=null&&l(o,["seed"],v);const _=i(e,["responseMimeType"]);_!=null&&l(o,["responseMimeType"],_);const y=i(e,["responseSchema"]);y!=null&&l(o,["responseSchema"],sr(y));const b=i(e,["responseJsonSchema"]);if(b!=null&&l(o,["responseJsonSchema"],b),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=i(e,["safetySettings"]);if(n!==void 0&&w!=null){let O=w;Array.isArray(O)&&(O=O.map(K=>O0(K))),l(n,["safetySettings"],O)}const T=i(e,["tools"]);if(n!==void 0&&T!=null){let O=Xt(T);Array.isArray(O)&&(O=O.map(K=>j0(jt(K)))),l(n,["tools"],O)}const C=i(e,["toolConfig"]);if(n!==void 0&&C!=null&&l(n,["toolConfig"],Q0(C)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=i(e,["cachedContent"]);n!==void 0&&S!=null&&l(n,["cachedContent"],$e(t,S));const E=i(e,["responseModalities"]);E!=null&&l(o,["responseModalities"],E);const N=i(e,["mediaResolution"]);N!=null&&l(o,["mediaResolution"],N);const I=i(e,["speechConfig"]);if(I!=null&&l(o,["speechConfig"],rr(I)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=i(e,["thinkingConfig"]);P!=null&&l(o,["thinkingConfig"],P);const F=i(e,["imageConfig"]);F!=null&&l(o,["imageConfig"],I0(F));const Y=i(e,["enableEnhancedCivicAnswers"]);return Y!=null&&l(o,["enableEnhancedCivicAnswers"],Y),o}function t0(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&l(n,["systemInstruction"],ae(s));const r=i(e,["temperature"]);r!=null&&l(o,["temperature"],r);const a=i(e,["topP"]);a!=null&&l(o,["topP"],a);const u=i(e,["topK"]);u!=null&&l(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&l(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&l(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&l(o,["stopSequences"],f);const m=i(e,["responseLogprobs"]);m!=null&&l(o,["responseLogprobs"],m);const p=i(e,["logprobs"]);p!=null&&l(o,["logprobs"],p);const g=i(e,["presencePenalty"]);g!=null&&l(o,["presencePenalty"],g);const x=i(e,["frequencyPenalty"]);x!=null&&l(o,["frequencyPenalty"],x);const v=i(e,["seed"]);v!=null&&l(o,["seed"],v);const _=i(e,["responseMimeType"]);_!=null&&l(o,["responseMimeType"],_);const y=i(e,["responseSchema"]);y!=null&&l(o,["responseSchema"],sr(y));const b=i(e,["responseJsonSchema"]);b!=null&&l(o,["responseJsonSchema"],b);const w=i(e,["routingConfig"]);w!=null&&l(o,["routingConfig"],w);const T=i(e,["modelSelectionConfig"]);T!=null&&l(o,["modelConfig"],T);const C=i(e,["safetySettings"]);if(n!==void 0&&C!=null){let k=C;Array.isArray(k)&&(k=k.map(R=>R)),l(n,["safetySettings"],k)}const S=i(e,["tools"]);if(n!==void 0&&S!=null){let k=Xt(S);Array.isArray(k)&&(k=k.map(R=>au(jt(R)))),l(n,["tools"],k)}const E=i(e,["toolConfig"]);n!==void 0&&E!=null&&l(n,["toolConfig"],E);const N=i(e,["labels"]);n!==void 0&&N!=null&&l(n,["labels"],N);const I=i(e,["cachedContent"]);n!==void 0&&I!=null&&l(n,["cachedContent"],$e(t,I));const P=i(e,["responseModalities"]);P!=null&&l(o,["responseModalities"],P);const F=i(e,["mediaResolution"]);F!=null&&l(o,["mediaResolution"],F);const Y=i(e,["speechConfig"]);Y!=null&&l(o,["speechConfig"],rr(Y));const O=i(e,["audioTimestamp"]);O!=null&&l(o,["audioTimestamp"],O);const K=i(e,["thinkingConfig"]);K!=null&&l(o,["thinkingConfig"],K);const L=i(e,["imageConfig"]);if(L!=null&&l(o,["imageConfig"],A0(L)),i(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function va(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let a=ve(s);Array.isArray(a)&&(a=a.map(u=>Ao(u))),l(n,["contents"],a)}const r=i(e,["config"]);return r!=null&&l(n,["generationConfig"],e0(t,r,n)),n}function xa(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["contents"]);if(s!=null){let a=ve(s);Array.isArray(a)&&(a=a.map(u=>u)),l(n,["contents"],a)}const r=i(e,["config"]);return r!=null&&l(n,["generationConfig"],t0(t,r,n)),n}function _a(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>Tg(c))),l(e,["candidates"],d)}const s=i(t,["modelVersion"]);s!=null&&l(e,["modelVersion"],s);const r=i(t,["promptFeedback"]);r!=null&&l(e,["promptFeedback"],r);const a=i(t,["responseId"]);a!=null&&l(e,["responseId"],a);const u=i(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function ba(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),l(e,["candidates"],c)}const s=i(t,["createTime"]);s!=null&&l(e,["createTime"],s);const r=i(t,["modelVersion"]);r!=null&&l(e,["modelVersion"],r);const a=i(t,["promptFeedback"]);a!=null&&l(e,["promptFeedback"],a);const u=i(t,["responseId"]);u!=null&&l(e,["responseId"],u);const d=i(t,["usageMetadata"]);return d!=null&&l(e,["usageMetadata"],d),e}function n0(t,e){const n={};if(i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=i(t,["aspectRatio"]);e!==void 0&&s!=null&&l(e,["parameters","aspectRatio"],s);const r=i(t,["guidanceScale"]);if(e!==void 0&&r!=null&&l(e,["parameters","guidanceScale"],r),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&l(e,["parameters","safetySetting"],a);const u=i(t,["personGeneration"]);e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u);const d=i(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&l(e,["parameters","includeSafetyAttributes"],d);const c=i(t,["includeRaiReason"]);e!==void 0&&c!=null&&l(e,["parameters","includeRaiReason"],c);const f=i(t,["language"]);e!==void 0&&f!=null&&l(e,["parameters","language"],f);const m=i(t,["outputMimeType"]);e!==void 0&&m!=null&&l(e,["parameters","outputOptions","mimeType"],m);const p=i(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&l(e,["parameters","outputOptions","compressionQuality"],p),i(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=i(t,["imageSize"]);if(e!==void 0&&g!=null&&l(e,["parameters","sampleImageSize"],g),i(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function o0(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&l(e,["parameters","negativePrompt"],s);const r=i(t,["numberOfImages"]);e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&l(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&l(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&l(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const m=i(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&l(e,["parameters","includeSafetyAttributes"],m);const p=i(t,["includeRaiReason"]);e!==void 0&&p!=null&&l(e,["parameters","includeRaiReason"],p);const g=i(t,["language"]);e!==void 0&&g!=null&&l(e,["parameters","language"],g);const x=i(t,["outputMimeType"]);e!==void 0&&x!=null&&l(e,["parameters","outputOptions","mimeType"],x);const v=i(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&l(e,["parameters","outputOptions","compressionQuality"],v);const _=i(t,["addWatermark"]);e!==void 0&&_!=null&&l(e,["parameters","addWatermark"],_);const y=i(t,["labels"]);e!==void 0&&y!=null&&l(e,["labels"],y);const b=i(t,["imageSize"]);e!==void 0&&b!=null&&l(e,["parameters","sampleImageSize"],b);const w=i(t,["enhancePrompt"]);return e!==void 0&&w!=null&&l(e,["parameters","enhancePrompt"],w),n}function s0(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const r=i(e,["config"]);return r!=null&&n0(r,n),n}function r0(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const r=i(e,["config"]);return r!=null&&o0(r,n),n}function i0(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>v0(a))),l(e,["generatedImages"],r)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&l(e,["positivePromptSafetyAttributes"],ru(s)),e}function a0(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>ko(a))),l(e,["generatedImages"],r)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&l(e,["positivePromptSafetyAttributes"],iu(s)),e}function l0(t,e){const n={},o=i(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o),i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=i(t,["durationSeconds"]);if(e!==void 0&&s!=null&&l(e,["parameters","durationSeconds"],s),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=i(t,["aspectRatio"]);e!==void 0&&r!=null&&l(e,["parameters","aspectRatio"],r);const a=i(t,["resolution"]);e!==void 0&&a!=null&&l(e,["parameters","resolution"],a);const u=i(t,["personGeneration"]);if(e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u),i(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=i(t,["negativePrompt"]);e!==void 0&&d!=null&&l(e,["parameters","negativePrompt"],d);const c=i(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&l(e,["parameters","enhancePrompt"],c),i(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=i(t,["lastFrame"]);e!==void 0&&f!=null&&l(e,["instances[0]","lastFrame"],No(f));const m=i(t,["referenceImages"]);if(e!==void 0&&m!=null){let p=m;Array.isArray(p)&&(p=p.map(g=>cy(g))),l(e,["instances[0]","referenceImages"],p)}if(i(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(i(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function u0(t,e){const n={},o=i(t,["numberOfVideos"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=i(t,["outputGcsUri"]);e!==void 0&&s!=null&&l(e,["parameters","storageUri"],s);const r=i(t,["fps"]);e!==void 0&&r!=null&&l(e,["parameters","fps"],r);const a=i(t,["durationSeconds"]);e!==void 0&&a!=null&&l(e,["parameters","durationSeconds"],a);const u=i(t,["seed"]);e!==void 0&&u!=null&&l(e,["parameters","seed"],u);const d=i(t,["aspectRatio"]);e!==void 0&&d!=null&&l(e,["parameters","aspectRatio"],d);const c=i(t,["resolution"]);e!==void 0&&c!=null&&l(e,["parameters","resolution"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const m=i(t,["pubsubTopic"]);e!==void 0&&m!=null&&l(e,["parameters","pubsubTopic"],m);const p=i(t,["negativePrompt"]);e!==void 0&&p!=null&&l(e,["parameters","negativePrompt"],p);const g=i(t,["enhancePrompt"]);e!==void 0&&g!=null&&l(e,["parameters","enhancePrompt"],g);const x=i(t,["generateAudio"]);e!==void 0&&x!=null&&l(e,["parameters","generateAudio"],x);const v=i(t,["lastFrame"]);e!==void 0&&v!=null&&l(e,["instances[0]","lastFrame"],Se(v));const _=i(t,["referenceImages"]);if(e!==void 0&&_!=null){let w=_;Array.isArray(w)&&(w=w.map(T=>dy(T))),l(e,["instances[0]","referenceImages"],w)}const y=i(t,["mask"]);e!==void 0&&y!=null&&l(e,["instances[0]","mask"],uy(y));const b=i(t,["compressionQuality"]);return e!==void 0&&b!=null&&l(e,["parameters","compressionQuality"],b),n}function c0(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response","generateVideoResponse"]);return a!=null&&l(e,["response"],p0(a)),e}function d0(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response"]);return a!=null&&l(e,["response"],m0(a)),e}function f0(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const r=i(e,["image"]);r!=null&&l(n,["instances[0]","image"],No(r));const a=i(e,["video"]);a!=null&&l(n,["instances[0]","video"],lu(a));const u=i(e,["source"]);u!=null&&g0(u,n);const d=i(e,["config"]);return d!=null&&l0(d,n),n}function h0(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["prompt"]);s!=null&&l(n,["instances[0]","prompt"],s);const r=i(e,["image"]);r!=null&&l(n,["instances[0]","image"],Se(r));const a=i(e,["video"]);a!=null&&l(n,["instances[0]","video"],uu(a));const u=i(e,["source"]);u!=null&&y0(u,n);const d=i(e,["config"]);return d!=null&&u0(d,n),n}function p0(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>_0(a))),l(e,["generatedVideos"],r)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&l(e,["raiMediaFilteredReasons"],s),e}function m0(t){const e={},n=i(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>b0(a))),l(e,["generatedVideos"],r)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&l(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&l(e,["raiMediaFilteredReasons"],s),e}function g0(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&l(e,["instances[0]","image"],No(s));const r=i(t,["video"]);return e!==void 0&&r!=null&&l(e,["instances[0]","video"],lu(r)),n}function y0(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&l(e,["instances[0]","image"],Se(s));const r=i(t,["video"]);return e!==void 0&&r!=null&&l(e,["instances[0]","video"],uu(r)),n}function v0(t){const e={},n=i(t,["_self"]);n!=null&&l(e,["image"],k0(n));const o=i(t,["raiFilteredReason"]);o!=null&&l(e,["raiFilteredReason"],o);const s=i(t,["_self"]);return s!=null&&l(e,["safetyAttributes"],ru(s)),e}function ko(t){const e={},n=i(t,["_self"]);n!=null&&l(e,["image"],su(n));const o=i(t,["raiFilteredReason"]);o!=null&&l(e,["raiFilteredReason"],o);const s=i(t,["_self"]);s!=null&&l(e,["safetyAttributes"],iu(s));const r=i(t,["prompt"]);return r!=null&&l(e,["enhancedPrompt"],r),e}function x0(t){const e={},n=i(t,["_self"]);n!=null&&l(e,["mask"],su(n));const o=i(t,["labels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),l(e,["labels"],s)}return e}function _0(t){const e={},n=i(t,["video"]);return n!=null&&l(e,["video"],ay(n)),e}function b0(t){const e={},n=i(t,["_self"]);return n!=null&&l(e,["video"],ly(n)),e}function w0(t){const e={},n=i(t,["modelSelectionConfig"]);n!=null&&l(e,["modelConfig"],n);const o=i(t,["responseJsonSchema"]);o!=null&&l(e,["responseJsonSchema"],o);const s=i(t,["audioTimestamp"]);s!=null&&l(e,["audioTimestamp"],s);const r=i(t,["candidateCount"]);r!=null&&l(e,["candidateCount"],r);const a=i(t,["enableAffectiveDialog"]);a!=null&&l(e,["enableAffectiveDialog"],a);const u=i(t,["frequencyPenalty"]);u!=null&&l(e,["frequencyPenalty"],u);const d=i(t,["logprobs"]);d!=null&&l(e,["logprobs"],d);const c=i(t,["maxOutputTokens"]);c!=null&&l(e,["maxOutputTokens"],c);const f=i(t,["mediaResolution"]);f!=null&&l(e,["mediaResolution"],f);const m=i(t,["presencePenalty"]);m!=null&&l(e,["presencePenalty"],m);const p=i(t,["responseLogprobs"]);p!=null&&l(e,["responseLogprobs"],p);const g=i(t,["responseMimeType"]);g!=null&&l(e,["responseMimeType"],g);const x=i(t,["responseModalities"]);x!=null&&l(e,["responseModalities"],x);const v=i(t,["responseSchema"]);v!=null&&l(e,["responseSchema"],v);const _=i(t,["routingConfig"]);_!=null&&l(e,["routingConfig"],_);const y=i(t,["seed"]);y!=null&&l(e,["seed"],y);const b=i(t,["speechConfig"]);b!=null&&l(e,["speechConfig"],b);const w=i(t,["stopSequences"]);w!=null&&l(e,["stopSequences"],w);const T=i(t,["temperature"]);T!=null&&l(e,["temperature"],T);const C=i(t,["thinkingConfig"]);C!=null&&l(e,["thinkingConfig"],C);const S=i(t,["topK"]);S!=null&&l(e,["topK"],S);const E=i(t,["topP"]);if(E!=null&&l(e,["topP"],E),i(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function T0(t,e){const n={},o=i(e,["model"]);return o!=null&&l(n,["_url","name"],z(t,o)),n}function C0(t,e){const n={},o=i(e,["model"]);return o!=null&&l(n,["_url","name"],z(t,o)),n}function E0(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function S0(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function I0(t){const e={},n=i(t,["aspectRatio"]);n!=null&&l(e,["aspectRatio"],n);const o=i(t,["imageSize"]);if(o!=null&&l(e,["imageSize"],o),i(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function A0(t){const e={},n=i(t,["aspectRatio"]);n!=null&&l(e,["aspectRatio"],n);const o=i(t,["imageSize"]);o!=null&&l(e,["imageSize"],o);const s=i(t,["outputMimeType"]);s!=null&&l(e,["imageOutputOptions","mimeType"],s);const r=i(t,["outputCompressionQuality"]);return r!=null&&l(e,["imageOutputOptions","compressionQuality"],r),e}function k0(t){const e={},n=i(t,["bytesBase64Encoded"]);n!=null&&l(e,["imageBytes"],at(n));const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function su(t){const e={},n=i(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&l(e,["imageBytes"],at(o));const s=i(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}function No(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=i(t,["imageBytes"]);n!=null&&l(e,["bytesBase64Encoded"],at(n));const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Se(t){const e={},n=i(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const o=i(t,["imageBytes"]);o!=null&&l(e,["bytesBase64Encoded"],at(o));const s=i(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}function N0(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&l(n,["_query","pageSize"],s);const r=i(e,["pageToken"]);n!==void 0&&r!=null&&l(n,["_query","pageToken"],r);const a=i(e,["filter"]);n!==void 0&&a!=null&&l(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],jl(t,u)),o}function P0(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&l(n,["_query","pageSize"],s);const r=i(e,["pageToken"]);n!==void 0&&r!=null&&l(n,["_query","pageToken"],r);const a=i(e,["filter"]);n!==void 0&&a!=null&&l(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],jl(t,u)),o}function R0(t,e){const n={},o=i(e,["config"]);return o!=null&&N0(t,o,n),n}function M0(t,e){const n={},o=i(e,["config"]);return o!=null&&P0(t,o,n),n}function D0(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let r=Xl(s);Array.isArray(r)&&(r=r.map(a=>As(a))),l(e,["models"],r)}return e}function F0(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let r=Xl(s);Array.isArray(r)&&(r=r.map(a=>ks(a))),l(e,["models"],r)}return e}function U0(t){const e={},n=i(t,["maskMode"]);n!=null&&l(e,["maskMode"],n);const o=i(t,["segmentationClasses"]);o!=null&&l(e,["maskClasses"],o);const s=i(t,["maskDilation"]);return s!=null&&l(e,["dilation"],s),e}function As(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["displayName"]);o!=null&&l(e,["displayName"],o);const s=i(t,["description"]);s!=null&&l(e,["description"],s);const r=i(t,["version"]);r!=null&&l(e,["version"],r);const a=i(t,["_self"]);a!=null&&l(e,["tunedModelInfo"],X0(a));const u=i(t,["inputTokenLimit"]);u!=null&&l(e,["inputTokenLimit"],u);const d=i(t,["outputTokenLimit"]);d!=null&&l(e,["outputTokenLimit"],d);const c=i(t,["supportedGenerationMethods"]);c!=null&&l(e,["supportedActions"],c);const f=i(t,["temperature"]);f!=null&&l(e,["temperature"],f);const m=i(t,["maxTemperature"]);m!=null&&l(e,["maxTemperature"],m);const p=i(t,["topP"]);p!=null&&l(e,["topP"],p);const g=i(t,["topK"]);g!=null&&l(e,["topK"],g);const x=i(t,["thinking"]);return x!=null&&l(e,["thinking"],x),e}function ks(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["displayName"]);o!=null&&l(e,["displayName"],o);const s=i(t,["description"]);s!=null&&l(e,["description"],s);const r=i(t,["versionId"]);r!=null&&l(e,["version"],r);const a=i(t,["deployedModels"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(p=>Yg(p))),l(e,["endpoints"],m)}const u=i(t,["labels"]);u!=null&&l(e,["labels"],u);const d=i(t,["_self"]);d!=null&&l(e,["tunedModelInfo"],Z0(d));const c=i(t,["defaultCheckpointId"]);c!=null&&l(e,["defaultCheckpointId"],c);const f=i(t,["checkpoints"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(p=>p)),l(e,["checkpoints"],m)}return e}function L0(t){const e={},n=i(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&l(e,["fileData"],Qg(r));const a=i(t,["functionCall"]);a!=null&&l(e,["functionCall"],jg(a));const u=i(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&l(e,["inlineData"],wg(d));const c=i(t,["text"]);c!=null&&l(e,["text"],c);const f=i(t,["thought"]);f!=null&&l(e,["thought"],f);const m=i(t,["thoughtSignature"]);m!=null&&l(e,["thoughtSignature"],m);const p=i(t,["videoMetadata"]);return p!=null&&l(e,["videoMetadata"],p),e}function G0(t){const e={},n=i(t,["productImage"]);return n!=null&&l(e,["image"],Se(n)),e}function q0(t,e){const n={},o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=i(t,["baseSteps"]);e!==void 0&&s!=null&&l(e,["parameters","baseSteps"],s);const r=i(t,["outputGcsUri"]);e!==void 0&&r!=null&&l(e,["parameters","storageUri"],r);const a=i(t,["seed"]);e!==void 0&&a!=null&&l(e,["parameters","seed"],a);const u=i(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&l(e,["parameters","safetySetting"],u);const d=i(t,["personGeneration"]);e!==void 0&&d!=null&&l(e,["parameters","personGeneration"],d);const c=i(t,["addWatermark"]);e!==void 0&&c!=null&&l(e,["parameters","addWatermark"],c);const f=i(t,["outputMimeType"]);e!==void 0&&f!=null&&l(e,["parameters","outputOptions","mimeType"],f);const m=i(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&l(e,["parameters","outputOptions","compressionQuality"],m);const p=i(t,["enhancePrompt"]);e!==void 0&&p!=null&&l(e,["parameters","enhancePrompt"],p);const g=i(t,["labels"]);return e!==void 0&&g!=null&&l(e,["labels"],g),n}function V0(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["source"]);s!=null&&B0(s,n);const r=i(e,["config"]);return r!=null&&q0(r,n),n}function H0(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ko(s))),l(e,["generatedImages"],o)}return e}function B0(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const s=i(t,["personImage"]);e!==void 0&&s!=null&&l(e,["instances[0]","personImage","image"],Se(s));const r=i(t,["productImages"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>G0(u))),l(e,["instances[0]","productImages"],a)}return n}function $0(t){const e={},n=i(t,["referenceImage"]);n!=null&&l(e,["referenceImage"],Se(n));const o=i(t,["referenceId"]);o!=null&&l(e,["referenceId"],o);const s=i(t,["referenceType"]);s!=null&&l(e,["referenceType"],s);const r=i(t,["maskImageConfig"]);r!=null&&l(e,["maskImageConfig"],U0(r));const a=i(t,["controlImageConfig"]);a!=null&&l(e,["controlImageConfig"],kg(a));const u=i(t,["styleImageConfig"]);u!=null&&l(e,["styleImageConfig"],u);const d=i(t,["subjectImageConfig"]);return d!=null&&l(e,["subjectImageConfig"],d),e}function ru(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&l(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&l(e,["contentType"],s),e}function iu(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&l(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&l(e,["contentType"],s),e}function O0(t){const e={},n=i(t,["category"]);if(n!=null&&l(e,["category"],n),i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(t,["threshold"]);return o!=null&&l(e,["threshold"],o),e}function K0(t){const e={},n=i(t,["image"]);return n!=null&&l(e,["image"],Se(n)),e}function J0(t,e){const n={},o=i(t,["mode"]);e!==void 0&&o!=null&&l(e,["parameters","mode"],o);const s=i(t,["maxPredictions"]);e!==void 0&&s!=null&&l(e,["parameters","maxPredictions"],s);const r=i(t,["confidenceThreshold"]);e!==void 0&&r!=null&&l(e,["parameters","confidenceThreshold"],r);const a=i(t,["maskDilation"]);e!==void 0&&a!=null&&l(e,["parameters","maskDilation"],a);const u=i(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&l(e,["parameters","binaryColorThreshold"],u);const d=i(t,["labels"]);return e!==void 0&&d!=null&&l(e,["labels"],d),n}function z0(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["source"]);s!=null&&Y0(s,n);const r=i(e,["config"]);return r!=null&&J0(r,n),n}function W0(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>x0(s))),l(e,["generatedMasks"],o)}return e}function Y0(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&l(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&l(e,["instances[0]","image"],Se(s));const r=i(t,["scribbleImage"]);return e!==void 0&&r!=null&&l(e,["instances[0]","scribble"],K0(r)),n}function Q0(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],Xg(n));const o=i(t,["retrievalConfig"]);return o!=null&&l(e,["retrievalConfig"],o),e}function j0(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),l(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);const a=i(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],E0(u));const d=i(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],S0(d));const c=i(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}function au(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Zg(p))),l(e,["functionDeclarations"],m)}const o=i(t,["retrieval"]);o!=null&&l(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&l(e,["googleSearchRetrieval"],s);const r=i(t,["computerUse"]);if(r!=null&&l(e,["computerUse"],r),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(t,["codeExecution"]);a!=null&&l(e,["codeExecution"],a);const u=i(t,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);const d=i(t,["googleMaps"]);d!=null&&l(e,["googleMaps"],d);const c=i(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],c);const f=i(t,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function X0(t){const e={},n=i(t,["baseModel"]);n!=null&&l(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&l(e,["updateTime"],s),e}function Z0(t){const e={},n=i(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&l(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&l(e,["updateTime"],s),e}function ey(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&l(e,["description"],s);const r=i(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&l(e,["defaultCheckpointId"],r),n}function ty(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&l(e,["description"],s);const r=i(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&l(e,["defaultCheckpointId"],r),n}function ny(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","name"],z(t,o));const s=i(e,["config"]);return s!=null&&ey(s,n),n}function oy(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["config"]);return s!=null&&ty(s,n),n}function sy(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const s=i(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&l(e,["parameters","safetySetting"],s);const r=i(t,["personGeneration"]);e!==void 0&&r!=null&&l(e,["parameters","personGeneration"],r);const a=i(t,["includeRaiReason"]);e!==void 0&&a!=null&&l(e,["parameters","includeRaiReason"],a);const u=i(t,["outputMimeType"]);e!==void 0&&u!=null&&l(e,["parameters","outputOptions","mimeType"],u);const d=i(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&l(e,["parameters","outputOptions","compressionQuality"],d);const c=i(t,["enhanceInputImage"]);e!==void 0&&c!=null&&l(e,["parameters","upscaleConfig","enhanceInputImage"],c);const f=i(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&l(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const m=i(t,["labels"]);e!==void 0&&m!=null&&l(e,["labels"],m);const p=i(t,["numberOfImages"]);e!==void 0&&p!=null&&l(e,["parameters","sampleCount"],p);const g=i(t,["mode"]);return e!==void 0&&g!=null&&l(e,["parameters","mode"],g),n}function ry(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["_url","model"],z(t,o));const s=i(e,["image"]);s!=null&&l(n,["instances[0]","image"],Se(s));const r=i(e,["upscaleFactor"]);r!=null&&l(n,["parameters","upscaleConfig","upscaleFactor"],r);const a=i(e,["config"]);return a!=null&&sy(a,n),n}function iy(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>ko(r))),l(e,["generatedImages"],s)}return e}function ay(t){const e={},n=i(t,["uri"]);n!=null&&l(e,["uri"],n);const o=i(t,["encodedVideo"]);o!=null&&l(e,["videoBytes"],at(o));const s=i(t,["encoding"]);return s!=null&&l(e,["mimeType"],s),e}function ly(t){const e={},n=i(t,["gcsUri"]);n!=null&&l(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&l(e,["videoBytes"],at(o));const s=i(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}function uy(t){const e={},n=i(t,["image"]);n!=null&&l(e,["_self"],Se(n));const o=i(t,["maskMode"]);return o!=null&&l(e,["maskMode"],o),e}function cy(t){const e={},n=i(t,["image"]);n!=null&&l(e,["image"],No(n));const o=i(t,["referenceType"]);return o!=null&&l(e,["referenceType"],o),e}function dy(t){const e={},n=i(t,["image"]);n!=null&&l(e,["image"],Se(n));const o=i(t,["referenceType"]);return o!=null&&l(e,["referenceType"],o),e}function lu(t){const e={},n=i(t,["uri"]);n!=null&&l(e,["uri"],n);const o=i(t,["videoBytes"]);o!=null&&l(e,["encodedVideo"],at(o));const s=i(t,["mimeType"]);return s!=null&&l(e,["encoding"],s),e}function uu(t){const e={},n=i(t,["uri"]);n!=null&&l(e,["gcsUri"],n);const o=i(t,["videoBytes"]);o!=null&&l(e,["bytesBase64Encoded"],at(o));const s=i(t,["mimeType"]);return s!=null&&l(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fy(t,e){const n={},o=i(t,["displayName"]);return e!==void 0&&o!=null&&l(e,["displayName"],o),n}function hy(t){const e={},n=i(t,["config"]);return n!=null&&fy(n,e),e}function py(t,e){const n={},o=i(t,["force"]);return e!==void 0&&o!=null&&l(e,["_query","force"],o),n}function my(t){const e={},n=i(t,["name"]);n!=null&&l(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&py(o,e),e}function gy(t){const e={},n=i(t,["name"]);return n!=null&&l(e,["_url","name"],n),e}function yy(t,e){const n={},o=i(t,["customMetadata"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["customMetadata"],r)}const s=i(t,["chunkingConfig"]);return e!==void 0&&s!=null&&l(e,["chunkingConfig"],s),n}function vy(t){const e={},n=i(t,["name"]);n!=null&&l(e,["name"],n);const o=i(t,["metadata"]);o!=null&&l(e,["metadata"],o);const s=i(t,["done"]);s!=null&&l(e,["done"],s);const r=i(t,["error"]);r!=null&&l(e,["error"],r);const a=i(t,["response"]);return a!=null&&l(e,["response"],_y(a)),e}function xy(t){const e={},n=i(t,["fileSearchStoreName"]);n!=null&&l(e,["_url","file_search_store_name"],n);const o=i(t,["fileName"]);o!=null&&l(e,["fileName"],o);const s=i(t,["config"]);return s!=null&&yy(s,e),e}function _y(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&l(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&l(e,["documentName"],s),e}function by(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function wy(t){const e={},n=i(t,["config"]);return n!=null&&by(n,e),e}function Ty(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["fileSearchStores"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["fileSearchStores"],r)}return e}function cu(t,e){const n={},o=i(t,["mimeType"]);e!==void 0&&o!=null&&l(e,["mimeType"],o);const s=i(t,["displayName"]);e!==void 0&&s!=null&&l(e,["displayName"],s);const r=i(t,["customMetadata"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),l(e,["customMetadata"],u)}const a=i(t,["chunkingConfig"]);return e!==void 0&&a!=null&&l(e,["chunkingConfig"],a),n}function Cy(t){const e={},n=i(t,["fileSearchStoreName"]);n!=null&&l(e,["_url","file_search_store_name"],n);const o=i(t,["config"]);return o!=null&&cu(o,e),e}function Ey(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sy="Content-Type",Iy="X-Server-Timeout",Ay="User-Agent",Ns="x-goog-api-client",ky="1.34.0",Ny=`google-genai-sdk/${ky}`,Py="v1beta1",Ry="v1beta";class My{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Py,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Ry,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))s.searchParams.append(a,String(u));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,s.toString(),e.abortSignal),this.unaryApiCall(s,r,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,r]of Object.entries(n))typeof r=="object"?o[s]=Object.assign(Object.assign({},o[s]),r):r!==void 0&&(o[s]=r);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,s.toString(),e.abortSignal),this.streamApiCall(s,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,s){if(n&&n.timeout||s){const r=new AbortController,a=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>r.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=a}return n&&n.extraBody!==null&&Dy(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await wa(s),new Es(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await wa(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Ce(this,arguments,function*(){var o;const s=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),r=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";const u="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:f}=yield $(s.read());if(c){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=r.decode(f,{stream:!0});try{const x=JSON.parse(m);if("error"in x){const v=JSON.parse(JSON.stringify(x.error)),_=v.status,y=v.code,b=`got status: ${_}. ${JSON.stringify(x)}`;if(y>=400&&y<600)throw new Io({message:b,status:y})}}catch(x){if(x.name==="ApiError")throw x}a+=m;let p=-1,g=0;for(;;){p=-1,g=0;for(const _ of d){const y=a.indexOf(_);y!==-1&&(p===-1||y<p)&&(p=y,g=_.length)}if(p===-1)break;const x=a.substring(0,p);a=a.substring(p+g);const v=x.trim();if(v.startsWith(u)){const _=v.substring(u.length).trim();try{const y=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield $(new Es(y))}catch(y){throw new Error(`exception parsing stream chunk ${_}. ${y}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=Ny+" "+this.clientOptions.userAgentExtra;return e[Ay]=n,e[Ns]=n,e[Sy]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))o.append(s,r);e.timeout&&e.timeout>0&&o.append(Iy,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const r=this.clientOptions.uploader,a=await r.stat(e);s.sizeBytes=String(a.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=u;const d={file:s},c=this.getFileName(e),f=D("upload/v1beta/files",d._url),m=await this.fetchUploadUrl(f,s.sizeBytes,s.mimeType,c,d,n==null?void 0:n.httpOptions);return r.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,o){var s;const r=this.clientOptions.uploader,a=await r.stat(n),u=String(a.size),d=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),m={};o!=null&&cu(o,m);const p=await this.fetchUploadUrl(c,u,d,f,m,o==null?void 0:o.httpOptions);return r.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,s,r,a){var u;let d={};a?d=a:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const c=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:d});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=c==null?void 0:c.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function wa(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new Io({message:s,status:n}):new Error(s)}}function Dy(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const r=JSON.parse(t.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(r,a){const u=Object.assign({},r);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const c=a[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const s=o(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fy="mcp_used/unknown";let Uy=!1;function du(t){for(const e of t)if(Ly(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Uy}function fu(t){var e;const n=(e=t[Ns])!==null&&e!==void 0?e:"";t[Ns]=(n+` ${Fy}`).trimStart()}function Ly(t){return t!==null&&typeof t=="object"&&t instanceof ar}function Gy(t){return Ce(this,arguments,function*(n,o=100){let s,r=0;for(;r<o;){const a=yield $(n.listTools({cursor:s}));for(const u of a.tools)yield yield $(u),r++;if(!a.nextCursor)break;s=a.nextCursor}})}class ar{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new ar(e,n)}async initialize(){var e,n,o,s;if(this.mcpTools.length>0)return;const r={},a=[];for(const f of this.mcpClients)try{for(var u=!0,d=(n=void 0,Ee(Gy(f))),c;c=await d.next(),e=c.done,!e;u=!0){s=c.value,u=!1;const m=s;a.push(m);const p=m.name;if(r[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);r[p]=f}}catch(m){n={error:m}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),gp(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const a=await s.callTool({name:o.name,arguments:o.args},void 0,r);n.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function qy(t,e,n){const o=new lp;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(o,s),e(o)}class Vy{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),a=$y(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(w=>{c=w}),m=e.callbacks,p=function(){c({})},g=this.apiClient,x={onopen:p,onmessage:w=>{qy(g,m.onmessage,w)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(w){},onclose:(o=m==null?void 0:m.onclose)!==null&&o!==void 0?o:function(w){}},v=this.webSocketFactory.create(d,By(a),x);v.connect(),await f;const b={setup:{model:z(this.apiClient,e.model)}};return v.send(JSON.stringify(b)),new Hy(v,this.apiClient)}}class Hy{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=hg(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=fg(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Pt.PLAY)}pause(){this.sendPlaybackControl(Pt.PAUSE)}stop(){this.sendPlaybackControl(Pt.STOP)}resetContext(){this.sendPlaybackControl(Pt.RESET_CONTEXT)}close(){this.conn.close()}}function By(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function $y(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Oy="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Ky(t,e,n){const o=new ap;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const r=JSON.parse(s);if(t.isVertexAI()){const a=gg(r);Object.assign(o,a)}else Object.assign(o,r);e(o)}class Jy{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new Vy(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,s,r,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&du(e.config.tools)&&fu(m);const p=Qy(m);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,f);else{const I=this.apiClient.getApiKey();let P="BidiGenerateContent",F="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",F="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${P}?${F}=${I}`}let g=()=>{};const x=new Promise(I=>{g=I}),v=e.callbacks,_=function(){var I;(I=v==null?void 0:v.onopen)===null||I===void 0||I.call(v),g({})},y=this.apiClient,b={onopen:_,onmessage:I=>{Ky(y,v.onmessage,I)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(I){},onclose:(o=v==null?void 0:v.onclose)!==null&&o!==void 0?o:function(I){}},w=this.webSocketFactory.create(f,Yy(p),b);w.connect(),await x;let T=z(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const I=this.apiClient.getProject(),P=this.apiClient.getLocation();T=`projects/${I}/locations/${P}/`+T}let C={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[po.AUDIO]}:e.config.responseModalities=[po.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const S=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],E=[];for(const I of S)if(this.isCallableTool(I)){const P=I;E.push(await P.tool())}else E.push(I);E.length>0&&(e.config.tools=E);const N={model:T,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?C=dg(this.apiClient,N):C=cg(this.apiClient,N),delete C.config,w.send(JSON.stringify(C)),new Wy(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const zy={turnComplete:!0};class Wy{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=ve(n.turns),e.isVertexAI()||(o=o.map(s=>Ao(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const r of o){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(Oy)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},zy),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:mg(e)}:n={realtimeInput:pg(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Yy(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function Qy(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ta=10;function Ca(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Lt(a)){s=!0;break}if(!s)return!0;const r=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Lt(t){return"callTool"in t&&typeof t.callTool=="function"}function jy(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Lt(s)))!==null&&o!==void 0?o:!1}function Ea(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,s)=>{if(Lt(o))return;const r=o;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(s)}),n}function Sa(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xy extends Be{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,s,r,a,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!jy(n)||Ca(n.config))return await this.generateContentInternal(d);const c=Ea(n);if(c.length>0){const v=c.map(_=>`tools[${_}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let f,m;const p=ve(d.contents),g=(r=(s=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:Ta;let x=0;for(;x<g&&(f=await this.generateContentInternal(d),!(!f.functionCalls||f.functionCalls.length===0));){const v=f.candidates[0].content,_=[];for(const y of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(Lt(y)){const w=await y.callTool(f.functionCalls);_.push(...w)}x++,m={role:"user",parts:_},d.contents=ve(d.contents),d.contents.push(v),d.contents.push(m),Sa(d.config)&&(p.push(v),p.push(m))}return Sa(d.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{var o,s,r,a,u;if(this.maybeMoveToResponseJsonSchem(n),Ca(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const d=Ea(n);if(d.length>0){const m=d.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(r=(s=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,f=(u=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var s;let r;const a=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?r=d==null?void 0:d.safetyAttributes:a.push(d);let u;return r?u={generatedImages:a,positivePromptSafetyAttributes:r,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Ct(He.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var o,s,r,a,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(r=n.source)===null||r===void 0?void 0:r.video)===null||a===void 0)&&a.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,s;const r=(n=e.config)===null||n===void 0?void 0:n.tools;if(!r)return e;const a=await Promise.all(r.map(async d=>Lt(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&du(e.config.tools)){const d=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),fu(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var n,o,s;const r=new Map;for(const a of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Lt(a)){const u=a,d=await u.tool();for(const c of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(r.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);r.set(c.name,u)}}return r}async processAfcStream(e){var n,o,s;const r=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Ta;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return function(c,f,m){return Ce(this,arguments,function*(){for(var p,g,x,v,_,y;u<r;){a&&(u++,a=!1);const C=yield $(c.processParamsMaybeAddMcpUsage(m)),S=yield $(c.generateContentStreamInternal(C)),E=[],N=[];try{for(var b=!0,w=(g=void 0,Ee(S)),T;T=yield $(w.next()),p=T.done,!p;b=!0){v=T.value,b=!1;const I=v;if(yield yield $(I),I.candidates&&(!((_=I.candidates[0])===null||_===void 0)&&_.content)){N.push(I.candidates[0].content);for(const P of(y=I.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(u<r&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(P.functionCall.name)){const F=yield $(f.get(P.functionCall.name).callTool([P.functionCall]));E.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(I){g={error:I}}finally{try{!b&&!p&&(x=w.return)&&(yield $(x.call(w)))}finally{if(g)throw g.error}}if(E.length>0){a=!0;const I=new on;I.candidates=[{content:{role:"user",parts:E}}],yield yield $(I);const P=[];P.push(...N),P.push({role:"user",parts:E});const F=ve(m.contents).concat(P);m.contents=F}else break}})}(this,d,e)}async generateContentInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=xa(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=ba(f),p=new on;return Object.assign(p,m),p})}else{const c=va(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=_a(f),p=new on;return Object.assign(p,m),p})}}async generateContentStreamInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=xa(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(m){return Ce(this,arguments,function*(){var p,g,x,v;try{for(var _=!0,y=Ee(m),b;b=yield $(y.next()),p=b.done,!p;_=!0){v=b.value,_=!1;const w=v,T=ba(yield $(w.json()));T.sdkHttpResponse={headers:w.headers};const C=new on;Object.assign(C,T),yield yield $(C)}}catch(w){g={error:w}}finally{try{!_&&!p&&(x=y.return)&&(yield $(x.call(y)))}finally{if(g)throw g.error}}})})}else{const c=va(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(m){return Ce(this,arguments,function*(){var p,g,x,v;try{for(var _=!0,y=Ee(m),b;b=yield $(y.next()),p=b.done,!p;_=!0){v=b.value,_=!1;const w=v,T=_a(yield $(w.json()));T.sdkHttpResponse={headers:w.headers};const C=new on;Object.assign(C,T),yield yield $(C)}}catch(w){g={error:w}}finally{try{!_&&!p&&(x=y.return)&&(yield $(x.call(y)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Jg(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Wg(f),p=new ta;return Object.assign(p,m),p})}else{const c=Kg(this.apiClient,e);return u=D("{model}:batchEmbedContents",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=zg(f),p=new ta;return Object.assign(p,m),p})}}async generateImagesInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=r0(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=a0(f),p=new na;return Object.assign(p,m),p})}else{const c=s0(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=i0(f),p=new na;return Object.assign(p,m),p})}}async editImageInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=Hg(this.apiClient,e);return r=D("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Bg(d),f=new Qh;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=ry(this.apiClient,e);return r=D("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=iy(d),f=new jh;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=V0(this.apiClient,e);return r=D("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=H0(d),f=new Xh;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=z0(this.apiClient,e);return r=D("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=W0(d),f=new Zh;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=C0(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>ks(f))}else{const c=T0(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>As(f))}}async listInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=M0(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=F0(f),p=new oa;return Object.assign(p,m),p})}else{const c=R0(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=D0(f),p=new oa;return Object.assign(p,m),p})}}async update(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=oy(this.apiClient,e);return u=D("{model}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>ks(f))}else{const c=ny(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>As(f))}}async delete(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Lg(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=qg(f),p=new sa;return Object.assign(p,m),p})}else{const c=Ug(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Gg(f),p=new sa;return Object.assign(p,m),p})}}async countTokens(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Mg(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Fg(f),p=new ra;return Object.assign(p,m),p})}else{const c=Rg(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Dg(f),p=new ra;return Object.assign(p,m),p})}}async computeTokens(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=Eg(this.apiClient,e);return r=D("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Sg(d),f=new ep;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=h0(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const m=d0(f),p=new mo;return Object.assign(p,m),p})}else{const c=f0(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>{const m=c0(f),p=new mo;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zy extends Be{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Oh(e);return u=D("{operationName}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a}else{const c=$h(e);return u=D("{operationName}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=Uh(e);return r=D("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ev(t){const e={},n=i(t,["data"]);if(n!=null&&l(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function tv(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>cv(r))),l(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&l(e,["role"],o),e}function nv(t,e,n){const o={},s=i(e,["expireTime"]);n!==void 0&&s!=null&&l(n,["expireTime"],s);const r=i(e,["newSessionExpireTime"]);n!==void 0&&r!=null&&l(n,["newSessionExpireTime"],r);const a=i(e,["uses"]);n!==void 0&&a!=null&&l(n,["uses"],a);const u=i(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&l(n,["bidiGenerateContentSetup"],uv(t,u));const d=i(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&l(n,["fieldMask"],d),o}function ov(t,e){const n={},o=i(e,["config"]);return o!=null&&l(n,["config"],nv(t,o,n)),n}function sv(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function rv(t){const e={},n=i(t,["id"]);n!=null&&l(e,["id"],n);const o=i(t,["args"]);o!=null&&l(e,["args"],o);const s=i(t,["name"]);if(s!=null&&l(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iv(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function av(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function lv(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","responseModalities"],s);const r=i(t,["temperature"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig","temperature"],r);const a=i(t,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const m=i(t,["speechConfig"]);e!==void 0&&m!=null&&l(e,["setup","generationConfig","speechConfig"],ir(m));const p=i(t,["thinkingConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","thinkingConfig"],p);const g=i(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=i(t,["systemInstruction"]);e!==void 0&&x!=null&&l(e,["setup","systemInstruction"],tv(ae(x)));const v=i(t,["tools"]);if(e!==void 0&&v!=null){let S=Xt(v);Array.isArray(S)&&(S=S.map(E=>fv(jt(E)))),l(e,["setup","tools"],S)}const _=i(t,["sessionResumption"]);e!==void 0&&_!=null&&l(e,["setup","sessionResumption"],dv(_));const y=i(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&l(e,["setup","inputAudioTranscription"],y);const b=i(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&l(e,["setup","outputAudioTranscription"],b);const w=i(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&l(e,["setup","realtimeInputConfig"],w);const T=i(t,["contextWindowCompression"]);e!==void 0&&T!=null&&l(e,["setup","contextWindowCompression"],T);const C=i(t,["proactivity"]);if(e!==void 0&&C!=null&&l(e,["setup","proactivity"],C),i(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function uv(t,e){const n={},o=i(e,["model"]);o!=null&&l(n,["setup","model"],z(t,o));const s=i(e,["config"]);return s!=null&&l(n,["config"],lv(s,n)),n}function cv(t){const e={},n=i(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const o=i(t,["codeExecutionResult"]);o!=null&&l(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&l(e,["executableCode"],s);const r=i(t,["fileData"]);r!=null&&l(e,["fileData"],sv(r));const a=i(t,["functionCall"]);a!=null&&l(e,["functionCall"],rv(a));const u=i(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const d=i(t,["inlineData"]);d!=null&&l(e,["inlineData"],ev(d));const c=i(t,["text"]);c!=null&&l(e,["text"],c);const f=i(t,["thought"]);f!=null&&l(e,["thought"],f);const m=i(t,["thoughtSignature"]);m!=null&&l(e,["thoughtSignature"],m);const p=i(t,["videoMetadata"]);return p!=null&&l(e,["videoMetadata"],p),e}function dv(t){const e={},n=i(t,["handle"]);if(n!=null&&l(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fv(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>m)),l(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&l(e,["computerUse"],s);const r=i(t,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);const a=i(t,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=i(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],iv(u));const d=i(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],av(d));const c=i(t,["urlContext"]);return c!=null&&l(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hv(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(r=>`${n}.${r}`);e.push(...s)}else e.push(n)}return e.join(",")}function pv(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const r=o.setup;typeof r=="object"&&r!==null?(t.bidiGenerateContentSetup=r,n=r):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const r=hv(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?t.fieldMask=r:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];s.length>0&&(u=s.map(c=>a.includes(c)?`generationConfig.${c}`:c));const d=[];r&&d.push(r),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class mv extends Be{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=ov(this.apiClient,e);r=D("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=pv(u,e.config);return s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gv(t,e){const n={},o=i(t,["force"]);return e!==void 0&&o!=null&&l(e,["_query","force"],o),n}function yv(t){const e={},n=i(t,["name"]);n!=null&&l(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&gv(o,e),e}function vv(t){const e={},n=i(t,["name"]);return n!=null&&l(e,["_url","name"],n),e}function xv(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&l(e,["_query","pageToken"],s),n}function _v(t){const e={},n=i(t,["parent"]);n!=null&&l(e,["_url","parent"],n);const o=i(t,["config"]);return o!=null&&xv(o,e),e}function bv(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&l(e,["nextPageToken"],o);const s=i(t,["documents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["documents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wv extends Be{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ct(He.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vv(e);return r=D("{name}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=yv(e);s=D("{name}",a._url),r=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_v(e);return r=D("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=bv(d),f=new tp;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tv extends Be{constructor(e,n=new wv(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new Ct(He.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hy(e);return r=D("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=gy(e);return r=D("{name}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=my(e);s=D("{name}",a._url),r=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=wy(e);return r=D("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Ty(d),f=new np;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Cy(e);return r=D("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Ey(d),f=new op;return Object.assign(f,c),f})}}async importFile(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=xy(e);return r=D("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=vy(d),f=new tr;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hu=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return hu=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const Cv=()=>hu();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ps(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Rs=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xe extends Error{}class he extends xe{constructor(e,n,o,s){super(`${he.makeMessage(e,n,o)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,o){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,o,s){if(!e||!s)return new Po({message:o,cause:Rs(n)});const r=n;return e===400?new mu(e,r,o,s):e===401?new gu(e,r,o,s):e===403?new yu(e,r,o,s):e===404?new vu(e,r,o,s):e===409?new xu(e,r,o,s):e===422?new _u(e,r,o,s):e===429?new bu(e,r,o,s):e>=500?new wu(e,r,o,s):new he(e,r,o,s)}}class Ms extends he{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Po extends he{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class pu extends Po{constructor({message:e}={}){super({message:e??"Request timed out."})}}class mu extends he{}class gu extends he{}class yu extends he{}class vu extends he{}class xu extends he{}class _u extends he{}class bu extends he{}class wu extends he{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ev=/^[a-z][a-z0-9+.-]*:/i,Sv=t=>Ev.test(t);let Ds=t=>(Ds=Array.isArray,Ds(t));const Iv=Ds;let Av=Iv;const Ia=Av;function kv(t){if(!t)return!0;for(const e in t)return!1;return!0}function Nv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Pv=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new xe(`${t} must be an integer`);if(e<0)throw new xe(`${t} must be a positive integer`);return e},Rv=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mv=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nt="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dv(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Fv=()=>{var t,e,n,o,s;const r=Dv();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nt,"X-Stainless-OS":ka(Deno.build.os),"X-Stainless-Arch":Aa(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nt,"X-Stainless-OS":ka((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Aa((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const a=Uv();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Uv(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const s=o[1]||0,r=o[2]||0,a=o[3]||0;return{browser:e,version:`${s}.${r}.${a}`}}}return null}const Aa=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",ka=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Bn;const Lv=()=>Bn??(Bn=Fv());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gv(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Tu(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function qv(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Tu({start(){},async pull(n){const{done:o,value:s}=await e.next();o?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Cu(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Vv(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),s=o.cancel();o.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hv=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Eu=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Oo(t,e,n){return Eu(),new File(t,e??"unknown_file",n)}function Bv(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const $v=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Su=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Ov=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Su(t),Kv=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Jv(t,e,n){if(Eu(),t=await t,Ov(t))return t instanceof File?t:Oo([await t.arrayBuffer()],t.name);if(Kv(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Oo(await Fs(s),e,n)}const o=await Fs(t);if(e||(e=Bv(t)),!(n!=null&&n.type)){const s=o.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Oo(o,e,n)}async function Fs(t){var e,n,o,s,r;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(Su(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if($v(t))try{for(var u=!0,d=Ee(t),c;c=await d.next(),e=c.done,!e;u=!0){s=c.value,u=!1;const f=s;a.push(...await Fs(f))}}catch(f){n={error:f}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}else{const f=(r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${zv(t)}`)}return a}function zv(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iu{constructor(e){this._client=e}}Iu._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Au(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Na=Object.freeze(Object.create(null)),Wv=(t=Au)=>function(n,...o){if(n.length===1)return n[0];let s=!1;const r=[],a=n.reduce((f,m,p)=>{var g,x,v;/[?#]/.test(m)&&(s=!0);const _=o[p];let y=(s?encodeURIComponent:t)(""+_);return p!==o.length&&(_==null||typeof _=="object"&&_.toString===((v=Object.getPrototypeOf((x=Object.getPrototypeOf((g=_.hasOwnProperty)!==null&&g!==void 0?g:Na))!==null&&x!==void 0?x:Na))===null||v===void 0?void 0:v.toString))&&(y=_+"",r.push({start:f.length+m.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),f+m+(p===o.length?"":y)},""),u=a.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=d.exec(u))!==null;)r.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(r.sort((f,m)=>f.start-m.start),r.length>0){let f=0;const m=r.reduce((p,g)=>{const x=" ".repeat(g.start-f),v="^".repeat(g.length);return f=g.start+g.length,p+x+v},"");throw new xe(`Path parameters result in path with invalid segments:
${r.map(p=>p.error).join(`
`)}
${a}
${m}`)}return a},$n=Wv(Au);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ku extends Iu{create(e,n){var o;const{api_version:s=this._client.apiVersion}=e,r=yo(e,["api_version"]);if("model"in r&&"agent_config"in r)throw new xe("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new xe("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post($n`/${s}/interactions`,Object.assign(Object.assign({body:r},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete($n`/${s}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post($n`/${s}/interactions/${e}/cancel`,o)}get(e,n={},o){var s;const r=n??{},{api_version:a=this._client.apiVersion}=r,u=yo(r,["api_version"]);return this._client.get($n`/${a}/interactions/${e}`,Object.assign(Object.assign({query:u},o),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}ku._key=Object.freeze(["interactions"]);class Nu extends ku{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yv(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let o=0;for(const s of t)n.set(s,o),o+=s.length;return n}let On;function lr(t){let e;return(On??(e=new globalThis.TextEncoder,On=e.encode.bind(e)))(t)}let Kn;function Pa(t){let e;return(Kn??(e=new globalThis.TextDecoder,Kn=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ro{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?lr(e):e;this.buffer=Yv([this.buffer,n]);const o=[];let s;for(;(s=Qv(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){o.push(Pa(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const r=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,a=Pa(this.buffer.subarray(0,r));o.push(a),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Ro.NEWLINE_CHARS=new Set([`
`,"\r"]);Ro.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Qv(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function jv(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vo={off:0,error:200,warn:300,info:400,debug:500},Ra=(t,e,n)=>{if(t){if(Nv(vo,t))return t;ue(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(vo))}`)}};function ln(){}function Jn(t,e,n){return!e||vo[t]>vo[n]?ln:e[t].bind(e)}const Xv={error:ln,warn:ln,info:ln,debug:ln};let Ma=new WeakMap;function ue(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return Xv;const s=Ma.get(n);if(s&&s[0]===o)return s[1];const r={error:Jn("error",n,o),warn:Jn("warn",n,o),info:Jn("info",n,o),debug:Jn("debug",n,o)};return Ma.set(n,[o,r]),r}const ut=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rt{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let s=!1;const r=o?ue(o):console;function a(){return Ce(this,arguments,function*(){var d,c,f,m;if(s)throw new xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let p=!1;try{try{for(var g=!0,x=Ee(Zv(e,n)),v;v=yield $(x.next()),d=v.done,!d;g=!0){m=v.value,g=!1;const _=m;if(!p)if(_.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield $(JSON.parse(_.data))}catch(y){throw r.error("Could not parse message into JSON:",_.data),r.error("From chunk:",_.raw),y}}}catch(_){c={error:_}}finally{try{!g&&!d&&(f=x.return)&&(yield $(f.call(x)))}finally{if(c)throw c.error}}p=!0}catch(_){if(Ps(_))return yield $(void 0);throw _}finally{p||n.abort()}})}return new Rt(a,n,o)}static fromReadableStream(e,n,o){let s=!1;function r(){return Ce(this,arguments,function*(){var d,c,f,m;const p=new Ro,g=Cu(e);try{for(var x=!0,v=Ee(g),_;_=yield $(v.next()),d=_.done,!d;x=!0){m=_.value,x=!1;const y=m;for(const b of p.decode(y))yield yield $(b)}}catch(y){c={error:y}}finally{try{!x&&!d&&(f=v.return)&&(yield $(f.call(v)))}finally{if(c)throw c.error}}for(const y of p.flush())yield yield $(y)})}function a(){return Ce(this,arguments,function*(){var d,c,f,m;if(s)throw new xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let p=!1;try{try{for(var g=!0,x=Ee(r()),v;v=yield $(x.next()),d=v.done,!d;g=!0){m=v.value,g=!1;const _=m;p||_&&(yield yield $(JSON.parse(_)))}}catch(_){c={error:_}}finally{try{!g&&!d&&(f=x.return)&&(yield $(f.call(x)))}finally{if(c)throw c.error}}p=!0}catch(_){if(Ps(_))return yield $(void 0);throw _}finally{p||n.abort()}})}return new Rt(a,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),s=r=>({next:()=>{if(r.length===0){const a=o.next();e.push(a),n.push(a)}return r.shift()}});return[new Rt(()=>s(e),this.controller,this.client),new Rt(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Tu({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:s,done:r}=await n.next();if(r)return o.close();const a=lr(JSON.stringify(s)+`
`);o.enqueue(a)}catch(s){o.error(s)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function Zv(t,e){return Ce(this,arguments,function*(){var o,s,r,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new xe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new xe("Attempted to iterate over a response with no body");const u=new tx,d=new Ro,c=Cu(t.body);try{for(var f=!0,m=Ee(ex(c)),p;p=yield $(m.next()),o=p.done,!o;f=!0){a=p.value,f=!1;const g=a;for(const x of d.decode(g)){const v=u.decode(x);v&&(yield yield $(v))}}}catch(g){s={error:g}}finally{try{!f&&!o&&(r=m.return)&&(yield $(r.call(m)))}finally{if(s)throw s.error}}for(const g of d.flush()){const x=u.decode(g);x&&(yield yield $(x))}})}function ex(t){return Ce(this,arguments,function*(){var n,o,s,r;let a=new Uint8Array;try{for(var u=!0,d=Ee(t),c;c=yield $(d.next()),n=c.done,!n;u=!0){r=c.value,u=!1;const f=r;if(f==null)continue;const m=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?lr(f):f;let p=new Uint8Array(a.length+m.length);p.set(a),p.set(m,a.length),a=p;let g;for(;(g=jv(a))!==-1;)yield yield $(a.slice(0,g)),a=a.slice(g)}}catch(f){o={error:f}}finally{try{!u&&!n&&(s=d.return)&&(yield $(s.call(d)))}finally{if(o)throw o.error}}a.length>0&&(yield yield $(a))})}class tx{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,s]=nx(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function nx(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ox(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:s,startTime:r}=e,a=await(async()=>{var u;if(e.options.stream)return ue(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Rt.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const d=n.headers.get("content-type"),c=(u=d==null?void 0:d.split(";")[0])===null||u===void 0?void 0:u.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return ue(t).debug(`[${o}] response parsed`,ut({retryOfRequestLogID:s,url:n.url,status:n.status,body:a,durationMs:Date.now()-r})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ur extends Promise{constructor(e,n,o=ox){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new ur(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pu=Symbol("brand.privateNullableHeaders");function*sx(t){if(!t)return;if(Pu in t){const{values:o,nulls:s}=t;yield*o.entries();for(const r of s)yield[r,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Ia(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const s=o[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const r=Ia(o[1])?o[1]:[o[1]];let a=!1;for(const u of r)u!==void 0&&(e&&!a&&(a=!0,yield[s,null]),yield[s,u])}}const sn=t=>{const e=new Headers,n=new Set;for(const o of t){const s=new Set;for(const[r,a]of sx(o)){const u=r.toLowerCase();s.has(u)||(e.delete(r),s.add(u)),a===null?(e.delete(r),n.add(u)):(e.append(r,a),n.delete(u))}}return{[Pu]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ko=t=>{var e,n,o,s,r,a;if(typeof globalThis.process<"u")return(o=(n=(e=Nh)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(a=(r=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||r===void 0?void 0:r.call(s,t))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ru;class Mo{constructor(e){var n,o,s,r,a,u,d,{baseURL:c=Ko("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=Ko("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,p=yo(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:f,apiVersion:m},p),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(o=g.timeout)!==null&&o!==void 0?o:Mo.DEFAULT_TIMEOUT,this.logger=(s=g.logger)!==null&&s!==void 0?s:console;const x="warn";this.logLevel=x,this.logLevel=(a=(r=Ra(g.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:Ra(Ko("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:x,this.fetchOptions=g.fetchOptions,this.maxRetries=(u=g.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(d=g.fetch)!==null&&d!==void 0?d:Gv(),this.encoder=Hv,this._options=g,this.apiKey=f,this.apiVersion=m,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=sn([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return sn([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return sn([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new xe(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Nt}`}defaultIdempotencyKey(){return`stainless-node-retry-${Cv()}`}makeStatusError(e,n,o,s){return he.generate(e,n,o,s)}buildURL(e,n,o){const s=!this.baseURLOverridden()&&o||this.baseURL,r=Sv(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return kv(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new ur(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var s,r,a;const u=await e,d=(s=u.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=d),await this.prepareOptions(u);const{req:c,url:f,timeout:m}=await this.buildRequest(u,{retryCount:d-n});await this.prepareRequest(c,{url:f,options:u});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=o===void 0?"":`, retryOf: ${o}`,x=Date.now();if(ue(this).debug(`[${p}] sending request`,ut({retryOfRequestLogID:o,method:u.method,url:f,options:u,headers:c.headers})),!((r=u.signal)===null||r===void 0)&&r.aborted)throw new Ms;const v=new AbortController,_=await this.fetchWithTimeout(f,c,m,v).catch(Rs),y=Date.now();if(_ instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if(!((a=u.signal)===null||a===void 0)&&a.aborted)throw new Ms;const T=Ps(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(n)return ue(this).info(`[${p}] connection ${T?"timed out":"failed"} - ${w}`),ue(this).debug(`[${p}] connection ${T?"timed out":"failed"} (${w})`,ut({retryOfRequestLogID:o,url:f,durationMs:y-x,message:_.message})),this.retryRequest(u,n,o??p);throw ue(this).info(`[${p}] connection ${T?"timed out":"failed"} - error; no more retries left`),ue(this).debug(`[${p}] connection ${T?"timed out":"failed"} (error; no more retries left)`,ut({retryOfRequestLogID:o,url:f,durationMs:y-x,message:_.message})),T?new pu:new Po({cause:_})}const b=`[${p}${g}] ${c.method} ${f} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${y-x}ms`;if(!_.ok){const w=await this.shouldRetry(_);if(n&&w){const I=`retrying, ${n} attempts remaining`;return await Vv(_.body),ue(this).info(`${b} - ${I}`),ue(this).debug(`[${p}] response error (${I})`,ut({retryOfRequestLogID:o,url:_.url,status:_.status,headers:_.headers,durationMs:y-x})),this.retryRequest(u,n,o??p,_.headers)}const T=w?"error; no more retries left":"error; not retryable";ue(this).info(`${b} - ${T}`);const C=await _.text().catch(I=>Rs(I).message),S=Rv(C),E=S?void 0:C;throw ue(this).debug(`[${p}] response error (${T})`,ut({retryOfRequestLogID:o,url:_.url,status:_.status,headers:_.headers,message:E,durationMs:Date.now()-x})),this.makeStatusError(_.status,S,E,_.headers)}return ue(this).info(b),ue(this).debug(`[${p}] response start`,ut({retryOfRequestLogID:o,url:_.url,status:_.status,headers:_.headers,durationMs:y-x})),{response:_,options:u,controller:v,requestLogID:p,retryOfRequestLogID:o,startTime:x}}async fetchWithTimeout(e,n,o,s){const r=n||{},{signal:a,method:u}=r,d=yo(r,["signal","method"]);a&&a.addEventListener("abort",()=>s.abort());const c=setTimeout(()=>s.abort(),o),f=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},f?{duplex:"half"}:{}),{method:"GET"}),d);u&&(m.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,s){var r;let a;const u=s==null?void 0:s.get("retry-after-ms");if(u){const c=parseFloat(u);Number.isNaN(c)||(a=c)}const d=s==null?void 0:s.get("retry-after");if(d&&!a){const c=parseFloat(d);Number.isNaN(c)?a=Date.parse(d)-Date.now():a=c*1e3}if(!(a&&0<=a&&a<60*1e3)){const c=(r=e.maxRetries)!==null&&r!==void 0?r:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Mv(a),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const r=n-e,a=Math.min(.5*Math.pow(2,r),8),u=1-Math.random()*.25;return a*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,s,r;const a=Object.assign({},e),{method:u,path:d,query:c,defaultBaseURL:f}=a,m=this.buildURL(d,c,f);"timeout"in a&&Pv("timeout",a.timeout),a.timeout=(o=a.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:p,body:g}=this.buildBody({options:a}),x=await this.buildHeaders({options:e,method:u,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:x},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(r=a.fetchOptions)!==null&&r!==void 0?r:{}),url:m,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:s}){let r={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let u=sn([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Lv()),this._options.defaultHeaders,o,e.headers,a]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=sn([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:qv(e)}:this.encoder({body:e,headers:o})}}Mo.DEFAULT_TIMEOUT=6e4;class oe extends Mo{constructor(){super(...arguments),this.interactions=new Nu(this)}}Ru=oe;oe.GeminiNextGenAPIClient=Ru;oe.GeminiNextGenAPIClientError=xe;oe.APIError=he;oe.APIConnectionError=Po;oe.APIConnectionTimeoutError=pu;oe.APIUserAbortError=Ms;oe.NotFoundError=vu;oe.ConflictError=xu;oe.RateLimitError=bu;oe.BadRequestError=mu;oe.AuthenticationError=gu;oe.InternalServerError=wu;oe.PermissionDeniedError=yu;oe.UnprocessableEntityError=_u;oe.toFile=Jv;oe.Interactions=Nu;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rx(t,e){const n={},o=i(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function ix(t,e){const n={},o=i(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function ax(t,e){const n={},o=i(t,["sdkHttpResponse"]);return o!=null&&l(n,["sdkHttpResponse"],o),n}function lx(t,e){const n={},o=i(t,["sdkHttpResponse"]);return o!=null&&l(n,["sdkHttpResponse"],o),n}function ux(t,e,n){const o={};if(i(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=i(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&l(e,["displayName"],s),i(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=i(t,["epochCount"]);e!==void 0&&r!=null&&l(e,["tuningTask","hyperparameters","epochCount"],r);const a=i(t,["learningRateMultiplier"]);if(a!=null&&l(o,["tuningTask","hyperparameters","learningRateMultiplier"],a),i(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=i(t,["batchSize"]);e!==void 0&&u!=null&&l(e,["tuningTask","hyperparameters","batchSize"],u);const d=i(t,["learningRate"]);if(e!==void 0&&d!=null&&l(e,["tuningTask","hyperparameters","learningRate"],d),i(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(i(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function cx(t,e,n){const o={};let s=i(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=i(t,["validationDataset"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec"],Da(g))}else if(s==="PREFERENCE_TUNING"){const g=i(t,["validationDataset"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec"],Da(g))}const r=i(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&l(e,["tunedModelDisplayName"],r);const a=i(t,["description"]);e!==void 0&&a!=null&&l(e,["description"],a);let u=i(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=i(t,["epochCount"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){const g=i(t,["epochCount"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let d=i(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=i(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(d==="PREFERENCE_TUNING"){const g=i(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=i(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=i(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=i(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=i(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=i(t,["adapterSize"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=i(t,["adapterSize"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(i(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=i(t,["labels"]);e!==void 0&&m!=null&&l(e,["labels"],m);const p=i(t,["beta"]);return e!==void 0&&p!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),o}function dx(t,e){const n={},o=i(t,["baseModel"]);o!=null&&l(n,["baseModel"],o);const s=i(t,["preTunedModel"]);s!=null&&l(n,["preTunedModel"],s);const r=i(t,["trainingDataset"]);r!=null&&wx(r);const a=i(t,["config"]);return a!=null&&ux(a,n),n}function fx(t,e){const n={},o=i(t,["baseModel"]);o!=null&&l(n,["baseModel"],o);const s=i(t,["preTunedModel"]);s!=null&&l(n,["preTunedModel"],s);const r=i(t,["trainingDataset"]);r!=null&&Tx(r,n,e);const a=i(t,["config"]);return a!=null&&cx(a,n,e),n}function hx(t,e){const n={},o=i(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function px(t,e){const n={},o=i(t,["name"]);return o!=null&&l(n,["_url","name"],o),n}function mx(t,e,n){const o={},s=i(t,["pageSize"]);e!==void 0&&s!=null&&l(e,["_query","pageSize"],s);const r=i(t,["pageToken"]);e!==void 0&&r!=null&&l(e,["_query","pageToken"],r);const a=i(t,["filter"]);return e!==void 0&&a!=null&&l(e,["_query","filter"],a),o}function gx(t,e,n){const o={},s=i(t,["pageSize"]);e!==void 0&&s!=null&&l(e,["_query","pageSize"],s);const r=i(t,["pageToken"]);e!==void 0&&r!=null&&l(e,["_query","pageToken"],r);const a=i(t,["filter"]);return e!==void 0&&a!=null&&l(e,["_query","filter"],a),o}function yx(t,e){const n={},o=i(t,["config"]);return o!=null&&mx(o,n),n}function vx(t,e){const n={},o=i(t,["config"]);return o!=null&&gx(o,n),n}function xx(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=i(t,["nextPageToken"]);s!=null&&l(n,["nextPageToken"],s);const r=i(t,["tunedModels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Mu(u))),l(n,["tuningJobs"],a)}return n}function _x(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=i(t,["nextPageToken"]);s!=null&&l(n,["nextPageToken"],s);const r=i(t,["tuningJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Us(u))),l(n,["tuningJobs"],a)}return n}function bx(t,e){const n={},o=i(t,["name"]);o!=null&&l(n,["model"],o);const s=i(t,["name"]);return s!=null&&l(n,["endpoint"],s),n}function wx(t,e){const n={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=i(t,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),l(n,["examples","examples"],s)}return n}function Tx(t,e,n){const o={};let s=i(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=i(t,["gcsUri"]);e!==void 0&&a!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=i(t,["gcsUri"]);e!==void 0&&a!=null&&l(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let r=i(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=i(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=i(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&l(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(i(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Mu(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&l(n,["name"],s);const r=i(t,["state"]);r!=null&&l(n,["state"],Yl(r));const a=i(t,["createTime"]);a!=null&&l(n,["createTime"],a);const u=i(t,["tuningTask","startTime"]);u!=null&&l(n,["startTime"],u);const d=i(t,["tuningTask","completeTime"]);d!=null&&l(n,["endTime"],d);const c=i(t,["updateTime"]);c!=null&&l(n,["updateTime"],c);const f=i(t,["description"]);f!=null&&l(n,["description"],f);const m=i(t,["baseModel"]);m!=null&&l(n,["baseModel"],m);const p=i(t,["_self"]);return p!=null&&l(n,["tunedModel"],bx(p)),n}function Us(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&l(n,["name"],s);const r=i(t,["state"]);r!=null&&l(n,["state"],Yl(r));const a=i(t,["createTime"]);a!=null&&l(n,["createTime"],a);const u=i(t,["startTime"]);u!=null&&l(n,["startTime"],u);const d=i(t,["endTime"]);d!=null&&l(n,["endTime"],d);const c=i(t,["updateTime"]);c!=null&&l(n,["updateTime"],c);const f=i(t,["error"]);f!=null&&l(n,["error"],f);const m=i(t,["description"]);m!=null&&l(n,["description"],m);const p=i(t,["baseModel"]);p!=null&&l(n,["baseModel"],p);const g=i(t,["tunedModel"]);g!=null&&l(n,["tunedModel"],g);const x=i(t,["preTunedModel"]);x!=null&&l(n,["preTunedModel"],x);const v=i(t,["supervisedTuningSpec"]);v!=null&&l(n,["supervisedTuningSpec"],v);const _=i(t,["preferenceOptimizationSpec"]);_!=null&&l(n,["preferenceOptimizationSpec"],_);const y=i(t,["tuningDataStats"]);y!=null&&l(n,["tuningDataStats"],y);const b=i(t,["encryptionSpec"]);b!=null&&l(n,["encryptionSpec"],b);const w=i(t,["partnerModelTuningSpec"]);w!=null&&l(n,["partnerModelTuningSpec"],w);const T=i(t,["customBaseModel"]);T!=null&&l(n,["customBaseModel"],T);const C=i(t,["experiment"]);C!=null&&l(n,["experiment"],C);const S=i(t,["labels"]);S!=null&&l(n,["labels"],S);const E=i(t,["outputUri"]);E!=null&&l(n,["outputUri"],E);const N=i(t,["pipelineJob"]);N!=null&&l(n,["pipelineJob"],N);const I=i(t,["serviceAccount"]);I!=null&&l(n,["serviceAccount"],I);const P=i(t,["tunedModelDisplayName"]);P!=null&&l(n,["tunedModelDisplayName"],P);const F=i(t,["veoTuningSpec"]);return F!=null&&l(n,["veoTuningSpec"],F),n}function Cx(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&l(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&l(n,["name"],s);const r=i(t,["metadata"]);r!=null&&l(n,["metadata"],r);const a=i(t,["done"]);a!=null&&l(n,["done"],a);const u=i(t,["error"]);return u!=null&&l(n,["error"],u),n}function Da(t,e){const n={},o=i(t,["gcsUri"]);o!=null&&l(n,["validationDatasetUri"],o);const s=i(t,["vertexDatasetResource"]);return s!=null&&l(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ex extends Be{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ct(He.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},n),{preTunedModel:s});return r.baseModel=void 0,await this.tuneInternal(r)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),r=await this.tuneMldevInternal(s);let a="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?a=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(a=r.name.split("/operations/")[0]),{name:a,state:Cs.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=px(e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>Us(f))}else{const c=hx(e);return u=D("{name}",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>Mu(f))}}async listInternal(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=vx(e);return u=D("tuningJobs",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=_x(f),p=new ia;return Object.assign(p,m),p})}else{const c=yx(e);return u=D("tunedModels",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=xx(f),p=new ia;return Object.assign(p,m),p})}}async cancel(e){var n,o,s,r;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ix(e);return u=D("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=lx(f),p=new aa;return Object.assign(p,m),p})}else{const c=rx(e);return u=D("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=ax(f),p=new aa;return Object.assign(p,m),p})}}async tuneInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI()){const u=fx(e,e);return r=D("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>Us(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=dx(e);return r=D("tunedModels",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>Cx(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sx{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Ix=1024*1024*8,Ax=3,kx=1e3,Nx=2,xo="x-goog-upload-status";async function Px(t,e,n){var o;const s=await Du(t,e,n),r=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[xo])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function Rx(t,e,n){var o;const s=await Du(t,e,n),r=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[xo])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=$l(r),u=new nr;return Object.assign(u,a),u}async function Du(t,e,n){var o,s;let r=0,a=0,u=new Es(new Response),d="upload";for(r=t.size;a<r;){const c=Math.min(Ix,r-a),f=t.slice(a,a+c);a+c>=r&&(d+=", finalize");let m=0,p=kx;for(;m<Ax&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(a),"Content-Length":String(c)}}}),!(!((o=u==null?void 0:u.headers)===null||o===void 0)&&o[xo]));)m++,await Dx(p),p=p*Nx;if(a+=c,((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[xo])!=="active")break;if(r<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function Mx(t){return{size:t.size,type:t.type}}function Dx(t){return new Promise(e=>setTimeout(e,t))}class Fx{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Px(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Rx(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Mx(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ux{create(e,n,o){return new Lx(e,n,o)}}class Lx{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fa="x-goog-api-key";class Gx{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Fa)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Fa,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qx="gl-node/";class Vx{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new oe({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=Dh(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new Gx(this.apiKey);this.apiClient=new My({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:qx+"web",uploader:new Fx,downloader:new Sx}),this.models=new Xy(this.apiClient),this.live=new Jy(this.apiClient,s,new Ux),this.batches=new um(this.apiClient),this.chats=new Om(this.models,this.apiClient),this.caches=new Hm(this.apiClient),this.files=new eg(this.apiClient),this.operations=new Zy(this.apiClient),this.authTokens=new mv(this.apiClient),this.tunings=new Ex(this.apiClient),this.fileSearchStores=new Tv(this.apiClient)}}const cr=t=>{const e=t||void 0;return e?new Vx({apiKey:e}):null},Hx=async(t,e)=>{if(console.log("Generating Portfolio Summary. Supabase available:",!!W,"Manual API Key provided:",!!e),W&&!e)try{console.log("[Portfolio] Using Direct Fetch for Proxy...");const a=`${To}/functions/v1/gemini-proxy`,u=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_t}`,apikey:_t},body:JSON.stringify({action:"portfolio",payload:{tasks:t}})});if(!u.ok){const c=await u.json().catch(()=>({}));throw console.error("[Portfolio] Proxy Error Details:",c),new Error(c.error||`Proxy error ${u.status}`)}const d=await u.json();return console.log("[Portfolio] Proxy Success! Received result."),d.result}catch(a){console.error("[Portfolio] Secure proxy FETCH FAILED:",a.message||a)}const n=cr(e);if(!n)throw new Error("API Key missing. Please configure it in Admin Settings.");const r=`
    You are an assistant for an FTC Robotics team. 
    Based on the following completed tasks for the season, write a professional, 
    bulleted Engineering Portfolio summary in Markdown format. 
    Highlight technical achievements, problem-solving, and team progression.
    
    Tasks:
    ${t.filter(a=>a.status==="Done").map(a=>{var u;return`- ${a.title} (${a.type}): ${a.description}. Tags: ${((u=a.tags)==null?void 0:u.join(", "))||""}`}).join(`
`)}
  `;try{return(await n.models.generateContent({model:"gemini-1.5-flash",contents:r})).text||"Could not generate summary."}catch{throw new Error("AI Generation failed. Check API Key or limit.")}},Bx=async(t,e,n)=>{if(W&&!n)try{console.log("[Questions] Using Direct Fetch for Proxy...");const a=`${To}/functions/v1/gemini-proxy`,u=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_t}`,apikey:_t},body:JSON.stringify({action:"questions",payload:{context:t,studyGuide:e}})});if(!u.ok)throw new Error(`Proxy error ${u.status}`);const d=await u.json();console.log("[Questions] Proxy Success!");let c=d.result;const f=c.indexOf("{"),m=c.lastIndexOf("}");return f!==-1&&m!==-1&&(c=c.substring(f,m+1)),JSON.parse(c).questions||[]}catch(a){console.error("[Questions] Secure proxy FETCH FAILED:",a.message||a)}const o=cr(n);if(!o)throw new Error("API Key missing. Please configure it in Admin Settings.");const s=`
    Create 5 potential judge interview questions and answers for an FTC Robotics team.
    Base the questions on the provided context about the team's season and robot.
    Return the response as a JSON object with a list of "questions" (each with "question" and "answer" keys).
    
    Context: ${t}
    Study Guide: ${e||"None"}
  `,r=await o.models.generateContent({model:"gemini-1.5-flash",contents:s});try{const a=(r.text||"").replace(/```json|```/g,"").trim();return JSON.parse(a).questions||[]}catch(a){return console.error("Failed to parse AI response",a),[]}},$x=async(t,e)=>{if(W&&!e)try{console.log("[Summarize] Using Direct Fetch for Proxy...");const s=`${To}/functions/v1/gemini-proxy`,r=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_t}`,apikey:_t},body:JSON.stringify({action:"summarize",payload:{text:t}})});if(!r.ok)throw new Error(`Proxy error ${r.status}`);const a=await r.json();return console.log("[Summarize] Proxy Success!"),a.result}catch(s){console.error("[Summarize] Secure proxy FETCH FAILED:",s.message||s)}const n=cr(e);if(!n)throw new Error("API Key missing. Please configure it in Admin Settings.");return(await n.models.generateContent({model:"gemini-1.5-flash",contents:`Summarize these robotics team meeting notes into concise minutes with action items:

${t}`})).text||""},Ox=({tasks:t,setTasks:e,members:n,teams:o})=>{const[s,r]=M.useState(null),[a,u]=M.useState(!1),[d,c]=M.useState(!1),[f,m]=M.useState("board"),[p,g]=M.useState(""),[x,v]=M.useState({}),[_,y]=M.useState(!1),{geminiApiKey:b}=Pn(),w=k=>{const R=n.find(V=>V.id===k);return R?`${R.firstName} ${R.lastNameInitial}.`:"Unassigned"},T=k=>{const R=o.find(V=>V.id===k);return R?R.name:"General"},C=k=>{const R=n.find(V=>V.id===k);return R?`${R.firstName[0]}${R.lastNameInitial}`:"?"},S=k=>{r(k),c(!1),u(!0)},E=()=>{var R,V;const k={id:Date.now().toString(),title:"New Task",description:"",status:kt.Backlog,type:nn.Feature,assignedTo:((R=n[0])==null?void 0:R.id)||"",department:((V=o[0])==null?void 0:V.id)||"",tags:[],checklist:[],timeline:[],createdAt:Date.now()};r(k),c(!0),u(!0)},N=()=>{if(!s)return;const k=t.find(V=>V.id===s.id);let R={...s};if(!d&&k&&k.status!==s.status){const V={id:Date.now().toString(),type:"history",authorId:"System",content:`moved to ${s.status}`,timestamp:Date.now()};R.timeline=[V,...R.timeline]}e(d?[...t,R]:t.map(V=>V.id===R.id?R:V)),u(!1)},I=()=>{var R;if(!p.trim()||!s)return;const k={id:Date.now().toString(),type:"comment",authorId:((R=n[0])==null?void 0:R.id)||"user",content:p,timestamp:Date.now()};r({...s,timeline:[k,...s.timeline]}),g("")},P=k=>{s&&r({...s,timeline:s.timeline.filter(R=>R.id!==k)})},F=async()=>{if(s!=null&&s.description){y(!0);try{const k=await $x(s.description,b||void 0);r({...s,description:s.description+`

**AI Summary:**
`+k})}catch{alert("AI Error. Check API Key in Admin Settings.")}finally{y(!1)}}},Y=k=>{v(R=>({...R,[k]:!R[k]}))},O=()=>h.jsx("div",{className:"flex flex-col md:flex-row gap-4 h-full md:pb-4 overflow-y-auto md:overflow-x-auto",children:ni.map(k=>{const R=x[k];return h.jsxs("div",{className:`bg-slate-100 dark:bg-slate-800 rounded-xl flex flex-col flex-shrink-0 transition-all ${R?"md:w-12 h-auto":"md:w-[280px] md:h-full"}`,children:[h.jsxs("div",{className:"p-3 font-semibold text-slate-600 dark:text-slate-300 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center cursor-pointer md:cursor-default",onClick:()=>{window.innerWidth<768&&Y(k)},children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"md:hidden",children:R?h.jsx(Vc,{size:16}):h.jsx(Gc,{size:16})}),h.jsx("span",{className:R?"md:hidden":"",children:k})]}),h.jsx("span",{className:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs px-2 py-1 rounded-full",children:t.filter(V=>V.status===k).length})]}),h.jsx("div",{className:`flex-1 overflow-y-auto p-2 space-y-2 transition-all ${R?"hidden":"block"} min-h-[50px] md:min-h-0`,children:t.filter(V=>V.status===k).map(V=>h.jsxs("div",{onClick:()=>S(V),className:"bg-white dark:bg-slate-700 p-3 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 cursor-pointer hover:shadow-md transition group relative",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded ${V.type===nn.Bug?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:V.type}),h.jsx("div",{className:"text-xs text-slate-400 dark:text-slate-500",children:new Date(V.createdAt).toLocaleDateString()})]}),h.jsx("h4",{className:"font-medium text-slate-800 dark:text-slate-200 mb-1",children:V.title||"Untitled"}),h.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs text-slate-500 dark:text-slate-400",children:[h.jsx("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:T(V.department)}),V.dueDate&&h.jsxs("span",{className:"flex items-center gap-1 text-orange-600 dark:text-orange-400",children:[h.jsx(zc,{size:10}),new Date(V.dueDate).toLocaleDateString()]}),h.jsx("div",{className:"flex-1"}),V.assignedTo&&h.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400 flex items-center justify-center font-bold text-[10px] border border-orange-200 dark:border-orange-800",children:C(V.assignedTo)})]})]},V.id))})]},k)})}),K=()=>h.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left text-sm text-slate-600 dark:text-slate-300 min-w-[600px]",children:[h.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 text-xs uppercase font-bold text-slate-500 dark:text-slate-400",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-4",children:"Title"}),h.jsx("th",{className:"p-4",children:"Type"}),h.jsx("th",{className:"p-4",children:"Status"}),h.jsx("th",{className:"p-4",children:"Assigned"}),h.jsx("th",{className:"p-4",children:"Due Date"}),h.jsx("th",{className:"p-4",children:"Created"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:t.map(k=>h.jsxs("tr",{onClick:()=>S(k),className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition",children:[h.jsx("td",{className:"p-4 font-medium text-slate-900 dark:text-white",children:k.title||"Untitled"}),h.jsx("td",{className:"p-4",children:h.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded ${k.type===nn.Bug?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:k.type})}),h.jsx("td",{className:"p-4",children:k.status}),h.jsx("td",{className:"p-4",children:w(k.assignedTo)}),h.jsx("td",{className:"p-4",children:k.dueDate?new Date(k.dueDate).toLocaleDateString():"-"}),h.jsx("td",{className:"p-4 text-slate-400",children:new Date(k.createdAt).toLocaleDateString()})]},k.id))})]})}),L=()=>{const k=t.filter(R=>R.dueDate).sort((R,V)=>(R.dueDate||0)-(V.dueDate||0));return h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 overflow-y-auto",children:[h.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"Upcoming Deadlines"}),k.length===0?h.jsx("div",{className:"text-center text-slate-400 py-10",children:"No tasks with due dates found."}):h.jsx("div",{className:"space-y-6",children:k.map(R=>h.jsxs("div",{onClick:()=>S(R),className:"flex items-center gap-4 p-4 border border-slate-100 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition",children:[h.jsxs("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg flex flex-col items-center min-w-[60px]",children:[h.jsx("span",{className:"text-xs uppercase font-bold",children:new Date(R.dueDate).toLocaleString("default",{month:"short"})}),h.jsx("span",{className:"text-xl font-bold",children:new Date(R.dueDate).getDate()})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:R.title}),h.jsxs("div",{className:"flex gap-2 text-xs text-slate-500 dark:text-slate-400 mt-1",children:[h.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:R.status}),h.jsx("span",{children:""}),h.jsx("span",{children:w(R.assignedTo)})]})]})]},R.id))})]})};return h.jsxs("div",{className:"h-full flex flex-col",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 px-4 gap-4",children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white self-start md:self-auto",children:"Sprint Planning"}),h.jsxs("div",{className:"flex flex-row items-center gap-3 w-full md:w-auto",children:[h.jsxs("div",{className:"flex items-center gap-1 bg-slate-200 dark:bg-slate-700 p-1 rounded-lg",children:[h.jsx("button",{onClick:()=>m("board"),className:`p-2 rounded-md transition flex items-center justify-center ${f==="board"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:h.jsx(wd,{size:18})}),h.jsx("button",{onClick:()=>m("list"),className:`p-2 rounded-md transition flex items-center justify-center ${f==="list"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:h.jsx(ld,{size:18})}),h.jsx("button",{onClick:()=>m("calendar"),className:`p-2 rounded-md transition flex items-center justify-center ${f==="calendar"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:h.jsx(Fc,{size:18})})]}),h.jsxs("button",{onClick:E,className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition",children:[h.jsx(un,{size:20})," ",h.jsx("span",{className:"hidden md:inline",children:"New Item"})]})]})]}),h.jsxs("div",{className:"flex-1 overflow-hidden px-4",children:[f==="board"&&h.jsx(O,{}),f==="list"&&h.jsx(K,{}),f==="calendar"&&h.jsx(L,{})]}),a&&s&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[h.jsxs("div",{className:"flex-1 mr-4",children:[h.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-1 block",children:"Task Title"}),h.jsx("input",{value:s.title,onChange:k=>r({...s,title:k.target.value}),placeholder:"Task Title",className:"text-xl font-bold bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-600 rounded-lg p-2 focus:ring-2 focus:ring-orange-500 w-full placeholder-slate-400 dark:placeholder-slate-500 text-slate-900 dark:text-white"})]}),h.jsxs("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 bg-slate-100 dark:bg-slate-700 p-2 rounded-full",children:[h.jsx("span",{className:"sr-only",children:"Close"}),""]})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Status"}),h.jsx("select",{value:s.status,onChange:k=>r({...s,status:k.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:ni.map(k=>h.jsx("option",{value:k,children:k},k))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Assigned To"}),h.jsxs("select",{value:s.assignedTo,onChange:k=>r({...s,assignedTo:k.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:[h.jsx("option",{value:"",children:"Unassigned"}),n.map(k=>h.jsxs("option",{value:k.id,children:[k.firstName," ",k.lastNameInitial,"."]},k.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Type"}),h.jsxs("select",{value:s.type,onChange:k=>r({...s,type:k.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:[h.jsx("option",{value:nn.Feature,children:"Feature"}),h.jsx("option",{value:nn.Bug,children:"Bug"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Team"}),h.jsx("select",{value:s.department,onChange:k=>r({...s,department:k.target.value}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm",children:o.map(k=>h.jsx("option",{value:k.id,children:k.name},k.id))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Due Date"}),h.jsx("input",{type:"date",value:s.dueDate?new Date(s.dueDate).toISOString().substr(0,10):"",onChange:k=>r({...s,dueDate:k.target.valueAsNumber}),className:"w-full p-2 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Description / Notes"}),h.jsxs("button",{onClick:F,disabled:_,className:"text-xs flex items-center gap-1 text-orange-600 dark:text-orange-400 hover:text-orange-700 font-medium",children:[_?h.jsx(so,{className:"animate-spin",size:14}):h.jsx(vd,{size:14}),"AI Summarize"]})]}),h.jsx("textarea",{value:s.description,onChange:k=>r({...s,description:k.target.value}),className:"w-full h-32 p-3 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Describe the task, paste meeting minutes, or log bug details..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Checklist"}),h.jsxs("div",{className:"space-y-2",children:[s.checklist.map((k,R)=>h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",checked:k.completed,onChange:V=>{const ge=[...s.checklist];ge[R].completed=V.target.checked,r({...s,checklist:ge})},className:"rounded text-orange-600 focus:ring-orange-500"}),h.jsx("input",{type:"text",value:k.text,onChange:V=>{const ge=[...s.checklist];ge[R].text=V.target.value,r({...s,checklist:ge})},className:"flex-1 text-sm border-none bg-transparent focus:ring-0 text-slate-900 dark:text-white"}),h.jsx("button",{onClick:()=>{const V=s.checklist.filter((ge,en)=>en!==R);r({...s,checklist:V})},className:"text-slate-400 hover:text-red-500",children:""})]},R)),h.jsx("button",{onClick:()=>r({...s,checklist:[...s.checklist,{id:Date.now().toString(),text:"New Item",completed:!1}]}),className:"text-sm text-blue-600 dark:text-blue-400 font-medium hover:underline",children:"+ Add Checklist Item"})]})]}),h.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-700 pt-6",children:[h.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Activity & Comments"}),h.jsxs("div",{className:"flex gap-2 mb-6",children:[h.jsx("input",{type:"text",value:p,onChange:k=>g(k.target.value),placeholder:"Add a comment...",className:"flex-1 border rounded-lg px-3 py-2 text-sm bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white",onKeyDown:k=>k.key==="Enter"&&I()}),h.jsx("button",{onClick:I,className:"bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700",children:h.jsx(Rd,{size:18})})]}),h.jsx("div",{className:"space-y-4 max-h-48 overflow-y-auto",children:s.timeline.map(k=>h.jsxs("div",{className:"flex gap-3 text-sm",children:[h.jsx("div",{className:"mt-1 w-6 h-6 rounded-full bg-slate-200 dark:bg-slate-600 flex items-center justify-center text-xs font-bold text-slate-600 dark:text-slate-300 flex-shrink-0",children:k.authorId==="System"?"S":C(k.authorId)}),h.jsxs("div",{className:"flex-1 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-r-lg rounded-bl-lg",children:[h.jsxs("div",{className:"flex justify-between items-start mb-1",children:[h.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:k.authorId==="System"?"System":w(k.authorId)}),h.jsx("span",{className:"text-xs text-slate-400",children:new Date(k.timestamp).toLocaleDateString()})]}),h.jsx("div",{className:k.type==="history"?"italic text-slate-500":"text-slate-800 dark:text-slate-300",children:k.content}),k.type==="comment"&&h.jsx("div",{className:"flex justify-end mt-1",children:h.jsxs("button",{onClick:()=>P(k.id),className:"text-xs text-red-400 hover:text-red-600 flex items-center gap-1",children:[h.jsx(Jt,{size:10})," Delete"]})})]})]},k.id))})]})]}),h.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 flex justify-end gap-3 bg-slate-50 dark:bg-slate-900/50",children:[h.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 font-medium",children:"Cancel"}),h.jsx("button",{onClick:N,className:"px-6 py-2 rounded-lg bg-orange-600 text-white font-medium hover:bg-orange-700 shadow-sm",children:"Save Task"})]})]})})]})},Kx=()=>{const[t,e]=M.useState([]),[n,o]=M.useState(!1),[s,r]=M.useState({hasAutonomous:!1,autoScore:0,intakeType:"No Intake",autoAim:!1,farShooting:!1,shotsTaken:0,shotsMissed:0,parking:"No Park",rating:3,endGameNotes:""}),a=()=>{if(!s.teamNumber)return;const c={id:Date.now().toString(),teamNumber:s.teamNumber||"",matchNumber:s.matchNumber||0,hasAutonomous:s.hasAutonomous||!1,autoScore:s.autoScore||0,intakeType:s.intakeType||"No Intake",autoAim:s.autoAim||!1,farShooting:s.farShooting||!1,shotsTaken:s.shotsTaken||0,shotsMissed:s.shotsMissed||0,parking:s.parking||"No Park",endGameNotes:s.endGameNotes||"",rating:s.rating||3};e([c,...t]),o(!1),u()},u=()=>{r({hasAutonomous:!1,autoScore:0,intakeType:"No Intake",autoAim:!1,farShooting:!1,shotsTaken:0,shotsMissed:0,parking:"No Park",rating:3,endGameNotes:""})},d=(c,f)=>{r(m=>({...m,[c]:Math.max(0,(m[c]||0)+f)}))};return h.jsxs("div",{className:"h-full flex flex-col max-w-5xl mx-auto w-full p-4 md:p-6",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Scouting Reports"}),h.jsxs("button",{onClick:()=>o(!0),className:"bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-orange-700 transition shadow-sm",children:[h.jsx(un,{size:20})," Scout Match"]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.map(c=>h.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsx("div",{children:h.jsxs("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:["#",c.teamNumber]})}),h.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-bold text-slate-600 dark:text-slate-300",children:["Match ",c.matchNumber]})]}),h.jsxs("div",{className:"space-y-2 text-sm text-slate-600 dark:text-slate-300 mb-4",children:[h.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[h.jsx("span",{children:"Autonomous"}),h.jsx("span",{className:c.hasAutonomous?"text-green-600 dark:text-green-400 font-bold":"text-slate-400",children:c.hasAutonomous?`${c.autoScore} pts`:"No"})]}),h.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[h.jsx("span",{children:"Intake"}),h.jsx("span",{className:"font-medium",children:c.intakeType})]}),h.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[h.jsx("span",{children:"Shooting"}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{children:[c.shotsTaken," / ",c.shotsTaken+c.shotsMissed," Hits"]}),h.jsxs("div",{className:"text-xs text-slate-400",children:[c.farShooting&&"Far ",c.autoAim&&"Auto-Aim"]})]})]}),h.jsxs("div",{className:"flex justify-between border-b border-slate-100 dark:border-slate-700 pb-1",children:[h.jsx("span",{children:"Parking"}),h.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:c.parking})]})]}),h.jsx("div",{className:"flex items-center gap-1 text-yellow-500 mb-2",children:[...Array(5)].map((f,m)=>h.jsx(Hd,{size:14,fill:m<c.rating?"currentColor":"none",className:m<c.rating?"":"text-slate-300 dark:text-slate-600"},m))}),c.endGameNotes&&h.jsxs("p",{className:"text-xs bg-slate-50 dark:bg-slate-700 p-2 rounded text-slate-500 dark:text-slate-300 italic",children:['"',c.endGameNotes,'"']})]},c.id)),t.length===0&&h.jsx("div",{className:"col-span-full text-center py-12 text-slate-400 bg-slate-50 dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:'No scouting data yet. Click "Scout Match" to begin.'})]})]}),n&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh] shadow-2xl",children:[h.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 font-bold text-lg text-slate-900 dark:text-white",children:"New Scouting Report"}),h.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Team #"}),h.jsx("input",{type:"text",className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.teamNumber||"",onChange:c=>r({...s,teamNumber:c.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Match #"}),h.jsx("input",{type:"number",className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.matchNumber||"",onChange:c=>r({...s,matchNumber:parseInt(c.target.value)})})]})]}),h.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-3",children:[h.jsx("h4",{className:"font-bold text-slate-700 dark:text-white text-sm",children:"Autonomous"}),h.jsxs("label",{className:"flex items-center gap-3 text-slate-800 dark:text-white",children:[h.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded text-orange-600",checked:s.hasAutonomous,onChange:c=>r({...s,hasAutonomous:c.target.checked})}),h.jsx("span",{className:"font-medium",children:"Has Autonomous"})]}),s.hasAutonomous&&h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Auto Score"}),h.jsx("input",{type:"number",className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.autoScore,onChange:c=>r({...s,autoScore:parseInt(c.target.value)})})]})]}),h.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-3",children:[h.jsx("h4",{className:"font-bold text-slate-700 dark:text-white text-sm",children:"TeleOp"}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1 block",children:"Intake Type"}),h.jsxs("select",{className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.intakeType,onChange:c=>r({...s,intakeType:c.target.value}),children:[h.jsx("option",{children:"No Intake"}),h.jsx("option",{children:"Human Player"}),h.jsx("option",{children:"Automatic"})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("label",{className:"flex items-center gap-2 text-slate-800 dark:text-white text-sm",children:[h.jsx("input",{type:"checkbox",checked:s.autoAim,onChange:c=>r({...s,autoAim:c.target.checked})}),"Auto Aim"]}),h.jsxs("label",{className:"flex items-center gap-2 text-slate-800 dark:text-white text-sm",children:[h.jsx("input",{type:"checkbox",checked:s.farShooting,onChange:c=>r({...s,farShooting:c.target.checked})}),"Far Shooting"]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:"Shots Taken"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>d("shotsTaken",-1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:h.jsx(Nr,{size:14})}),h.jsx("span",{className:"flex-1 text-center font-mono font-bold text-lg dark:text-white",children:s.shotsTaken}),h.jsx("button",{onClick:()=>d("shotsTaken",1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:h.jsx(un,{size:14})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:"Shots Missed"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>d("shotsMissed",-1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:h.jsx(Nr,{size:14})}),h.jsx("span",{className:"flex-1 text-center font-mono font-bold text-lg dark:text-white",children:s.shotsMissed}),h.jsx("button",{onClick:()=>d("shotsMissed",1),className:"p-2 bg-slate-200 dark:bg-slate-600 rounded",children:h.jsx(un,{size:14})})]})]})]})]}),h.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-3",children:[h.jsx("h4",{className:"font-bold text-slate-700 dark:text-white text-sm",children:"End Game"}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-1",children:"Parking"}),h.jsxs("select",{className:"w-full border dark:border-slate-600 rounded p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.parking,onChange:c=>r({...s,parking:c.target.value}),children:[h.jsx("option",{children:"No Park"}),h.jsx("option",{children:"Partial Park"}),h.jsx("option",{children:"Full Park"})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Driver Rating (1-5)"}),h.jsx("input",{type:"range",min:"1",max:"5",className:"w-full accent-orange-600",value:s.rating||3,onChange:c=>r({...s,rating:parseInt(c.target.value)})}),h.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[h.jsx("span",{children:"Novice"}),h.jsx("span",{children:"Expert"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Notes"}),h.jsx("textarea",{className:"w-full border dark:border-slate-600 rounded p-2 h-20 bg-white dark:bg-slate-700 text-slate-900 dark:text-white",value:s.endGameNotes||"",onChange:c=>r({...s,endGameNotes:c.target.value})})]})]}),h.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[h.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded",children:"Cancel"}),h.jsx("button",{onClick:a,className:"px-6 py-2 bg-orange-600 text-white rounded font-medium hover:bg-orange-700",children:"Save Report"})]})]})})]})},Jx=()=>{const[t,e]=M.useState(Ah),[n,o]=M.useState(!1),[s,r]=M.useState(""),a=m=>{n||e(t.map(p=>p.id===m?{...p,checked:!p.checked}:p))},u=()=>{e(t.map(m=>({...m,checked:!1})))},d=()=>{s.trim()&&(e([...t,{id:Date.now().toString(),text:s.trim(),checked:!1}]),r(""))},c=m=>{e(t.filter(p=>p.id!==m))},f=(m,p)=>{e(t.map(g=>g.id===m?{...g,assignedTo:p}:g))};return h.jsx("div",{className:"h-full flex flex-col max-w-3xl mx-auto w-full p-2 md:p-6",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[h.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-100 dark:border-slate-700 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 bg-slate-50 dark:bg-slate-900/50",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Pre-Match Checklist"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Reset this list before every match."})]}),h.jsxs("div",{className:"flex gap-2 self-end sm:self-auto",children:[h.jsx("button",{onClick:()=>o(!n),className:`p-2 rounded-full transition ${n?"bg-orange-100 text-orange-600":"text-slate-500 hover:text-slate-900 hover:bg-slate-200 dark:text-slate-400 dark:hover:bg-slate-700"}`,title:"Edit Checklist",children:h.jsx(Ld,{size:20})}),h.jsx("button",{onClick:u,className:"text-slate-500 hover:text-orange-600 p-2 rounded-full hover:bg-orange-50 dark:text-slate-400 dark:hover:bg-slate-700 transition",title:"Reset Checklist",children:h.jsx(kd,{size:20})})]})]}),h.jsxs("div",{className:"divide-y divide-slate-100 dark:divide-slate-700 overflow-y-auto flex-1 pr-1 custom-scrollbar",children:[t.map(m=>h.jsxs("div",{className:`p-4 flex items-center gap-4 transition ${m.checked?"bg-green-50/50 dark:bg-green-900/20":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[h.jsx("div",{className:"cursor-pointer flex-shrink-0",onClick:()=>a(m.id),children:!n&&h.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition ${m.checked?"bg-green-500 border-green-500 text-white":"border-slate-300 dark:border-slate-500 text-transparent"}`,children:h.jsx(Oc,{size:16,fill:"currentColor",className:m.checked?"text-white":""})})}),h.jsx("span",{onClick:()=>a(m.id),className:`text-lg font-medium flex-1 cursor-pointer transition ${m.checked?"text-slate-400 line-through dark:text-slate-500":"text-slate-700 dark:text-slate-200"}`,children:m.text}),n&&h.jsx("div",{className:"relative",children:h.jsxs("select",{className:"text-xs border border-slate-200 dark:border-slate-600 rounded p-1 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 max-w-[120px]",value:m.assignedTo||"",onChange:p=>f(m.id,p.target.value),children:[h.jsx("option",{value:"",children:"Anyone"}),h.jsx("optgroup",{label:"Teams",children:Ih.map(p=>h.jsx("option",{value:p.name,children:p.name},p.id))}),h.jsx("optgroup",{label:"Members",children:Sh.map(p=>h.jsxs("option",{value:p.firstName,children:[p.firstName," ",p.lastNameInitial,"."]},p.id))})]})}),!n&&m.assignedTo&&h.jsx("span",{className:"text-xs bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 px-2 py-1 rounded flex-shrink-0",children:m.assignedTo}),n&&h.jsx("button",{onClick:p=>{p.stopPropagation(),c(m.id)},className:"text-red-500 hover:text-red-700 p-2",children:h.jsx(Jt,{size:18})})]},m.id)),n&&h.jsxs("div",{className:"p-4 flex gap-2 bg-slate-50 dark:bg-slate-700/50",children:[h.jsx("input",{type:"text",value:s,onChange:m=>r(m.target.value),onKeyDown:m=>m.key==="Enter"&&d(),placeholder:"Add new item...",className:"flex-1 border rounded px-3 py-2 bg-white dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white"}),h.jsx("button",{onClick:d,className:"bg-orange-600 text-white px-4 py-2 rounded font-bold",children:"Add"})]})]})]})})},zx=()=>{const t=M.useRef(null),[e,n]=M.useState("#ef4444"),[o,s]=M.useState("draw"),{matchPlans:r,addMatchPlan:a,deleteMatchPlan:u}=Pn(),[d,c]=M.useState([]),[f,m]=M.useState(""),[p,g]=M.useState(""),[x,v]=M.useState(""),[_,y]=M.useState(!1),[b,w]=M.useState(!1),[T,C]=M.useState(!1),[S,E]=M.useState(!1),[N,I]=M.useState(""),P=()=>{a({title:N||`Match Plan ${new Date().toLocaleString()}`,drawingData:d,notes:x,allianceTeam:p,partnerAutonomous:_,partnerPark:b}),C(!1),I(""),alert("Plan saved!")},F=L=>{c(L.drawingData),g(L.allianceTeam),v(L.notes),y(L.partnerAutonomous),w(L.partnerPark),E(!1)};M.useEffect(()=>{if(!t.current)return;const L=Mn(t.current),k=Ou().on("start",function(R){Mn(this).raise().attr("stroke","white").attr("stroke-width",3)}).on("drag",function(R){o==="drag"&&Mn(this).attr("cx",R.x).attr("cy",R.y)}).on("end",function(R){Mn(this).attr("stroke","white").attr("stroke-width",2)});L.selectAll(".draggable-robot").call(k)},[o]);const Y=L=>{if(o!=="draw")return;const k=t.current;if(!k)return;const R=k.createSVGPoint();R.x=L.nativeEvent.offsetX,R.y=L.nativeEvent.offsetY,m(`M ${R.x} ${R.y}`),k.setPointerCapture(L.pointerId)},O=L=>{o!=="draw"||!f||m(k=>`${k} L ${L.nativeEvent.offsetX} ${L.nativeEvent.offsetY}`)},K=L=>{o!=="draw"||!f||(c([...d,{d:f,stroke:e,width:3}]),m(""),t.current&&t.current.releasePointerCapture(L.pointerId))};return h.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:h-full h-auto lg:overflow-hidden overflow-visible",children:[h.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col overflow-hidden relative min-h-[500px] lg:min-h-0",children:[h.jsxs("div",{className:"sticky top-0 z-20 bg-slate-100 dark:bg-slate-700 p-2 flex items-center justify-between border-b border-slate-200 dark:border-slate-600 shadow-sm",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>s("draw"),className:`p-2 rounded ${o==="draw"?"bg-white dark:bg-slate-600 shadow text-orange-600 dark:text-orange-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:h.jsx(Cd,{size:18})}),h.jsx("div",{className:"h-8 w-px bg-slate-300 dark:bg-slate-600 mx-1"}),h.jsx("button",{onClick:()=>n("#ef4444"),className:`w-6 h-6 rounded-full bg-red-500 border-2 ${e==="#ef4444"?"border-slate-800 dark:border-white":"border-transparent"}`}),h.jsx("button",{onClick:()=>n("#3b82f6"),className:`w-6 h-6 rounded-full bg-blue-500 border-2 ${e==="#3b82f6"?"border-slate-800 dark:border-white":"border-transparent"}`}),h.jsx("button",{onClick:()=>n("#22c55e"),className:`w-6 h-6 rounded-full bg-green-500 border-2 ${e==="#22c55e"?"border-slate-800 dark:border-white":"border-transparent"}`}),h.jsx("button",{onClick:()=>n("#facc15"),className:`w-6 h-6 rounded-full bg-yellow-400 border-2 ${e==="#facc15"?"border-slate-800 dark:border-white":"border-transparent"}`})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>{const L=[...d];L.pop(),c(L)},className:"p-2 text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white hover:bg-slate-200 dark:hover:bg-slate-600 rounded",title:"Undo",children:h.jsx($d,{size:18})}),h.jsx("button",{onClick:()=>c([]),className:"p-2 text-slate-500 dark:text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",title:"Clear",children:h.jsx(Jt,{size:18})}),h.jsx("div",{className:"h-8 w-px bg-slate-300 dark:bg-slate-600 mx-1"}),h.jsx("button",{onClick:()=>E(!0),className:"p-2 text-slate-500 dark:text-slate-400 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/30 rounded",title:"Load Plans",children:h.jsx(Er,{size:18})}),h.jsx("button",{onClick:()=>C(!0),className:"p-2 text-slate-500 dark:text-slate-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/30 rounded",title:"Save Plan",children:h.jsx(Rr,{size:18})})]})]}),h.jsxs("div",{className:"relative flex-1 bg-slate-900 overflow-hidden cursor-crosshair",children:[h.jsx("img",{src:kh,className:"absolute inset-0 w-full h-full object-contain opacity-50 pointer-events-none select-none",alt:"Field"}),h.jsxs("svg",{ref:t,className:"absolute inset-0 w-full h-full z-10 touch-none",onPointerDown:Y,onPointerMove:O,onPointerUp:K,onPointerCancel:K,onPointerLeave:K,children:[d.map((L,k)=>h.jsx("path",{d:L.d,stroke:L.stroke,strokeWidth:L.width,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},k)),f&&h.jsx("path",{d:f,stroke:e,strokeWidth:3,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("circle",{className:"draggable-robot cursor-move",cx:"50",cy:"50",r:"15",fill:"#ef4444",stroke:"white",strokeWidth:"2"}),h.jsx("circle",{className:"draggable-robot cursor-move",cx:"90",cy:"50",r:"15",fill:"#3b82f6",stroke:"white",strokeWidth:"2"})]})]})]}),h.jsxs("div",{className:"w-full lg:w-80 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-4 flex flex-col",children:[h.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Match Notes"}),h.jsxs("div",{className:"space-y-4 flex-1",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Alliance Partner"}),h.jsx("input",{type:"text",value:p,onChange:L=>g(L.target.value),placeholder:"Team # / Name",className:"w-full p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Our Strategy"}),h.jsx("textarea",{value:x,onChange:L=>v(L.target.value),className:"w-full h-32 p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm resize-none text-slate-900 dark:text-white",placeholder:`1. Autonomous path...
2. TeleOp focus...`})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1",children:"Partner Capabilities"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("label",{className:"flex items-center gap-2 p-2 border border-slate-200 dark:border-slate-600 rounded bg-slate-50 dark:bg-slate-700 text-xs text-slate-800 dark:text-slate-200",children:[h.jsx("input",{type:"checkbox",checked:_,onChange:L=>y(L.target.checked)})," Autonomous"]}),h.jsxs("label",{className:"flex items-center gap-2 p-2 border border-slate-200 dark:border-slate-600 rounded bg-slate-50 dark:bg-slate-700 text-xs text-slate-800 dark:text-slate-200",children:[h.jsx("input",{type:"checkbox",checked:b,onChange:L=>w(L.target.checked)})," Lifted Park"]})]})]})]}),h.jsxs("div",{className:"flex gap-3 mt-4 lg:hidden",children:[h.jsxs("button",{onClick:()=>E(!0),className:"flex-1 flex items-center justify-center gap-2 p-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-lg font-bold",children:[h.jsx(Er,{size:20})," Load"]}),h.jsxs("button",{onClick:()=>C(!0),className:"flex-1 flex items-center justify-center gap-2 p-3 bg-green-600 text-white rounded-lg font-bold shadow-md",children:[h.jsx(Rr,{size:20})," Save"]})]})]}),T&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 w-full max-w-sm",children:[h.jsx("h3",{className:"text-lg font-bold mb-4 text-slate-900 dark:text-white",children:"Save Match Plan"}),h.jsx("input",{autoFocus:!0,type:"text",placeholder:"Plan Name (e.g. Match 1)",value:N,onChange:L=>I(L.target.value),onKeyDown:L=>L.key==="Enter"&&P(),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded mb-4 bg-white dark:bg-slate-700 text-slate-900 dark:text-white"}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300",children:"Cancel"}),h.jsx("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Save"})]})]})}),S&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 w-full max-w-md max-h-[80vh] flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Saved Plans"}),h.jsx("button",{onClick:()=>E(!1),children:h.jsx(rl,{})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:r.length===0?h.jsx("div",{className:"text-center text-slate-500 py-8",children:"No saved plans found."}):r.map(L=>h.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[h.jsxs("div",{className:"cursor-pointer flex-1",onClick:()=>F(L),children:[h.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:L.title}),h.jsxs("div",{className:"text-xs text-slate-500",children:[new Date(L.updatedAt).toLocaleDateString(),"  ",L.allianceTeam||"No Team"]})]}),h.jsx("button",{onClick:()=>{u(L.id)},className:"p-2 text-red-400 hover:text-red-600",children:h.jsx(Jt,{size:16})})]},L.id))})]})})]})},Ua=({tasks:t,view:e})=>{const n=Pn(C=>C.geminiApiKey),{isOnline:o}=Bl(),[s,r]=M.useState(""),[a,u]=M.useState([]),[d,c]=M.useState(!1),[f,m]=M.useState(null),[p,g]=M.useState("done"),[x,v]=M.useState(""),[_,y]=M.useState(""),b=async()=>{c(!0);const C=p==="done"?t.filter(S=>S.status==="Done"):t;try{const S=await Hx(C,n||void 0);r(S)}catch{alert("Error generating portfolio. Please check your API Key configuration in Admin Settings.")}finally{c(!1)}},w=async()=>{c(!0);try{const S=await Bx(s||"We built a great robot that has a high scoring autonomous and durable drivetrain.",x,n||void 0);S&&S.length>0?u(S):u([{question:"Describe your robot's drivetrain.",answer:"We use a mecanum drivetrain for omnidirectional movement."},{question:"What was your biggest challenge?",answer:"Our biggest challenge was consistent intake, which we solved with a compliant wheel system."},{question:"How did you use sensors?",answer:"We use odometry pods for precise localization during autonomous."}])}catch{alert("Error generating questions. Showing demo questions instead."),u([{question:"Describe your robot's drivetrain.",answer:"We use a mecanum drivetrain for omnidirectional movement."},{question:"What was your biggest challenge?",answer:"Our biggest challenge was consistent intake, which we solved with a compliant wheel system."}])}finally{c(!1)}},T=C=>{var E;const S=(E=C.target.files)==null?void 0:E[0];if(S){y(S.name);const N=new FileReader;N.onload=I=>{var P;(P=I.target)!=null&&P.result&&v(I.target.result)},N.readAsText(S)}};return h.jsx("div",{className:"h-full flex flex-col p-4 md:p-6 max-w-5xl mx-auto w-full",children:h.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e==="portfolio"&&h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 h-full",children:[h.jsx("div",{className:"md:col-span-1 space-y-4",children:h.jsxs("div",{className:"bg-orange-50 dark:bg-slate-800 p-4 rounded-xl border border-orange-100 dark:border-slate-700",children:[h.jsx("h3",{className:"font-bold text-orange-900 dark:text-orange-400 mb-2",children:"Portfolio Helper"}),h.jsx("p",{className:"text-sm text-orange-800/80 dark:text-slate-300 mb-4",children:"The AI analyzes your tasks to create a summary of your season's technical achievements."}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase block mb-2",children:"Include Tasks"}),h.jsxs("div",{className:"flex bg-white dark:bg-slate-900 rounded-lg p-1 border border-orange-100 dark:border-slate-600",children:[h.jsx("button",{onClick:()=>g("done"),className:`flex-1 py-1 text-xs font-medium rounded transition ${p==="done"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:"Completed Only"}),h.jsx("button",{onClick:()=>g("all"),className:`flex-1 py-1 text-xs font-medium rounded transition ${p==="all"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"text-slate-500 dark:text-slate-400"}`,children:"All Tasks"})]})]}),h.jsxs("div",{className:"text-xs text-orange-800/60 dark:text-slate-400 font-mono bg-white/50 dark:bg-slate-900/50 p-2 rounded mb-4",children:["Tasks Analyzed: ",p==="done"?t.filter(C=>C.status==="Done").length:t.length]}),h.jsxs("button",{onClick:b,disabled:d||!o,className:"w-full bg-orange-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-orange-700 transition flex justify-center items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[d?h.jsx(so,{className:"animate-spin",size:18}):o?h.jsx(Dr,{size:18}):h.jsx(oo,{size:18}),o?"Generate Summary":"Offline - AI Disabled"]}),!o&&h.jsx("p",{className:"text-[10px] text-center text-slate-500 mt-2",children:"Connecting to internet will enable AI features."})]})}),h.jsxs("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 h-full flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Generated Content"}),s&&h.jsxs("button",{className:"text-xs flex items-center gap-1 text-slate-500 dark:text-slate-400 hover:text-slate-900",children:[h.jsx(ed,{size:14})," Copy MD"]})]}),h.jsx("div",{className:"flex-1 bg-slate-50 dark:bg-slate-900 rounded-lg p-4 font-mono text-sm text-slate-700 dark:text-slate-300 overflow-y-auto whitespace-pre-wrap leading-relaxed border border-slate-100 dark:border-slate-700",children:s||h.jsx("span",{className:"text-slate-400 italic",children:"Content will appear here..."})})]})]}),e==="judging"&&h.jsxs("div",{className:"h-full flex flex-col",children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6",children:"Judging Prep"}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2",children:"Study Guide & Context"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-4",children:"Upload a text file/PDF or paste content to help the AI ask better questions."}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[h.jsx("div",{className:"flex-1 relative",children:h.jsx("textarea",{className:"w-full h-24 p-3 text-sm border rounded-lg bg-slate-50 dark:bg-slate-900 border-slate-300 dark:border-slate-600 text-slate-900 dark:text-white resize-none",placeholder:"Paste technical info, robot specs, or outreach details here...",value:x,onChange:C=>v(C.target.value)})}),h.jsxs("div",{className:"w-full md:w-48 flex flex-col justify-center items-center border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-900 hover:bg-slate-100 dark:hover:bg-slate-800 transition cursor-pointer relative py-4 md:py-0",children:[h.jsx("input",{type:"file",onChange:T,className:"absolute inset-0 opacity-0 cursor-pointer",accept:".txt,.md,.json"}),h.jsx(Qc,{className:"text-slate-400 mb-2"}),h.jsx("span",{className:"text-xs text-slate-500 font-medium text-center px-2",children:_||"Upload .txt"})]})]}),h.jsxs("div",{className:"flex justify-center flex-col items-center gap-2",children:[h.jsxs("button",{onClick:w,disabled:d||!o,className:"bg-orange-600 text-white py-2 px-6 rounded-lg text-sm font-medium hover:bg-orange-700 transition flex items-center gap-2 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[d?h.jsx(so,{className:"animate-spin",size:16}):o?h.jsx(Dr,{size:16}):h.jsx(oo,{size:16}),o?"Generate Questions":"Offline - AI Disabled"]}),!o&&h.jsx("p",{className:"text-[10px] text-slate-500",children:"AI generation requires an internet connection."})]})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 pb-6",children:[a.length===0&&!d&&h.jsx("div",{className:"col-span-full text-center py-10 text-slate-400 italic",children:"No flashcards yet. Add context and click Generate."}),a.map((C,S)=>h.jsx("div",{className:"h-64 perspective-1000 cursor-pointer group",onClick:()=>m(f===S?null:S),children:h.jsxs("div",{className:`relative w-full h-full transition-all duration-500 transform-style-3d ${f===S?"rotate-y-180":""}`,children:[h.jsxs("div",{className:"absolute w-full h-full bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-700 p-6 flex flex-col items-center justify-center text-center backface-hidden shadow-sm group-hover:border-orange-200 dark:group-hover:border-slate-500",children:[h.jsxs("span",{className:"text-xs uppercase font-bold text-orange-600 dark:text-orange-400 mb-2",children:["Question ",S+1]}),h.jsx("div",{className:"max-h-full overflow-y-auto custom-scrollbar pr-1",children:h.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-100 select-none break-words",children:C.question})}),h.jsxs("div",{className:"mt-4 text-xs text-slate-400 flex items-center gap-1 shrink-0",children:["Click to reveal answer ",h.jsx(jo,{size:12})]})]}),h.jsxs("div",{className:"absolute w-full h-full bg-slate-800 dark:bg-slate-900 rounded-xl p-6 flex flex-col items-center justify-center text-center backface-hidden rotate-y-180 shadow-xl border border-slate-700",children:[h.jsx("span",{className:"text-xs uppercase font-bold text-slate-400 mb-2",children:"Suggested Answer"}),h.jsx("div",{className:"max-h-full overflow-y-auto custom-scrollbar pr-1",children:h.jsx("p",{className:"text-slate-200 dark:text-slate-300 text-sm leading-relaxed select-none break-words",children:C.answer})})]})]})},S))]})]})]})]})})},Wx=({members:t,setMembers:e,teams:n,setTeams:o})=>{const[s,r]=M.useState(""),[a,u]=M.useState(""),[d,c]=M.useState(""),[f,m]=M.useState(null),p=()=>{if(s.trim()&&a.trim().length===1){const y={id:Date.now().toString(),firstName:s.trim(),lastNameInitial:a.trim().toUpperCase()};e([...t,y]),r(""),u("")}else alert("Please provide a First Name and a single letter Last Initial.")},g=y=>{e(t.filter(b=>b.id!==y)),o(n.map(b=>({...b,memberIds:b.memberIds.filter(w=>w!==y)})))},x=()=>{if(d.trim()){const y={id:Date.now().toString(),name:d.trim(),memberIds:[]};o([...n,y]),c("")}},v=y=>{o(n.filter(b=>b.id!==y))},_=(y,b)=>{o(n.map(w=>{if(w.id!==y)return w;const T=w.memberIds.includes(b);return{...w,memberIds:T?w.memberIds.filter(C=>C!==b):[...w.memberIds,b]}}))};return h.jsxs("div",{className:"p-6 max-w-6xl mx-auto w-full h-full overflow-y-auto",children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6",children:"Admin Settings"}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-slate-100 dark:border-slate-700 pb-2",children:[h.jsx(Wd,{className:"text-orange-600",size:24}),h.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Team Roster"})]}),h.jsxs("div",{className:"flex gap-2 mb-4 items-end",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"First Name"}),h.jsx("input",{type:"text",value:s,onChange:y=>r(y.target.value),placeholder:"e.g. Abby",className:"w-full p-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white"})]}),h.jsxs("div",{className:"w-20",children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"Last Init."}),h.jsx("input",{type:"text",value:a,maxLength:1,onChange:y=>u(y.target.value),placeholder:"B",className:"w-full p-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white text-center",onKeyDown:y=>y.key==="Enter"&&p()})]}),h.jsx("button",{onClick:p,className:"bg-orange-600 text-white p-2.5 rounded-lg hover:bg-orange-700 transition mb-[1px]",children:h.jsx(Kd,{size:20})})]}),h.jsx("ul",{className:"space-y-2 max-h-96 overflow-y-auto pr-1 custom-scrollbar",children:t.map(y=>h.jsxs("li",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg group hover:bg-slate-100 dark:hover:bg-slate-700 transition",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-600 flex items-center justify-center font-bold text-slate-600 dark:text-slate-300 text-xs",children:[y.firstName[0],y.lastNameInitial]}),h.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:[y.firstName," ",y.lastNameInitial,"."]})]}),h.jsx("button",{onClick:()=>g(y.id),className:"text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition",children:h.jsx(Jt,{size:18})})]},y.id))})]}),h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-slate-100 dark:border-slate-700 pb-2",children:[h.jsx(rd,{className:"text-orange-600",size:24}),h.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Sub-Teams & Assignments"})]}),h.jsxs("div",{className:"flex gap-2 mb-4",children:[h.jsx("input",{type:"text",value:d,onChange:y=>c(y.target.value),placeholder:"New Team Name (e.g. Pit Crew)",className:"flex-1 p-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white",onKeyDown:y=>y.key==="Enter"&&x()}),h.jsx("button",{onClick:x,className:"bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700 transition",children:h.jsx(un,{size:20})})]}),h.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:n.map(y=>h.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-lg overflow-hidden",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 p-3 bg-slate-50 dark:bg-slate-700/50",children:[h.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-200",children:y.name}),h.jsxs("div",{className:"flex gap-2 self-end sm:self-auto",children:[h.jsx("button",{onClick:()=>m(f===y.id?null:y.id),className:`text-xs px-3 py-1 rounded-full transition ${f===y.id?"bg-orange-100 text-orange-700":"bg-white dark:bg-slate-600 text-slate-600 dark:text-slate-300"}`,children:f===y.id?"Done":"Manage Members"}),h.jsx("button",{onClick:()=>v(y.id),className:"text-slate-400 hover:text-red-500",children:h.jsx(Jt,{size:18})})]})]}),h.jsx("div",{className:"p-3 bg-white dark:bg-slate-800",children:f===y.id?h.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.map(b=>h.jsxs("div",{onClick:()=>_(y.id,b.id),className:`cursor-pointer p-2 rounded border flex items-center justify-between text-sm ${y.memberIds.includes(b.id)?"border-orange-500 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300":"border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-400"}`,children:[h.jsxs("span",{children:[b.firstName," ",b.lastNameInitial,"."]}),y.memberIds.includes(b.id)&&h.jsx(ol,{size:14})]},b.id))}):h.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.memberIds.length===0&&h.jsx("span",{className:"text-xs text-slate-400 italic",children:"No members assigned."}),y.memberIds.map(b=>{const w=t.find(T=>T.id===b);return w?h.jsxs("span",{className:"text-xs bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 px-2 py-1 rounded-full border border-slate-200 dark:border-slate-600",children:[w.firstName," ",w.lastNameInitial,"."]},b):null})]})})]},y.id))})]})]})]})};function Yx(){var T;const[t,e]=M.useState("kanban"),[n,o]=M.useState(!1),{user:s,signOut:r,isConfigured:a}=Hs(),{tasks:u,members:d,teams:c,theme:f,setTheme:m,addTask:p,updateTask:g,setMembers:x,setTeams:v}=Pn(),_=Hu(),y=u.map(C=>({...C,timeline:C.timeline.map(S=>({...S,type:S.type}))})),b=async()=>{await r(),_("/login")},w=({id:C,label:S,icon:E})=>h.jsxs("button",{onClick:()=>{e(C),o(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 mb-1
        ${t===C?"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 font-bold shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-slate-200 font-medium"}`,children:[h.jsx(E,{size:20}),h.jsx("span",{children:S})]});return h.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-slate-900 font-sans overflow-hidden transition-colors duration-200",children:[h.jsxs("aside",{className:"hidden lg:flex w-64 flex-col bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 h-full",children:[h.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3",children:[h.jsx("img",{src:"/ftc-team-manager/logo.png",className:"w-12 h-12 object-contain rounded-lg",alt:"Logo"}),h.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white tracking-tight",children:"FTC Manager"})]}),h.jsxs("nav",{className:"flex-1 p-4 overflow-y-auto",children:[h.jsx(w,{id:"kanban",label:"Sprint Planning",icon:Ar}),h.jsx(w,{id:"checklist",label:"Pre-Match Checklist",icon:Fr}),h.jsx(w,{id:"scouting",label:"Scouting Reports",icon:Cr}),h.jsx(w,{id:"planner",label:"Match Planner",icon:Sr}),h.jsx("div",{className:"my-4 border-t border-slate-100 dark:border-slate-700"}),h.jsx(w,{id:"portfolio",label:"Portfolio Helper",icon:Tr}),h.jsx(w,{id:"judging",label:"Judging Prep",icon:Ir}),h.jsx("div",{className:"my-4 border-t border-slate-100 dark:border-slate-700"}),h.jsx(w,{id:"admin",label:"Admin Settings",icon:Mr})]}),h.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700",children:[h.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 rounded-xl p-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("p",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:"Appearance"}),h.jsx("button",{onClick:()=>m(f==="light"?"dark":"light"),className:"text-slate-500 dark:text-slate-400 hover:text-orange-600 dark:hover:text-orange-400",children:f==="light"?h.jsx(Pr,{size:16}):h.jsx(Ur,{size:16})})]}),h.jsxs("div",{className:"flex justify-between text-sm mb-1 text-slate-600 dark:text-slate-300",children:[h.jsx("span",{children:"Tasks Done"}),h.jsx("span",{className:"font-bold",children:u.filter(C=>C.status==="Done").length})]}),h.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-600 rounded-full h-1.5 mt-2",children:h.jsx("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:`${u.length>0?u.filter(C=>C.status==="Done").length/u.length*100:0}%`}})})]}),a&&s&&h.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-xl",children:[h.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900/50 rounded-full flex items-center justify-center",children:h.jsx(sl,{size:16,className:"text-orange-600 dark:text-orange-400"})}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:((T=s.user_metadata)==null?void 0:T.full_name)||s.email})}),h.jsx("button",{onClick:b,className:"p-2 text-slate-400 hover:text-red-500 transition-colors",title:"Sign out",children:h.jsx(kr,{size:16})})]}),h.jsx(ti,{variant:"full"})]})]})]}),h.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 h-16 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between px-4 z-20 safe-area-top",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("img",{src:"/ftc-team-manager/logo.png",className:"w-12 h-12 object-contain rounded-lg",alt:"Logo"}),h.jsx("span",{className:"font-bold text-lg text-slate-900 dark:text-white",children:"FTC Manager"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(ti,{variant:"icon"}),h.jsx("button",{onClick:()=>m(f==="light"?"dark":"light"),className:"text-slate-600 dark:text-slate-300",children:f==="light"?h.jsx(Pr,{size:20}):h.jsx(Ur,{size:20})}),h.jsx("button",{onClick:()=>o(!n),className:"p-2 text-slate-600 dark:text-slate-300",children:n?h.jsx(rl,{}):h.jsx(gd,{})})]})]}),n&&h.jsxs("div",{className:"lg:hidden fixed inset-0 bg-white dark:bg-slate-800 z-50 pt-20 px-4 safe-area-top",children:[h.jsxs("nav",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-6 px-2",children:[h.jsx("img",{src:"/ftc-team-manager/logo.png",className:"w-10 h-10 object-contain rounded-lg",alt:"Logo"}),h.jsx("span",{className:"font-bold text-xl text-slate-900 dark:text-white",children:"FTC Manager"})]}),h.jsx(w,{id:"kanban",label:"Sprint Planning",icon:Ar}),h.jsx(w,{id:"checklist",label:"Pre-Match Checklist",icon:Fr}),h.jsx(w,{id:"scouting",label:"Scouting Reports",icon:Cr}),h.jsx(w,{id:"planner",label:"Match Planner",icon:Sr}),h.jsx(w,{id:"portfolio",label:"Portfolio Helper",icon:Tr}),h.jsx(w,{id:"judging",label:"Judging Prep",icon:Ir}),h.jsx(w,{id:"admin",label:"Admin Settings",icon:Mr})]}),a&&s&&h.jsx("div",{className:"mt-8 pt-4 border-t border-slate-200 dark:border-slate-700",children:h.jsxs("button",{onClick:b,className:"w-full flex items-center gap-3 px-4 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-all",children:[h.jsx(kr,{size:20}),h.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),h.jsx("main",{className:"flex-1 h-full overflow-hidden relative pt-16 lg:pt-0",children:h.jsxs("div",{className:"h-full w-full overflow-y-auto bg-slate-50 dark:bg-slate-900 p-4 lg:p-6",children:[t==="kanban"&&h.jsx(Ox,{tasks:y,setTasks:C=>{let S=[];typeof C=="function"?S=C(y):S=C,S.forEach(E=>{u.find(I=>I.id===E.id)?g(E.id,E):p(E)})},members:d,teams:c}),t==="checklist"&&h.jsx(Jx,{}),t==="scouting"&&h.jsx(Kx,{}),t==="planner"&&h.jsx(zx,{}),t==="portfolio"&&h.jsx(Ua,{tasks:y,view:"portfolio"}),t==="judging"&&h.jsx(Ua,{tasks:y,view:"judging"}),t==="admin"&&h.jsx(Wx,{members:d,setMembers:x,teams:c,setTeams:v})]})})]})}function Qx(){const{user:t,isLoading:e,isConfigured:n}=Hs(),{theme:o,initializeStore:s}=Pn();return M.useEffect(()=>{s()},[s]),M.useEffect(()=>{o==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[o]),e?h.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4",children:h.jsxs("div",{className:"text-center",children:[h.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-8",children:[h.jsx("div",{className:"absolute inset-0 bg-orange-500/20 rounded-3xl blur-xl animate-pulse"}),h.jsx("div",{className:"relative w-24 h-24 bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl flex items-center justify-center border border-slate-700/50 shadow-2xl",children:h.jsx("img",{src:"/ftc-team-manager/logo.png",className:"w-16 h-16 object-contain animate-pulse",alt:"FTC Manager Logo"})})]}),h.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"FTC Manager"}),h.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-400",children:[h.jsx("div",{className:"w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),h.jsx("p",{className:"text-sm font-medium",children:"Preparing your workspace..."})]})]})}):h.jsxs(Vu,{children:[h.jsx(Fo,{path:"/login",element:!n||t?h.jsx(fr,{to:"/",replace:!0}):h.jsx(Th,{})}),h.jsx(Fo,{path:"/auth/callback",element:h.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4",children:h.jsxs("div",{className:"text-center",children:[h.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-8",children:[h.jsx("div",{className:"absolute inset-0 bg-orange-500/20 rounded-3xl blur-xl animate-pulse"}),h.jsx("div",{className:"relative w-24 h-24 bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl flex items-center justify-center border border-slate-700/50 shadow-2xl",children:h.jsx("img",{src:"/ftc-team-manager/logo.png",className:"w-16 h-16 object-contain animate-pulse",alt:"FTC Manager Logo"})})]}),h.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"Authenticating"}),h.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-400",children:[h.jsx("div",{className:"w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),h.jsx("p",{className:"text-sm font-medium",children:"Securing your session..."})]})]})})}),h.jsx(Fo,{path:"/*",element:!n||t?h.jsx(Yx,{}):h.jsx(fr,{to:"/login",replace:!0})})]})}const jx=new Tc({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}}),Fu=document.getElementById("root");if(!Fu)throw new Error("Could not find root element to mount to");const Xx=Jo.createRoot(Fu);Xx.render(h.jsx(Ja.StrictMode,{children:h.jsx(Ec,{client:jx,children:h.jsx(Bu,{children:h.jsx(Sc,{children:h.jsx(Qx,{})})})})}));
//# sourceMappingURL=index-DWUiPK4f.js.map
